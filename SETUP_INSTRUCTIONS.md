# ๐ ุชุนูููุงุช ุงูุฅุนุฏุงุฏ ุงูุณุฑูุน - EgyGo

## โก ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชููุงุฆูุงู

### ุงูุฎุทูุฉ 1: ุฅุถุงูุฉ API Key

ุงูุชุญ ููู `.env` ูุฃุถู:

```env
APPWRITE_API_KEY=your_api_key_here
```

**ููููุฉ ุงูุญุตูู ุนูู API Key:**
1. ุงูุชุญ [Appwrite Console](https://cloud.appwrite.io)
2. ุงุฐูุจ ุฅูู Project Settings > API Keys
3. ุงุถุบุท "Create API Key"
4. ุฃุนุทู ุงูุตูุงุญูุงุช: `users.read`, `databases.read`, `databases.write`
5. ุงูุณุฎ ุงูู Key ูุถุนู ูู `.env`

---

### ุงูุฎุทูุฉ 2: ุชุดุบูู ุณูุฑูุจุช ุงูุฅุนุฏุงุฏ

```bash
# ุฅุนุฏุงุฏ ูุงูู (Collection + Attributes + Indexes + ูุฒุงููุฉ ุงููุณุชุฎุฏููู)
pnpm run setup-appwrite

# ุฃู ูุน ูุณุชุฎุฏููู ุชุฌุฑูุจููู
pnpm run setup-appwrite:test
```

**ูุฐุง ุงูุณูุฑูุจุช ุณูููู ุจู:**
- โ ุฅูุดุงุก `users` collection
- โ ุฅุถุงูุฉ ุฌููุน ุงูู attributes (email, name, phone, isAffiliate, etc.)
- โ ุฅูุดุงุก ุงูู indexes
- โ ูุฒุงููุฉ ุฌููุน ุงููุณุชุฎุฏููู ูู Auth ุฅูู Collection
- โ ุฅูุดุงุก ูุณุชุฎุฏููู ุชุฌุฑูุจููู (ุงุฎุชูุงุฑู)

---

### ุงูุฎุทูุฉ 3: ุงูุชุญูู

ุงูุชุญ ุงููููุน:
```
https://egygo.me/#/admin/users
```

ูุฌุจ ุฃู ุชุฑู:
- โ ุฌููุน ุงููุณุชุฎุฏููู
- โ ุชุจููุจ "ุงููุณูููู ุจุงูุนูููุฉ"
- โ ุฌููุน ุงูุจูุงูุงุช ูุงููุฉ

---

## ๐ฏ ุงูุฃูุงูุฑ ุงููุชุงุญุฉ

| ุงูุฃูุฑ | ุงููุตู |
|-------|-------|
| `pnpm run setup-appwrite` | ุฅุนุฏุงุฏ ูุงูู ุชููุงุฆู |
| `pnpm run setup-appwrite:test` | ุฅุนุฏุงุฏ + ูุณุชุฎุฏููู ุชุฌุฑูุจููู |
| `pnpm run sync-users sync` | ูุฒุงููุฉ ุงููุณุชุฎุฏููู ููุท |
| `pnpm run sync-users test` | ุฅูุดุงุก ูุณุชุฎุฏู ูุณูู ุชุฌุฑูุจู |

---

## ๐ ูุง ูุชู ุฅูุดุงุคู

### Users Collection Attributes:

| Attribute | Type | Description |
|-----------|------|-------------|
| `email` | string | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู |
| `name` | string | ุงูุงุณู |
| `phone` | string | ุฑูู ุงููุงุชู |
| `isAffiliate` | boolean | ูุณููุ |
| `isMerchant` | boolean | ุชุงุฌุฑุ |
| `affiliateCode` | string | ููุฏ ุงููุณูู |
| `commissionRate` | double | ูุณุจุฉ ุงูุนูููุฉ (0.15 = 15%) |
| `totalEarnings` | double | ุฅุฌูุงูู ุงูุฃุฑุจุงุญ |
| `pendingEarnings` | double | ุงูุฃุฑุจุงุญ ุงููุนููุฉ |
| `referralCount` | integer | ุนุฏุฏ ุงูุฅุญุงูุงุช |
| `accountStatus` | string | ุญุงูุฉ ุงูุญุณุงุจ |
| `isActive` | boolean | ูุดุทุ |

### Indexes:
- `email` (unique)
- `isAffiliate` (key)
- `isMerchant` (key)
- `accountStatus` (key)
- `affiliateCode` (unique)

---

## ๐งช ุงููุณุชุฎุฏููู ุงูุชุฌุฑูุจููู

ุนูุฏ ุชุดุบูู `pnpm run setup-appwrite:test`ุ ุณูุชู ุฅูุดุงุก:

1. **ูุณูู ุชุฌุฑูุจู 1**
   - Email: `affiliate1@egygo.test`
   - ููุฏ ุงููุณูู: `AFFxxxxx`
   - ุงูุฃุฑุจุงุญ: 2,500.75 ุฌ.ู
   - ุงูุฅุญุงูุงุช: 35

2. **ุชุงุฌุฑ ุชุฌุฑูุจู 1**
   - Email: `merchant1@egygo.test`
   - ุญุงูุฉ: ููุงูู ุนููู

3. **ุญุณุงุจ ูุนูู ุชุฌุฑูุจู**
   - Email: `pending@egygo.test`
   - ุญุงูุฉ: ููุฏ ุงููุฑุงุฌุนุฉ

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### "APPWRITE_API_KEY ุบูุฑ ููุฌูุฏ"
```bash
# ุฃุถู API Key ูู .env
APPWRITE_API_KEY=your_key_here
```

### "Permission denied"
ุชุฃูุฏ ูู ุฃู API Key ูุฏูู ุงูุตูุงุญูุงุช:
- `users.read`
- `databases.read`
- `databases.write`

### "Collection already exists"
ูุฐุง ุทุจูุนู! ุงูุณูุฑูุจุช ุณูุชุฎุทู ุงูุฅูุดุงุก ููุถูู ุงูู attributes ุงูููููุฏุฉ ููุท.

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุจุนุฏ ุชุดุบูู ุงูุณูุฑูุจุช:
- โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฌุงูุฒุฉ ุจุงููุงูู
- โ ุฌููุน ุงููุณุชุฎุฏููู ูุฒุงูููู
- โ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ุชุนูู
- โ ุตูุญุฉ ุงููุณูููู ุชุนูู
- โ ูุธุงู ุงูุญุณุงุจุงุช ุงููุนููุฉ ูุนูู

**ูุง ุญุงุฌุฉ ูุฃู ุฅุนุฏุงุฏ ูุฏูู! ๐**

---

## ๐ ูููุงุช ุฅุถุงููุฉ

- `scripts/setup-appwrite-database.ts` - ุงูุณูุฑูุจุช ุงูุฑุฆูุณู
- `scripts/sync-users-to-collection.ts` - ูุฒุงููุฉ ุงููุณุชุฎุฏููู ููุท
- `USERS_SYNC_GUIDE.md` - ุฏููู ููุตู
- `CODE_REVIEW_REPORT.md` - ุชูุฑูุฑ ุงููุฑุงุฌุนุฉ ุงูุดุงููุฉ
- `PENDING_ACCOUNTS_GUIDE.md` - ุฏููู ูุธุงู ุงูุญุณุงุจุงุช ุงููุนููุฉ
