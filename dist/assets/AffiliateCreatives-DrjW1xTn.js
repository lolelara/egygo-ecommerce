import{af as O,w as P,b as W,p as Y,r as m,y as L,j as e,C as r,g as i,B as d,ay as Z,e as o,f as x,a6 as j,ap as Q,aq as $,ar as E,as as q,at as D,a2 as J,a3 as X,a4 as k,a5 as S,s as B,a as z,v as ee,am as se,a8 as ae,a0 as le,aA as te}from"./index-Ce-RwxJS.js";import{Q as ne}from"./browser-JDKD6dIQ.js";import{I}from"./image-C8mqpI6f.js";import{Q as re}from"./qr-code-CbmGtnMp.js";import{D as M}from"./download-UgG-gTV9.js";import{C as ie}from"./copy-CCGvNwUs.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],de=O("code",ce),oe="",g=[{name:"Leaderboard",width:728,height:90},{name:"Medium Rectangle",width:300,height:250},{name:"Wide Skyscraper",width:160,height:600},{name:"Mobile Banner",width:320,height:50},{name:"Large Rectangle",width:336,height:280},{name:"Half Page",width:300,height:600}];function pe(){const{user:u}=P(),{toast:N}=W(),y=Y(),[l,_]=m.useState(""),[n,R]=m.useState(g[0]),[f,H]=m.useState(""),h=m.useRef(null),{data:p=[]}=L({queryKey:["affiliate-links",u?.$id],queryFn:async()=>u?.$id?(await ae.listDocuments(oe,"affiliate_links",[le.equal("affiliateId",u.$id)])).documents:[],enabled:!!u?.$id}),{data:b}=L({queryKey:["products"],queryFn:()=>te.getAll()}),w=Array.isArray(b)?b:b?.products||[];m.useEffect(()=>{if(l){const s=`${window.location.origin}/#/l/${l}`;ne.toDataURL(s,{width:300,margin:2,color:{dark:"#000000",light:"#ffffff"}}).then(a=>H(a)).catch(a=>console.error(a))}},[l]);const U=()=>{if(!h.current||!l)return;const s=h.current,a=s.getContext("2d");if(!a)return;const{width:t,height:c}=n;s.width=t,s.height=c;const v=a.createLinearGradient(0,0,t,0);v.addColorStop(0,"#f97316"),v.addColorStop(1,"#fb923c"),a.fillStyle=v,a.fillRect(0,0,t,c),a.fillStyle="#ffffff",a.font="bold 24px Arial",a.textAlign="center";const K=p.find(C=>C.linkCode===l),A=w.find(C=>C.id===K?.productId);A?(a.fillText(A.name,t/2,c/2-20),a.font="16px Arial",a.fillText("احصل على خصم خاص!",t/2,c/2+10),a.fillText(`egygo.com/l/${l}`,t/2,c/2+35)):(a.fillText("EGYGO",t/2,c/2-10),a.font="16px Arial",a.fillText(`egygo.com/l/${l}`,t/2,c/2+20))};m.useEffect(()=>{U()},[l,n,p,w]);const V=()=>{if(!h.current)return;const s=h.current.toDataURL("image/png"),a=document.createElement("a");a.download=`banner-${n.width}x${n.height}.png`,a.href=s,a.click(),N({title:"تم التحميل! ✓",description:"تم تحميل البانر بنجاح"})},G=()=>{if(!f)return;const s=document.createElement("a");s.download=`qr-code-${l}.png`,s.href=f,s.click(),N({title:"تم التحميل! ✓",description:"تم تحميل رمز QR بنجاح"})},T=()=>l?`<a href="${`${window.location.origin}/l/${l}`}" target="_blank">
  <img src="${h.current?.toDataURL()}" alt="عرض خاص" />
</a>`:"",F=()=>{const s=T();navigator.clipboard.writeText(s),N({title:"تم النسخ! ✓",description:"تم نسخ كود التضمين"})};return u?.isAffiliate?p.length===0?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(r,{children:e.jsxs(i,{className:"p-6 text-center space-y-4",children:[e.jsx(Z,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"أنشئ رابط تسويقي أولاً لتتمكن من إنشاء البانرات"}),e.jsx(d,{onClick:()=>y("/affiliate/dashboard"),children:"إنشاء رابط الآن"})]})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"الأدوات التسويقية"}),e.jsx("p",{className:"text-muted-foreground",children:"بانرات، أكواد تضمين، ورموز QR جاهزة لحملاتك التسويقية"})]}),e.jsxs(r,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"اختر الرابط"}),e.jsx(j,{children:"اختر الرابط التسويقي لإنشاء المواد الترويجية"})]}),e.jsx(i,{children:e.jsxs(Q,{value:l,onValueChange:_,children:[e.jsx($,{children:e.jsx(E,{placeholder:"اختر رابط تسويقي..."})}),e.jsx(q,{children:p.map(s=>{const a=w.find(t=>t.id===s.productId);return e.jsxs(D,{value:s.linkCode,children:[s.linkCode," - ",a?.name||"منتج"]},s.$id)})})]})})]}),l&&e.jsxs(J,{defaultValue:"banners",className:"space-y-4",children:[e.jsxs(X,{className:"grid w-full grid-cols-3",children:[e.jsxs(k,{value:"banners",children:[e.jsx(I,{className:"ml-2 h-4 w-4"}),"البانرات"]}),e.jsxs(k,{value:"qr",children:[e.jsx(re,{className:"ml-2 h-4 w-4"}),"رمز QR"]}),e.jsxs(k,{value:"embed",children:[e.jsx(de,{className:"ml-2 h-4 w-4"}),"كود التضمين"]})]}),e.jsxs(S,{value:"banners",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"إعدادات البانر"}),e.jsx(j,{children:"اختر حجم البانر المناسب لمنصتك"})]}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{children:"حجم البانر"}),e.jsxs(Q,{value:n.name,onValueChange:s=>{const a=g.find(t=>t.name===s);a&&R(a)},children:[e.jsx($,{children:e.jsx(E,{})}),e.jsx(q,{children:g.map(s=>e.jsxs(D,{value:s.name,children:[s.name," (",s.width,"x",s.height,")"]},s.name))})]})]}),e.jsxs("div",{className:"pt-4 space-y-2",children:[e.jsxs(z,{variant:"outline",children:[n.width,"x",n.height," بكسل"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["مناسب لـ:"," ",n.name==="Leaderboard"?"أعلى الصفحات والمواقع":n.name==="Medium Rectangle"?"المدونات والمقالات":n.name==="Mobile Banner"?"التطبيقات والمواقع المحمولة":"الشريط الجانبي"]})]}),e.jsxs(d,{onClick:V,className:"w-full",children:[e.jsx(M,{className:"ml-2 h-4 w-4"}),"تحميل البانر"]})]})]}),e.jsxs(r,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"معاينة البانر"}),e.jsx(j,{children:"هكذا سيظهر البانر في حملتك"})]}),e.jsx(i,{children:e.jsx("div",{className:"border rounded-lg p-4 bg-gray-50 flex items-center justify-center min-h-[300px]",children:e.jsx("canvas",{ref:h,className:"max-w-full h-auto shadow-lg"})})})]})]}),e.jsxs(r,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"جميع المقاسات المتاحة"}),e.jsx(j,{children:"اختر المقاس المناسب لكل منصة"})]}),e.jsx(i,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:g.map(s=>e.jsxs(d,{variant:n.name===s.name?"default":"outline",onClick:()=>R(s),className:"h-auto py-4 flex-col",children:[e.jsx("span",{className:"font-semibold",children:s.name}),e.jsxs("span",{className:"text-xs mt-1",children:[s.width,"x",s.height]})]},s.name))})})]})]}),e.jsx(S,{value:"qr",children:e.jsxs(r,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"رمز QR"}),e.jsx(j,{children:"اطبعه على المنتجات، البروشورات، أو البطاقات"})]}),e.jsxs(i,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f&&e.jsx("img",{src:f,alt:"QR Code",className:"border rounded-lg shadow-lg"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm font-medium mb-1",children:["egygo.com/l/",l]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"امسح الرمز للوصول المباشر للمنتج"})]}),e.jsxs(d,{onClick:G,size:"lg",children:[e.jsx(M,{className:"ml-2 h-4 w-4"}),"تحميل رمز QR"]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"طرق استخدام رمز QR:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• اطبعه على البروشورات والكتيبات التسويقية"}),e.jsx("li",{children:"• أضفه على بطاقات العمل الخاصة بك"}),e.jsx("li",{children:"• استخدمه في المعارض والفعاليات"}),e.jsx("li",{children:"• شاركه على وسائل التواصل الاجتماعي"})]})]})]})]})}),e.jsx(S,{value:"embed",children:e.jsxs(r,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"كود التضمين HTML"}),e.jsx(j,{children:"انسخ هذا الكود وضعه في موقعك أو مدونتك"})]}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(B,{children:"كود HTML"}),e.jsx(ee,{value:T(),readOnly:!0,className:"font-mono text-sm mt-2",rows:5})]}),e.jsxs(d,{onClick:F,className:"w-full",children:[e.jsx(ie,{className:"ml-2 h-4 w-4"}),"نسخ الكود"]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"كيفية الاستخدام:"}),e.jsxs("ol",{className:"space-y-2 text-sm text-muted-foreground list-decimal list-inside",children:[e.jsx("li",{children:"انسخ الكود أعلاه"}),e.jsx("li",{children:"افتح محرر HTML لموقعك أو مدونتك"}),e.jsx("li",{children:"الصق الكود في المكان المناسب"}),e.jsx("li",{children:"احفظ وانشر التغييرات"})]})]})]})]})})]}),e.jsxs(r,{className:"bg-gradient-to-r from-primary/10 to-orange-500/10 border-primary",children:[e.jsx(o,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5"}),"نصائح للترويج الفعّال"]})}),e.jsxs(i,{className:"space-y-2",children:[e.jsx("p",{className:"text-sm",children:"• استخدم البانرات في مواقع التواصل الاجتماعي لجذب الانتباه"}),e.jsx("p",{className:"text-sm",children:"• ضع رموز QR في أماكن مرئية للحصول على أفضل النتائج"}),e.jsx("p",{className:"text-sm",children:"• جرب أحجام مختلفة من البانرات لمعرفة أيها يحقق أفضل أداء"}),e.jsx("p",{className:"text-sm",children:"• شارك المواد الترويجية على قنوات متعددة لزيادة الوصول"})]})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(r,{children:e.jsxs(i,{className:"p-12 text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(I,{className:"h-8 w-8 text-orange-600"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"هذه الصفحة للمسوقين فقط"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"يجب أن يكون حسابك مفعّلاً كحساب مسوق للوصول إلى البانرات والأدوات التسويقية"}),e.jsxs("div",{className:"flex gap-3 justify-center pt-4",children:[e.jsx(d,{onClick:()=>y("/update-affiliate-prefs"),children:"تفعيل حساب المسوق"}),e.jsx(d,{variant:"outline",onClick:()=>y("/affiliate"),children:"معرفة المزيد"})]})]})})})}export{pe as default};
