import{W as me,r as c,m as H,Y as M,j as e,ay as A,bp as xe,aZ as ye,s as re,ar as ne,bq as we,br as Ce,X as he,bm as ke,a7 as E,z as Se,bs as Pe,o as Fe,af as ze,ac as $e,bl as Ie,aC as qe,bt as Le,a8 as Te,bu as Re,az as ce}from"./vendor-react-CCFRLLzk.js";import{c as ue,u as ge,C as P,h as F,x as Ae,y as Ee,r as $,f as d,D as pe,z as je,A as Me,E as Oe,F as De,T as Be,G as Ke,H as K,v as I,a as Qe,J as We,K as oe,B as de,M as Q,w as Xe}from"./index-D-h96Znd.js";import{T as Ze,a as He,b as W,c as X}from"./tabs-LmPLZOOP.js";import{A as Ue,a as Ge}from"./avatar-diaDjQwV.js";import{P as Je}from"./progress-BQcCqzP-.js";import{P as Ve}from"./loading-screen-Cpi-xclz.js";import{S as _e}from"./SEOHead-vAugBEQv.js";import"./vendor-ui-BA32w1ww.js";import"./vendor-query-j_rPqiug.js";import"./vendor-other-CzBBjgu5.js";import"./vendor-animations-CPHPqPXb.js";import"./vendor-appwrite-CuqfvTq9.js";function Ye({productId:r}){const{user:t}=ue(),{toast:o}=ge(),q=me(),[y,m]=c.useState(!1),[b,g]=c.useState(5),[w,x]=c.useState(""),{data:p,isLoading:j}=H({queryKey:I.reviews(r),queryFn:()=>K.getProductReviews(r)}),C=(p==null?void 0:p.reviews)||[],h=(p==null?void 0:p.stats)||{totalReviews:0,averageRating:0,ratingDistribution:[]},f=M({mutationFn:K.createReview,onSuccess:()=>{q.invalidateQueries({queryKey:I.reviews(r)}),m(!1),x(""),g(5),o({title:"✅ تمت إضافة التقييم",description:"شكراً لتقييمك! تم إضافة مراجعتك بنجاح"})},onError:l=>{o({title:"خطأ",description:l.message||"فشل في إضافة المراجعة",variant:"destructive"})}}),O=M({mutationFn:({id:l,userId:k})=>K.deleteReview(l,k),onSuccess:()=>{q.invalidateQueries({queryKey:I.reviews(r)}),o({title:"تم الحذف",description:"تم حذف التقييم بنجاح"})},onError:l=>{o({title:"خطأ",description:l.message||"فشل في حذف المراجعة",variant:"destructive"})}}),U=()=>{if(!t){o({title:"يجب تسجيل الدخول",description:"الرجاء تسجيل الدخول لإضافة تقييم",variant:"destructive"});return}f.mutate({productId:r,userId:t.$id,rating:b,comment:w.trim()||void 0})},L=l=>{t&&confirm("هل أنت متأكد من حذف التقييم؟")&&O.mutate({id:l,userId:t.$id})},T=C.find(l=>t&&l.userEmail===t.email);return j?e.jsx(P,{children:e.jsx(F,{className:"p-6",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"جاري تحميل التقييمات..."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(P,{children:[e.jsx(Ae,{children:e.jsx(Ee,{children:"تقييمات المنتج"})}),e.jsxs(F,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl font-bold mb-2",children:h.averageRating.toFixed(1)}),e.jsx("div",{className:"flex justify-center gap-1 mb-2",children:[1,2,3,4,5].map(l=>e.jsx(A,{className:`h-6 w-6 ${l<=Math.round(h.averageRating)?"fill-yellow-400 text-yellow-400":"text-muted"}`},l))}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["بناءً على ",h.totalReviews," تقييم"]})]}),e.jsx("div",{className:"space-y-2",children:h.ratingDistribution.map(l=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 w-16",children:[e.jsx("span",{className:"text-sm font-medium",children:l.stars}),e.jsx(A,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"})]}),e.jsx(Je,{value:l.percentage,className:"flex-1"}),e.jsx("span",{className:"text-sm text-muted-foreground w-12 text-right",children:l.count})]},l.stars))})]}),e.jsx($,{className:"my-6"}),t&&!T&&e.jsxs(d,{onClick:()=>m(!0),className:"w-full",children:[e.jsx(xe,{className:"h-4 w-4 ml-2 rtl:ml-0 rtl:mr-2"}),"أضف تقييمك"]}),!t&&e.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"يجب تسجيل الدخول لإضافة تقييم"})]})]}),e.jsx("div",{className:"space-y-4",children:C.length===0?e.jsx(P,{children:e.jsx(F,{className:"p-6 text-center text-muted-foreground",children:"لا توجد تقييمات لهذا المنتج بعد. كن أول من يقيم!"})}):C.map(l=>e.jsx(P,{children:e.jsxs(F,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ue,{children:e.jsx(Ge,{children:l.userName.substring(0,2).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:l.userName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(k=>e.jsx(A,{className:`h-4 w-4 ${k<=l.rating?"fill-yellow-400 text-yellow-400":"text-muted"}`},k))}),e.jsx("span",{className:"text-sm text-muted-foreground",children:l.date})]})]})]}),t&&l.userEmail===t.email&&e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>L(l.id),disabled:O.isPending,children:e.jsx(ye,{className:"h-4 w-4 text-destructive"})})]}),l.comment&&e.jsx("p",{className:"text-muted-foreground",children:l.comment})]})},l.id))}),e.jsx(pe,{open:y,onOpenChange:m,children:e.jsxs(je,{children:[e.jsxs(Me,{children:[e.jsx(Oe,{children:"أضف تقييمك"}),e.jsx(De,{children:"شاركنا رأيك حول هذا المنتج"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"التقييم"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(l=>e.jsx("button",{type:"button",onClick:()=>g(l),className:"focus:outline-none",children:e.jsx(A,{className:`h-8 w-8 cursor-pointer transition-colors ${l<=b?"fill-yellow-400 text-yellow-400":"text-muted hover:text-yellow-200"}`})},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"التعليق (اختياري)"}),e.jsx(Be,{placeholder:"اكتب تعليقك هنا...",value:w,onChange:l=>x(l.target.value),rows:4})]})]}),e.jsxs(Ke,{children:[e.jsx(d,{variant:"outline",onClick:()=>m(!1),disabled:f.isPending,children:"إلغاء"}),e.jsx(d,{onClick:U,disabled:f.isPending,children:f.isPending?"جاري الإضافة...":"إضافة التقييم"})]})]})})]})}function es({images:r}){var x,p,j,C;const[t,o]=c.useState(0),[q,y]=c.useState(!1),[m,b]=c.useState(!1),g=()=>{o(h=>(h+1)%r.length)},w=()=>{o(h=>(h-1+r.length)%r.length)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-square rounded-2xl overflow-hidden bg-gray-100 dark:bg-gray-800 group",children:[e.jsx("img",{src:(x=r[t])==null?void 0:x.url,alt:(p=r[t])==null?void 0:p.alt,className:`w-full h-full object-contain transition-transform duration-300 ${m?"scale-150 cursor-zoom-out":"cursor-zoom-in"}`,onClick:()=>b(!m)}),r.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"secondary",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 hover:bg-white",onClick:w,children:e.jsx(re,{className:"h-5 w-5"})}),e.jsx(d,{variant:"secondary",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 hover:bg-white",onClick:g,children:e.jsx(ne,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"absolute bottom-4 left-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxs(d,{variant:"secondary",size:"sm",className:"bg-white/90 hover:bg-white",onClick:()=>b(!m),children:[e.jsx(we,{className:"h-4 w-4 ml-1"}),m?"تصغير":"تكبير"]}),e.jsxs(d,{variant:"secondary",size:"sm",className:"bg-white/90 hover:bg-white",onClick:()=>y(!0),children:[e.jsx(Ce,{className:"h-4 w-4 ml-1"}),"شاشة كاملة"]})]}),r.length>1&&e.jsxs("div",{className:"absolute top-4 right-4 bg-black/60 text-white px-3 py-1 rounded-full text-sm",children:[t+1," / ",r.length]})]}),r.length>1&&e.jsx("div",{className:"grid grid-cols-4 md:grid-cols-5 gap-2",children:r.map((h,f)=>e.jsx("button",{onClick:()=>o(f),className:`aspect-square rounded-lg overflow-hidden border-2 transition-all ${t===f?"border-primary ring-2 ring-primary/20":"border-transparent hover:border-gray-300"}`,children:e.jsx("img",{src:h.url,alt:h.alt,className:"w-full h-full object-cover"})},f))})]}),e.jsx(pe,{open:q,onOpenChange:y,children:e.jsx(je,{className:"max-w-7xl w-full h-[90vh] p-0",children:e.jsxs("div",{className:"relative w-full h-full bg-black flex items-center justify-center",children:[e.jsx(d,{variant:"ghost",size:"icon",className:"absolute top-4 left-4 text-white hover:bg-white/20 z-10",onClick:()=>y(!1),children:e.jsx(he,{className:"h-6 w-6"})}),e.jsx("img",{src:(j=r[t])==null?void 0:j.url,alt:(C=r[t])==null?void 0:C.alt,className:"max-w-full max-h-full object-contain"}),r.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"ghost",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20",onClick:w,children:e.jsx(re,{className:"h-8 w-8"})}),e.jsx(d,{variant:"ghost",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20",onClick:g,children:e.jsx(ne,{className:"h-8 w-8"})}),e.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-black/60 text-white px-4 py-2 rounded-full",children:[t+1," / ",r.length]})]})]})})})]})}const Z={black:{name:"أسود",hex:"#000000"},white:{name:"أبيض",hex:"#FFFFFF",border:!0},blue:{name:"أزرق",hex:"#3B82F6"},red:{name:"أحمر",hex:"#EF4444"},green:{name:"أخضر",hex:"#10B981"},yellow:{name:"أصفر",hex:"#FBBF24"},purple:{name:"بنفسجي",hex:"#A855F7"},pink:{name:"وردي",hex:"#EC4899"},gray:{name:"رمادي",hex:"#6B7280"},brown:{name:"بني",hex:"#92400E"}};function hs(){var _,Y,ee,se,ae,te,le;const{id:r}=ke(),{user:t}=ue(),{toast:o}=ge(),{addItem:q}=Qe(),y=me(),[m,b]=c.useState(0),[g,w]=c.useState(1),[x,p]=c.useState(""),[j,C]=c.useState(""),[h,f]=c.useState(!1),[O,U]=c.useState(!1),{data:L=[]}=H({queryKey:I.wishlist((t==null?void 0:t.$id)||""),queryFn:()=>Q.getUserWishlist((t==null?void 0:t.$id)||""),enabled:!!(t!=null&&t.$id)}),T=c.useMemo(()=>L.some(a=>a.productId===r),[L,r]),l=c.useMemo(()=>L.find(a=>a.productId===r),[L,r]),k=M({mutationFn:()=>Q.addToWishlist((t==null?void 0:t.$id)||"",r||""),onSuccess:()=>{y.invalidateQueries({queryKey:I.wishlist((t==null?void 0:t.$id)||"")}),o({title:"✅ تمت الإضافة للمفضلة",description:"تم إضافة المنتج إلى قائمة المفضلة"})},onError:a=>{o({title:"خطأ",description:a.message||"فشل في إضافة المنتج للمفضلة",variant:"destructive"})}}),D=M({mutationFn:()=>Q.removeFromWishlist((l==null?void 0:l.id)||"",(t==null?void 0:t.$id)||""),onSuccess:()=>{y.invalidateQueries({queryKey:I.wishlist((t==null?void 0:t.$id)||"")}),o({title:"تمت الإزالة",description:"تم إزالة المنتج من قائمة المفضلة"})},onError:a=>{o({title:"خطأ",description:a.message||"فشل في إزالة المنتج من المفضلة",variant:"destructive"})}}),{data:s,isLoading:fe}=H({queryKey:[...I.products,r],queryFn:()=>Xe.getById(r),enabled:!!r,retry:1,refetchOnWindowFocus:!1}),[S,G]=c.useState([]),[u,J]=c.useState(0);c.useEffect(()=>{if(!(s!=null&&s.id)){G([]),J(0);return}let a=[];try{const n=s==null?void 0:s.colorSizeInventory;n&&n!=="[]"&&n!==""&&(a=JSON.parse(n),!Array.isArray(a)||a.length===0?a=[]:console.log("📦 Product inventory loaded:",{inventory:a}))}catch(n){console.error("❌ Error parsing inventory:",n),a=[]}let i=0;a.length>0?(i=a.reduce((n,N)=>n+(N.quantity||0),0),console.log("📦 Total stock from inventory:",i)):(i=s.stock||s.stockQuantity||0,console.log("📦 Using stock field:",i)),G(a),J(i)},[s==null?void 0:s.id]);const R=c.useMemo(()=>!S||S.length===0?[]:[...new Set(S.filter(i=>i.quantity>0&&i.color).map(i=>i.color.toLowerCase()))].map(i=>{var n,N,z;return{name:((n=Z[i])==null?void 0:n.name)||i,value:i,hex:((N=Z[i])==null?void 0:N.hex)||"#999999",border:(z=Z[i])==null?void 0:z.border}}),[S]),B=c.useMemo(()=>{if(!S||S.length===0)return[];const a=[...new Set(S.filter(n=>n.quantity>0&&n.size).map(n=>n.size.toUpperCase()))],i=["XS","S","M","L","XL","XXL","XXXL"];return a.sort((n,N)=>{const z=i.indexOf(n),ie=i.indexOf(N);return z===-1?1:ie===-1?-1:z-ie})},[S]);if(fe)return e.jsx(Ve,{message:"جاري تحميل تفاصيل المنتج..."});if(!s)return e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"المنتج غير موجود"}),e.jsx(d,{asChild:!0,children:e.jsx(E,{to:"/products",children:"العودة للمنتجات"})})]});const v=(_=s.images)!=null&&_.length?s.images:[{url:We.product(s==null?void 0:s.name),alt:(s==null?void 0:s.name)||"منتج"}],V=s.originalPrice?Math.round((s.originalPrice-s.price)/s.originalPrice*100):0;c.useEffect(()=>{s!=null&&s.id&&oe.trackProductView(s.id,s.name)},[s==null?void 0:s.id]);const ve=()=>{var n,N;if(R.length>0&&!x){o({title:"يرجى اختيار اللون",description:"الرجاء اختيار لون المنتج قبل الإضافة للسلة",variant:"destructive"});return}if(B.length>0&&!j){o({title:"يرجى اختيار المقاس",description:"الرجاء اختيار مقاس المنتج قبل الإضافة للسلة",variant:"destructive"});return}const a=x?(n=R.find(z=>z.value===x))==null?void 0:n.name:void 0;q({productId:s.id,name:s.name,price:s.price,originalPrice:s.originalPrice,image:((N=v[0])==null?void 0:N.url)||"",quantity:g,stockQuantity:u,inStock:u>0,color:a,size:j||void 0});const i=[a,j].filter(Boolean).join(" - ");oe.trackAddToCart(s.id,s.price),o({title:"✅ تمت الإضافة لسلة التسوق",description:`تم إضافة ${g} من ${s.name}${i?` (${i})`:""} إلى سلة التسوق`})},be=()=>{if(!t){o({title:"يجب تسجيل الدخول",description:"يرجى تسجيل الدخول لإضافة المنتجات إلى المفضلة",variant:"destructive"});return}T?D.mutate():k.mutate()},Ne=()=>{navigator.share?navigator.share({title:s.name,text:s.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),o({title:"تم النسخ",description:"تم نسخ رابط المنتج إلى الحافظة"}))};return e.jsxs(e.Fragment,{children:[e.jsx(_e,{title:s.name,description:s.description,keywords:[s.name,((Y=s.category)==null?void 0:Y.name)||"","منتج","تسوق"],image:((ee=s.images)==null?void 0:ee[0])||"",type:"product"}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(E,{to:"/",className:"hover:text-foreground",children:"الرئيسية"}),e.jsx("span",{children:"/"}),e.jsx(E,{to:"/products",className:"hover:text-foreground",children:"المنتجات"}),e.jsx("span",{children:"/"}),(se=s.category)!=null&&se.slug?e.jsx(E,{to:`/category/${s.category.slug}`,className:"hover:text-foreground",children:s.category.name}):e.jsx("span",{className:"text-muted-foreground",children:((ae=s.category)==null?void 0:ae.name)||"غير محدد"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-foreground",children:s.name})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 mb-12",children:[e.jsxs("div",{children:[e.jsx(es,{images:v}),V>0&&e.jsxs(de,{className:"mt-4 bg-gradient-to-r from-red-500 to-orange-500 text-lg px-4 py-2",children:["وفّر ",(s.originalPrice-s.price).toFixed(2)," ج.م (",V,"% خصم)"]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((a,i)=>e.jsx(A,{className:`h-5 w-5 ${i<Math.floor(s.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},i)),e.jsxs("span",{className:"text-sm text-muted-foreground mr-2",children:["(",s.reviewCount," تقييم)"]})]}),e.jsx($,{orientation:"vertical",className:"h-5"}),e.jsx(de,{variant:u>0?"default":"destructive",children:u>0?`متوفر (${u})`:"غير متوفر"})]})]}),e.jsx($,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsxs("span",{className:"text-4xl font-bold text-primary",children:[s.price.toLocaleString()," ج.م"]}),s.originalPrice&&e.jsxs("span",{className:"text-2xl text-muted-foreground line-through",children:[s.originalPrice.toLocaleString()," ج.م"]})]}),s.originalPrice&&e.jsxs("p",{className:"text-sm text-green-600",children:["وفّر ",(s.originalPrice-s.price).toLocaleString()," ج.م"]})]}),e.jsx($,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"وصف المنتج"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.description})]}),e.jsx($,{}),R.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold",children:["اللون: ",x&&e.jsx("span",{className:"text-primary",children:(te=R.find(a=>a.value===x))==null?void 0:te.name})]}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:R.map(a=>e.jsx("button",{onClick:()=>p(a.value),className:`relative w-12 h-12 rounded-full transition-all ${x===a.value?"ring-2 ring-primary ring-offset-2 scale-110":"hover:scale-105"} ${a.border?"border-2 border-gray-300":""}`,style:{backgroundColor:a.hex},title:a.name,children:x===a.value&&e.jsx(Se,{className:"h-6 w-6 absolute inset-0 m-auto text-white drop-shadow-lg",style:{color:a.value==="white"?"#000000":"#ffffff"}})},a.value))})]}),B.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold",children:["المقاس: ",j&&e.jsx("span",{className:"text-primary",children:j})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:B.map(a=>e.jsx("button",{onClick:()=>C(a),className:`px-6 py-3 rounded-lg border-2 font-medium transition-all ${j===a?"border-primary bg-primary text-primary-foreground":"border-muted hover:border-primary/50"}`,children:a},a))})]}),e.jsx($,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-semibold",children:"الكمية:"}),e.jsxs("div",{className:"flex items-center border rounded-lg",children:[e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>w(Math.max(1,g-1)),disabled:u===0,children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx("span",{className:"px-4 font-semibold min-w-[3rem] text-center",children:g}),e.jsx(d,{variant:"ghost",size:"icon",onClick:()=>w(Math.min(u,g+1)),disabled:u===0,children:e.jsx(xe,{className:"h-4 w-4"})})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",u," متوفر)"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(d,{size:"lg",className:"w-full h-14 text-lg bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",onClick:ve,disabled:u===0,children:[e.jsx(Fe,{className:"ml-2 h-5 w-5"}),"أضف إلى السلة 🛒"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(d,{size:"lg",variant:T?"default":"outline",onClick:be,disabled:k.isPending||D.isPending,className:"h-12",children:k.isPending||D.isPending?e.jsx(ze,{className:"h-5 w-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx($e,{className:`h-5 w-5 ml-2 ${T?"fill-current":""}`}),T?"في المفضلة":"أضف للمفضلة"]})}),e.jsxs(d,{size:"lg",variant:"outline",onClick:Ne,className:"h-12",children:[e.jsx(Ie,{className:"h-5 w-5 ml-2"}),"مشاركة"]})]})]})]}),e.jsx(P,{className:"border-2",children:e.jsxs(F,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-green-50 dark:bg-green-950/20",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(qe,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"توصيل سريع 🚚"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"خلال 2-5 أيام عمل"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-blue-50 dark:bg-blue-950/20",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(Le,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"إرجاع مجاني 🔄"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"خلال 14 يوم من الاستلام"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-purple-50 dark:bg-purple-950/20",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:e.jsx(Te,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"دفع آمن 🔒"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"معاملات مشفرة 100%"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-orange-50 dark:bg-orange-950/20",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center",children:e.jsx(Re,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"منتج أصلي ✓"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ضمان الجودة والأصالة"})]})]})]})}),(t==null?void 0:t.role)!=="customer"&&e.jsx(P,{className:"bg-gradient-to-br from-primary/10 to-brand-purple/10",children:e.jsxs(F,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"عمولة الشركاء"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:[s.affiliateCommission,"%"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["اكسب ",(s.price*s.affiliateCommission/100).toLocaleString()," ","ج.م على كل عملية بيع"]})]})})]})]}),e.jsxs(Ze,{defaultValue:"reviews",className:"space-y-8",children:[e.jsxs(He,{className:"grid w-full grid-cols-3",children:[e.jsxs(W,{value:"reviews",children:["التقييمات (",s.reviewCount,")"]}),e.jsx(W,{value:"specs",children:"المواصفات"}),e.jsx(W,{value:"shipping",children:"الشحن والإرجاع"})]}),e.jsx(X,{value:"reviews",className:"space-y-6",children:e.jsx(Ye,{productId:s.id})}),e.jsx(X,{value:"specs",children:e.jsx(P,{children:e.jsx(F,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-2 border-b",children:[e.jsx("span",{className:"font-semibold",children:"رمز المنتج (SKU)"}),e.jsx("span",{children:s.sku||"غير متوفر"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-2 border-b",children:[e.jsx("span",{className:"font-semibold",children:"الفئة"}),e.jsx("span",{children:((le=s.category)==null?void 0:le.name)||"غير محدد"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-2 border-b",children:[e.jsx("span",{className:"font-semibold",children:"الحالة"}),e.jsx("span",{children:u>0?"متوفر":"غير متوفر"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-2",children:[e.jsx("span",{className:"font-semibold",children:"الكمية المتوفرة"}),e.jsx("span",{children:u})]})]})})})}),e.jsx(X,{value:"shipping",children:e.jsx(P,{children:e.jsxs(F,{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"سياسة الشحن"}),e.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[e.jsx("li",{children:"• التوصيل خلال 2-5 أيام عمل"}),e.jsx("li",{children:"• الدفع عند الاستلام متاح"}),e.jsx("li",{children:"• تتبع الشحنة متاح لجميع الطلبات"}),e.jsx("li",{children:"• أسعار الشحن تُحسب حسب الوزن والمنطقة"})]})]}),e.jsx($,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"سياسة الإرجاع"}),e.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[e.jsx("li",{children:"• إمكانية الإرجاع خلال 14 يوم من تاريخ الاستلام"}),e.jsx("li",{children:"• يجب أن يكون المنتج في حالته الأصلية"}),e.jsx("li",{children:"• استرجاع كامل المبلغ أو استبدال المنتج"}),e.jsx("li",{children:"• تكلفة الشحن على العميل في حالة الإرجاع"})]})]})]})})})]})]}),h&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center p-4",onClick:()=>f(!1),children:[e.jsx("button",{onClick:()=>f(!1),className:"absolute top-4 right-4 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors z-10",children:e.jsx(he,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"absolute top-4 left-4 text-white text-sm bg-black/50 px-3 py-1 rounded-full",children:[m+1," / ",v.length]}),e.jsx("div",{className:"relative max-w-6xl max-h-[90vh] w-full h-full flex items-center justify-center",children:e.jsx("img",{src:v[m].url,alt:v[m].alt||s.name,className:"max-w-full max-h-full object-contain",onClick:a=>a.stopPropagation()})}),v.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),b(i=>i>0?i-1:v.length-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(ce,{className:"w-6 h-6 text-white"})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),b(i=>i<v.length-1?i+1:0)},className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(ce,{className:"w-6 h-6 text-white rotate-180"})})]}),v.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 bg-black/50 p-2 rounded-lg",children:v.map((a,i)=>e.jsx("button",{onClick:n=>{n.stopPropagation(),b(i)},className:`w-16 h-16 rounded overflow-hidden border-2 transition-all ${m===i?"border-white scale-110":"border-transparent opacity-60 hover:opacity-100"}`,children:e.jsx("img",{src:a.url,alt:a.alt||"",className:"w-full h-full object-cover"})},i))})]})]})]})}export{hs as default};
