import{u as T,r,j as e,a9 as L,ak as A,b1 as E,b2 as R,b3 as y,aw as V,at as z}from"./vendor-react-BTCGZZAN.js";import{u as B,a as G,C as c,r as d,s as n,f as x,L as s,I as l,l as b,e as Y}from"./index-DAwEpow4.js";import{R as D,a as w}from"./radio-group-CEZ9T49a.js";import{T as C}from"./textarea-DC34-8pe.js";import{P as F}from"./progress-BIiDjHv8.js";import"./vendor-appwrite-BQhTxLk4.js";import"./vendor-ui-BA32w1ww.js";import"./vendor-query-GexG3wnZ.js";import"./vendor-other-ws_0vYaO.js";import"./vendor-animations-W1Z2cmit.js";function re(){const j=T(),{toast:u}=B(),{items:o}=G(),[f,v]=r.useState(!1),[q,m]=r.useState(0),[t,S]=r.useState("cash"),[H,U]=r.useState(""),[h,X]=r.useState(null),[$,J]=r.useState(!1);r.useEffect(()=>{o.length===0&&(u({title:"السلة فارغة",description:"الرجاء إضافة منتجات للسلة أولاً",variant:"destructive"}),j("/products"))},[o,j,u]);const p=o.reduce((a,i)=>a+i.price*i.quantity,0),N=p>=500?0:50;let g=0;h&&(h.type==="percentage"?g=p*h.value/100:g=h.value);const M=p+N-g,k=async a=>{a.preventDefault(),v(!0),m(0);let i=0;const I=setInterval(()=>{i+=Math.random()*30,m(Math.min(i,100))},200);await new Promise(P=>setTimeout(P,2e3)),clearInterval(I),m(100),u({title:"تم إرسال الطلب بنجاح!",description:"سيتم التواصل معك قريباً لتأكيد الطلب"}),setTimeout(()=>{v(!1),m(0),j("/orders")},800)};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"إتمام الطلب"}),e.jsx("p",{className:"text-muted-foreground",children:"أكمل البيانات لإتمام طلبك"})]}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"السلة"}),e.jsx("span",{className:"text-xs font-medium text-primary",children:"البيانات"}),e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"تأكيد"})]}),e.jsx(F,{value:66,className:"h-2 bg-muted"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5"}),"المعلومات الشخصية"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"firstName",children:"الاسم الأول *"}),e.jsx(l,{id:"firstName",placeholder:"محمد",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"lastName",children:"اسم العائلة *"}),e.jsx(l,{id:"lastName",placeholder:"أحمد",required:!0})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"email",children:"البريد الإلكتروني *"}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground rtl:right-auto rtl:left-3"}),e.jsx(l,{id:"email",type:"email",placeholder:"email@example.com",className:"pr-10 rtl:pr-3 rtl:pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"phone",children:"رقم الهاتف *"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute right-3 top-3 h-4 w-4 text-muted-foreground rtl:right-auto rtl:left-3"}),e.jsx(l,{id:"phone",type:"tel",placeholder:"+20 123 456 7890",className:"pr-10 rtl:pr-3 rtl:pl-10",required:!0})]})]})]})]})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"عنوان الشحن"]})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"city",children:"المدينة *"}),e.jsx(l,{id:"city",placeholder:"القاهرة",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"state",children:"المحافظة *"}),e.jsx(l,{id:"state",placeholder:"القاهرة",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"address",children:"العنوان التفصيلي *"}),e.jsx(C,{id:"address",placeholder:"الشارع، رقم المبنى، الدور، الشقة",rows:3,required:!0})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"postalCode",children:"الرمز البريدي"}),e.jsx(l,{id:"postalCode",placeholder:"12345"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"landmark",children:"علامة مميزة"}),e.jsx(l,{id:"landmark",placeholder:"بجوار المسجد / المدرسة"})]})]})]})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsxs(n,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"طريقة الدفع"]})}),e.jsxs(x,{children:[e.jsxs(D,{value:t,onValueChange:S,className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse p-4 border rounded-lg cursor-pointer hover:bg-muted",children:[e.jsx(w,{value:"cash",id:"cash"}),e.jsx(s,{htmlFor:"cash",className:"flex-1 cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"الدفع عند الاستلام"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ادفع نقداً عند استلام الطلب"})]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse p-4 border rounded-lg cursor-pointer hover:bg-muted",children:[e.jsx(w,{value:"card",id:"card"}),e.jsx(s,{htmlFor:"card",className:"flex-1 cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold flex items-center gap-2",children:["الدفع بالبطاقة",e.jsxs("span",{className:"inline-flex gap-1 ml-2",children:[e.jsxs("svg",{width:"24",height:"14",viewBox:"0 0 24 14",fill:"none",children:[e.jsx("rect",{width:"24",height:"14",rx:"2",fill:"#fff"}),e.jsx("text",{x:"3",y:"11","font-size":"8",fill:"#1a237e",children:"VISA"})]}),e.jsxs("svg",{width:"24",height:"14",viewBox:"0 0 24 14",fill:"none",children:[e.jsx("rect",{width:"24",height:"14",rx:"2",fill:"#fff"}),e.jsx("circle",{cx:"8",cy:"7",r:"5",fill:"#f44336"}),e.jsx("circle",{cx:"16",cy:"7",r:"5",fill:"#ff9800"}),e.jsx("text",{x:"5",y:"12","font-size":"6",fill:"#222",children:"MC"})]}),e.jsxs("svg",{width:"24",height:"14",viewBox:"0 0 24 14",fill:"none",children:[e.jsx("rect",{width:"24",height:"14",rx:"2",fill:"#fff"}),e.jsx("text",{x:"2",y:"11","font-size":"8",fill:"#1976d2",children:"AMEX"})]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Visa, Mastercard, American Express"})]})]})})]})]}),t==="card"&&e.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"cardNumber",children:"رقم البطاقة"}),e.jsx(l,{id:"cardNumber",placeholder:"1234 5678 9012 3456",required:t==="card"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"expiry",children:"تاريخ الانتهاء"}),e.jsx(l,{id:"expiry",placeholder:"MM/YY",required:t==="card"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"cvv",children:"CVV"}),e.jsx(l,{id:"cvv",placeholder:"123",maxLength:4,required:t==="card"})]})]})]})]})]}),e.jsxs(c,{children:[e.jsx(d,{children:e.jsx(n,{children:"ملاحظات إضافية"})}),e.jsx(x,{children:e.jsx(C,{placeholder:"أي ملاحظات خاصة بالطلب...",rows:3})})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(c,{className:"sticky top-4",children:[e.jsx(d,{children:e.jsx(n,{children:"ملخص الطلب"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:o.map(a=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm line-clamp-2",children:a.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["الكمية: ",a.quantity]})]}),e.jsx("div",{className:"text-left",children:e.jsxs("p",{className:"font-semibold text-sm",children:[(a.price*a.quantity).toLocaleString()," ج.م"]})})]},a.id))}),e.jsx(b,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"المجموع الفرعي"}),e.jsxs("span",{className:"font-semibold",children:[p.toLocaleString()," ج.م"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"الشحن"}),e.jsx("span",{className:"font-semibold",children:N===0?"مجاني":`${N} ج.م`})]}),e.jsx(b,{}),e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("span",{className:"font-bold",children:"الإجمالي"}),e.jsxs("span",{className:"font-bold text-primary text-2xl",children:[M.toLocaleString()," ج.م"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{type:"submit",size:"lg",className:"w-full",disabled:f,children:f?"جاري المعالجة...":e.jsxs(e.Fragment,{children:["تأكيد الطلب",e.jsx(z,{className:"mr-2 h-5 w-5 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})}),f&&e.jsx(F,{value:q,className:"h-2 bg-muted"})]}),e.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground text-center",children:[e.jsx("p",{children:"🔒 معاملاتك آمنة ومشفرة"}),e.jsx("p",{children:"سيتم التواصل معك خلال 24 ساعة"})]})]})]})})]})]})]})})}export{re as default};
