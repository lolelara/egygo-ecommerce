const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Products-lD_IzrUQ.js","assets/vendor-react-BTCGZZAN.js","assets/vendor-ui-BA32w1ww.js","assets/vendor-query-GexG3wnZ.js","assets/vendor-other-ws_0vYaO.js","assets/vendor-other-FVOTwPhI.css","assets/vendor-animations-W1Z2cmit.js","assets/vendor-animations-BpgSqZrL.css","assets/vendor-react-DFW2o1-N.css","assets/select-DcBOtlUf.js","assets/LoadingSkeletons-Bxazgn_3.js","assets/skeleton-DOUS7_WT.js","assets/vendor-appwrite-BQhTxLk4.js","assets/ProductDetail-BH7huKRs.js","assets/tabs-43GTZMZA.js","assets/textarea-DC34-8pe.js","assets/avatar-Bz0dpiLw.js","assets/progress-BIiDjHv8.js","assets/Cart-BsF0y-Y3.js","assets/coupons-api-BxvIc8l4.js","assets/Checkout-DpRILa5s.js","assets/radio-group-CEZ9T49a.js","assets/Wishlist-BYkeMOGS.js","assets/SEO-d2yAp_P1.js","assets/MyOrders-CL-g798g.js","assets/OrderTracking-CAWWysek.js","assets/OrderSuccess-PMN6-Qye.js","assets/CustomerAccount-C9Eg0vRQ.js","assets/Affiliate-cCxYkCQj.js","assets/AffiliateDashboard-sLhNuW4S.js","assets/table-C5DXC0ob.js","assets/EnhancedAffiliateDashboard-qkeBmv8t.js","assets/PendingApprovalScreen-DUnfokKY.js","assets/affiliate-api-BTupgvYn.js","assets/AffiliateAnalytics-DnzNxcEr.js","assets/AffiliateLinkManager-Cutu2-iD.js","assets/AffiliateCreatives-BNBKu1BK.js","assets/AffiliateCoupons-C4wbyDL8.js","assets/AffiliateBanners-BO8f3IWr.js","assets/AffiliateMarketingTips-C6srjv4M.js","assets/AffiliateCourses-COMqE1mo.js","assets/AffiliateWithdrawPage-D2MnCsGH.js","assets/AffiliateResourcesPage-9Uq-OBTP.js","assets/AffiliateSupportPage-Draz59KZ.js","assets/AffiliateReferralSystem-CH4ifCSn.js","assets/Merchant-Kd2hkUKv.js","assets/MerchantDashboard-dcWW890c.js","assets/AdminLayout-DqAgGWSf.js","assets/MerchantProducts-CUSYe9Ci.js","assets/AdminProducts-CyUTWmbI.js","assets/admin-api-C0fQRsN9.js","assets/MerchantOrders-BA403pBq.js","assets/AdminOrders-i0sdAhTM.js","assets/MerchantAnalytics-ByQLS0y2.js","assets/AdminAnalytics-ihk_KNF0.js","assets/AdminDashboard-q4cXPAeS.js","assets/EnhancedAdminDashboard-LrtpB7Uu.js","assets/AdminUsers-BwgHs_0c.js","assets/AdminCouponsManager-CxyBvTRI.js","assets/AdminCategories-iuyz1t3J.js","assets/AdminCommissions-B9xINy4f.js","assets/AdminPendingAccounts-Bsgu7ub0.js","assets/AdminUserManagement-oERro36T.js","assets/AdminUserManagementFixed-zkNMbeJQ.js","assets/AdminProductsAdvanced-BOjL9VTV.js","assets/AdminSettingsPage-DugIP7ox.js","assets/switch-BY_DqbgO.js","assets/AdminShipping-DyE2IQK3.js","assets/AdminAdvancedSettings-BFUUNlwc.js","assets/AdminNotifications-BZv0lZXW.js","assets/AdminCoupons-BnIn9ucq.js","assets/AdminAIDashboard-B-hOzWj7.js","assets/env-DxkJ_7NB.js","assets/ProductAIDemo-BSzovg8y.js","assets/accordion-BuzOCl5F.js","assets/AboutPage-ByJQKOi0.js","assets/ContactPage-Bm6P11PR.js","assets/FAQPage-B5yOzsF7.js","assets/PrivacyPolicy-DfZ0ngsx.js","assets/TermsOfService-BNO916up.js","assets/ReturnPolicy-DYx-ofX8.js","assets/ShippingPage-DgrUQmJK.js","assets/Categories-Brs8XG5c.js","assets/CategoryPage-BqYwLg7c.js","assets/DealsPage-CVQYpFHW.js","assets/ProductLanding-cT-Uw-BO.js","assets/ForgotPassword-CB7uTWiG.js","assets/SettingsPage-BuHWruo3.js","assets/UpdateAffiliatePrefs-CCZCAniS.js","assets/VendoorImport-NbFQgecW.js","assets/IntermediaryDashboard-b6cjUXp2.js"])))=>i.map(i=>d[i]);
var lr=Object.defineProperty;var cr=(r,t,s)=>t in r?lr(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var oe=(r,t,s)=>cr(r,typeof t!="symbol"?t+"":t,s);import{z as dr,j as e,$ as mr,r as l,C as ls,P as ur,S as cs,O as tt,a as ds,b as st,c as ms,X as Et,T as rt,D as at,R as us,d as hs,_ as re,e as At,u as it,f as De,g as pt,h as Ve,i as me,U as de,F as hr,k as ps,l as xs,m as fs,n as pr,o as gs,I as js,p as ys,q as ws,s as qe,t as vs,v as xr,L as bs,w as Ns,x as fr,y as gr,A as _s,V as jr,B as yr,E as Es,G as wr,H as vr,J as Tt,K as Dt,M as xt,N as br,Q as Nr,W as Ot,Y as $t,Z as _r,a0 as Er,a1 as Ar,a2 as f,a3 as fe,a4 as ge,a5 as Lt,a6 as kr,a7 as ft,a8 as Mt,a9 as kt,aa as Me,ab as Re,ac as Cr,ad as Je,ae as Ct,af as As,ag as Sr,ah as Ir,ai as Rr,aj as Pr,ak as St,al as Tr,am as nt,an as Dr,ao as Ft,ap as Vt,aq as Ye,ar as ks,as as lt,at as _e,au as qt,av as Or,aw as $r,ax as Lr,ay as Mr,az as Fr,aA as Cs,aB as Ss,aC as Vr,aD as qr,aE as gt,aF as jt,aG as zr,aH as Is,aI as Ur,aJ as Br,aK as zt,aL as Wr,aM as Gr,aN as Hr,aO as Qr,aP as Kr,aQ as Jr,aR as Yr,aS as y}from"./vendor-react-BTCGZZAN.js";import{bb as Xr,K as Zr,bc as ze,bd as ea,be as ta}from"./vendor-other-ws_0vYaO.js";import{b as sa}from"./vendor-query-GexG3wnZ.js";import{C as Rs,D as ra,S as aa,A as ia,O as Ut,F as Ps,I as Xe,Q as I,E as na}from"./vendor-appwrite-BQhTxLk4.js";import{i as oa,P as la,W as ca,A as da,D as Bt,j as ma,G as ua,F as ha,T as pa,M as Wt,k as ct,l as xa,B as fa,o as ga,p as Gt,q as dt,L as ja,r as ya,C as wa,s as va,t as ba,v as Na,O as _a,h as le,x as Ea,y as Ht,N as Qt,z as Kt,E as Aa,H as ka,I as Ca,J as Ts,K as Sa}from"./vendor-animations-W1Z2cmit.js";import"./vendor-ui-BA32w1ww.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function s(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(i){if(i.ep)return;i.ep=!0;const c=s(i);fetch(i.href,c)}})();const Ia=({...r})=>{const{theme:t="system"}=dr();return e.jsx(mr,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...r})};function C(...r){return Xr(Zr(r))}const Ra=ur,Pa=l.forwardRef(({className:r,sideOffset:t=4,...s},a)=>e.jsx(ls,{ref:a,sideOffset:t,className:C("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s}));Pa.displayName=ls.displayName;const Ta=ze("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),R=l.forwardRef(({className:r,variant:t,size:s,asChild:a=!1,...i},c)=>{const m=a?cs:"button";return e.jsx(m,{className:C(Ta({variant:t,size:s,className:r})),ref:c,...i})});R.displayName="Button";const Da=us,Zn=hs,Oa=ds,Ds=l.forwardRef(({className:r,...t},s)=>e.jsx(tt,{ref:s,className:C("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...t}));Ds.displayName=tt.displayName;const Os=l.forwardRef(({className:r,children:t,...s},a)=>e.jsxs(Oa,{children:[e.jsx(Ds,{}),e.jsxs(st,{ref:a,className:C("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s,children:[t,e.jsxs(ms,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Os.displayName=st.displayName;const $a=({className:r,...t})=>e.jsx("div",{className:C("flex flex-col space-y-1.5 text-center sm:text-left",r),...t});$a.displayName="DialogHeader";const La=({className:r,...t})=>e.jsx("div",{className:C("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...t});La.displayName="DialogFooter";const Ma=l.forwardRef(({className:r,...t},s)=>e.jsx(rt,{ref:s,className:C("text-lg font-semibold leading-none tracking-tight",r),...t}));Ma.displayName=rt.displayName;const Fa=l.forwardRef(({className:r,...t},s)=>e.jsx(at,{ref:s,className:C("text-sm text-muted-foreground",r),...t}));Fa.displayName=at.displayName;const $s=l.forwardRef(({className:r,...t},s)=>e.jsx(re,{ref:s,className:C("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",r),...t}));$s.displayName=re.displayName;const Va=({children:r,...t})=>e.jsx(Da,{...t,children:e.jsx(Os,{className:"overflow-hidden p-0 shadow-lg",children:e.jsx($s,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:r})})}),Ls=l.forwardRef(({className:r,...t},s)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(At,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(re.Input,{ref:s,className:C("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",r),...t})]}));Ls.displayName=re.Input.displayName;const Ms=l.forwardRef(({className:r,...t},s)=>e.jsx(re.List,{ref:s,className:C("max-h-[300px] overflow-y-auto overflow-x-hidden",r),...t}));Ms.displayName=re.List.displayName;const Fs=l.forwardRef((r,t)=>e.jsx(re.Empty,{ref:t,className:"py-6 text-center text-sm",...r}));Fs.displayName=re.Empty.displayName;const Vs=l.forwardRef(({className:r,...t},s)=>e.jsx(re.Group,{ref:s,className:C("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",r),...t}));Vs.displayName=re.Group.displayName;const qa=l.forwardRef(({className:r,...t},s)=>e.jsx(re.Separator,{ref:s,className:C("-mx-1 h-px bg-border",r),...t}));qa.displayName=re.Separator.displayName;const qs=l.forwardRef(({className:r,...t},s)=>e.jsx(re.Item,{ref:s,className:C("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",r),...t}));qs.displayName=re.Item.displayName;const za="modulepreload",Ua=function(r){return"/"+r},Jt={},w=function(t,s,a){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),d=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));i=Promise.allSettled(s.map(N=>{if(N=Ua(N),N in Jt)return;Jt[N]=!0;const h=N.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${N}"]${p}`))return;const o=document.createElement("link");if(o.rel=h?"stylesheet":za,h||(o.as="script"),o.crossOrigin="",o.href=N,d&&o.setAttribute("nonce",d),document.head.appendChild(o),h)return new Promise((n,b)=>{o.addEventListener("load",n),o.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${N}`)))})}))}function c(m){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=m,window.dispatchEvent(d),!d.defaultPrevented)throw m}return i.then(m=>{for(const d of m||[])d.status==="rejected"&&c(d.reason);return t().catch(c)})},k={endpoint:"https://cloud.appwrite.io/v1",projectId:"",databaseId:"68de037e003bd03c4d45",storageId:"product-images",collections:{users:"users",products:"products",categories:"categories",orders:"orders",orderItems:"order_items",reviews:"reviews",affiliates:"affiliates",notifications:"notifications",favorites:"favorites",productViews:"product_views",affiliateActivities:"affiliate_activities",affiliateClicks:"affiliate_clicks",affiliateStats:"affiliate_stats",withdrawalRequests:"withdrawal_requests",userPreferences:"user_preferences",referrals:"referrals",referral_earnings:"referral_earnings"}},Ue=new Rs().setEndpoint(k.endpoint).setProject(k.projectId),he=new ia(Ue),A=new ra(Ue),xe=new aa(Ue),eo=new Ps(Ue);class H{static isConfigured(){return!1}static async getCurrentUser(){try{return await he.get()}catch(t){return console.log("No active session",t),null}}static async login(t,s){try{return await he.createEmailPasswordSession(t,s)}catch(a){throw console.error("Login error:",a),a}}static async register(t,s,a){try{const i=await he.create("unique()",t,s,a);return i&&await this.login(t,s)}catch(i){throw console.error("Registration error:",i),i}}static async loginWithGoogle(){try{const t=window.location.origin,s=`${t}/#/`,a=`${t}/#/login`;return await he.createOAuth2Session(Ut.Google,s,a)}catch(t){throw console.error("Google login error:",t),t}}static async loginWithFacebook(){try{const t=window.location.origin,s=`${t}/#/`,a=`${t}/#/login`;return await he.createOAuth2Session(Ut.Facebook,s,a)}catch(t){throw console.error("Facebook login error:",t),t}}static async logout(){try{return await he.deleteSession("current")}catch(t){throw console.error("Logout error:",t),t}}static async getProducts(t){try{const s=[];return t!=null&&t.categoryId&&s.push(`categoryId="${t.categoryId}"`),t!=null&&t.search&&s.push(`name~"${t.search}"`),await A.listDocuments(k.databaseId,k.collections.products,s)}catch(s){throw console.error("Error fetching products:",s),s}}static async getProduct(t){try{return await A.getDocument(k.databaseId,k.collections.products,t)}catch(s){throw console.error("Error fetching product:",s),s}}static async getCategories(){try{return await A.listDocuments(k.databaseId,k.collections.categories)}catch(t){throw console.error("Error fetching categories:",t),t}}static async updateUserPreferences(t){try{return await he.updatePrefs(t)}catch(s){throw console.error("Error updating user preferences:",s),s}}static async getUserDocument(t){try{return await A.getDocument(k.databaseId,k.collections.users,t)}catch(s){throw console.error("Error fetching user document:",s),s}}static async createUserDocument(t){try{return await A.createDocument(k.databaseId,k.collections.users,t.userId,t)}catch(s){throw console.error("Error creating user document:",s),s}}static async updateUserDocument(t,s){try{return await A.updateDocument(k.databaseId,k.collections.users,t,s)}catch(a){throw console.error("Error updating user document:",a),a}}static async createOrder(t){try{const s=await A.createDocument(k.databaseId,k.collections.orders,"unique()",t);try{const{default:a}=await w(async()=>{const{default:i}=await Promise.resolve().then(()=>mi);return{default:i}},void 0);await a.notifyOrderStatus(t.userId,s.$id,"confirmed")}catch(a){console.error("Error sending notification:",a)}return s}catch(s){throw console.error("Error creating order:",s),s}}static async getUserOrders(t){try{return await A.listDocuments(k.databaseId,k.collections.orders,[])}catch(s){throw console.error("Error fetching user orders:",s),s}}static async uploadFile(t){try{return await xe.createFile(k.storageId,"unique()",t)}catch(s){throw console.error("Error uploading file:",s),s}}static getFilePreview(t){try{return xe.getFilePreview(k.storageId,t,400,400,"center",100)}catch(s){throw console.error("Error getting file preview:",s),s}}}const Pe="product-images",Te={uploadFile:async r=>{try{const t=Xe.unique(),s=await xe.createFile(Pe,t,r),a=xe.getFileView(Pe,s.$id);return{fileId:s.$id,url:a.toString(),name:s.name,size:s.sizeOriginal}}catch(t){throw console.error("Error uploading file:",t),new Error(t.message||"فشل رفع الملف")}},uploadFiles:async r=>{try{const t=r.map(s=>Te.uploadFile(s));return await Promise.all(t)}catch(t){throw console.error("Error uploading files:",t),new Error(t.message||"فشل رفع الملفات")}},deleteFile:async r=>{try{await xe.deleteFile(Pe,r)}catch(t){throw console.error("Error deleting file:",t),new Error(t.message||"فشل حذف الملف")}},deleteFiles:async r=>{try{const t=r.map(s=>Te.deleteFile(s));await Promise.all(t)}catch(t){throw console.error("Error deleting files:",t),new Error(t.message||"فشل حذف الملفات")}},getFileUrl:r=>xe.getFileView(Pe,r).toString(),getImageUrl:r=>r?typeof r=="object"&&"url"in r?r.url:typeof r=="string"?r.startsWith("http://")||r.startsWith("https://")?r:xe.getFileView(Pe,r).toString():"/placeholder.svg":"/placeholder.svg",getImageUrls:r=>!r||!Array.isArray(r)||r.length===0?["/placeholder.svg"]:r.map(t=>Te.getImageUrl(t)),extractFileId:r=>{try{const t=r.match(/files\/([^\/]+)\/view/);return t?t[1]:null}catch{return null}},validateFile:r=>r.size>5242880?{valid:!1,error:"حجم الملف يجب أن يكون أقل من 5 ميجابايت"}:["image/jpeg","image/jpg","image/png","image/webp"].includes(r.type)?{valid:!0}:{valid:!1,error:"نوع الملف غير مدعوم. يرجى رفع صورة (JPG, PNG, WEBP)"},validateFiles:r=>{const t=[];return r.forEach((s,a)=>{const i=Te.validateFile(s);!i.valid&&i.error&&t.push(`ملف ${a+1}: ${i.error}`)}),{valid:t.length===0,errors:t}}},Ee=Te.getImageUrl,z="68de037e003bd03c4d45",U={PRODUCTS:"products",CATEGORIES:"categories",ORDERS:"orders",REVIEWS:"reviews",WISHLIST:"wishlist",USERS:"users"},J=()=>{try{return!!z}catch{return!1}},Fe={getAll:async r=>{try{if(!J())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const t=[];r!=null&&r.categoryId&&t.push(I.equal("categoryId",r.categoryId)),(r==null?void 0:r.inStock)!==void 0&&t.push(I.equal("inStock",r.inStock)),(r==null?void 0:r.minPrice)!==void 0&&t.push(I.greaterThanEqual("price",r.minPrice)),(r==null?void 0:r.maxPrice)!==void 0&&t.push(I.lessThanEqual("price",r.maxPrice)),r!=null&&r.searchQuery&&t.push(I.search("name",r.searchQuery));const s=(r==null?void 0:r.limit)||20,a=(r==null?void 0:r.page)||1,i=(a-1)*s;t.push(I.limit(s)),t.push(I.offset(i)),t.push(I.orderDesc("$createdAt"));const c=await A.listDocuments(z,U.PRODUCTS,t);return{products:c.documents.map(d=>({id:d.$id,name:d.name,description:d.description,price:d.price,originalPrice:d.originalPrice,sku:d.sku||`SKU-${d.$id.slice(0,8)}`,inStock:d.inStock,stockQuantity:d.stockQuantity||0,rating:d.rating||0,reviewCount:d.reviewCount||0,affiliateCommission:d.affiliateCommission||0,images:Array.isArray(d.images)?d.images.map(N=>typeof N=="string"?{url:Ee(N)}:N):[],tags:d.tags||[],reviews:d.reviews||[],categoryId:d.categoryId,category:d.category,createdAt:new Date(d.$createdAt),updatedAt:new Date(d.$updatedAt)})),total:c.total,page:a,limit:s}}catch(t){console.error("Error fetching products from Appwrite:",t)}},getById:async r=>{try{if(!J())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const t=await A.getDocument(z,U.PRODUCTS,r);let s=null;if(t.categoryId)try{const a=await A.getDocument(z,U.CATEGORIES,t.categoryId);s={id:a.$id,name:a.name,slug:a.slug}}catch(a){console.log("Category not found:",a)}return{id:t.$id,name:t.name,description:t.description,price:t.price,originalPrice:t.originalPrice,sku:t.sku||`SKU-${t.$id.slice(0,8)}`,inStock:t.inStock,stockQuantity:t.stockQuantity||0,rating:t.rating||0,reviewCount:t.reviewCount||0,affiliateCommission:t.affiliateCommission||0,images:Array.isArray(t.images)?t.images.map(a=>typeof a=="string"?{url:Ee(a)}:a):[],tags:t.tags||[],reviews:t.reviews||[],categoryId:t.categoryId,category:s,createdAt:new Date(t.$createdAt),updatedAt:new Date(t.$updatedAt)}}catch(t){console.error("Error fetching product from Appwrite:",t)}},getByCategory:async(r,t)=>{try{if(!J())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const s=await A.listDocuments(z,U.CATEGORIES,[I.equal("slug",r),I.limit(1)]);if(s.documents.length===0)throw new Error("الفئة غير موجودة");const a=s.documents[0];return Fe.getAll({...t,categoryId:a.$id})}catch(s){console.error("Error fetching products by category from Appwrite:",s)}}},zs={getAll:async()=>{try{if(!J())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");return{categories:(await A.listDocuments(z,U.CATEGORIES,[I.orderAsc("name")])).documents.map(s=>({id:s.$id,name:s.name,slug:s.slug,description:s.description,image:s.image,productCount:s.productCount||0,createdAt:new Date(s.$createdAt),updatedAt:new Date(s.$updatedAt)}))}}catch(r){console.error("Error fetching categories from Appwrite:",r)}},getBySlug:async r=>{try{if(!J())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const t=await A.listDocuments(z,U.CATEGORIES,[I.equal("slug",r),I.limit(1)]);if(t.documents.length===0)return null;const s=t.documents[0];return{id:s.$id,name:s.name,slug:s.slug,description:s.description,image:s.image,productCount:s.productCount||0,createdAt:new Date(s.$createdAt),updatedAt:new Date(s.$updatedAt)}}catch(t){console.error("Error fetching category from Appwrite:",t)}},getProductsByCategory:async(r,t)=>{try{if(!J())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const s=await A.listDocuments(z,U.CATEGORIES,[I.equal("slug",r),I.limit(1)]);if(s.documents.length===0)return{products:[],total:0,page:1,limit:20};const a=s.documents[0].$id;return Fe.getAll({...t,categoryId:a})}catch(s){return console.error("Error fetching products by category from Appwrite:",s),{products:[],total:0,page:1,limit:(t==null?void 0:t.limit)||20}}}},Ge={products:["products"],product:r=>["products",r],categories:["categories"],category:r=>["categories",r],categoryProducts:r=>["categories",r,"products"],orders:r=>["orders",r],order:r=>["orders",r],reviews:r=>["reviews",r],wishlist:r=>["wishlist",r],wishlistCheck:(r,t)=>["wishlist-check",r,t]},to={getUserOrders:async r=>{try{return J()?(await A.listDocuments(z,U.ORDERS,[I.equal("userId",r),I.orderDesc("$createdAt")])).documents.map(s=>({id:s.$id,orderNumber:s.orderNumber,status:s.status,total:s.total,subtotal:s.subtotal,shipping:s.shipping||0,discount:s.discount||0,items:s.items||[],shippingAddress:s.shippingAddress,paymentMethod:s.paymentMethod,paymentStatus:s.paymentStatus,createdAt:s.$createdAt,updatedAt:s.$updatedAt})):(console.log("Appwrite not configured for orders"),[])}catch(t){return console.error("Error fetching orders from Appwrite:",t),[]}},getOrderById:async(r,t)=>{try{if(!J())return null;const s=await A.getDocument(z,U.ORDERS,r);if(s.userId!==t)throw new Error("Unauthorized");return{id:s.$id,orderNumber:s.orderNumber,status:s.status,total:s.total,subtotal:s.subtotal,shipping:s.shipping||0,discount:s.discount||0,items:s.items||[],shippingAddress:s.shippingAddress,billingAddress:s.billingAddress,paymentMethod:s.paymentMethod,paymentStatus:s.paymentStatus,createdAt:s.$createdAt,updatedAt:s.$updatedAt}}catch(s){return console.error("Error fetching order details from Appwrite:",s),null}}},so={getProductReviews:async r=>{try{if(!J())return{reviews:[],stats:{totalReviews:0,averageRating:0,ratingDistribution:[]}};const s=(await A.listDocuments(z,U.REVIEWS,[I.equal("productId",r),I.orderDesc("$createdAt")])).documents.map(m=>({id:m.$id,userId:m.userId,userName:m.userName||"مستخدم",userAvatar:m.userAvatar,rating:m.rating,comment:m.comment,createdAt:m.$createdAt})),a=s.length,i=a>0?s.reduce((m,d)=>m+d.rating,0)/a:0,c=[5,4,3,2,1].map(m=>({rating:m,count:s.filter(d=>d.rating===m).length}));return{reviews:s,stats:{totalReviews:a,averageRating:i,ratingDistribution:c}}}catch(t){return(t==null?void 0:t.code)===404||(t==null?void 0:t.type)==="collection_not_found"?console.log("Reviews collection not found - feature disabled"):console.error("Error fetching reviews from Appwrite:",t),{reviews:[],stats:{totalReviews:0,averageRating:0,ratingDistribution:[]}}}},createReview:async r=>{try{if(!J())throw new Error("Appwrite not configured");if((await A.listDocuments(z,U.REVIEWS,[I.equal("productId",r.productId),I.equal("userId",r.userId)])).documents.length>0)throw new Error("لقد قمت بتقييم هذا المنتج بالفعل");const s=await A.createDocument(z,U.REVIEWS,"unique()",r);return{id:s.$id,...r,createdAt:s.$createdAt}}catch(t){throw new Error(t.message||"فشل في إضافة المراجعة")}},updateReview:async(r,t)=>{try{if(!J())throw new Error("Appwrite not configured");if((await A.getDocument(z,U.REVIEWS,r)).userId!==t.userId)throw new Error("غير مصرح لك بتعديل هذه المراجعة");const a={};t.rating!==void 0&&(a.rating=t.rating),t.comment!==void 0&&(a.comment=t.comment);const i=await A.updateDocument(z,U.REVIEWS,r,a);return{id:i.$id,rating:i.rating,comment:i.comment,updatedAt:i.$updatedAt}}catch(s){throw new Error(s.message||"فشل في تحديث المراجعة")}},deleteReview:async(r,t)=>{try{if(!J())throw new Error("Appwrite not configured");if((await A.getDocument(z,U.REVIEWS,r)).userId!==t)throw new Error("غير مصرح لك بحذف هذه المراجعة");await A.deleteDocument(z,U.REVIEWS,r)}catch(s){throw new Error(s.message||"فشل في حذف المراجعة")}}},ro={getUserWishlist:async r=>{try{if(!J())return[];const t=await A.listDocuments(z,U.WISHLIST,[I.equal("userId",r),I.orderDesc("$createdAt")]);return(await Promise.all(t.documents.map(async a=>{try{const i=await A.getDocument(z,U.PRODUCTS,a.productId);return{id:a.$id,productId:a.productId,addedAt:a.$createdAt,product:{id:i.$id,name:i.name,description:i.description,price:i.price,originalPrice:i.originalPrice,inStock:i.inStock,stockQuantity:i.stockQuantity||0,rating:i.rating||0,reviewCount:i.reviewCount||0,images:i.images||[],category:i.category}}}catch(i){return console.error(`Product ${a.productId} not found:`,i),null}}))).filter(a=>a!==null)}catch(t){return console.error("Error fetching wishlist from Appwrite:",t),[]}},addToWishlist:async(r,t)=>{try{if(!J())throw new Error("Appwrite not configured");if((await A.listDocuments(z,U.WISHLIST,[I.equal("userId",r),I.equal("productId",t)])).documents.length>0)throw new Error("المنتج موجود بالفعل في قائمة المفضلة");const a=await A.createDocument(z,U.WISHLIST,"unique()",{userId:r,productId:t});return{id:a.$id,productId:a.productId,addedAt:a.$createdAt}}catch(s){throw new Error(s.message||"فشل في إضافة المنتج للمفضلة")}},removeFromWishlist:async(r,t)=>{try{if(!J())throw new Error("Appwrite not configured");if((await A.getDocument(z,U.WISHLIST,r)).userId!==t)throw new Error("غير مصرح لك بحذف هذا العنصر");await A.deleteDocument(z,U.WISHLIST,r)}catch(s){throw new Error(s.message||"فشل في حذف المنتج من المفضلة")}},isInWishlist:async(r,t)=>{try{if(!J())return{inWishlist:!1,wishlistItemId:null};const s=await A.listDocuments(z,U.WISHLIST,[I.equal("userId",r),I.equal("productId",t)]),a=s.documents.length>0,i=a?s.documents[0].$id:null;return{inWishlist:a,wishlistItemId:i}}catch(s){return console.error("Error checking wishlist:",s),{inWishlist:!1,wishlistItemId:null}}}};function Ba(){const[r,t]=l.useState(!1),[s,a]=l.useState(""),i=it();l.useEffect(()=>{const o=n=>{n.key==="k"&&(n.metaKey||n.ctrlKey)&&(n.preventDefault(),t(b=>!b))};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[]);const{data:c}=De({queryKey:[...Ge.products,"search",s],queryFn:()=>Fe.getAll({limit:5}),enabled:s.length>2}),d=[...[{id:"products-page",title:"المنتجات",subtitle:"عرض جميع المنتجات",category:"pages",url:"/products",icon:e.jsx(pt,{className:"h-4 w-4"})},{id:"orders-page",title:"طلباتي",subtitle:"تتبع الطلبات",category:"pages",url:"/orders",icon:e.jsx(Ve,{className:"h-4 w-4"})},{id:"affiliate-dashboard",title:"لوحة المسوق",subtitle:"إحصائيات وروابط",category:"pages",url:"/affiliate/dashboard",icon:e.jsx(me,{className:"h-4 w-4"})},{id:"admin-dashboard",title:"لوحة الإدارة",subtitle:"إدارة الموقع",category:"pages",url:"/admin/dashboard",icon:e.jsx(de,{className:"h-4 w-4"})},{id:"docs",title:"المساعدة والدعم",subtitle:"مركز المساعدة",category:"pages",url:"/faq",icon:e.jsx(hr,{className:"h-4 w-4"})}].filter(o=>{var n;return o.title.toLowerCase().includes(s.toLowerCase())||((n=o.subtitle)==null?void 0:n.toLowerCase().includes(s.toLowerCase()))}),...((c==null?void 0:c.products)||[]).map(o=>({id:o.id,title:o.name,subtitle:`${o.price} جنيه`,category:"products",url:`/product/${o.id}`,icon:e.jsx(pt,{className:"h-4 w-4"})}))],N=l.useCallback(o=>{t(!1),a(""),i(o.url)},[i]),h=o=>({products:"المنتجات",orders:"الطلبات",users:"المستخدمين",pages:"الصفحات",analytics:"التحليلات"})[o]||o,p=d.reduce((o,n)=>(o[n.category]||(o[n.category]=[]),o[n.category].push(n),o),{});return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>t(!0),className:C("inline-flex items-center gap-2 rounded-lg border border-input bg-background px-3 py-2","text-sm text-muted-foreground transition-colors","hover:bg-accent hover:text-accent-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"),children:[e.jsx(At,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"بحث سريع..."}),e.jsxs("kbd",{className:"pointer-events-none hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex",children:[e.jsx("span",{className:"text-xs",children:"⌘"}),"K"]})]}),e.jsxs(Va,{open:r,onOpenChange:t,children:[e.jsx(Ls,{placeholder:"ابحث عن منتجات، طلبات، صفحات...",value:s,onValueChange:a}),e.jsxs(Ms,{children:[e.jsx(Fs,{children:"لا توجد نتائج"}),Object.entries(p).map(([o,n])=>e.jsx(Vs,{heading:h(o),children:n.map(b=>e.jsx(qs,{value:b.title,onSelect:()=>N(b),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[b.icon,e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:b.title}),b.subtitle&&e.jsx("span",{className:"text-xs text-muted-foreground",children:b.subtitle})]})]})},b.id))},o))]})]})]})}const ke=fr,Ce=gr,Wa=l.forwardRef(({className:r,inset:t,children:s,...a},i)=>e.jsxs(ps,{ref:i,className:C("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",r),...a,children:[s,e.jsx(xs,{className:"ml-auto h-4 w-4"})]}));Wa.displayName=ps.displayName;const Ga=l.forwardRef(({className:r,...t},s)=>e.jsx(fs,{ref:s,className:C("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...t}));Ga.displayName=fs.displayName;const ye=l.forwardRef(({className:r,sideOffset:t=4,...s},a)=>e.jsx(pr,{children:e.jsx(gs,{ref:a,sideOffset:t,className:C("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...s})}));ye.displayName=gs.displayName;const $=l.forwardRef(({className:r,inset:t,...s},a)=>e.jsx(js,{ref:a,className:C("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",r),...s}));$.displayName=js.displayName;const Ha=l.forwardRef(({className:r,children:t,checked:s,...a},i)=>e.jsxs(ys,{ref:i,className:C("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:s,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ws,{children:e.jsx(qe,{className:"h-4 w-4"})})}),t]}));Ha.displayName=ys.displayName;const Qa=l.forwardRef(({className:r,children:t,...s},a)=>e.jsxs(vs,{ref:a,className:C("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ws,{children:e.jsx(xr,{className:"h-2 w-2 fill-current"})})}),t]}));Qa.displayName=vs.displayName;const Us=l.forwardRef(({className:r,inset:t,...s},a)=>e.jsx(bs,{ref:a,className:C("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",r),...s}));Us.displayName=bs.displayName;const X=l.forwardRef(({className:r,...t},s)=>e.jsx(Ns,{ref:s,className:C("-mx-1 my-1 h-px bg-muted",r),...t}));X.displayName=Ns.displayName;const Ka=us,Ja=hs,Ya=ds,Bs=l.forwardRef(({className:r,...t},s)=>e.jsx(tt,{className:C("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...t,ref:s}));Bs.displayName=tt.displayName;const Xa=ze("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ws=l.forwardRef(({side:r="right",className:t,children:s,...a},i)=>e.jsxs(Ya,{children:[e.jsx(Bs,{}),e.jsxs(st,{ref:i,className:C(Xa({side:r}),t),...a,children:[s,e.jsxs(ms,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Et,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ws.displayName=st.displayName;const Gs=({className:r,...t})=>e.jsx("div",{className:C("flex flex-col space-y-2 text-center sm:text-left",r),...t});Gs.displayName="SheetHeader";const Hs=l.forwardRef(({className:r,...t},s)=>e.jsx(rt,{ref:s,className:C("text-lg font-semibold text-foreground",r),...t}));Hs.displayName=rt.displayName;const Za=l.forwardRef(({className:r,...t},s)=>e.jsx(at,{ref:s,className:C("text-sm text-muted-foreground",r),...t}));Za.displayName=at.displayName;const ei=ze("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function se({className:r,variant:t,...s}){return e.jsx("div",{className:C(ei({variant:t}),r),...s})}const Qs=l.createContext(void 0),be=()=>{const r=l.useContext(Qs);return r===void 0?{user:null,loading:!0,login:async()=>{},loginWithGoogle:async()=>{},loginWithFacebook:async()=>{},register:async()=>{},logout:async()=>{},updateUser:async()=>{},refreshUser:async()=>{}}:r},ti=({children:r})=>{const[t,s]=l.useState(null),[a,i]=l.useState(!0);l.useEffect(()=>{c()},[]);const c=async()=>{try{if(i(!0),!H.isConfigured()){console.log("Appwrite not configured, using fallback auth"),s(null);return}const g=await H.getCurrentUser();if(g){let u={};try{const L=await A.listDocuments(k.databaseId,"userPreferences",[I.equal("userId",g.$id)]);L.documents.length>0?(u=L.documents[0],console.log("✅ Loaded user data from userPreferences:",u)):console.log("⚠️ No userPreferences found for user")}catch(L){console.log("Error loading userPreferences:",L)}const x=g.prefs||{},_=["lolelarap@gmail.com","admin@egygo.me"];let P=u.role||x.role||"customer";if(x.role){if(_.includes(g.email.toLowerCase())&&x.role!=="admin"){P="admin";try{await H.updateUserPreferences({role:"admin",isAdmin:!0,isSuperAdmin:!0}),console.log(`✅ تم تحديث دور المستخدم إلى Admin: ${g.email}`)}catch(L){console.log("Could not update user role:",L)}}}else{_.includes(g.email.toLowerCase())?(P="admin",console.log(`✅ تم تحديد المستخدم كـ Admin: ${g.email}`)):g.email.includes("admin")?P="admin":g.email.includes("merchant")||g.email.includes("vendor")?P="merchant":x.isAffiliate?P="affiliate":P="customer";try{await H.updateUserPreferences({role:P,isAdmin:P==="admin",isSuperAdmin:_.includes(g.email.toLowerCase())})}catch(L){console.log("Could not save user role:",L)}}s({$id:g.$id,name:u.name||g.name,email:u.email||g.email,role:P,phone:u.phone||x.phone||"",address:u.address||x.address||"",isAffiliate:u.isAffiliate||x.isAffiliate||P==="affiliate",isMerchant:u.isMerchant||x.isMerchant||P==="merchant",isIntermediary:u.isIntermediary||x.isIntermediary||P==="intermediary",affiliateCode:u.affiliateCode||x.affiliateCode||"",intermediaryCode:u.intermediaryCode||x.intermediaryCode||"",commissionRate:u.commissionRate||x.commissionRate||.15,defaultMarkupPercentage:u.defaultMarkupPercentage||x.defaultMarkupPercentage||20,accountStatus:u.accountStatus||x.accountStatus||"approved",approvedAt:u.approvedAt||x.approvedAt,approvedBy:u.approvedBy||x.approvedBy,rejectionReason:u.rejectionReason||x.rejectionReason})}else s(null)}catch(g){console.error("Error checking auth user:",g),s(null)}finally{i(!1)}},b={user:t,loading:a,login:async(g,u)=>{try{if(i(!0),!H.isConfigured())throw new Error("Appwrite غير مُعد. يرجى التحقق من إعدادات المشروع.");await H.login(g,u),await c()}catch(x){throw console.error("Login error:",x),x}finally{i(!1)}},loginWithGoogle:async()=>{try{if(!H.isConfigured())throw new Error("Appwrite غير مُعد. يرجى التحقق من إعدادات المشروع.");await H.loginWithGoogle()}catch(g){throw console.error("Google login error:",g),g}},loginWithFacebook:async()=>{try{if(!H.isConfigured())throw new Error("Appwrite غير مُعد. يرجى التحقق من إعدادات المشروع.");await H.loginWithFacebook()}catch(g){throw console.error("Facebook login error:",g),g}},register:async(g,u,x,_="customer",P,L)=>{var W;try{if(i(!0),!H.isConfigured())throw new Error("Appwrite غير مُعد. يرجى التحقق من إعدادات المشروع.");await H.register(g,u,x);const q=await H.getCurrentUser(),j=_==="affiliate"||_==="merchant",T=j?"pending":"approved",F={role:_,isAffiliate:_==="affiliate",isMerchant:_==="merchant",isIntermediary:_==="intermediary",phone:P||"",alternativePhone:L||"",accountStatus:T,approvedAt:j?null:new Date().toISOString()};if(_==="affiliate"){const D=Math.random().toString(36).substring(2,9).toUpperCase();F.affiliateCode=`AF${D}`.substring(0,10),F.commissionRate=.15}if(_==="intermediary"){const D=Math.random().toString(36).substring(2,9).toUpperCase();F.intermediaryCode=`IN${D}`.substring(0,10),F.defaultMarkupPercentage=.2}await H.updateUserPreferences(F);try{await A.createDocument(k.databaseId,k.collections.users,q.$id,{email:g,name:x,phone:P||"",alternativePhone:L||"",address:"",isAffiliate:_==="affiliate",isMerchant:_==="merchant",isIntermediary:_==="intermediary",affiliateCode:F.affiliateCode||null,commissionRate:F.commissionRate||.15,totalEarnings:0,pendingEarnings:0,referralCount:0,accountStatus:T,approvedAt:F.approvedAt,approvedBy:null,rejectionReason:null,isActive:!j})}catch(D){console.error("Failed to create user document:",D)}return await c(),{$id:q.$id,email:q.email,name:q.name}}catch(q){throw console.error("Registration error:",q),(q==null?void 0:q.code)===409||(W=q==null?void 0:q.message)!=null&&W.includes("already exists")?new Error("هذا البريد الإلكتروني أو رقم الهاتف مستخدم بالفعل. يرجى تسجيل الدخول أو استخدام بريد آخر."):q}finally{i(!1)}},logout:async()=>{try{if(i(!0),!H.isConfigured()){s(null);return}await H.logout(),s(null)}catch(g){throw console.error("Logout error:",g),g}finally{i(!1)}},updateUser:async g=>{try{if(!t)return;i(!0),await H.updateUserPreferences(g),s(u=>u?{...u,...g}:null)}catch(u){throw console.error("Update user error:",u),u}finally{i(!1)}},refreshUser:async()=>{try{await c()}catch(g){console.error("Refresh user error:",g)}}};return e.jsx(Qs.Provider,{value:b,children:r})},si=1,ri=1e6;let mt=0;function ai(){return mt=(mt+1)%Number.MAX_SAFE_INTEGER,mt.toString()}const ut=new Map,Yt=r=>{if(ut.has(r))return;const t=setTimeout(()=>{ut.delete(r),Oe({type:"REMOVE_TOAST",toastId:r})},ri);ut.set(r,t)},ii=(r,t)=>{switch(t.type){case"ADD_TOAST":return{...r,toasts:[t.toast,...r.toasts].slice(0,si)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=t;return s?Yt(s):r.toasts.forEach(a=>{Yt(a.id)}),{...r,toasts:r.toasts.map(a=>a.id===s||s===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(s=>s.id!==t.toastId)}}},He=[];let Qe={toasts:[]};function Oe(r){Qe=ii(Qe,r),He.forEach(t=>{t(Qe)})}function ni({...r}){const t=ai(),s=i=>Oe({type:"UPDATE_TOAST",toast:{...i,id:t}}),a=()=>Oe({type:"DISMISS_TOAST",toastId:t});return Oe({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:i=>{i||a()}}}),{id:t,dismiss:a,update:s}}function oi(){const[r,t]=l.useState(Qe);return l.useEffect(()=>(He.push(t),()=>{const s=He.indexOf(t);s>-1&&He.splice(s,1)}),[r]),{...r,toast:ni,dismiss:s=>Oe({type:"DISMISS_TOAST",toastId:s})}}const Ks=l.createContext(void 0),Xt="shopko_cart";function li({children:r}){const{toast:t}=oi(),[s,a]=l.useState([]);l.useEffect(()=>{try{const n=localStorage.getItem(Xt);n&&a(JSON.parse(n))}catch(n){console.error("Error loading cart:",n)}},[]),l.useEffect(()=>{try{localStorage.setItem(Xt,JSON.stringify(s))}catch(n){console.error("Error saving cart:",n)}},[s]);const i=n=>{a(b=>{const g=b.find(x=>x.productId===n.productId);if(g){const x=g.quantity+n.quantity;return x>n.stockQuantity?(t({title:"الكمية غير متوفرة",description:`الكمية المتوفرة فقط ${n.stockQuantity}`,variant:"destructive"}),b):b.map(_=>_.productId===n.productId?{..._,quantity:x}:_)}const u={...n,id:`cart-${Date.now()}-${Math.random()}`};return t({title:"تمت الإضافة لسلة التسوق",description:`تم إضافة ${n.name} إلى سلة التسوق`}),[...b,u]})},c=n=>{a(b=>b.filter(g=>g.id!==n)),t({title:"تمت الإزالة",description:"تم إزالة المنتج من السلة"})},m=(n,b)=>{b<1||a(g=>{const u=g.find(x=>x.id===n);return u?b>u.stockQuantity?(t({title:"الكمية غير متوفرة",description:`الكمية المتوفرة فقط ${u.stockQuantity}`,variant:"destructive"}),g):g.map(x=>x.id===n?{...x,quantity:b}:x):g})},d=()=>{a([]),t({title:"تم إفراغ السلة",description:"تم إزالة جميع المنتجات من السلة"})},N=n=>s.some(b=>b.productId===n),h=s.reduce((n,b)=>n+b.quantity,0),p=s.reduce((n,b)=>n+b.price*b.quantity,0),o={items:s,itemCount:h,subtotal:p,addItem:i,removeItem:c,updateQuantity:m,clearCart:d,isInCart:N};return e.jsx(Ks.Provider,{value:o,children:r})}function ci(){const r=l.useContext(Ks);if(!r)throw new Error("useCart must be used within CartProvider");return r}const It=l.forwardRef(({className:r,children:t,...s},a)=>e.jsxs(_s,{ref:a,className:C("relative overflow-hidden",r),...s,children:[e.jsx(jr,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Js,{}),e.jsx(yr,{})]}));It.displayName=_s.displayName;const Js=l.forwardRef(({className:r,orientation:t="vertical",...s},a)=>e.jsx(Es,{ref:a,orientation:t,className:C("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...s,children:e.jsx(wr,{className:"relative flex-1 rounded-full bg-border"})}));Js.displayName=Es.displayName;const pe="notifications";class di{async getUserNotifications(t,s=50){try{return(await A.listDocuments(k.databaseId,pe,[I.equal("userId",t),I.orderDesc("$createdAt"),I.limit(s)])).documents}catch(a){return console.error("Error fetching notifications:",a),[]}}async getUnreadCount(t){try{return(await A.listDocuments(k.databaseId,pe,[I.equal("userId",t),I.equal("read",!1)])).total}catch(s){return console.error("Error fetching unread count:",s),0}}async createNotification(t){try{return await A.createDocument(k.databaseId,pe,"unique()",{...t,read:!1})}catch(s){return console.error("Error creating notification:",s),null}}async markAsRead(t){try{return await A.updateDocument(k.databaseId,pe,t,{read:!0}),!0}catch(s){return console.error("Error marking notification as read:",s),!1}}async markAllAsRead(t){try{const a=(await this.getUserNotifications(t)).filter(i=>!i.read);return await Promise.all(a.map(i=>this.markAsRead(i.$id))),!0}catch(s){return console.error("Error marking all as read:",s),!1}}async deleteNotification(t){try{return await A.deleteDocument(k.databaseId,pe,t),!0}catch(s){return console.error("Error deleting notification:",s),!1}}async deleteAllNotifications(t){try{const s=await this.getUserNotifications(t);return await Promise.all(s.map(a=>this.deleteNotification(a.$id))),!0}catch(s){return console.error("Error deleting all notifications:",s),!1}}subscribeToNotifications(t,s){try{const a=Ue.subscribe(`databases.${k.databaseId}.collections.${pe}.documents`,i=>{const c=i.payload;c.userId===t&&s(c)});return()=>{var i;try{typeof a=="function"&&a()}catch(c){(i=c==null?void 0:c.message)!=null&&i.includes("CLOSING or CLOSED")||console.error("Error unsubscribing from notifications:",c)}}}catch(a){return console.error("Error subscribing to notifications:",a),()=>{}}}async notifyOrderStatus(t,s,a){const c={confirmed:{title:"تم تأكيد طلبك",message:`تم تأكيد طلبك #${s} وجاري التجهيز للشحن`,type:"order"},shipped:{title:"تم شحن طلبك",message:`طلبك #${s} في الطريق إليك`,type:"shipping"},delivered:{title:"تم تسليم طلبك",message:`تم تسليم طلبك #${s} بنجاح`,type:"delivery"},cancelled:{title:"تم إلغاء طلبك",message:`تم إلغاء طلبك #${s}`,type:"alert"}}[a];return this.createNotification({userId:t,...c,relatedId:s})}async notifyAffiliateCommission(t,s,a){return this.createNotification({userId:t,type:"commission",title:"عمولة جديدة",message:`حصلت على عمولة ${s} ج.م من الطلب #${a}`,relatedId:a,metadata:{amount:s}})}}const Ae=new di,mi=Object.freeze(Object.defineProperty({__proto__:null,NOTIFICATIONS_COLLECTION_ID:pe,default:Ae,notificationService:Ae},Symbol.toStringTag,{value:"Module"})),ui={order:pt,shipping:Ve,delivery:qe,alert:Nr,info:br,commission:xt,affiliate:xt};function hi(r){const t=new Date(r),a=Math.floor((new Date().getTime()-t.getTime())/1e3);return a<60?"الآن":a<3600?`منذ ${Math.floor(a/60)} دقيقة`:a<86400?`منذ ${Math.floor(a/3600)} ساعة`:a<604800?`منذ ${Math.floor(a/86400)} يوم`:t.toLocaleDateString("ar-EG")}function pi(){const{user:r}=be(),t=it(),[s,a]=l.useState(!1),i=vr(),{data:c=[],isLoading:m}=De({queryKey:["notifications",r==null?void 0:r.$id],queryFn:()=>Ae.getUserNotifications(r.$id),enabled:!!(r!=null&&r.$id),refetchInterval:3e4});l.useEffect(()=>{if(!(r!=null&&r.$id))return;const o=Ae.subscribeToNotifications(r.$id,n=>{i.setQueryData(["notifications",r.$id],(b=[])=>[n,...b])});return()=>{o()}},[r==null?void 0:r.$id,i]);const d=Tt({mutationFn:o=>Ae.markAsRead(o),onSuccess:()=>{i.invalidateQueries({queryKey:["notifications",r==null?void 0:r.$id]})}}),N=Tt({mutationFn:()=>Ae.markAllAsRead(r.$id),onSuccess:()=>{i.invalidateQueries({queryKey:["notifications",r==null?void 0:r.$id]})}}),h=c.filter(o=>!o.read).length,p=o=>{o.read||d.mutate(o.$id),a(!1),o.relatedId&&o.type==="order"&&t(`/my-orders/${o.relatedId}`)};return r?e.jsxs(ke,{open:s,onOpenChange:a,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(Dt,{className:"h-5 w-5"}),h>0&&e.jsx(se,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:h>9?"9+":h})]})}),e.jsxs(ye,{align:"end",className:"w-80",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[e.jsx("h3",{className:"font-semibold",children:"الإشعارات"}),h>0&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:()=>N.mutate(),disabled:N.isPending,className:"text-xs",children:[e.jsx(qe,{className:"h-3 w-3 mr-1"}),"تحديد الكل كمقروء"]})]}),e.jsx(X,{}),m?e.jsx("div",{className:"px-4 py-8 text-center text-muted-foreground",children:"جاري التحميل..."}):c.length===0?e.jsxs("div",{className:"px-4 py-8 text-center text-muted-foreground",children:[e.jsx(Dt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"لا توجد إشعارات"})]}):e.jsx(It,{className:"h-[400px]",children:e.jsx("div",{className:"space-y-1",children:c.map(o=>{const n=ui[o.type];return e.jsxs($,{className:`flex items-start gap-3 px-4 py-3 cursor-pointer ${o.read?"":"bg-accent/50"}`,onClick:()=>p(o),children:[e.jsx("div",{className:`mt-1 p-2 rounded-full ${o.read?"bg-muted text-muted-foreground":"bg-primary text-primary-foreground"}`,children:e.jsx(n,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:"font-medium text-sm leading-tight",children:o.title}),!o.read&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary flex-shrink-0 mt-1"})]}),e.jsx("p",{className:"text-sm text-muted-foreground leading-tight",children:o.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:hi(o.$createdAt)})]})]},o.$id)})})})]})]}):null}const Ys={"purple-orange":{name:"Purple & Orange",nameAr:"بنفسجي وبرتقالي",primary:"270 95% 60%",primaryStart:"260 100% 65%",primaryEnd:"280 90% 55%",secondary:"25 95% 58%",secondaryStart:"20 100% 60%",secondaryEnd:"35 95% 55%",accent:"190 95% 55%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"222.2 84% 4.9%",darkModeForeground:"210 40% 98%",description:"Vibrant and energetic",descriptionAr:"نابض بالحياة والطاقة",icon:"🟣"},"blue-cyan":{name:"Blue & Cyan",nameAr:"أزرق وسماوي",primary:"210 100% 50%",primaryStart:"200 100% 55%",primaryEnd:"220 95% 45%",secondary:"185 100% 40%",secondaryStart:"175 100% 45%",secondaryEnd:"195 95% 35%",accent:"160 90% 45%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"210 100% 15%",darkModeForeground:"210 40% 98%",description:"Cool and professional",descriptionAr:"بارد واحترافي",icon:"🔵"},"green-teal":{name:"Green & Teal",nameAr:"أخضر وفيروزي",primary:"145 85% 40%",primaryStart:"135 90% 45%",primaryEnd:"155 80% 35%",secondary:"170 100% 35%",secondaryStart:"160 100% 40%",secondaryEnd:"180 95% 30%",accent:"195 85% 45%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"145 85% 15%",darkModeForeground:"145 40% 95%",description:"Fresh and natural",descriptionAr:"منعش وطبيعي",icon:"🟢"},"pink-purple":{name:"Pink & Purple",nameAr:"وردي وبنفسجي",primary:"330 85% 50%",primaryStart:"320 90% 55%",primaryEnd:"340 80% 45%",secondary:"280 85% 50%",secondaryStart:"270 90% 55%",secondaryEnd:"290 80% 45%",accent:"200 90% 55%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"330 60% 20%",darkModeForeground:"330 40% 95%",description:"Sweet and playful",descriptionAr:"حلو ومرح",icon:"🩷"},"red-orange":{name:"Red & Orange",nameAr:"أحمر وبرتقالي",primary:"0 85% 50%",primaryStart:"350 90% 55%",primaryEnd:"10 80% 45%",secondary:"30 100% 45%",secondaryStart:"20 100% 50%",secondaryEnd:"40 95% 40%",accent:"45 100% 50%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"0 60% 20%",darkModeForeground:"0 40% 98%",description:"Bold and passionate",descriptionAr:"جريء وعاطفي",icon:"🔴"},"indigo-blue":{name:"Indigo & Blue",nameAr:"نيلي وأزرق",primary:"240 85% 45%",primaryStart:"230 90% 50%",primaryEnd:"250 80% 40%",secondary:"210 90% 50%",secondaryStart:"200 95% 55%",secondaryEnd:"220 85% 45%",accent:"180 85% 50%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"240 60% 15%",darkModeForeground:"240 40% 98%",description:"Deep and trustworthy",descriptionAr:"عميق وموثوق",icon:"🔷"},"emerald-lime":{name:"Emerald & Lime",nameAr:"زمردي وليموني",primary:"150 90% 35%",primaryStart:"140 95% 40%",primaryEnd:"160 85% 30%",secondary:"80 90% 40%",secondaryStart:"70 95% 45%",secondaryEnd:"90 85% 35%",accent:"50 100% 50%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"150 60% 15%",darkModeForeground:"150 40% 95%",description:"Bright and lively",descriptionAr:"مشرق وحيوي",icon:"💚"},"rose-pink":{name:"Rose & Pink",nameAr:"وردي فاتح",primary:"340 90% 55%",primaryStart:"330 95% 60%",primaryEnd:"350 85% 50%",secondary:"0 85% 60%",secondaryStart:"350 90% 65%",secondaryEnd:"10 80% 55%",accent:"30 90% 55%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"340 60% 20%",darkModeForeground:"340 40% 98%",description:"Romantic and elegant",descriptionAr:"رومانسي وأنيق",icon:"🌸"}},Xs=l.createContext(void 0);function xi({children:r}){const[t,s]=l.useState(()=>localStorage.getItem("egygo-theme")||"system"),[a,i]=l.useState(()=>localStorage.getItem("egygo-color-theme")||"purple-orange"),[c,m]=l.useState("light");l.useEffect(()=>{const p=window.document.documentElement,o=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",n=()=>{const u=t==="system"?o():t;p.classList.remove("light","dark"),p.classList.add(u),m(u)};n();const b=window.matchMedia("(prefers-color-scheme: dark)"),g=()=>{t==="system"&&n()};return b.addEventListener("change",g),()=>b.removeEventListener("change",g)},[t]),l.useEffect(()=>{const p=Ys[a],o=document.documentElement;o.style.setProperty("--primary",p.primary),o.style.setProperty("--primary-start",p.primaryStart),o.style.setProperty("--primary-end",p.primaryEnd),o.style.setProperty("--primary-light",p.primary),o.style.setProperty("--primary-dark",p.primaryEnd),o.style.setProperty("--primary-foreground",p.textOnPrimary),o.style.setProperty("--secondary",p.secondary),o.style.setProperty("--secondary-start",p.secondaryStart),o.style.setProperty("--secondary-end",p.secondaryEnd),o.style.setProperty("--secondary-light",p.secondary),o.style.setProperty("--secondary-foreground",p.textOnSecondary),o.style.setProperty("--accent-cyan",p.accent),c==="light"?(o.style.setProperty("--foreground",p.lightModeForeground),o.style.setProperty("--card-foreground",p.lightModeForeground),o.style.setProperty("--popover-foreground",p.lightModeForeground)):(o.style.setProperty("--foreground",p.darkModeForeground),o.style.setProperty("--card-foreground",p.darkModeForeground),o.style.setProperty("--popover-foreground",p.darkModeForeground)),localStorage.setItem("egygo-color-theme",a)},[a,c]);const d=p=>{s(p),localStorage.setItem("egygo-theme",p)},N=p=>{i(p)},h=()=>{d(c==="light"?"dark":"light")};return e.jsx(Xs.Provider,{value:{theme:t,actualTheme:c,colorTheme:a,setTheme:d,setColorTheme:N,toggleTheme:h},children:r})}function Zs(){const r=l.useContext(Xs);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r}function fi(){const{theme:r,setTheme:t}=Zs();return e.jsxs(ke,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(Ot,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx($t,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(ye,{align:"end",children:[e.jsxs($,{onClick:()=>t("light"),className:"cursor-pointer",children:[e.jsx(Ot,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"فاتح"}),r==="light"&&e.jsx("span",{className:"mr-auto",children:"✓"})]}),e.jsxs($,{onClick:()=>t("dark"),className:"cursor-pointer",children:[e.jsx($t,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"داكن"}),r==="dark"&&e.jsx("span",{className:"mr-auto",children:"✓"})]}),e.jsxs($,{onClick:()=>t("system"),className:"cursor-pointer",children:[e.jsx(_r,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"تلقائي"}),r==="system"&&e.jsx("span",{className:"mr-auto",children:"✓"})]})]})]})}function gi(){const{colorTheme:r,setColorTheme:t}=Zs(),s=["purple-orange","blue-cyan","green-teal","pink-purple","red-orange","indigo-blue","emerald-lime","rose-pink"];return e.jsxs(ke,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(Er,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"اختر الثيم"})]})}),e.jsxs(ye,{align:"end",className:"w-72",children:[e.jsx(Us,{className:"text-center text-base font-semibold",dir:"rtl",children:"اختر ثيم الألوان 🎨"}),e.jsx(X,{}),e.jsx("div",{className:"grid grid-cols-2 gap-2 p-2",dir:"rtl",children:s.map(a=>{const i=Ys[a],c=r===a;return e.jsxs($,{onClick:()=>t(a),className:`
                  flex flex-col items-start gap-2 p-3 cursor-pointer
                  rounded-lg border-2 transition-all
                  ${c?"border-primary bg-primary/10":"border-transparent hover:border-primary/30 hover:bg-accent"}
                `,children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:i.icon}),e.jsx("span",{className:"font-semibold text-sm",children:i.nameAr})]}),c&&e.jsx(qe,{className:"h-4 w-4 text-primary"})]}),e.jsxs("div",{className:"flex gap-1 w-full",children:[e.jsx("div",{className:"h-6 flex-1 rounded",style:{background:`hsl(${i.primary})`}}),e.jsx("div",{className:"h-6 flex-1 rounded",style:{background:`hsl(${i.secondary})`}}),e.jsx("div",{className:"h-6 flex-1 rounded",style:{background:`hsl(${i.accent})`}})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i.descriptionAr})]},a)})}),e.jsx(X,{}),e.jsx("div",{className:"p-2 text-xs text-center text-muted-foreground",children:"اختر الثيم المفضل لديك من بين 8 تصاميم مختلفة"})]})]})}function ji({cartItemCount:r}){const[t,s]=l.useState([]),{user:a,logout:i}=be(),{items:c}=ci(),m=r??c.reduce((d,N)=>d+N.quantity,0);return l.useEffect(()=>{zs.getAll().then(d=>{s(d.categories)}).catch(()=>{s([])})},[]),e.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-purple-100 dark:border-purple-900 bg-gradient-to-r from-background via-purple-50/30 to-background dark:from-background dark:via-purple-950/20 dark:to-background backdrop-blur-xl supports-[backdrop-filter]:bg-background/60 shadow-sm",children:e.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[e.jsxs(Ka,{children:[e.jsx(Ja,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",className:"md:hidden",children:e.jsx(Ar,{className:"h-5 w-5"})})}),e.jsxs(Ws,{side:"right",className:"w-80",children:[e.jsx(Gs,{children:e.jsx(Hs,{children:e.jsx(f,{to:"/",className:"text-2xl font-bold text-primary",children:"إيجي جو"})})}),e.jsxs("nav",{className:"mt-6 space-y-4",children:[(a==null?void 0:a.role)==="admin"&&e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs(f,{to:"/admin",className:"flex items-center gap-2 py-2 px-3 bg-gradient-to-r from-purple-100 to-purple-50 dark:from-purple-900 dark:to-purple-800 text-primary rounded-lg font-semibold hover:shadow-md transition-all",children:[e.jsx(fe,{className:"h-5 w-5"}),"لوحة تحكم الإدارة"]})}),(a==null?void 0:a.isAffiliate)&&e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs(f,{to:"/affiliate/dashboard",className:"flex items-center gap-2 py-2 px-3 bg-gradient-to-r from-orange-100 to-yellow-50 dark:from-orange-900 dark:to-yellow-800 text-orange-600 dark:text-orange-300 rounded-lg font-semibold hover:shadow-md transition-all",children:[e.jsx(me,{className:"h-5 w-5"}),"لوحة تحكم المسوق"]})}),(a==null?void 0:a.isMerchant)&&e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs(f,{to:"/merchant/dashboard",className:"flex items-center gap-2 py-2 px-3 bg-gradient-to-r from-purple-100 to-pink-50 dark:from-purple-900 dark:to-pink-800 text-purple-600 dark:text-purple-300 rounded-lg font-semibold hover:shadow-md transition-all",children:[e.jsx(ge,{className:"h-5 w-5"}),"لوحة تحكم التاجر"]})}),(a==null?void 0:a.isIntermediary)&&e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs(f,{to:"/intermediary/dashboard",className:"flex items-center gap-2 py-2 px-3 bg-gradient-to-r from-indigo-100 to-blue-50 dark:from-indigo-900 dark:to-blue-800 text-indigo-600 dark:text-indigo-300 rounded-lg font-semibold hover:shadow-md transition-all",children:[e.jsx(de,{className:"h-5 w-5"}),"لوحة تحكم الوسيط"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Lt,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"الفئات"})]}),t.filter(d=>d.slug).map(d=>e.jsxs(f,{to:`/category/${d.slug}`,className:"flex items-center justify-between py-2 px-3 text-sm hover:bg-muted rounded-md hover:text-primary transition-all",children:[e.jsx("span",{children:d.name}),e.jsx(se,{variant:"secondary",className:"text-xs",children:d.productCount})]},d.id)),e.jsx(f,{to:"/categories",className:"flex items-center justify-center py-2 px-3 mt-2 text-sm font-semibold text-primary bg-primary/10 rounded-md hover:bg-primary/20 transition-all",children:"عرض جميع الفئات"})]}),e.jsxs("div",{className:"pt-4 border-t space-y-2",children:[e.jsxs(f,{to:"/affiliate",className:"flex items-center gap-2 py-2 text-sm hover:text-primary transition-colors",children:[e.jsx(de,{className:"h-4 w-4"}),"برنامج الشراكة"]}),e.jsx(f,{to:"/deals",className:"block py-2 text-sm hover:text-primary transition-colors",children:"العروض الخاصة"})]})]})]})]}),e.jsx(f,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-primary via-purple-600 to-secondary bg-clip-text text-transparent hover:scale-105 transition-transform",children:"إيجي جو"}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-6 rtl:space-x-reverse",children:[e.jsxs(ke,{children:[e.jsxs(Ce,{className:"flex items-center gap-1 text-sm font-medium hover:text-primary transition-colors group",children:[e.jsx(Lt,{className:"h-4 w-4 group-hover:scale-110 transition-transform"}),"الفئات",e.jsx(kr,{className:"h-3 w-3 group-data-[state=open]:rotate-180 transition-transform"})]}),e.jsxs(ye,{className:"w-56",align:"start",children:[e.jsx("div",{className:"px-2 py-1.5 text-sm font-semibold text-muted-foreground",children:"تصفح حسب الفئة"}),e.jsx(X,{}),t.filter(d=>d.slug).map(d=>e.jsx($,{asChild:!0,children:e.jsxs(f,{to:`/category/${d.slug}`,className:"flex items-center justify-between w-full cursor-pointer",children:[e.jsx("span",{children:d.name}),e.jsx(se,{variant:"secondary",className:"ml-2 text-xs",children:d.productCount})]})},d.id)),e.jsx(X,{}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/categories",className:"flex items-center justify-center w-full font-semibold text-primary cursor-pointer",children:"عرض جميع الفئات"})})]})]}),e.jsx(f,{to:"/deals",className:"text-sm font-medium hover:text-primary transition-colors",children:"العروض"}),e.jsxs(f,{to:"/affiliate",className:"flex items-center gap-1 text-sm font-medium bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent hover:from-orange-600 hover:to-yellow-600 transition-all",children:[e.jsx(de,{className:"h-4 w-4 text-orange-500"}),"برنامج الشراكة"]})]}),e.jsx("div",{className:"hidden lg:flex items-center max-w-sm flex-1 mx-6",children:e.jsx(Ba,{})}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(R,{variant:"ghost",size:"icon",className:"lg:hidden",children:e.jsx(At,{className:"h-5 w-5"})}),a&&(a.role==="admin"||a.isAffiliate||a.role==="merchant"||a.isIntermediary)&&e.jsxs(ke,{children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"sm",className:"hidden md:flex items-center gap-2 font-semibold border-2",children:[a.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{children:"لوحة التحكم"})]}),a.role==="merchant"&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{children:"لوحة التاجر"})]}),a.isAffiliate&&a.role!=="admin"&&a.role!=="merchant"&&a.role!=="intermediary"&&e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"لوحة المسوق"})]}),a.isIntermediary&&a.role!=="admin"&&a.role!=="merchant"&&e.jsxs(e.Fragment,{children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:"لوحة الوسيط"})]})]})}),e.jsxs(ye,{align:"end",className:"w-56",children:[a.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx($,{asChild:!0,children:e.jsxs(f,{to:"/admin",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(fe,{className:"h-4 w-4"}),"لوحة الإدارة"]})}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/admin/products",className:"flex items-center gap-2 cursor-pointer",children:"إدارة المنتجات"})}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/admin/orders",className:"flex items-center gap-2 cursor-pointer",children:"إدارة الطلبات"})})]}),a.role==="merchant"&&e.jsxs(e.Fragment,{children:[e.jsx($,{asChild:!0,children:e.jsxs(f,{to:"/merchant/dashboard",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(ge,{className:"h-4 w-4"}),"لوحة التاجر"]})}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/admin/products",className:"flex items-center gap-2 cursor-pointer",children:"منتجاتي"})})]}),a.isAffiliate&&e.jsxs(e.Fragment,{children:[e.jsx($,{asChild:!0,children:e.jsxs(f,{to:"/affiliate/dashboard",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(me,{className:"h-4 w-4"}),"لوحة المسوق"]})}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/affiliate/analytics",className:"flex items-center gap-2 cursor-pointer",children:"التحليلات"})}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/affiliate/withdraw",className:"flex items-center gap-2 cursor-pointer",children:"سحب الأرباح"})})]}),a.isIntermediary&&e.jsxs(e.Fragment,{children:[e.jsx($,{asChild:!0,children:e.jsxs(f,{to:"/intermediary/dashboard",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(de,{className:"h-4 w-4"}),"لوحة الوسيط"]})}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/intermediary/products",className:"flex items-center gap-2 cursor-pointer",children:"منتجاتي"})}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/intermediary/links",className:"flex items-center gap-2 cursor-pointer",children:"روابطي"})})]}),e.jsx(X,{}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/orders",className:"flex items-center gap-2 cursor-pointer",children:"طلباتي"})}),e.jsx($,{asChild:!0,children:e.jsxs(f,{to:"/wishlist",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(ft,{className:"h-4 w-4"}),"المفضلة"]})}),e.jsx(X,{}),e.jsxs($,{onClick:i,className:"flex items-center gap-2 cursor-pointer text-red-600",children:[e.jsx(Mt,{className:"h-4 w-4"}),"تسجيل الخروج"]})]})]}),a&&e.jsx(pi,{}),e.jsx(gi,{}),e.jsx(fi,{}),e.jsx(R,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(f,{to:"/wishlist",children:e.jsx(ft,{className:"h-5 w-5"})})}),e.jsx(R,{variant:"ghost",size:"icon",className:"relative",asChild:!0,children:e.jsxs(f,{to:"/cart",children:[e.jsx(Ve,{className:"h-5 w-5"}),m>0&&e.jsx(se,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:m})]})}),e.jsxs(ke,{children:[e.jsx(Ce,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(kt,{className:"h-5 w-5"})})}),e.jsx(ye,{align:"end",className:"w-48",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-2 py-1.5 text-sm font-medium",children:["مرحباً، ",a.name]}),e.jsx(X,{}),a.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx($,{asChild:!0,children:e.jsxs(f,{to:"/admin",className:"text-primary font-semibold",children:[e.jsx(fe,{className:"ml-2 h-4 w-4"}),"لوحة تحكم الإدارة"]})}),e.jsx(X,{})]}),a.isAffiliate&&e.jsxs(e.Fragment,{children:[e.jsx($,{asChild:!0,children:e.jsxs(f,{to:"/affiliate/dashboard",className:"text-orange-600 font-semibold",children:[e.jsx(me,{className:"ml-2 h-4 w-4"}),"لوحة تحكم المسوق"]})}),e.jsx(X,{})]}),a.isMerchant&&e.jsxs(e.Fragment,{children:[e.jsx($,{asChild:!0,children:e.jsxs(f,{to:"/merchant/dashboard",className:"text-purple-600 font-semibold",children:[e.jsx(ge,{className:"ml-2 h-4 w-4"}),"لوحة تحكم التاجر"]})}),e.jsx(X,{})]}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/my-orders",children:"طلباتي"})}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/account",children:"حسابي"})}),a.isAffiliate&&e.jsxs(e.Fragment,{children:[e.jsx(X,{}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/affiliate/dashboard",className:"text-brand-orange",children:"لوحة تحكم الشراكة"})})]}),e.jsx(X,{}),e.jsxs($,{onClick:()=>i(),children:[e.jsx(Mt,{className:"ml-2 h-4 w-4"}),"تسجيل الخروج"]})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/login",children:"تسجيل الدخول"})}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/register",children:"إنشاء حساب"})}),e.jsx(X,{}),e.jsx($,{asChild:!0,children:e.jsx(f,{to:"/affiliate",className:"text-brand-orange",children:"برنامج الشراكة"})})]})})]})]})]})})}function yi(){ea.init({duration:1e3,easing:"ease-in-out",once:!0,mirror:!1,offset:100})}var yt=(r=>(r.CUSTOMER="customer",r.AFFILIATE="affiliate",r.MERCHANT="merchant",r.INTERMEDIARY="intermediary",r.ADMIN="admin",r.SUPER_ADMIN="super_admin",r))(yt||{}),er=(r=>(r.VIEW_PRODUCTS="view_products",r.CREATE_PRODUCT="create_product",r.EDIT_OWN_PRODUCT="edit_own_product",r.EDIT_ANY_PRODUCT="edit_any_product",r.DELETE_OWN_PRODUCT="delete_own_product",r.DELETE_ANY_PRODUCT="delete_any_product",r.VIEW_OWN_ORDERS="view_own_orders",r.VIEW_ALL_ORDERS="view_all_orders",r.MANAGE_OWN_ORDERS="manage_own_orders",r.MANAGE_ALL_ORDERS="manage_all_orders",r.VIEW_AFFILIATE_STATS="view_affiliate_stats",r.GENERATE_AFFILIATE_LINKS="generate_affiliate_links",r.WITHDRAW_EARNINGS="withdraw_earnings",r.VIEW_CREATIVES="view_creatives",r.VIEW_MERCHANT_DASHBOARD="view_merchant_dashboard",r.MANAGE_INVENTORY="manage_inventory",r.VIEW_SALES_REPORTS="view_sales_reports",r.MANAGE_SHIPPING="manage_shipping",r.VIEW_INTERMEDIARY_DASHBOARD="view_intermediary_dashboard",r.IMPORT_PRODUCTS="import_products",r.SCRAPE_PRODUCTS="scrape_products",r.MANAGE_MARKUP="manage_markup",r.GENERATE_INTERMEDIARY_LINKS="generate_intermediary_links",r.VIEW_INTERMEDIARY_STATS="view_intermediary_stats",r.VIEW_ADMIN_DASHBOARD="view_admin_dashboard",r.MANAGE_USERS="manage_users",r.MANAGE_CATEGORIES="manage_categories",r.MANAGE_COUPONS="manage_coupons",r.MANAGE_COMMISSIONS="manage_commissions",r.VIEW_ANALYTICS="view_analytics",r.MANAGE_SETTINGS="manage_settings",r.APPROVE_ACCOUNTS="approve_accounts",r.PLACE_ORDER="place_order",r.VIEW_WISHLIST="view_wishlist",r.WRITE_REVIEW="write_review",r))(er||{});const wi={customer:["view_products","view_own_orders","place_order","view_wishlist","write_review"],affiliate:["view_products","view_own_orders","place_order","view_wishlist","view_affiliate_stats","generate_affiliate_links","withdraw_earnings","view_creatives"],merchant:["view_products","create_product","edit_own_product","delete_own_product","view_own_orders","manage_own_orders","view_merchant_dashboard","manage_inventory","view_sales_reports","manage_shipping"],intermediary:["view_products","create_product","edit_own_product","delete_own_product","view_own_orders","manage_own_orders","view_intermediary_dashboard","import_products","scrape_products","manage_markup","generate_intermediary_links","view_intermediary_stats","place_order","view_wishlist"],admin:["view_products","create_product","edit_any_product","delete_any_product","view_all_orders","manage_all_orders","view_admin_dashboard","manage_users","manage_categories","manage_coupons","manage_commissions","view_analytics","approve_accounts"],super_admin:[...Object.values(er)]};function vi(r,t){return(wi[r]||[]).includes(t)}function Zt(r){switch(r){case"admin":case"super_admin":return"/admin/dashboard";case"merchant":return"/merchant/dashboard";case"intermediary":return"/intermediary/dashboard";case"affiliate":return"/affiliate/dashboard";case"customer":default:return"/account"}}const bi=ze("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),wt=l.forwardRef(({className:r,variant:t,...s},a)=>e.jsx("div",{ref:a,role:"alert",className:C(bi({variant:t}),r),...s}));wt.displayName="Alert";const vt=l.forwardRef(({className:r,...t},s)=>e.jsx("h5",{ref:s,className:C("mb-1 font-medium leading-none tracking-tight",r),...t}));vt.displayName="AlertTitle";const bt=l.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:C("text-sm [&_p]:leading-relaxed",r),...t}));bt.displayName="AlertDescription";function O({children:r,requiredRole:t,requiredPermission:s,requireAuth:a=!0,fallbackPath:i}){const{user:c,loading:m,refreshUser:d}=be(),[N,h]=l.useState(!1);if(l.useEffect(()=>{if(c&&c.accountStatus==="pending"&&(t==="merchant"||t==="affiliate")){const p=setInterval(async()=>{await d()},3e4);return()=>clearInterval(p)}},[c,t,d]),m)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-purple-50 to-orange-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Me,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})});if(a&&!c)return e.jsx(Re,{to:"/login",state:{from:window.location.pathname},replace:!0});if(s&&c){const p=c.role;if(!vi(p,s))return e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gradient-to-br from-red-50 to-orange-50",children:e.jsxs(wt,{variant:"destructive",className:"max-w-md",children:[e.jsx(Cr,{className:"h-5 w-5"}),e.jsx(vt,{className:"text-xl font-bold",children:"غير مصرح"}),e.jsxs(bt,{className:"mt-2",children:[e.jsx("p",{className:"mb-4",children:"ليس لديك صلاحية للوصول إلى هذه الصفحة."}),e.jsx(R,{onClick:()=>window.location.href=Zt(p),children:"العودة للوحة التحكم"})]})]})})}if(t&&c){const p=c.role;if(p===yt.ADMIN||p===yt.SUPER_ADMIN)return e.jsx(e.Fragment,{children:r});if(t==="intermediary"){if(!c.isIntermediary)return e.jsx(Re,{to:"/",replace:!0})}else if(t==="affiliate"){if(!c.isAffiliate)return e.jsx(Re,{to:"/affiliate",replace:!0})}else if(t==="merchant"){if(!c.isMerchant)return e.jsx(Re,{to:"/merchant",replace:!0})}else if(c.role!==t){const o=i||Zt(p);return e.jsx(Re,{to:o,replace:!0})}if((t==="merchant"||t==="affiliate"||t==="intermediary")&&c.accountStatus!=="approved")return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-br from-yellow-50 to-orange-50",children:e.jsxs(wt,{className:"max-w-md border-yellow-500 bg-yellow-50",children:[e.jsx(Je,{className:"h-5 w-5 text-yellow-600"}),e.jsx(vt,{className:"text-xl font-bold text-yellow-900",children:"حسابك قيد المراجعة"}),e.jsxs(bt,{className:"mt-2 text-yellow-800",children:[e.jsx("p",{className:"mb-4",children:c.accountStatus==="pending"?"حسابك قيد المراجعة من قبل الإدارة. سيتم إشعارك عند الموافقة عبر البريد الإلكتروني.":c.accountStatus==="rejected"?`تم رفض حسابك. السبب: ${c.rejectionReason||"غير محدد"}. يمكنك التواصل مع الدعم الفني.`:"حالة حسابك غير معروفة. يرجى التواصل مع الدعم الفني."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(R,{onClick:async()=>{h(!0),await d(),h(!1)},variant:"default",className:"flex items-center gap-2",disabled:N,children:[e.jsx(Ct,{className:`h-4 w-4 ${N?"animate-spin":""}`}),N?"جاري التحديث...":"تحديث الحالة"]}),e.jsx(R,{onClick:()=>window.location.href="/",variant:"outline",children:"الصفحة الرئيسية"}),e.jsx(R,{onClick:()=>window.location.href="/contact",variant:"outline",children:"تواصل معنا"})]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-3",children:"💡 يتم التحديث التلقائي كل 30 ثانية"})]})]})})}return e.jsx(e.Fragment,{children:r})}const ie=l.forwardRef(({className:r,type:t,...s},a)=>e.jsx("input",{type:t,className:C("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:a,...s}));ie.displayName="Input";const ot=l.forwardRef(({className:r,orientation:t="horizontal",decorative:s=!0,...a},i)=>e.jsx(As,{ref:i,decorative:s,orientation:t,className:C("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r),...a}));ot.displayName=As.displayName;function Ni(){return e.jsx("footer",{className:"bg-gradient-to-br from-purple-50 via-white to-orange-50 dark:from-neutral-900 dark:via-neutral-900 dark:to-neutral-900 border-t border-purple-100 dark:border-purple-900",children:e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(f,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-primary via-purple-600 to-secondary bg-clip-text text-transparent",children:"EgyGo"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"وجهتك الوحيدة للمنتجات عالية الجودة مع أفضل برنامج شراكة في الصناعة."}),e.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse",children:[e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-blue-100 hover:text-blue-600 dark:hover:bg-blue-900 transition-colors",children:e.jsx(Sr,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-sky-100 hover:text-sky-600 dark:hover:bg-sky-900 transition-colors",children:e.jsx(Ir,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-pink-100 hover:text-pink-600 dark:hover:bg-pink-900 transition-colors",children:e.jsx(Rr,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-900 transition-colors",children:e.jsx(Pr,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"روابط سريعة"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(f,{to:"/about",className:"text-muted-foreground hover:text-primary transition-colors",children:"معلومات عنا"})}),e.jsx("li",{children:e.jsx(f,{to:"/contact",className:"text-muted-foreground hover:text-primary transition-colors",children:"اتصل بنا"})}),e.jsx("li",{children:e.jsx(f,{to:"/shipping",className:"text-muted-foreground hover:text-primary transition-colors",children:"معلومات الشحن"})}),e.jsx("li",{children:e.jsx(f,{to:"/returns",className:"text-muted-foreground hover:text-primary transition-colors",children:"الإرجاع والاستبدال"})}),e.jsx("li",{children:e.jsx(f,{to:"/faq",className:"text-muted-foreground hover:text-primary transition-colors",children:"الأسئلة الشائعة"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent",children:"برنامج الشراكة"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(f,{to:"/affiliate",className:"text-muted-foreground hover:text-secondary transition-colors",children:"انضم كشريك"})}),e.jsx("li",{children:e.jsx(f,{to:"/affiliate/dashboard",className:"text-muted-foreground hover:text-secondary transition-colors",children:"لوحة تحكم الشراكة"})}),e.jsx("li",{children:e.jsx(f,{to:"/affiliate/resources",className:"text-muted-foreground hover:text-secondary transition-colors",children:"مصادر التسويق"})}),e.jsx("li",{children:e.jsx(f,{to:"/affiliate/commission",className:"text-muted-foreground hover:text-secondary transition-colors",children:"هيكل العمولة"})}),e.jsx("li",{children:e.jsx(f,{to:"/affiliate/support",className:"text-muted-foreground hover:text-secondary transition-colors",children:"دعم الشركاء"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"ابق على اطلاع"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"اشترك للحصول على عروض خاصة وهدايا مجانية وفرص شراكة."}),e.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse",children:[e.jsx(ie,{placeholder:"أدخل بريدك الإلكتروني",type:"email",className:"flex-1"}),e.jsxs(R,{size:"sm",className:"bg-gradient-to-r from-primary to-secondary hover:from-purple-700 hover:to-orange-600",children:[e.jsx(St,{className:"h-4 w-4 ml-2 rtl:ml-0 rtl:mr-2"}),"اشترك"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"بالاشتراك، فإنك توافق على سياسة الخصوصية وشروط الخدمة."})]})]}),e.jsx(ot,{className:"my-8"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center text-sm text-muted-foreground",children:[e.jsx("p",{children:"© 2024 EgyGo. جميع الحقوق محفوظة."}),e.jsxs("div",{className:"flex space-x-4 rtl:space-x-reverse mt-4 sm:mt-0",children:[e.jsx(f,{to:"/privacy",className:"hover:text-primary transition-colors",children:"سياسة الخصوصية"}),e.jsx(f,{to:"/terms",className:"hover:text-primary transition-colors",children:"شروط الخدمة"}),e.jsx(f,{to:"/cookies",className:"hover:text-primary transition-colors",children:"سياسة ملفات تعريف الارتباط"})]})]})]})})}function _i({className:r}){return null}function Ei({className:r}){const[t,s]=l.useState(!1);l.useEffect(()=>{const i=()=>{s(window.scrollY>320)};return i(),window.addEventListener("scroll",i,{passive:!0}),()=>{window.removeEventListener("scroll",i)}},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsx("button",{type:"button",onClick:a,"aria-label":"العودة لأعلى الصفحة",className:C("fixed bottom-6 end-6 z-40 inline-flex h-11 w-11 items-center justify-center rounded-full","bg-primary text-primary-foreground shadow-lg transition-all","hover:shadow-xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","focus-visible:ring-primary",t?"opacity-100 scale-100":"pointer-events-none opacity-0 scale-95",r),children:e.jsx(Tr,{className:"h-5 w-5"})})}const tr=l.createContext(void 0);function Ai({children:r}){const{user:t}=be(),[s,a]=l.useState([]),[i,c]=l.useState(!0);l.useEffect(()=>{m()},[t]);const m=async()=>{try{if(c(!0),t)try{const o=(await A.listDocuments(k.databaseId,k.collections.favorites,[I.equal("userId",t.$id),I.limit(100)])).documents.map(n=>n.productId);a(o)}catch(p){console.error("Error loading favorites from Appwrite:",p);const o=localStorage.getItem("favorites");o&&a(JSON.parse(o))}else{const p=localStorage.getItem("favorites");p&&a(JSON.parse(p))}}catch(p){console.error("Error loading favorites:",p)}finally{c(!1)}},d=async p=>{console.log("🔵 addFavorite called for:",p,"User:",t==null?void 0:t.$id);try{if(t)try{await A.createDocument(k.databaseId,k.collections.favorites,Xe.unique(),{userId:t.$id,productId:p,createdAt:new Date().toISOString()})}catch(n){console.error("Error saving to Appwrite:",n)}const o=[...s,p];a(o),localStorage.setItem("favorites",JSON.stringify(o)),console.log("✅ Favorite added successfully. New favorites:",o)}catch(o){throw console.error("Error adding favorite:",o),o}},N=async p=>{console.log("🔴 removeFavorite called for:",p);try{if(t)try{const n=await A.listDocuments(k.databaseId,k.collections.favorites,[I.equal("userId",t.$id),I.equal("productId",p)]);n.documents.length>0&&await A.deleteDocument(k.databaseId,k.collections.favorites,n.documents[0].$id)}catch(n){console.error("Error removing from Appwrite:",n)}const o=s.filter(n=>n!==p);a(o),localStorage.setItem("favorites",JSON.stringify(o)),console.log("✅ Favorite removed successfully. New favorites:",o)}catch(o){throw console.error("Error removing favorite:",o),o}},h=p=>s.includes(p);return e.jsx(tr.Provider,{value:{favorites:s,addFavorite:d,removeFavorite:N,isFavorite:h,loading:i},children:r})}function ao(){const r=l.useContext(tr);if(r===void 0)throw new Error("useFavorites must be used within a FavoritesProvider");return r}const Z=l.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:C("rounded-lg border bg-card text-card-foreground shadow-sm",r),...t}));Z.displayName="Card";const we=l.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:C("flex flex-col space-y-1.5 p-6",r),...t}));we.displayName="CardHeader";const ve=l.forwardRef(({className:r,...t},s)=>e.jsx("h3",{ref:s,className:C("text-2xl font-semibold leading-none tracking-tight",r),...t}));ve.displayName="CardTitle";const Rt=l.forwardRef(({className:r,...t},s)=>e.jsx("p",{ref:s,className:C("text-sm text-muted-foreground",r),...t}));Rt.displayName="CardDescription";const te=l.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:C("p-6 pt-0",r),...t}));te.displayName="CardContent";const ki=l.forwardRef(({className:r,...t},s)=>e.jsx("div",{ref:s,className:C("flex items-center p-6 pt-0",r),...t}));ki.displayName="CardFooter";const K={title:"إيجي جو - تسوق أونلاين في مصر | منتجات أصلية بأفضل الأسعار",description:"تسوق الآن من إيجي جو واحصل على أفضل المنتجات بأسعار تنافسية. شحن سريع لجميع أنحاء مصر، دفع عند الاستلام، وضمان على جميع المنتجات. انضم لبرنامج التسويق بالعمولة واكسب حتى 25%",keywords:"تسوق أونلاين, تسوق في مصر, شراء اونلاين, منتجات مصرية, التسوق الالكتروني, دفع عند الاستلام, شحن مجاني, تسويق بالعمولة, افلييت مصر, egygo, ايجي جو",image:"https://egygo.me/og-image.jpg",siteUrl:"https://egygo.me",siteName:"إيجي جو"};function Ci({title:r,description:t,keywords:s,image:a,type:i="website",price:c,currency:m="EGP",availability:d,brand:N,sku:h,rating:p,reviewCount:o,category:n}){const b=nt(),g=`${K.siteUrl}${b.pathname}`,u=r?`${r} | ${K.siteName}`:K.title,x=t||K.description,_=s||K.keywords,P=a||K.image,L=i==="product"&&c?{"@context":"https://schema.org","@type":"Product",name:r,description:x,brand:N?{"@type":"Brand",name:N}:void 0,sku:h,category:n,image:P,offers:{"@type":"Offer",price:c,priceCurrency:m,availability:d==="in stock"?"https://schema.org/InStock":"https://schema.org/OutOfStock"}}:null,W={"@context":"https://schema.org","@type":"Organization",name:K.siteName,url:K.siteUrl,logo:`${K.siteUrl}/logo.png`,description:K.description,sameAs:["https://www.facebook.com/egygo","https://www.instagram.com/egygo","https://twitter.com/egygo"],contactPoint:{"@type":"ContactPoint",contactType:"Customer Service",telephone:"+20-123-456-7890",email:"support@egygo.com",availableLanguage:["ar","en"]}},q={"@context":"https://schema.org","@type":"WebSite",name:K.siteName,url:K.siteUrl,potentialAction:{"@type":"SearchAction",target:{"@type":"EntryPoint",urlTemplate:`${window.location.origin}/#/products?search={search_term_string}`},"query-input":"required name=search_term_string"}},j=b.pathname.split("/").filter(Boolean),T=j.length>0?{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"الرئيسية",item:K.siteUrl},...j.map((F,D)=>({"@type":"ListItem",position:D+2,name:F,item:`${K.siteUrl}/${j.slice(0,D+1).join("/")}`}))]}:null;return e.jsxs(Dr,{children:[e.jsx("html",{lang:"ar",dir:"rtl"}),e.jsx("title",{children:u}),e.jsx("meta",{name:"description",content:x}),e.jsx("meta",{name:"keywords",content:_}),e.jsx("meta",{property:"og:type",content:i}),e.jsx("meta",{property:"og:url",content:g}),e.jsx("meta",{property:"og:title",content:u}),e.jsx("meta",{property:"og:description",content:x}),e.jsx("meta",{property:"og:image",content:P}),e.jsx("meta",{property:"og:site_name",content:K.siteName}),e.jsx("meta",{property:"og:locale",content:"ar_EG"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:url",content:g}),e.jsx("meta",{name:"twitter:title",content:u}),e.jsx("meta",{name:"twitter:description",content:x}),e.jsx("meta",{name:"twitter:image",content:P}),e.jsx("meta",{name:"robots",content:"index, follow"}),e.jsx("meta",{name:"googlebot",content:"index, follow"}),e.jsx("meta",{name:"language",content:"Arabic"}),e.jsx("meta",{name:"author",content:K.siteName}),e.jsx("link",{rel:"canonical",href:g}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=5"}),e.jsx("meta",{name:"mobile-web-app-capable",content:"yes"}),e.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),e.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(W)}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(q)}),T&&e.jsx("script",{type:"application/ld+json",children:JSON.stringify(T)}),L&&e.jsx("script",{type:"application/ld+json",children:JSON.stringify(L)})]})}const Si={home:()=>({title:"إيجي جو - تسوق أونلاين في مصر",description:"أفضل موقع تسوق أونلاين في مصر. منتجات أصلية، أسعار تنافسية، شحن سريع، دفع عند الاستلام. انضم لبرنامج التسويق بالعمولة واكسب حتى 25%",keywords:"تسوق أونلاين مصر, شراء اونلاين, افضل موقع تسوق, egygo"}),products:r=>({title:r?`تسوق ${r}`:"تسوق جميع المنتجات",description:`اكتشف مجموعة واسعة من ${r||"المنتجات"} بأفضل الأسعار. شحن سريع لجميع أنحاء مصر ودفع عند الاستلام`,keywords:`${r||"منتجات"}, تسوق ${r||"اونلاين"}, شراء ${r||"منتجات"} مصر`}),affiliate:()=>({title:"برنامج التسويق بالعمولة - اكسب حتى 25%",description:"انضم لبرنامج التسويق بالعمولة من إيجي جو واكسب عمولة تصل إلى 25% على كل عملية بيع. أدوات تسويقية احترافية، دعم مستمر، وسحب أرباح سريع",keywords:"تسويق بالعمولة, افلييت مصر, اكسب من الانترنت, عمولة تسويق, affiliate egypt"}),merchant:()=>({title:"انضم كتاجر - بيع منتجاتك على إيجي جو",description:"ابدأ البيع على إيجي جو واصل لآلاف العملاء في مصر. لوحة تحكم احترافية، تقارير مفصلة، ودعم تقني متواصل",keywords:"بيع منتجات اونلاين, تجارة الكترونية مصر, merchant egypt, بائع اونلاين"}),login:()=>({title:"تسجيل الدخول - إيجي جو",description:"سجل دخولك لحسابك في إيجي جو وابدأ التسوق الآن",keywords:"تسجيل دخول, login egygo"}),register:()=>({title:"إنشاء حساب جديد - إيجي جو",description:"أنشئ حسابك المجاني في إيجي جو وابدأ التسوق أو التسويق بالعمولة",keywords:"انشاء حساب, تسجيل جديد, register egygo"}),cart:()=>({title:"عربة التسوق",description:"راجع منتجاتك وأكمل عملية الشراء بسهولة",keywords:"عربة التسوق, سلة المشتريات, cart"}),checkout:()=>({title:"إتمام الطلب",description:"أكمل طلبك الآن. دفع عند الاستلام متاح لجميع أنحاء مصر",keywords:"اتمام الطلب, checkout, دفع عند الاستلام"})};function Pt({size:r="medium",interactive:t=!0,autoRotate:s=!0,showParticles:a=!0,colorScheme:i="gradient"}){const c=l.useRef(null),m=l.useRef(),d=l.useRef(),N=l.useRef(),h=l.useRef(),p=l.useRef(),[o,n]=l.useState(!1),b=()=>{switch(r){case"small":return{width:200,height:100,fontSize:30};case"large":return{width:600,height:300,fontSize:90};default:return{width:400,height:200,fontSize:60}}};return l.useEffect(()=>{if(!c.current)return;const g=b(),u=new oa;u.background=null,m.current=u;const x=new la(75,g.width/g.height,.1,1e3);x.position.z=5,N.current=x;const _=new ca({antialias:!0,alpha:!0});_.setSize(g.width,g.height),_.setPixelRatio(window.devicePixelRatio),c.current.appendChild(_.domElement),d.current=_;const P=new da(16777215,.4);u.add(P);const L=new Bt(9133302,.8);L.position.set(5,5,5),u.add(L);const W=new Bt(15485081,.6);W.position.set(-5,-5,5),u.add(W);const q=new ma(3900150,1,100);q.position.set(0,0,10),u.add(q);const j=new ua;h.current=j,u.add(j),new ha().load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",S=>{const M=new pa("EgyGo",{font:S,size:.8,height:.3,curveSegments:12,bevelEnabled:!0,bevelThickness:.05,bevelSize:.02,bevelOffset:0});M.computeBoundingBox();const B=-.5*(M.boundingBox.max.x-M.boundingBox.min.x);M.translate(B,0,0);const Y=new Wt({color:i==="gradient"?9133302:i==="neon"?65280:3900150,emissive:i==="neon"?65280:9133302,emissiveIntensity:i==="neon"?.5:.2,shininess:100,specular:16777215}),Ne=new ct(M,Y);j.add(Ne);const ce=new xa({color:16766720,side:fa}),Q=new ct(M,ce);Q.scale.multiplyScalar(1.05),j.add(Q)},void 0,S=>{console.error("Error loading font:",S),F()});const F=()=>{[{text:"E",x:-2,color:9133302},{text:"g",x:-1,color:15485081},{text:"y",x:0,color:3900150},{text:"G",x:1,color:16096779},{text:"o",x:2,color:16766720}].forEach(({text:M,x:B,color:Y})=>{const Ne=new ga(.6,1.2,.3),ce=new Wt({color:Y,emissive:Y,emissiveIntensity:.2,shininess:100,specular:16777215}),Q=new ct(Ne,ce);Q.position.set(B*.7,0,0),j.add(Q)})},D=new Gt,V=20,E=new Float32Array(V*6);for(let S=0;S<V;S++){const M=S/V*Math.PI*2,B=.4;E[S*6]=1.2+Math.cos(M)*B,E[S*6+1]=Math.sin(M)*B,E[S*6+2]=.2,E[S*6+3]=1.2+Math.cos(M)*(B+.5),E[S*6+4]=Math.sin(M)*B,E[S*6+5]=.2-.3}D.setAttribute("position",new dt(E,3));const ae=new ja({color:16766720,opacity:.6,transparent:!0,linewidth:2}),ne=new ya(D,ae);if(j.add(ne),a){const S=new Gt,M=500,B=new Float32Array(M*3),Y=new Float32Array(M*3);for(let Q=0;Q<M*3;Q+=3){B[Q]=(Math.random()-.5)*10,B[Q+1]=(Math.random()-.5)*10,B[Q+2]=(Math.random()-.5)*10;const ue=new wa;ue.setHSL(Math.random()*.3+.5,1,.5),Y[Q]=ue.r,Y[Q+1]=ue.g,Y[Q+2]=ue.b}S.setAttribute("position",new dt(B,3)),S.setAttribute("color",new dt(Y,3));const Ne=new va({size:.05,vertexColors:!0,transparent:!0,opacity:.8,blending:ba}),ce=new Na(S,Ne);p.current=ce,u.add(ce)}let G=null;t&&(G=new _a(x,_.domElement),G.enableDamping=!0,G.dampingFactor=.05,G.enableZoom=!1,G.autoRotate=s,G.autoRotateSpeed=2);const Be=()=>{s&&j&&le.to(j.rotation,{y:Math.PI*2,duration:10,repeat:-1,ease:"none"}),le.to(j.scale,{x:1.05,y:1.05,z:1.05,duration:2,repeat:-1,yoyo:!0,ease:"power2.inOut"})};setTimeout(()=>{Be()},500);const Se=S=>{if(!t)return;const M=_.domElement.getBoundingClientRect(),B=(S.clientX-M.left)/M.width*2-1,Y=-((S.clientY-M.top)/M.height)*2+1;j&&le.to(j.rotation,{y:B*.5,x:Y*.3,duration:.5,ease:"power2.out"})};_.domElement.addEventListener("mousemove",Se),_.domElement.addEventListener("mouseenter",()=>n(!0)),_.domElement.addEventListener("mouseleave",()=>{n(!1),j&&le.to(j.rotation,{x:0,y:0,duration:.5,ease:"power2.out"})});const We=new Ea,Ie=()=>{requestAnimationFrame(Ie);const S=We.getElapsedTime();!t&&s&&j&&(j.rotation.y=S*.5),p.current&&(p.current.rotation.y=S*.1,p.current.rotation.x=S*.05),j&&(j.position.y=Math.sin(S*2)*.1),G&&G.update(),_.render(u,x)};return Ie(),()=>{_.domElement.removeEventListener("mousemove",Se),c.current&&_.domElement&&c.current.removeChild(_.domElement),_.dispose()}},[r,t,s,a,i]),e.jsxs(ta.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"relative inline-block",children:[e.jsx("div",{ref:c,className:`
          ${o?"cursor-grab":"cursor-pointer"}
          transition-all duration-300
          ${o?"drop-shadow-2xl":"drop-shadow-lg"}
        `,style:{filter:o?"drop-shadow(0 0 30px rgba(139, 92, 246, 0.5))":"drop-shadow(0 0 15px rgba(139, 92, 246, 0.3))"}}),e.jsx("div",{className:"absolute inset-0 -z-10 blur-3xl opacity-30",style:{background:"radial-gradient(circle, #8b5cf6 0%, #ec4899 50%, transparent 70%)"}})]})}function Ii({products:r,title:t,subtitle:s,variant:a="default",autoplay:i=!0,slidesPerView:c=4}){var o;const m=l.useRef(null),d=()=>{const n={modules:[Qt,Aa,ka,Ca,Kt,Ht],spaceBetween:20,navigation:!0,pagination:{clickable:!0,dynamicBullets:!0},autoplay:i?{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0}:!1,breakpoints:{320:{slidesPerView:1},640:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:c}}};switch(a){case"coverflow":return{...n,effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}};case"cards":return{...n,effect:"cards",grabCursor:!0,cardsEffect:{slideShadows:!0}};case"thumbs":return{...n,thumbs:{swiper:m.current}};default:return n}},N=n=>{lt.success(`تمت إضافة ${n.name} إلى السلة`)},h=n=>{lt.success(`تمت إضافة ${n.name} إلى المفضلة`)},p=n=>{lt.info(`عرض سريع لـ ${n.name}`)};return e.jsxs("div",{className:"swiper-product-slider py-8",children:[(t||s)&&e.jsxs("div",{className:"text-center mb-8",children:[t&&e.jsx("h2",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:t}),s&&e.jsx("p",{className:"text-muted-foreground",children:s})]}),a==="thumbs"&&((o=r[0])==null?void 0:o.images)&&e.jsx("div",{className:"mb-4",children:e.jsx(Ft,{onSwiper:n=>{m.current=n},spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,modules:[Ht,Qt,Kt],className:"thumbs-swiper h-24",children:r[0].images.map((n,b)=>e.jsx(Vt,{children:e.jsx("img",{src:n,alt:`Thumb ${b}`,className:"w-full h-full object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity"})},b))})}),e.jsx(Ft,{...d(),className:"product-swiper",children:r.map(n=>e.jsx(Vt,{children:e.jsxs(Z,{className:"group relative overflow-hidden hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2",children:[n.badge&&e.jsx(se,{className:"absolute top-2 right-2 z-10 animate-pulse",children:n.badge}),n.discount&&e.jsxs(se,{variant:"destructive",className:"absolute top-2 left-2 z-10",children:["-",n.discount,"%"]}),e.jsxs("div",{className:"relative h-64 overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center gap-2",children:[e.jsx(R,{size:"icon",variant:"secondary",className:"transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",onClick:()=>p(n),children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsx(R,{size:"icon",variant:"secondary",className:"transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300 delay-75",onClick:()=>h(n),children:e.jsx(ft,{className:"h-4 w-4"})}),e.jsx(R,{size:"icon",className:"transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300 delay-150",onClick:()=>N(n),children:e.jsx(Ve,{className:"h-4 w-4"})})]})]}),e.jsxs(te,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((b,g)=>e.jsx(ks,{className:`h-4 w-4 ${g<Math.floor(n.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},g))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",n.reviews,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[n.price," ج.م"]}),n.originalPrice&&e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:[n.originalPrice," ج.م"]})]}),n.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:n.description})]})]})},n.id))}),e.jsx("style",{children:`
        .product-swiper .swiper-button-next,
        .product-swiper .swiper-button-prev {
          background: rgba(255, 255, 255, 0.9);
          width: 40px;
          height: 40px;
          border-radius: 50%;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .product-swiper .swiper-button-next:after,
        .product-swiper .swiper-button-prev:after {
          font-size: 20px;
          color: #333;
        }
        
        .product-swiper .swiper-pagination-bullet {
          background: #8b5cf6;
        }
        
        .product-swiper .swiper-pagination-bullet-active {
          background: #7c3aed;
          width: 24px;
          border-radius: 4px;
        }

        .thumbs-swiper .swiper-slide-thumb-active {
          border: 2px solid #8b5cf6;
          border-radius: 8px;
        }
      `})]})}le.registerPlugin(Ts);function Ri(){l.useEffect(()=>{document.querySelector(".hero-content")&&le.from(".hero-content",{opacity:0,y:50,duration:1,ease:"power3.out"});const p=document.querySelectorAll(".feature-card"),o=document.querySelector(".features-section");p.length>0&&o&&le.from(".feature-card",{opacity:0,y:30,duration:.8,stagger:.2,scrollTrigger:{trigger:".features-section",start:"top 80%"}});const n=document.querySelectorAll(".product-card"),b=document.querySelector(".products-section");n.length>0&&b&&le.from(".product-card",{opacity:0,scale:.9,y:30,duration:.6,stagger:.1,scrollTrigger:{trigger:".products-section",start:"top 80%"}})},[]);const{data:r,isLoading:t}=De({queryKey:Ge.categories,queryFn:zs.getAll}),{data:s,isLoading:a}=De({queryKey:[...Ge.products,"featured"],queryFn:()=>Fe.getAll({sortBy:"featured",limit:4})}),{data:i,isLoading:c}=De({queryKey:[...Ge.products,"bestsellers"],queryFn:()=>Fe.getAll({sortBy:"rating",limit:4})}),m=(r==null?void 0:r.categories)||[],d=(s==null?void 0:s.products)||[],N=(i==null?void 0:i.products.filter(h=>h.reviewCount>50))||[];return t||a?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(Me,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-16 pb-16",children:[e.jsx(Ci,{...Si.home()}),e.jsxs("section",{className:"relative bg-gradient-to-br from-primary via-purple-600 to-secondary text-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-25 scale-[2] blur-[1px]",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center animate-[spin_60s_linear_infinite]",children:e.jsx(Pt,{size:"large",interactive:!1,autoRotate:!0,showParticles:!1,colorScheme:"gradient"})})}),e.jsx("div",{className:"relative container mx-auto px-4 py-24 lg:py-32 z-10",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"space-y-8 hero-content",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(se,{variant:"secondary",className:"text-primary bg-gradient-to-r from-white to-yellow-50 shadow-lg",children:"✨ منتجات مميزة"}),e.jsxs("h1",{className:"text-4xl lg:text-6xl font-bold leading-tight",children:["تسوق بذكاء،",e.jsx("span",{className:"bg-gradient-to-r from-yellow-300 to-orange-300 bg-clip-text text-transparent",children:" اربح أكثر"})]}),e.jsx("p",{className:"text-xl text-white/90 max-w-lg",children:"اكتشف مجموعة متنوعة من المنتجات عالية الجودة وانضم لبرنامج الشراكة لتحقيق دخل إضافي مميز."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(R,{size:"lg",variant:"secondary",className:"text-primary font-semibold",asChild:!0,children:e.jsxs(f,{to:"/products",children:["تسوق الآن",e.jsx(_e,{className:"mr-2 h-5 w-5 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})}),e.jsx(R,{size:"lg",variant:"outline",className:"bg-white/10 border-white/30 text-white hover:bg-white/20",asChild:!0,children:e.jsxs(f,{to:"/affiliate",children:[e.jsx(de,{className:"ml-2 h-5 w-5 rtl:ml-0 rtl:mr-2"}),"انضم لبرنامج الشراكة"]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-8",children:[e.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20 hover:bg-white/20 transition-all",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-300",children:"+10K"}),e.jsx("div",{className:"text-sm text-white/80",children:"عميل راضي"})]}),e.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20 hover:bg-white/20 transition-all",children:[e.jsx("div",{className:"text-2xl font-bold text-green-300",children:"+500"}),e.jsx("div",{className:"text-sm text-white/80",children:"منتج"})]}),e.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20 hover:bg-white/20 transition-all",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-300",children:"+1K"}),e.jsx("div",{className:"text-sm text-white/80",children:"مسوق"})]})]})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center",children:[e.jsx("div",{className:"space-y-4",children:d.slice(0,2).map((h,p)=>{var o;return e.jsx(f,{to:`/product/${h.id}`,children:e.jsx(Z,{className:"bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 hover:scale-105 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-xl",children:e.jsxs(te,{className:"p-4",children:[e.jsx("img",{src:Ee((o=h.images)==null?void 0:o[0]),alt:h.name,className:"w-full h-32 object-cover rounded-lg mb-3"}),e.jsx("h3",{className:"font-semibold text-white text-sm",children:h.name}),e.jsxs("p",{className:"text-brand-yellow font-bold",children:["$",h.price]})]})})},h.id)})}),e.jsx("div",{className:"space-y-4 mt-8",children:d.slice(2,4).map((h,p)=>{var o;return e.jsx(f,{to:`/product/${h.id}`,children:e.jsx(Z,{className:"bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 hover:scale-105 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-xl",children:e.jsxs(te,{className:"p-4",children:[e.jsx("img",{src:Ee((o=h.images)==null?void 0:o[0]),alt:h.name,className:"w-full h-32 object-cover rounded-lg mb-3"}),e.jsx("h3",{className:"font-semibold text-white text-sm",children:h.name}),e.jsxs("p",{className:"text-brand-yellow font-bold",children:["$",h.price]})]})})},h.id)})})]})})]})})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12 space-y-2",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"تسوق حسب الفئة"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"اكتشف مجموعتنا الواسعة من المنتجات عبر فئات مختلفة"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:m.filter(h=>h.slug).map(h=>e.jsx(f,{to:`/products?category=${h.slug}`,className:"group",children:e.jsxs(Z,{className:"overflow-hidden hover:shadow-lg transition-all duration-300 group-hover:scale-105",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:h.image||"/placeholder.svg",alt:h.name,className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-colors"})]}),e.jsxs(te,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-semibold mb-1",children:h.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[h.productCount," منتج"]})]})]})},h.id))})]}),e.jsxs("section",{className:"container mx-auto px-4 products-section",children:[e.jsxs("div",{className:"flex justify-between items-center mb-12",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"المنتجات المميزة"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"منتجات مختارة بعناية خصيصًا لك"})]}),e.jsx(R,{variant:"outline",asChild:!0,children:e.jsxs(f,{to:"/products",children:["عرض الكل",e.jsx(_e,{className:"mr-2 h-4 w-4 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})})]}),d.length>0&&e.jsx(Ii,{products:d.map(h=>{var p;return{id:h.id,name:h.name,price:h.price,originalPrice:h.originalPrice,image:Ee((p=h.images)==null?void 0:p[0]),rating:h.rating,reviews:h.reviewCount,badge:h.originalPrice&&h.originalPrice>h.price?`وفر $${(h.originalPrice-h.price).toFixed(0)}`:void 0,description:h.description||""}}),variant:"cards",autoplay:!0})]}),e.jsx("section",{className:"bg-gradient-to-r from-brand-orange to-brand-purple text-white",children:e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(se,{variant:"secondary",className:"text-brand-orange bg-white/90",children:"💰 برنامج الشراكة"}),e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold",children:"ابدأ تكسب دلوقتي مع برنامج الشراكة"}),e.jsx("p",{className:"text-xl text-white/90",children:"انضم لآلاف المسوقين الناجحين واكسب عمولة لحد 25% على كل عملية بيع تيجي منك. الانضمام مجاني وعندنا كل الأدوات اللي تحتاجها عشان تنجح."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[e.jsx(me,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("div",{className:"font-bold text-lg",children:"لحد 25%"}),e.jsx("div",{className:"text-sm text-white/80",children:"عمولة"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[e.jsx(de,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("div",{className:"font-bold text-lg",children:"+1000"}),e.jsx("div",{className:"text-sm text-white/80",children:"مسوق نشط"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[e.jsx(qt,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("div",{className:"font-bold text-lg",children:"+10 مليون جنيه"}),e.jsx("div",{className:"text-sm text-white/80",children:"اتدفع عمولات"})]})]}),e.jsx(R,{size:"lg",variant:"secondary",className:"text-primary font-semibold",asChild:!0,children:e.jsxs(f,{to:"/affiliate",children:["انضم لبرنامج الشراكة",e.jsx(_e,{className:"mr-2 h-5 w-5 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})})]}),e.jsx("div",{className:"relative",children:e.jsxs(Z,{className:"bg-white/10 backdrop-blur-sm border-white/20 p-6",children:[e.jsx(we,{children:e.jsx(ve,{className:"text-white",children:"لماذا تختار برنامجنا؟"})}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-yellow flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-bold text-primary",children:"✓"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"معدلات عمولة عالية"}),e.jsx("p",{className:"text-white/80 text-sm",children:"اكسب 8-25% عمولة على جميع المبيعات"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-yellow flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-bold text-primary",children:"✓"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"تتبع فوري"}),e.jsx("p",{className:"text-white/80 text-sm",children:"راقب أداءك وأرباحك مباشرة"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-yellow flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-bold text-primary",children:"✓"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"دعم تسويقي"}),e.jsx("p",{className:"text-white/80 text-sm",children:"احصل على بانرات وروابط ومواد ترويجية"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-yellow flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-bold text-primary",children:"✓"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"دفعات سريعة"}),e.jsx("p",{className:"text-white/80 text-sm",children:"دفعات أسبوعية عبر PayPal أو التحويل البنكي"})]})]})]})]})})]})})}),N.length>0&&e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"الأكثر مبيعًا"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"منتجاتنا الأكثر شعبية المحبوبة من العملاء حول العالم"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:N.slice(0,4).map(h=>{var p;return e.jsx(f,{to:`/product/${h.id}`,children:e.jsxs(Z,{className:"group overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Ee((p=h.images)==null?void 0:p[0]),alt:h.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx(se,{className:"absolute top-2 left-2 bg-success text-success-foreground",children:"الأكثر مبيعًا"}),e.jsxs("div",{className:"absolute top-2 right-2 bg-brand-orange text-white text-xs px-2 py-1 rounded",children:[h.affiliateCommission,"% عمولة"]})]}),e.jsxs(te,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((o,n)=>e.jsx(ks,{className:`h-4 w-4 ${n<Math.floor(h.rating)?"text-yellow-400 fill-current":"text-gray-300"}`},n))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",h.reviewCount,")"]})]}),e.jsx("h3",{className:"font-semibold mb-2 line-clamp-2",children:h.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold",children:["$",h.price]}),h.originalPrice&&h.originalPrice>h.price&&e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["$",h.originalPrice]})]})}),e.jsx(R,{size:"sm",children:e.jsx(Ve,{className:"h-4 w-4"})})]})]})]})},h.id)})})]}),e.jsx("section",{className:"bg-muted/40",children:e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"grid gap-12 lg:grid-cols-[1.1fr_0.9fr] items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(se,{className:"bg-primary/10 text-primary",children:"لماذا إيجي جو؟"}),e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold leading-tight",children:"ثقة كاملة، دعم حقيقي، وتجربة تسوق ولا أسهل"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"بنقدم لك أقوى تجربة تسوق إلكتروني في مصر: منتجات أصلية مضمونة، دعم عربي 24/7، وسياسة إرجاع سهلة. هدفنا إنك تشتري وتكسب وأنت مطمن."}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:[{icon:Or,title:"ضمان استرجاع 30 يوم",description:"في حالة المنتج مش مطابق للتوقعات، نرجعلك فلوسك بالكامل بدون أسئلة."},{icon:$r,title:"شحن سريع داخل مصر",description:"شراكتنا مع أفضل شركات الشحن تضمن توصيل الطلب في 2-4 أيام عمل."},{icon:Lr,title:"خدمة عملاء ودعم تسويقي",description:"فريق عربي جاهز يساعدك بالهاتف، الواتساب، أو الإيميل طول اليوم."},{icon:Mr,title:"تتبع لحظي للطلبات",description:"تابع حالة الطلب لحظة بلحظة من حسابك أو عبر صفحة تتبع الطلبات."}].map(h=>e.jsx(Z,{className:"h-full",children:e.jsxs(te,{className:"flex h-full flex-col gap-3 p-5",children:[e.jsx("div",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary",children:e.jsx(h.icon,{className:"h-5 w-5"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:h.title}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:h.description})]})]})},h.title))})]}),e.jsxs(Z,{className:"shadow-lg",children:[e.jsx(we,{children:e.jsx(ve,{className:"text-2xl",children:"آراء عملائنا"})}),e.jsxs(te,{className:"space-y-6",children:[[{name:"محمود السيد",role:"مسوق شريك",quote:"أرباحي زادت 3 أضعاف من أول شهر مع إيجي جو. لوحة التحكم واضحة، والعمولات بتتصرف في مواعيدها."},{name:"إسراء أحمد",role:"عميلة",quote:"تجربة الشراء كانت ممتازة، خدمة العملاء ساعدوني أختار الهدية المناسبة ووصلت في يومين."}].map(h=>e.jsxs("div",{className:"rounded-xl bg-muted/80 p-5",children:[e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["“",h.quote,"”"]}),e.jsxs("div",{className:"mt-4 text-sm font-semibold",children:[h.name,e.jsxs("span",{className:"ms-2 text-xs text-muted-foreground",children:["• ",h.role]})]})]},h.name)),e.jsxs("div",{className:"rounded-xl border border-dashed border-primary/50 p-5 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"عايز تتأكد بنفسك؟"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"تواصل مع فريق الدعم أو اطلب مكالمة مجانية دلوقتي وهنرد عليك خلال دقائق."}),e.jsx(R,{asChild:!0,variant:"outline",children:e.jsx(f,{to:"/contact",children:"تواصل معنا الآن"})})]})]})]})]})})}),e.jsx("section",{className:"bg-gradient-to-r from-brand-purple via-primary to-brand-orange text-white",children:e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"inline-block",children:e.jsx(se,{variant:"secondary",className:"text-primary bg-white/90 text-lg px-4 py-2",children:"🏪 للتجار والبائعين"})}),e.jsxs("h2",{className:"text-3xl lg:text-5xl font-bold leading-tight",children:["هل لديك منتجات للبيع؟",e.jsx("br",{}),e.jsx("span",{className:"text-brand-yellow",children:"ابدأ البيع معنا!"})]}),e.jsx("p",{className:"text-xl text-white/90",children:"انضم إلى أكثر من 500 تاجر ناجح على إيجي جو. عمولات منخفضة (5-10%)، دفعات أسبوعية، ووصول لملايين العملاء المحتملين."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:"5-10%"}),e.jsx("div",{className:"text-sm text-white/80",children:"عمولة فقط"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:"+500"}),e.jsx("div",{className:"text-sm text-white/80",children:"تاجر نشط"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:"أسبوعي"}),e.jsx("div",{className:"text-sm text-white/80",children:"دفع الأرباح"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:"مجاني"}),e.jsx("div",{className:"text-sm text-white/80",children:"بدون رسوم"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(R,{size:"lg",variant:"secondary",className:"text-primary font-semibold",asChild:!0,children:e.jsxs(f,{to:"/register?type=merchant",children:["ابدأ البيع الآن",e.jsx(_e,{className:"mr-2 h-5 w-5 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})}),e.jsx(R,{size:"lg",variant:"outline",className:"bg-white/10 border-white/30 text-white hover:bg-white/20",asChild:!0,children:e.jsx(f,{to:"/merchant",children:"اعرف المزيد"})})]})]}),e.jsx("div",{className:"relative",children:e.jsxs(Z,{className:"bg-white/10 backdrop-blur-sm border-white/20 p-6",children:[e.jsx(we,{children:e.jsx(ve,{className:"text-white text-2xl mb-4",children:"لماذا تبيع على إيجي جو؟"})}),e.jsxs(te,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(xt,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"عمولات منخفضة"}),e.jsx("p",{className:"text-sm text-white/80",children:"ادفع 5-10% فقط - أقل من المنافسين"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(Fr,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"تحليلات متقدمة"}),e.jsx("p",{className:"text-sm text-white/80",children:"تتبع مبيعاتك وأدائك لحظياً"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(de,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"ملايين العملاء"}),e.jsx("p",{className:"text-sm text-white/80",children:"وصول لقاعدة عملاء ضخمة جاهزة للشراء"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(qt,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"دعم مخصص"}),e.jsx("p",{className:"text-sm text-white/80",children:"فريق دعم متخصص لمساعدتك 24/7"})]})]})]})]})})]})})})]})}const Pi=ze("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ee=l.forwardRef(({className:r,...t},s)=>e.jsx(Cs,{ref:s,className:C(Pi(),r),...t}));ee.displayName=Cs.displayName;const Ze=l.forwardRef(({className:r,...t},s)=>e.jsx(Ss,{ref:s,className:C("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...t,children:e.jsx(Vr,{className:C("flex items-center justify-center text-current"),children:e.jsx(qe,{className:"h-4 w-4"})})}));Ze.displayName=Ss.displayName;le.registerPlugin(Ts,Sa);function $e({children:r,animation:t="fadeIn",duration:s=1,delay:a=0,ease:i="power2.out",trigger:c=!1,triggerStart:m="top 80%",triggerEnd:d="bottom 20%",scrub:N=!1,pin:h=!1,markers:p=!1,staggerAmount:o=.1,customAnimation:n}){const b=l.useRef(null),g=l.useRef();return qr(()=>{if(!b.current)return;const u=b.current,x=le.timeline({defaults:{duration:s,ease:i},scrollTrigger:c?{trigger:u,start:m,end:d,scrub:N,pin:h,markers:p,toggleActions:"play pause resume reverse"}:void 0});switch(t){case"fadeIn":x.fromTo(u,{opacity:0,y:20},{opacity:1,y:0,delay:a});break;case"slideUp":x.fromTo(u,{y:100,opacity:0},{y:0,opacity:1,delay:a});break;case"slideDown":x.fromTo(u,{y:-100,opacity:0},{y:0,opacity:1,delay:a});break;case"slideLeft":x.fromTo(u,{x:100,opacity:0},{x:0,opacity:1,delay:a});break;case"slideRight":x.fromTo(u,{x:-100,opacity:0},{x:0,opacity:1,delay:a});break;case"zoomIn":x.fromTo(u,{scale:0,opacity:0},{scale:1,opacity:1,delay:a});break;case"rotate":x.fromTo(u,{rotation:360,opacity:0},{rotation:0,opacity:1,delay:a});break;case"bounce":x.fromTo(u,{y:-100,opacity:0},{y:0,opacity:1,delay:a,ease:"bounce.out"});break;case"flip":x.fromTo(u,{rotationY:180,opacity:0},{rotationY:0,opacity:1,delay:a});break;case"stagger":const _=u.children;x.fromTo(_,{y:50,opacity:0},{y:0,opacity:1,delay:a,stagger:o});break;case"parallax":x.fromTo(u,{y:100},{y:-100,scrollTrigger:{trigger:u,start:"top bottom",end:"bottom top",scrub:1}});break;case"typewriter":const P=u.textContent||"";u.textContent="",x.to(u,{text:P,duration:P.length*.05,ease:"none",delay:a});break;case"morphText":x.fromTo(u,{filter:"blur(10px)",opacity:0,letterSpacing:"20px"},{filter:"blur(0px)",opacity:1,letterSpacing:"0px",delay:a});break;case"custom":n&&n(u);break}return g.current=x,()=>{x.kill()}},{dependencies:[t,s,a,c]}),e.jsx("div",{ref:b,className:"gsap-animation",children:r})}function Ti(){const[r,t]=l.useState(!1),[s,a]=l.useState(""),[i,c]=l.useState(""),[m,d]=l.useState(!1),[N,h]=l.useState(!1),[p,o]=l.useState(""),{login:n,loginWithGoogle:b,loginWithFacebook:g,user:u}=be(),x=it(),_=async P=>{P.preventDefault(),o(""),h(!0);try{await n(s,i),x("/")}catch(L){o((L==null?void 0:L.message)||"حدث خطأ أثناء تسجيل الدخول")}finally{h(!1)}};return u?(x("/"),null):e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 via-white to-orange-50 dark:from-neutral-900 dark:via-neutral-900 dark:to-neutral-900 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-10 scale-150",children:e.jsx("div",{className:"w-[600px] h-[600px]",children:e.jsx(Pt,{size:"large",interactive:!1,autoRotate:!0,showParticles:!1})})}),e.jsxs("div",{className:"max-w-md w-full space-y-8 relative z-10",children:[e.jsx($e,{animation:"fadeIn",duration:1,children:e.jsxs("div",{className:"text-center",children:[e.jsxs(f,{to:"/",className:"inline-flex items-center gap-2 text-3xl font-bold bg-gradient-to-r from-primary via-purple-600 to-secondary bg-clip-text text-transparent",children:[e.jsx(gt,{className:"w-8 h-8 text-purple-600"}),"إيجي جو"]}),e.jsx("h2",{className:"mt-6 text-3xl font-bold bg-gradient-to-r from-purple-600 to-orange-500 bg-clip-text text-transparent",children:"تسجيل الدخول"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["أو"," ",e.jsx(f,{to:"/register",className:"font-medium text-primary hover:text-primary/80 transition-colors",children:"إنشاء حساب جديد"})]})]})}),e.jsx($e,{animation:"slideUp",delay:.2,children:e.jsxs(Z,{className:"shadow-xl border-purple-100 dark:border-purple-900 backdrop-blur-sm bg-white/90 dark:bg-neutral-900/90",children:[e.jsxs(we,{className:"bg-gradient-to-r from-purple-50 to-orange-50 dark:from-neutral-800 dark:to-neutral-800",children:[e.jsx(ve,{className:"text-2xl",children:"أهلاً بك مرة أخرى"}),e.jsx(Rt,{children:"قم بتسجيل الدخول للوصول إلى حسابك ومتابعة التسوق"})]}),e.jsxs(te,{children:[e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[p&&e.jsx("div",{className:"p-3 text-sm text-red-600 bg-gradient-to-r from-red-50 to-red-100 border border-red-300 rounded-md shadow-sm",children:p}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"email",children:"البريد الإلكتروني"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(St,{className:"h-5 w-5 text-gray-400"})}),e.jsx(ie,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"أدخل بريدك الإلكتروني",value:s,onChange:P=>a(P.target.value),className:"pr-10"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"password",children:"كلمة المرور"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(Je,{className:"h-5 w-5 text-gray-400"})}),e.jsx(ie,{id:"password",name:"password",type:r?"text":"password",autoComplete:"current-password",required:!0,placeholder:"أدخل كلمة المرور",value:i,onChange:P=>c(P.target.value),className:"pr-10 pl-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 left-0 pl-3 flex items-center",onClick:()=>t(!r),children:r?e.jsx(jt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Ye,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Ze,{id:"remember-me",checked:m,onCheckedChange:P=>d(!!P)}),e.jsx(ee,{htmlFor:"remember-me",className:"text-sm cursor-pointer",children:"تذكرني"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(f,{to:"/forgot-password",className:"font-medium text-primary hover:text-primary/80 transition-colors",children:"نسيت كلمة المرور؟"})})]}),e.jsx(R,{type:"submit",className:"w-full",disabled:N,children:N?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري تسجيل الدخول..."]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:["تسجيل الدخول",e.jsx(_e,{className:"h-4 w-4 rtl:rotate-180"})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(ot,{})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-background text-muted-foreground",children:"أو"})})]})}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs(R,{type:"button",variant:"outline",className:"w-full",onClick:()=>{b().catch(P=>{o("حدث خطأ أثناء تسجيل الدخول بـ Google"),console.error(P)})},children:[e.jsxs("svg",{className:"w-5 h-5 ml-2 rtl:ml-0 rtl:mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"متابعة بحساب Google"]}),e.jsxs(R,{type:"button",variant:"outline",className:"w-full",onClick:()=>{g().catch(P=>{o("حدث خطأ أثناء تسجيل الدخول بـ Facebook"),console.error(P)})},children:[e.jsx("svg",{className:"w-5 h-5 ml-2 rtl:ml-0 rtl:mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"متابعة بحساب Facebook"]})]}),e.jsx("div",{className:"mt-6 p-4 bg-brand-orange/10 rounded-lg border border-brand-orange/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-brand-orange font-medium mb-2",children:"💰 هل تريد الانضمام لبرنامج الشراكة؟"}),e.jsx(f,{to:"/affiliate",className:"text-sm text-brand-orange hover:text-brand-orange/80 font-medium underline",children:"اكسب عمولة تصل إلى 25% من كل عملية بيع تحيلها"})]})})]})]})}),e.jsx($e,{animation:"fadeIn",delay:.4,children:e.jsx("div",{className:"text-center text-sm text-gray-600",children:e.jsxs("p",{children:["بتسجيل الدخول، فإنك توافق على"," ",e.jsx(f,{to:"/terms",className:"text-primary hover:text-primary/80",children:"شروط الخدمة"})," ","و"," ",e.jsx(f,{to:"/privacy",className:"text-primary hover:text-primary/80",children:"سياسة الخصوصية"})]})})})]})]})}function Di(){const[r,t]=l.useState(!1),[s,a]=l.useState(!1),[i,c]=l.useState({name:"",email:"",phone:"",alternativePhone:"",password:"",confirmPassword:"",referralCode:""}),[m,d]=l.useState("customer"),[N,h]=l.useState(!1),[p,o]=l.useState(!1),[n,b]=l.useState(!1),[g,u]=l.useState(""),[x,_]=l.useState(null),{register:P,user:L}=be(),W=it(),[q]=zr();l.useEffect(()=>{const D=q.get("type");(D==="affiliate"||D==="merchant")&&d(D);const V=q.get("ref");V&&(c(E=>({...E,referralCode:V})),j(V))},[q]);const j=async D=>{if(!D){_(null);return}try{const V=await A.listDocuments(k.databaseId,k.collections.userPreferences,[I.equal("affiliateCode",D),I.limit(1)]);V.documents.length>0?_(V.documents[0]):_(null)}catch(V){console.error("Error validating referral code:",V),_(null)}},T=D=>V=>{c(E=>({...E,[D]:V.target.value}))};if(L)return W("/"),null;const F=async D=>{if(D.preventDefault(),u(""),!N){u("يجب الموافقة على شروط الخدمة للمتابعة");return}if(!i.phone){u("رقم الهاتف مطلوب");return}if(!p){u("يجب تأكيد توفر رقم الهاتف على WhatsApp أو للاتصال");return}if(i.password!==i.confirmPassword){u("كلمات المرور غير متطابقة");return}if(i.password.length<6){u("كلمة المرور يجب أن تكون 6 أحرف على الأقل");return}b(!0);try{const V=await P(i.email,i.password,i.name,m,i.phone,i.alternativePhone);if(V){try{if(await A.createDocument(k.databaseId,"userPreferences",Xe.unique(),{userId:V.$id,email:i.email,name:i.name,phone:i.phone||"",role:m==="merchant"?"merchant":m==="affiliate"?"affiliate":"customer",accountStatus:m==="customer"?"approved":"pending",isAdmin:!1,isAffiliate:m==="affiliate",isMerchant:m==="merchant",isIntermediary:!1,affiliateCode:m==="affiliate"?`AFF${Date.now()}`:"",intermediaryCode:"",defaultMarkupPercentage:0,commissionRate:m==="affiliate"?10:0,businessName:"",businessAddress:"",taxId:""}),console.log("✅ User preferences created for admin panel"),i.referralCode&&x)try{await A.createDocument(k.databaseId,"referrals",Xe.unique(),{referrerId:x.userId,referredUserId:V.$id,referralCode:i.referralCode,status:"pending",createdAt:new Date().toISOString()}),console.log("✅ Referral record created"),await A.createDocument(k.databaseId,k.collections.notifications,"unique()",{userId:x.userId,title:"🎉 إحالة جديدة!",message:`قام ${i.name} بالتسجيل باستخدام كود الإحالة الخاص بك`,type:"affiliate",isRead:!1,link:"/affiliate/referrals"})}catch(E){console.error("Error creating referral record:",E)}}catch(E){console.error("Error creating user preferences:",E)}try{await A.createDocument(k.databaseId,k.collections.notifications,"unique()",{userId:V.$id,title:"👋 مرحباً بك في إيجي جو",message:m==="customer"?"نتمنى لك تجربة تسوق ممتعة! ابدأ باستكشاف منتجاتنا الآن":"⏳ تم استلام طلبك وجاري المراجعة. سنخطرك فوراً عند الموافقة على حسابك",type:"info",isRead:!1,link:m==="customer"?"/products":void 0})}catch(E){console.error("Error creating welcome notification:",E)}}m==="affiliate"||m==="merchant"?(alert(`تم إنشاء حسابك كـ${m==="affiliate"?"مسوق":"تاجر"} بنجاح!

⏳ حسابك قيد المراجعة من قبل الإدارة
📧 سيتم إخطارك عبر البريد الإلكتروني فور الموافقة
⚠️ لن تتمكن من الوصول لكامل المميزات حتى تتم الموافقة على حسابك`),W("/login")):W("/")}catch(V){u(V instanceof Error?V.message:"حدث خطأ أثناء إنشاء الحساب"),alert("حدث خطأ في إنشاء الحساب")}finally{b(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-100 via-pink-50 to-orange-100 dark:from-neutral-900 dark:via-purple-950 dark:to-neutral-900 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-10 scale-150",children:e.jsx("div",{className:"w-[600px] h-[600px]",children:e.jsx(Pt,{size:"large",interactive:!1,autoRotate:!0,showParticles:!1})})}),e.jsxs("div",{className:"max-w-md w-full space-y-8 relative z-10",children:[e.jsx($e,{animation:"fadeIn",duration:1,children:e.jsxs("div",{className:"text-center mb-2",children:[e.jsxs(f,{to:"/",className:"inline-flex items-center gap-2 text-4xl font-extrabold bg-gradient-to-r from-primary via-purple-600 to-secondary bg-clip-text text-transparent drop-shadow-lg",children:[e.jsx(gt,{className:"w-10 h-10 text-purple-600"}),"إيجي جو"]}),e.jsx("h2",{className:"mt-4 text-2xl font-bold bg-gradient-to-r from-purple-600 via-pink-500 to-orange-500 bg-clip-text text-transparent",children:"أهلاً بك في عالم التسوق الذكي"}),e.jsx("p",{className:"mt-2 text-base text-gray-700 dark:text-gray-200",children:"أنشئ حسابك الجديد وابدأ رحلتك معنا الآن"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["أو",e.jsx(f,{to:"/login",className:"font-medium text-primary hover:text-primary/80 transition-colors mx-1",children:"تسجيل الدخول لحساب موجود"})]})]})}),g&&e.jsx("div",{className:"bg-gradient-to-r from-red-100 to-red-200 border-2 border-red-400 text-red-700 px-4 py-3 rounded-lg text-center text-sm font-medium shadow-lg animate-pulse",children:g}),e.jsx($e,{animation:"slideUp",delay:.2,children:e.jsxs(Z,{className:"shadow-2xl border-2 border-purple-200 dark:border-purple-800 backdrop-blur-sm bg-white/90 dark:bg-neutral-900/90",children:[e.jsxs(we,{className:"bg-gradient-to-r from-purple-50 via-pink-50 to-orange-50 dark:from-neutral-800 dark:to-neutral-800",children:[e.jsx(ve,{className:"text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"انضم إلى إيجي جو"}),e.jsx(Rt,{className:"text-gray-700 dark:text-gray-200",children:"استمتع بتجربة تسوق احترافية وميزات حصرية"})]}),e.jsxs(te,{children:[e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"name",children:"الاسم الكامل"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(kt,{className:"h-5 w-5 text-gray-400"})}),e.jsx(ie,{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,placeholder:"أدخل اسمك الكامل",value:i.name,onChange:T("name"),className:"pr-10"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"email",children:"البريد الإلكتروني"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(St,{className:"h-5 w-5 text-gray-400"})}),e.jsx(ie,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"أدخل بريدك الإلكتروني",value:i.email,onChange:T("email"),className:"pr-10"})]})]}),e.jsxs("div",{children:[e.jsxs(ee,{htmlFor:"phone",children:["رقم الهاتف ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx(ie,{id:"phone",name:"phone",type:"tel",autoComplete:"tel",required:!0,placeholder:"مثال: 01012345678",value:i.phone,onChange:T("phone"),className:"pr-10"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"سيتم استخدام هذا الرقم للتواصل معك"})]}),e.jsxs("div",{className:"flex items-start space-x-2 rtl:space-x-reverse",children:[e.jsx(Ze,{id:"whatsapp-available",checked:p,onCheckedChange:D=>o(!!D)}),e.jsxs("div",{className:"grid gap-1.5 leading-none",children:[e.jsxs(ee,{htmlFor:"whatsapp-available",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:["هذا الرقم متاح على WhatsApp أو للاتصال ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"تأكد من إمكانية التواصل معك عبر هذا الرقم"})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"alternativePhone",children:"رقم هاتف بديل (اختياري)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx(ie,{id:"alternativePhone",name:"alternativePhone",type:"tel",autoComplete:"tel",placeholder:"رقم إضافي للتواصل (اختياري)",value:i.alternativePhone,onChange:T("alternativePhone"),className:"pr-10"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"يمكنك إضافة رقم آخر للتواصل معك"})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"password",children:"كلمة المرور"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(Je,{className:"h-5 w-5 text-gray-400"})}),e.jsx(ie,{id:"password",name:"password",type:r?"text":"password",autoComplete:"new-password",required:!0,placeholder:"أدخل كلمة المرور (6 أحرف على الأقل)",value:i.password,onChange:T("password"),className:"pr-10 pl-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 left-0 pl-3 flex items-center",onClick:()=>t(!r),children:r?e.jsx(jt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Ye,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"confirmPassword",children:"تأكيد كلمة المرور"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(Je,{className:"h-5 w-5 text-gray-400"})}),e.jsx(ie,{id:"confirmPassword",name:"confirmPassword",type:s?"text":"password",autoComplete:"new-password",required:!0,placeholder:"أعد إدخال كلمة المرور",value:i.confirmPassword,onChange:T("confirmPassword"),className:"pr-10 pl-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 left-0 pl-3 flex items-center",onClick:()=>a(!s),children:s?e.jsx(jt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(Ye,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{children:[e.jsx(ee,{htmlFor:"referralCode",children:"كود الإحالة (اختياري)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(gt,{className:"h-5 w-5 text-gray-400"})}),e.jsx(ie,{id:"referralCode",name:"referralCode",type:"text",placeholder:"أدخل كود الإحالة إن وجد",value:i.referralCode,onChange:D=>{T("referralCode")(D),j(D.target.value)},className:"pr-10"})]}),x&&e.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:["✓ تمت الإحالة من: ",x.name]}),i.referralCode&&!x&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"كود الإحالة غير صحيح"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"إذا كان لديك كود إحالة من أحد المسوقين، أدخله هنا"})]}),e.jsxs("div",{children:[e.jsx(ee,{children:"نوع الحساب"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-2",children:[e.jsxs("div",{className:`flex items-center space-x-3 rtl:space-x-reverse p-4 rounded-lg border-2 cursor-pointer transition-all ${m==="customer"?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>d("customer"),children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${m==="customer"?"border-primary":"border-gray-300"}`,children:m==="customer"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"🛒 عميل"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"تسوق واشتري المنتجات"})]})]}),e.jsxs("div",{className:`flex items-center space-x-3 rtl:space-x-reverse p-4 rounded-lg border-2 cursor-pointer transition-all ${m==="affiliate"?"border-brand-orange bg-brand-orange/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>d("affiliate"),children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${m==="affiliate"?"border-brand-orange":"border-gray-300"}`,children:m==="affiliate"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-brand-orange"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-brand-orange",children:"💰 مسوق بالعمولة"}),e.jsx("p",{className:"text-xs text-brand-orange/80 mt-0.5",children:"اكسب عمولة على كل عملية بيع"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1 font-medium",children:"⏳ يتطلب موافقة الإدارة"})]})]}),e.jsxs("div",{className:`flex items-center space-x-3 rtl:space-x-reverse p-4 rounded-lg border-2 cursor-pointer transition-all ${m==="merchant"?"border-brand-purple bg-brand-purple/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>d("merchant"),children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${m==="merchant"?"border-brand-purple":"border-gray-300"}`,children:m==="merchant"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-brand-purple"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-brand-purple",children:"🏪 تاجر"}),e.jsx("p",{className:"text-xs text-brand-purple/80 mt-0.5",children:"اعرض وبع منتجاتك على المنصة"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1 font-medium",children:"⏳ يتطلب موافقة الإدارة"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Ze,{id:"accept-terms",checked:N,onCheckedChange:D=>h(!!D),required:!0}),e.jsxs(ee,{htmlFor:"accept-terms",className:"text-sm cursor-pointer",children:["أوافق على"," ",e.jsx(f,{to:"/terms",className:"text-primary hover:text-primary/80 underline",children:"شروط الخدمة"})," ","و"," ",e.jsx(f,{to:"/privacy",className:"text-primary hover:text-primary/80 underline",children:"سياسة الخصوصية"})]})]}),e.jsx(R,{type:"submit",className:"w-full bg-gradient-to-r from-brand-orange to-brand-purple text-white font-bold py-3 text-lg rounded-lg shadow-md hover:from-brand-purple hover:to-brand-orange transition-all duration-200",disabled:n||!N,children:n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري إنشاء الحساب..."]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-base font-bold",children:"إنشاء الحساب"}),e.jsx(_e,{className:"h-5 w-5 rtl:rotate-180"})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(ot,{})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-background text-muted-foreground",children:"أو يمكنك التسجيل عبر"})})]})}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs(R,{type:"button",variant:"outline",className:"w-full border-gray-300 hover:border-primary",onClick:()=>{console.log("التسجيل بـ Google")},children:[e.jsxs("svg",{className:"w-5 h-5 ml-2 rtl:ml-0 rtl:mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"التسجيل بحساب Google"]}),e.jsxs(R,{type:"button",variant:"outline",className:"w-full border-gray-300 hover:border-primary",onClick:()=>{console.log("التسجيل بـ Facebook")},children:[e.jsx("svg",{className:"w-5 h-5 ml-2 rtl:ml-0 rtl:mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"التسجيل بحساب Facebook"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-6",children:["جميع بياناتك محمية وفق ",e.jsx(f,{to:"/privacy",className:"underline text-primary",children:"سياسة الخصوصية"})," الخاصة بنا."]})]})]})})]})]})}const Oi=()=>{const r=nt();return l.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",r.pathname)},[r.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},$i=()=>e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-purple-50 to-orange-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Me,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})});function v(r,t=e.jsx($i,{})){const s=l.lazy(r);return a=>e.jsx(l.Suspense,{fallback:t,children:e.jsx(s,{...a})})}const es=v(()=>w(()=>import("./Products-lD_IzrUQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),Li=v(()=>w(()=>import("./ProductDetail-BH7huKRs.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,8,14,15,16,17,12]))),Mi=v(()=>w(()=>import("./Cart-BsF0y-Y3.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,19,12]))),Fi=v(()=>w(()=>import("./Checkout-DpRILa5s.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,8,21,15,17,12]))),Vi=v(()=>w(()=>import("./Wishlist-BYkeMOGS.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,23,12]))),ts=v(()=>w(()=>import("./MyOrders-CL-g798g.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,8,12]))),qi=v(()=>w(()=>import("./OrderTracking-CAWWysek.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,23,12])));v(()=>w(()=>import("./OrderSuccess-PMN6-Qye.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,12])));const ss=v(()=>w(()=>import("./CustomerAccount-C9Eg0vRQ.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,14,12]))),zi=v(()=>w(()=>import("./Affiliate-cCxYkCQj.js"),__vite__mapDeps([28,1,2,3,4,5,6,7,8,12]))),Ui=v(()=>w(()=>import("./AffiliateDashboard-sLhNuW4S.js"),__vite__mapDeps([29,1,2,3,4,5,6,7,8,10,11,14,12,17,30,9])));v(()=>w(()=>import("./EnhancedAffiliateDashboard-qkeBmv8t.js"),__vite__mapDeps([31,1,2,3,4,5,6,7,8,32,33,12,17,14])));const Bi=v(()=>w(()=>import("./AffiliateAnalytics-DnzNxcEr.js"),__vite__mapDeps([34,1,2,3,4,5,6,7,8,12,14]))),rs=v(()=>w(()=>import("./AffiliateLinkManager-Cutu2-iD.js"),__vite__mapDeps([35,1,2,3,4,5,6,7,8,12,9,30,14]))),Wi=v(()=>w(()=>import("./AffiliateCreatives-BNBKu1BK.js"),__vite__mapDeps([36,1,2,3,4,5,6,7,8,12,9,14,15]))),Gi=v(()=>w(()=>import("./AffiliateCoupons-C4wbyDL8.js"),__vite__mapDeps([37,1,2,3,4,5,6,7,8,12,9]))),Hi=v(()=>w(()=>import("./AffiliateBanners-BO8f3IWr.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,8,12]))),Qi=v(()=>w(()=>import("./AffiliateMarketingTips-C6srjv4M.js"),__vite__mapDeps([39,1,2,3,4,5,6,7,8,12]))),Ki=v(()=>w(()=>import("./AffiliateCourses-COMqE1mo.js"),__vite__mapDeps([40,1,2,3,4,5,6,7,8,17,12]))),Ji=v(()=>w(()=>import("./AffiliateWithdrawPage-D2MnCsGH.js"),__vite__mapDeps([41,1,2,3,4,5,6,7,8,33,12]))),Yi=v(()=>w(()=>import("./AffiliateResourcesPage-9Uq-OBTP.js"),__vite__mapDeps([42,1,2,3,4,5,6,7,8,12]))),Xi=v(()=>w(()=>import("./AffiliateSupportPage-Draz59KZ.js"),__vite__mapDeps([43,1,2,3,4,5,6,7,8,15,12]))),Zi=v(()=>w(()=>import("./AffiliateReferralSystem-CH4ifCSn.js"),__vite__mapDeps([44,1,2,3,4,5,6,7,8,14,12]))),en=v(()=>w(()=>import("./Merchant-Kd2hkUKv.js"),__vite__mapDeps([45,1,2,3,4,5,6,7,8,12]))),tn=v(()=>w(()=>import("./MerchantDashboard-dcWW890c.js"),__vite__mapDeps([46,1,2,3,4,5,6,7,8,17,47,16,12,32,30,9]))),sn=v(()=>w(()=>import("./MerchantProducts-CUSYe9Ci.js"),__vite__mapDeps([48,49,1,2,3,4,5,6,7,8,47,16,12,15,30,9,50])));v(()=>w(()=>import("./MerchantOrders-BA403pBq.js"),__vite__mapDeps([51,52,1,2,3,4,5,6,7,8,47,16,12,30,9,50])));v(()=>w(()=>import("./MerchantAnalytics-ByQLS0y2.js"),__vite__mapDeps([53,54,1,2,3,4,5,6,7,8,10,11,12])));const as=v(()=>w(()=>import("./AdminDashboard-q4cXPAeS.js"),__vite__mapDeps([55,1,2,3,4,5,6,7,8,47,16,12,50])));v(()=>w(()=>import("./EnhancedAdminDashboard-LrtpB7Uu.js"),__vite__mapDeps([56,1,2,3,4,5,6,7,8,17,14,10,11,47,16,12,50])));const is=v(()=>w(()=>import("./AdminUsers-BwgHs_0c.js"),__vite__mapDeps([57,1,2,3,4,5,6,7,8,47,16,12,9]))),rn=v(()=>w(()=>import("./AdminCouponsManager-CxyBvTRI.js"),__vite__mapDeps([58,1,2,3,4,5,6,7,8,30,9,19,12,47,16]))),an=v(()=>w(()=>import("./AdminProducts-CyUTWmbI.js"),__vite__mapDeps([49,1,2,3,4,5,6,7,8,47,16,12,15,30,9,50]))),nn=v(()=>w(()=>import("./AdminOrders-i0sdAhTM.js"),__vite__mapDeps([52,1,2,3,4,5,6,7,8,47,16,12,30,9,50]))),on=v(()=>w(()=>import("./AdminAnalytics-ihk_KNF0.js"),__vite__mapDeps([54,1,2,3,4,5,6,7,8,10,11,12]))),ln=v(()=>w(()=>import("./AdminCategories-iuyz1t3J.js"),__vite__mapDeps([59,1,2,3,4,5,6,7,8,47,16,12,15,30,50]))),cn=v(()=>w(()=>import("./AdminCommissions-B9xINy4f.js"),__vite__mapDeps([60,1,2,3,4,5,6,7,8,47,16,12,30,9,50]))),dn=v(()=>w(()=>import("./AdminPendingAccounts-Bsgu7ub0.js"),__vite__mapDeps([61,1,2,3,4,5,6,7,8,10,11,12,15,9,30]))),mn=v(()=>w(()=>import("./AdminUserManagement-oERro36T.js"),__vite__mapDeps([62,1,2,3,4,5,6,7,8,10,11,12,30,9]))),un=v(()=>w(()=>import("./AdminUserManagementFixed-zkNMbeJQ.js"),__vite__mapDeps([63,1,2,3,4,5,6,7,8,12]))),hn=v(()=>w(()=>import("./AdminProductsAdvanced-BOjL9VTV.js"),__vite__mapDeps([64,1,2,3,4,5,6,7,8,11,17,30,9,12]))),pn=v(()=>w(()=>import("./AdminSettingsPage-DugIP7ox.js"),__vite__mapDeps([65,1,2,3,4,5,6,7,8,66,14,12]))),xn=v(()=>w(()=>import("./AdminShipping-DyE2IQK3.js"),__vite__mapDeps([67,1,2,3,4,5,6,7,8,9,30,17,12]))),fn=v(()=>w(()=>import("./AdminAdvancedSettings-BFUUNlwc.js"),__vite__mapDeps([68,1,2,3,4,5,6,7,8,9,66,14,12]))),gn=v(()=>w(()=>import("./AdminNotifications-BZv0lZXW.js"),__vite__mapDeps([69,1,2,3,4,5,6,7,8,47,16,12,15,14,21,9,30])));v(()=>w(()=>import("./AdminCoupons-BnIn9ucq.js"),__vite__mapDeps([70,1,2,3,4,5,6,7,8,9,30,12])));const jn=v(()=>w(()=>import("./AdminAIDashboard-B-hOzWj7.js"),__vite__mapDeps([71,1,2,3,4,5,6,7,8,17,14,72,12]))),yn=v(()=>w(()=>import("./ProductAIDemo-BSzovg8y.js"),__vite__mapDeps([73,1,2,3,4,5,6,7,8,15,14,72,74,9,12]))),wn=v(()=>w(()=>import("./AboutPage-ByJQKOi0.js"),__vite__mapDeps([75,1,2,3,4,5,6,7,8,12]))),vn=v(()=>w(()=>import("./ContactPage-Bm6P11PR.js"),__vite__mapDeps([76,1,2,3,4,5,6,7,8,15,12]))),bn=v(()=>w(()=>import("./FAQPage-B5yOzsF7.js"),__vite__mapDeps([77,1,2,3,4,5,6,7,8,74,12]))),Nn=v(()=>w(()=>import("./PrivacyPolicy-DfZ0ngsx.js"),__vite__mapDeps([78,1,2,3,4,5,6,7,8,12]))),_n=v(()=>w(()=>import("./TermsOfService-BNO916up.js"),__vite__mapDeps([79,1,2,3,4,5,6,7,8,12]))),En=v(()=>w(()=>import("./ReturnPolicy-DYx-ofX8.js"),__vite__mapDeps([80,1,2,3,4,5,6,7,8,12]))),An=v(()=>w(()=>import("./ShippingPage-DgrUQmJK.js"),__vite__mapDeps([81,1,2,3,4,5,6,7,8,12]))),ns=v(()=>w(()=>import("./Categories-Brs8XG5c.js"),__vite__mapDeps([82,1,2,3,4,5,6,7,8,10,11,12])));v(()=>w(()=>import("./CategoryPage-BqYwLg7c.js"),__vite__mapDeps([83,1,2,3,4,5,6,7,8,12])));const kn=v(()=>w(()=>import("./DealsPage-CVQYpFHW.js"),__vite__mapDeps([84,1,2,3,4,5,6,7,8,12]))),Cn=v(()=>w(()=>import("./ProductLanding-cT-Uw-BO.js"),__vite__mapDeps([85,1,2,3,4,5,6,7,8,12,10,11,23]))),Sn=v(()=>w(()=>import("./ForgotPassword-CB7uTWiG.js"),__vite__mapDeps([86,1,2,3,4,5,6,7,8,12]))),In=v(()=>w(()=>import("./SettingsPage-BuHWruo3.js"),__vite__mapDeps([87,1,2,3,4,5,6,7,8,21,12]))),Rn=v(()=>w(()=>import("./UpdateAffiliatePrefs-CCZCAniS.js"),__vite__mapDeps([88,1,2,3,4,5,6,7,8,12]))),os=v(()=>w(()=>import("./VendoorImport-NbFQgecW.js"),__vite__mapDeps([89,1,2,3,4,5,6,7,8,14,12]))),Pn=v(()=>w(()=>import("./IntermediaryDashboard-b6cjUXp2.js"),__vite__mapDeps([90,1,2,3,4,5,6,7,8,12,30,9,15,14])));class Tn extends l.Component{constructor(s){super(s);oe(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});oe(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s,errorInfo:null}}componentDidCatch(s,a){console.error("Error caught by ErrorBoundary:",s,a),this.setState({error:s,errorInfo:a})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-muted",children:e.jsxs(Z,{className:"max-w-2xl w-full",children:[e.jsx(we,{children:e.jsxs("div",{className:"flex items-center gap-3 text-destructive",children:[e.jsx(Is,{className:"h-8 w-8"}),e.jsx(ve,{className:"text-2xl",children:"حدث خطأ غير متوقع"})]})}),e.jsxs(te,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-muted-foreground",children:"نعتذر عن المشكلة. حدث خطأ أثناء تحميل هذه الصفحة."}),!1]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(R,{onClick:this.handleReset,className:"flex-1",variant:"outline",children:[e.jsx(Ct,{className:"ml-2 h-4 w-4"}),"إعادة المحاولة"]}),e.jsxs(R,{onClick:this.handleGoHome,className:"flex-1",children:[e.jsx(Ur,{className:"ml-2 h-4 w-4"}),"العودة للرئيسية"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground text-center pt-4 border-t",children:["إذا استمرت المشكلة، يرجى"," ",e.jsx("a",{href:"/contact",className:"text-primary hover:underline",children:"التواصل مع الدعم الفني"})]})]})]})}):this.props.children}}function io({error:r,onRetry:t,title:s="حدث خطأ"}){const a=typeof r=="string"?r:r.message;return e.jsx(Z,{className:"border-destructive",children:e.jsx(te,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Is,{className:"h-5 w-5 text-destructive mt-0.5"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h3",{className:"font-semibold text-destructive",children:s}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a}),t&&e.jsxs(R,{onClick:t,size:"sm",variant:"outline",className:"mt-3",children:[e.jsx(Ct,{className:"ml-2 h-3 w-3"}),"إعادة المحاولة"]})]})]})})})}const je=k.databaseId;async function Dn(r){try{const t=await A.getDocument(je,k.collections.users,r),s=await A.listDocuments(je,k.collections.orders,[I.equal("userId",r),I.limit(10),I.orderDesc("$createdAt")]);let a=`معلومات المستخدم:
`;if(a+=`- الاسم: ${t.name}
`,a+=`- عدد الطلبات: ${s.total}
`,t.isAffiliate){const i=await A.listDocuments(je,"commissions",[I.equal("affiliateId",r),I.limit(100)]),c=i.documents.reduce((d,N)=>d+(N.amount||0),0),m=i.documents.filter(d=>d.status==="pending").reduce((d,N)=>d+(N.amount||0),0);a+=`- مسوق بالعمولة: نعم
`,a+=`- إجمالي العمولات: ${c} جنيه
`,a+=`- العمولات المعلقة: ${m} جنيه
`,a+=`- عدد الإحالات: ${i.total}
`}return s.total>0&&(a+=`
آخر الطلبات:
`,s.documents.slice(0,3).forEach((i,c)=>{a+=`${c+1}. طلب ${i.orderNumber} - ${i.status} - ${i.totalAmount} جنيه
`})),a}catch(t){return console.error("Error building user context:",t),"لا توجد بيانات كافية حالياً."}}async function On(){try{const[r,t,s,a]=await Promise.all([A.listDocuments(je,k.collections.users,[I.limit(1e3)]),A.listDocuments(je,k.collections.orders,[I.limit(1e3)]),A.listDocuments(je,k.collections.products,[I.limit(1e3)]),A.listDocuments(je,"commissions",[I.limit(1e3)])]),i=t.documents.reduce((j,T)=>T.status==="delivered"?j+(T.totalAmount||0):j,0),c=t.documents.filter(j=>j.status==="pending"||j.status==="processing").length,m=r.documents.filter(j=>j.isAffiliate),d=a.documents.filter(j=>j.status==="paid").reduce((j,T)=>j+(T.amount||0),0),N=new Map;t.documents.forEach(j=>{var T;(T=j.items)==null||T.forEach(F=>{const D=N.get(F.productId)||{count:0,revenue:0,name:F.name};D.count+=F.quantity||1,D.revenue+=(F.price||0)*(F.quantity||1),N.set(F.productId,D)})});const h=Array.from(N.entries()).sort((j,T)=>T[1].revenue-j[1].revenue).slice(0,5),p=new Map;a.documents.forEach(j=>{const T=p.get(j.affiliateId)||0;p.set(j.affiliateId,T+(j.amount||0))});const o=Array.from(p.entries()).sort((j,T)=>T[1]-j[1]).slice(0,5);let n=`📊 تقرير شامل عن الموقع:

`;n+=`📈 إحصائيات عامة:
`,n+=`- إجمالي المستخدمين: ${r.total}
`,n+=`- المسوقين بالعمولة: ${m.length}
`,n+=`- إجمالي الطلبات: ${t.total}
`,n+=`- الطلبات المعلقة: ${c}
`,n+=`- إجمالي الإيرادات: ${i.toFixed(2)} جنيه
`,n+=`- إجمالي العمولات المدفوعة: ${d.toFixed(2)} جنيه

`,n+=`🏆 أفضل المنتجات:
`,h.forEach(([j,T],F)=>{n+=`${F+1}. ${T.name} - ${T.count} مبيعة - ${T.revenue.toFixed(2)} جنيه
`}),n+=`
💼 أفضل المسوقين:
`;for(let j=0;j<Math.min(o.length,5);j++){const[T,F]=o[j],D=r.documents.find(V=>V.$id===T);n+=`${j+1}. ${(D==null?void 0:D.name)||"مستخدم"} - ${F.toFixed(2)} جنيه عمولات
`}n+=`
📦 حالة المخزون:
`;const b=s.documents.filter(j=>(j.stock||0)<10);n+=`- منتجات منخفضة المخزون: ${b.length}
`,b.length>0&&(n+=`المنتجات:
`,b.slice(0,5).forEach(j=>{n+=`  • ${j.name} - ${j.stock||0} قطعة
`}));const g=new Date,u=new Date(g.getTime()-30*24*60*60*1e3),x=new Date(g.getTime()-60*24*60*60*1e3),_=t.documents.filter(j=>new Date(j.$createdAt)>u),P=t.documents.filter(j=>{const T=new Date(j.$createdAt);return T>x&&T<=u}),L=_.reduce((j,T)=>j+(T.totalAmount||0),0),W=P.reduce((j,T)=>j+(T.totalAmount||0),0),q=W>0?((L-W)/W*100).toFixed(1):"∞";return n+=`
📊 النمو (آخر 30 يوم):
`,n+=`- الطلبات: ${_.length} (السابق: ${P.length})
`,n+=`- الإيرادات: ${L.toFixed(2)} جنيه (السابق: ${W.toFixed(2)} جنيه)
`,n+=`- معدل النمو: ${q}%
`,n}catch(r){return console.error("Error building admin context:",r),"حدث خطأ في جمع بيانات الموقع."}}const $n=new Rs().setEndpoint("https://fra.cloud.appwrite.io/v1").setProject("68d8b9db00134c41e7c8"),Ln=new Ps($n);function Mn(){var V;const[r,t]=l.useState(!1),[s,a]=l.useState([]),[i,c]=l.useState(""),[m,d]=l.useState(!1),[N,h]=l.useState(!1),[p,o]=l.useState(null),[n,b]=l.useState(!1),g=l.useRef(null),{user:u}=be(),x=l.useRef([]),[_,P]=l.useState(null);l.useEffect(()=>{r&&u&&!_&&L()},[r,u]);const L=async()=>{var E;if(u){b(!0);try{const ae=((E=u.labels)==null?void 0:E.includes("admin"))||u.email==="admin@egygo.com";let ne;ae?ne=await On():ne=await Dn(u.$id),P(ne),console.log("✅ Context loaded:",ne.substring(0,100)+"...")}catch(ae){console.error("Error loading context:",ae)}finally{b(!1)}}};l.useEffect(()=>{if(console.log("🔍 useEffect triggered - initializing chat..."),typeof window>"u"){console.log("⚠️ Server-side render detected, skipping");return}if(x.current.length>0){console.log("✅ Chat already initialized, skipping");return}console.log("� Initializing chat history with system prompt...");try{const E=`أنت مساعد ذكي لموقع إيجي جو للتسوق الإلكتروني في مصر. 

معلومات عن الموقع:
- موقع تسوق إلكتروني مصري
- يبيع منتجات متنوعة بأسعار تنافسية
- شحن لجميع أنحاء مصر (مجاني فوق 500 جنيه)
- دفع عند الاستلام متاح
- برنامج تسويق بالعمولة (لحد 25%)
- برنامج للتجار لبيع منتجاتهم
- ضمان على المنتجات
- إرجاع مجاني خلال 14 يوم

قدراتك الخاصة:
✅ يمكنك رؤية بيانات المستخدم الكاملة (طلبات، عمولات، إحصائيات)
✅ يمكنك عمل تقارير شاملة للأدمن عن أداء الموقع
✅ يمكنك تحليل البيانات وإعطاء نصائح مخصصة
✅ يمكنك اقتراح خطط تطوير بناءً على نشاط المستخدم

الأوامر الخاصة:
• "راجع حسابي" → أعرض تحليل شامل لحساب المستخدم
• "اعمل تقرير" → أنشئ تقرير مفصل للأدمن عن الموقع
• "نصائح" → أعطي نصائح ذكية بناءً على البيانات
• "جدول تطوير" → أقترح خطة عمل مخصصة

تعليمات مهمة:
1. تحدث باللهجة المصرية الطبيعية (مثل: "ازيك"، "دلوقتي"، "عشان"، "لحد")
2. استخدم البيانات المتاحة لك لتقديم إجابات مخصصة ودقيقة
3. عند كتابة تقارير، نظمها بعناوين واضحة وأرقام محددة
4. أعطي توصيات قابلة للتنفيذ (actionable recommendations)
5. استخدم emojis مصرية (🇪🇬 ❤️ 🛍️ 💰 📊 📈 🏆)
6. عند رؤية بيانات المستخدم في [بيانات المستخدم]، حللها واستخدمها في إجابتك`;x.current=[{role:"system",content:E}],console.log("💬 Chat history initialized, length:",x.current.length),h(!0),o(null),console.log("✅ Chat initialization complete!")}catch(E){console.error("❌ Failed to initialize chat:",E),o("init-failed")}},[]),l.useEffect(()=>{g.current&&(g.current.scrollTop=g.current.scrollHeight)},[s]);const W=[{label:"📊 راجع حسابي",value:"راجع حسابي وقولي إيه الإحصائيات بتاعتي"},{label:"💡 نصائح ذكية",value:"اديني نصائح ذكية بناءً على نشاطي"},{label:"📈 جدول تطوير",value:"اعمل لي جدول تطوير مخصص"},{label:"🎯 اقتراحات",value:"اقترح علي حاجات تساعدني أحسن أدائي"}],q=[{label:"📊 تقرير شامل",value:"اعمل تقرير شامل عن أداء الموقع"},{label:"🏆 أفضل المسوقين",value:"اعرض أفضل 10 مسوقين بالعمولة"},{label:"📦 حالة المخزون",value:"راجع حالة المخزون والمنتجات المنخفضة"},{label:"💰 تحليل الإيرادات",value:"حلل الإيرادات وقولي فين المشاكل"}],j=E=>{c(E),setTimeout(()=>{const ae=document.querySelector("[data-send-button]");ae==null||ae.click()},100)},T=()=>{if(!u)return[{icon:e.jsx(kt,{className:"h-5 w-5"}),title:"سجل دخولك الآن",message:"سجل دخول عشان تقدر تتابع طلباتك وتستفيد من كل المميزات",action:{label:"تسجيل الدخول",link:"/login"}}];const E=[];return u.isAffiliate&&E.push({icon:e.jsx(me,{className:"h-5 w-5 text-orange-600"}),title:"زود أرباحك من التسويق",message:"ركز على المنتجات اللي فيها عمولة أعلى وشاركها على السوشيال ميديا بشكل منتظم",action:{label:"شوف أفضل المنتجات",link:"/affiliate/dashboard"}},{icon:e.jsx(me,{className:"h-5 w-5 text-orange-600"}),title:"استخدم الأدوات التسويقية",message:"عندنا بنرات وصور جاهزة تقدر تستخدمها في حملاتك التسويقية",action:{label:"شوف الأدوات",link:"/affiliate/creatives"}}),u.role==="merchant"&&E.push({icon:e.jsx(ge,{className:"h-5 w-5 text-purple-600"}),title:"حسن صور منتجاتك",message:"المنتجات اللي فيها صور واضحة بتبيع أكتر بنسبة 70%. حط صور احترافية لمنتجاتك",action:{label:"إدارة المنتجات",link:"/admin/products"}},{icon:e.jsx(ge,{className:"h-5 w-5 text-purple-600"}),title:"تابع أداء مبيعاتك",message:"راجع تقارير المبيعات بتاعتك واعرف أكتر المنتجات مبيعاً",action:{label:"شوف التقارير",link:"/merchant/dashboard"}}),u.role==="admin"&&E.push({icon:e.jsx(fe,{className:"h-5 w-5 text-primary"}),title:"راجع الطلبات الجديدة",message:"فيه طلبات محتاجة مراجعة. اتأكد من معالجتها بسرعة عشان رضا العملاء",action:{label:"الطلبات",link:"/admin/orders"}},{icon:e.jsx(fe,{className:"h-5 w-5 text-primary"}),title:"تحليل أداء الموقع",message:"راجع إحصائيات الموقع واعرف المنتجات الأكتر مبيعاً والأقسام الأكتر زيارة",action:{label:"لوحة التحكم",link:"/admin"}}),E.push({icon:e.jsx(zt,{className:"h-5 w-5 text-blue-600"}),title:"محتاج مساعدة؟",message:"أنا هنا عشان أساعدك! اسألني أي حاجة عن الموقع أو منتجاتنا"}),E};l.useEffect(()=>{if(r&&s.length===0){const E=u?`أهلاً ${u.name}! 👋

أنا مساعدك الذكي في إيجي جو. ازيك النهاردة؟ محتاج مساعدة في حاجة معينة؟`:`أهلاً بيك في إيجي جو! 👋

أنا المساعد الذكي بتاعنا. ممكن أساعدك في إيه النهاردة؟`;a([{id:"1",type:"bot",content:E,timestamp:new Date}]),setTimeout(()=>{const ne=T().slice(0,2).map(G=>`💡 ${G.title}
${G.message}`).join(`

`);a(G=>[...G,{id:String(G.length+1),type:"bot",content:ne,timestamp:new Date}])},1e3)}},[r,u]);const F=async()=>{var ne,G,Be,Se,We,Ie;if(console.log("📤 handleSendMessage called"),!i.trim()){console.log("⚠️ Empty input, aborting");return}const E=i;console.log("📝 User input:",E);const ae={id:String(s.length+1),type:"user",content:E,timestamp:new Date};a(S=>[...S,ae]),c(""),d(!0);try{console.log("✅ Using Appwrite Functions SDK...");const M=["راجع","شوف بياناتي","تقرير","نصائح","نصيحة","جدول تطوير","حسابي"].some(ue=>E.includes(ue));let B=E;M&&_?B=`${E}

[بيانات المستخدم]:
${_}`:M&&!_&&(await L(),_&&(B=`${E}

[بيانات المستخدم]:
${_}`)),x.current.push({role:"user",content:B});const Y=await Ln.createExecution("openai-chat",JSON.stringify({messages:x.current}),!1,"/",na.POST),ce=JSON.parse(Y.responseBody).message||"عذراً، ما قدرتش أفهم. جرب تاني 🙏";x.current.push({role:"assistant",content:ce});const Q={id:String(s.length+2),type:"bot",content:ce,timestamp:new Date};a(ue=>[...ue,Q])}catch(S){console.error("OpenAI API Error:",S);let M="عذراً، حصل خطأ في الاتصال. جرب تاني بعد شوية 🙏";(ne=S==null?void 0:S.message)!=null&&ne.includes("API key")||(G=S==null?void 0:S.message)!=null&&G.includes("401")?M="في مشكلة في إعدادات الـ API. يرجى التواصل مع الدعم 🔑":(Be=S==null?void 0:S.message)!=null&&Be.includes("quota")||(Se=S==null?void 0:S.message)!=null&&Se.includes("429")?M="وصلنا للحد الأقصى من الطلبات. جرب تاني بعد دقيقة ⏱️":((We=S==null?void 0:S.message)!=null&&We.includes("network")||(Ie=S==null?void 0:S.message)!=null&&Ie.includes("fetch"))&&(M="في مشكلة في الاتصال بالإنترنت. تأكد من اتصالك وجرب تاني 🌐");const B={id:String(s.length+2),type:"bot",content:M,timestamp:new Date};a(Y=>[...Y,B])}finally{d(!1)}},D=()=>u?u.role==="admin"?e.jsxs(se,{variant:"default",className:"bg-primary",children:[e.jsx(fe,{className:"h-3 w-3 mr-1"}),"مدير"]}):u.role==="merchant"?e.jsxs(se,{className:"bg-purple-600",children:[e.jsx(ge,{className:"h-3 w-3 mr-1"}),"تاجر"]}):u.isAffiliate?e.jsxs(se,{className:"bg-orange-600",children:[e.jsx(me,{className:"h-3 w-3 mr-1"}),"مسوق"]}):null:null;return e.jsxs(e.Fragment,{children:[!r&&e.jsx(R,{onClick:()=>t(!0),className:"fixed bottom-6 left-6 h-14 w-14 rounded-full shadow-2xl z-50 hover:scale-110 transition-transform",size:"icon",children:e.jsx(Br,{className:"h-6 w-6"})}),r&&e.jsxs(Z,{className:"fixed bottom-6 left-6 w-96 h-[600px] shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-primary text-primary-foreground rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-foreground/20 flex items-center justify-center",children:e.jsx(zt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"مساعد إيجي جو الذكي"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs opacity-90",children:"متاح دلوقتي • OpenAI"}),D()]})]})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"hover:bg-primary-foreground/20 text-primary-foreground",children:e.jsx(Et,{className:"h-5 w-5"})})]}),e.jsx(It,{className:"flex-1 p-4",ref:g,children:e.jsxs("div",{className:"space-y-4",children:[s.map(E=>e.jsx("div",{className:`flex ${E.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${E.type==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:E.content}),e.jsx("span",{className:"text-xs opacity-70 mt-1 block",children:E.timestamp.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})})]})},E.id)),m&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(Me,{className:"h-4 w-4 animate-spin text-primary"}),e.jsx("span",{className:"text-xs text-muted-foreground mr-2",children:"جاري الكتابة..."})]})})})]})}),e.jsxs("div",{className:"p-4 border-t space-y-3",children:[s.length===0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:"إجراءات سريعة:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(u&&((V=u.labels)!=null&&V.includes("admin"))?q:W).map(E=>e.jsx(R,{variant:"outline",size:"sm",onClick:()=>j(E.value),disabled:m||n,className:"text-xs h-auto py-2 px-2 justify-start",children:E.label},E.label))})]}),n&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Me,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"جاري تحميل بياناتك..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ie,{placeholder:"اكتب رسالتك هنا...",value:i,onChange:E=>c(E.target.value),onKeyPress:E=>E.key==="Enter"&&!m&&F(),disabled:m,className:"flex-1"}),e.jsx(R,{onClick:F,size:"icon",disabled:m||!i.trim(),"data-send-button":!0,children:e.jsx(Wr,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:["مدعوم بـ OpenAI 🤖 ",_&&"• بيانات محدثة"]})]})]})]})}const sr=l.forwardRef(({...r},t)=>e.jsx("nav",{ref:t,"aria-label":"breadcrumb",...r}));sr.displayName="Breadcrumb";const rr=l.forwardRef(({className:r,...t},s)=>e.jsx("ol",{ref:s,className:C("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",r),...t}));rr.displayName="BreadcrumbList";const Ke=l.forwardRef(({className:r,...t},s)=>e.jsx("li",{ref:s,className:C("inline-flex items-center gap-1.5",r),...t}));Ke.displayName="BreadcrumbItem";const Nt=l.forwardRef(({asChild:r,className:t,...s},a)=>{const i=r?cs:"a";return e.jsx(i,{ref:a,className:C("transition-colors hover:text-foreground",t),...s})});Nt.displayName="BreadcrumbLink";const ar=l.forwardRef(({className:r,...t},s)=>e.jsx("span",{ref:s,role:"link","aria-disabled":"true","aria-current":"page",className:C("font-normal text-foreground",r),...t}));ar.displayName="BreadcrumbPage";const _t=({children:r,className:t,...s})=>e.jsx("li",{role:"presentation","aria-hidden":"true",className:C("[&>svg]:size-3.5",t),...s,children:r??e.jsx(xs,{})});_t.displayName="BreadcrumbSeparator";const Fn={"":"الرئيسية",products:"المنتجات",categories:"الفئات",cart:"سلة التسوق",checkout:"إتمام الطلب",orders:"طلباتي",wishlist:"المفضلة",affiliate:"الشراكة",merchant:"التاجر",admin:"الإدارة",account:"حسابي",login:"تسجيل الدخول",register:"إنشاء حساب"};function Vn(){const t=nt().pathname.split("/").filter(Boolean);let s="";const a=t.map((i,c)=>{s+=`/${i}`;const m=c===t.length-1,d=Fn[i]||decodeURIComponent(i);return m?e.jsx(Ke,{children:e.jsx(ar,{children:d})},s):e.jsxs(Ke,{children:[e.jsx(Nt,{asChild:!0,children:e.jsx(f,{to:s,children:d})}),e.jsx(_t,{})]},s)});return e.jsx(sr,{className:"py-2 px-2 md:px-0",children:e.jsxs(rr,{children:[e.jsxs(Ke,{children:[e.jsx(Nt,{asChild:!0,children:e.jsx(f,{to:"/",children:"الرئيسية"})}),t.length>0&&e.jsx(_t,{})]}),a]})})}function ir(r,t="low"){return new Promise((s,a)=>{const i=new Image;if(i.onload=()=>s(),i.onerror=a,i.src=r,t==="high"&&typeof document<"u"){const c=document.createElement("link");c.rel="preload",c.as="image",c.href=r,document.head.appendChild(c)}})}async function qn(r,t="low"){const s=r.map(a=>ir(a,t));await Promise.allSettled(s)}class Le{static preloadCSS(t){if(this.preloadedResources.has(t))return;const s=document.createElement("link");s.rel="preload",s.as="style",s.href=t,s.onload=()=>{s.rel="stylesheet"},document.head.appendChild(s),this.preloadedResources.add(t)}static preloadJS(t){if(this.preloadedResources.has(t))return;const s=document.createElement("link");s.rel="preload",s.as="script",s.href=t,document.head.appendChild(s),this.preloadedResources.add(t)}static preloadFont(t,s="font/woff2"){if(this.preloadedResources.has(t))return;const a=document.createElement("link");a.rel="preload",a.as="font",a.type=s,a.href=t,a.crossOrigin="anonymous",document.head.appendChild(a),this.preloadedResources.add(t)}static async preloadAPI(t){if(this.preloadedResources.has(t))return null;try{const s=await fetch(t,{method:"GET",headers:{Accept:"application/json"}});if(s.ok){const a=await s.json();return this.preloadedResources.add(t),a}}catch(s){console.warn("Failed to preload API data:",s)}return null}static async preloadImages(t){const s=t.filter(a=>!this.preloadedResources.has(a));s.length!==0&&(await qn(s,"low"),s.forEach(a=>this.preloadedResources.add(a)))}static queuePreload(t){this.preloadQueue.push(...t),this.processQueue()}static async processQueue(){if(!(this.isPreloading||this.preloadQueue.length===0)){for(this.isPreloading=!0;this.preloadQueue.length>0;){const t=this.preloadQueue.shift();t.endsWith(".css")?this.preloadCSS(t):t.endsWith(".js")?this.preloadJS(t):t.match(/\.(woff2?|ttf|otf)$/)?this.preloadFont(t):t.match(/\.(jpg|jpeg|png|webp|avif)$/)&&(await ir(t,"low"),this.preloadedResources.add(t)),await new Promise(s=>setTimeout(s,10))}this.isPreloading=!1}}}oe(Le,"preloadedResources",new Set),oe(Le,"preloadQueue",[]),oe(Le,"isPreloading",!1);class et{static startTiming(t){this.metrics[t]=performance.now()}static endTiming(t){const s=this.metrics[t];if(!s)return 0;const a=performance.now()-s;return delete this.metrics[t],a>100&&console.warn(`Slow operation: ${t} took ${a.toFixed(2)}ms`),a}static async measureAsync(t,s){this.startTiming(t);try{const a=await s();return this.endTiming(t),a}catch(a){throw this.endTiming(t),a}}static measure(t,s){this.startTiming(t);try{const a=s();return this.endTiming(t),a}catch(a){throw this.endTiming(t),a}}static initWebVitals(){if(typeof window>"u")return;const t=new PerformanceObserver(i=>{const c=i.getEntries(),m=c[c.length-1];console.log("LCP:",m.startTime)});t.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(t);const s=new PerformanceObserver(i=>{i.getEntries().forEach(m=>{console.log("FID:",m.processingStart-m.startTime)})});s.observe({entryTypes:["first-input"]}),this.observers.push(s);const a=new PerformanceObserver(i=>{let c=0;i.getEntries().forEach(d=>{d.hadRecentInput||(c+=d.value)}),console.log("CLS:",c)});a.observe({entryTypes:["layout-shift"]}),this.observers.push(a)}static cleanup(){this.observers.forEach(t=>t.disconnect()),this.observers=[]}}oe(et,"metrics",{}),oe(et,"observers",[]);class ht{static dnsPrefetch(t){const s=document.createElement("link");s.rel="dns-prefetch",s.href=`//${t}`,document.head.appendChild(s)}static preconnect(t){const s=document.createElement("link");s.rel="preconnect",s.href=t,document.head.appendChild(s)}static prefetch(t){const s=document.createElement("link");s.rel="prefetch",s.href=t,document.head.appendChild(s)}static modulePreload(t){const s=document.createElement("link");s.rel="modulepreload",s.href=t,document.head.appendChild(s)}}class nr{static trackChunk(t,s){this.chunks[t]=s}static getStats(){const t=Object.values(this.chunks).reduce((i,c)=>i+c,0),s=Object.keys(this.chunks).length,a=Object.entries(this.chunks).reduce((i,[c,m])=>m>i.size?{name:c,size:m}:i,{name:"",size:0});return{totalSize:t,chunkCount:s,largestChunk:a,chunks:{...this.chunks}}}static logAnalysis(){const t=this.getStats();console.group("Bundle Analysis"),console.log(`Total Size: ${(t.totalSize/1024).toFixed(2)} KB`),console.log(`Chunk Count: ${t.chunkCount}`),console.log(`Largest Chunk: ${t.largestChunk.name} (${(t.largestChunk.size/1024).toFixed(2)} KB)`),console.table(t.chunks),console.groupEnd()}}oe(nr,"chunks",{});class or{static async register(t="/sw.js"){if(!("serviceWorker"in navigator))return console.warn("Service Worker not supported"),null;try{return this.swRegistration=await navigator.serviceWorker.register(t),console.log("Service Worker registered:",this.swRegistration),this.swRegistration}catch(s){return console.error("Service Worker registration failed:",s),null}}static async update(){if(this.swRegistration)try{await this.swRegistration.update(),console.log("Service Worker updated")}catch(t){console.error("Service Worker update failed:",t)}}static async unregister(){if(this.swRegistration)try{await this.swRegistration.unregister(),console.log("Service Worker unregistered")}catch(t){console.error("Service Worker unregistration failed:",t)}}}oe(or,"swRegistration",null);function zn(){et.initWebVitals(),ht.dnsPrefetch("fonts.googleapis.com"),ht.dnsPrefetch("cdn.egygo.com"),ht.preconnect("https://api.egygo.com"),Le.preloadCSS("/fonts/inter.css"),Le.preloadFont("/fonts/inter-var.woff2"),or.register(),window.addEventListener("beforeunload",()=>{et.cleanup(),nr.logAnalysis()})}const Un=new sa;zn();const Bn=({children:r})=>{const t=nt();return l.useEffect(()=>{yi()},[]),e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(_i,{}),e.jsx(ji,{cartItemCount:0}),t.pathname!=="/"&&e.jsx(Vn,{}),e.jsx("main",{className:"flex-1",children:r}),e.jsx(Ni,{}),e.jsx(Ei,{}),e.jsx(Mn,{})]})},Wn=()=>e.jsx(Tn,{children:e.jsx(Hr,{children:e.jsx(Qr,{children:e.jsx(xi,{children:e.jsx(Kr,{client:Un,children:e.jsx(ti,{children:e.jsx(li,{children:e.jsx(Ai,{children:e.jsxs(Ra,{children:[e.jsx(Ia,{position:"top-center",richColors:!0,closeButton:!0}),e.jsx(Jr,{children:e.jsx(Bn,{children:e.jsxs(Yr,{children:[e.jsx(y,{path:"/",element:e.jsx(Ri,{})}),e.jsx(y,{path:"/products",element:e.jsx(es,{})}),e.jsx(y,{path:"/product/:id",element:e.jsx(Li,{})}),e.jsx(y,{path:"/login",element:e.jsx(Ti,{})}),e.jsx(y,{path:"/register",element:e.jsx(Di,{})}),e.jsx(y,{path:"/categories",element:e.jsx(ns,{})}),e.jsx(y,{path:"/category",element:e.jsx(ns,{})}),e.jsx(y,{path:"/category/:slug",element:e.jsx(es,{})}),e.jsx(y,{path:"/affiliate",element:e.jsx(zi,{})}),e.jsx(y,{path:"/merchant",element:e.jsx(en,{})}),e.jsx(y,{path:"/deals",element:e.jsx(kn,{})}),e.jsx(y,{path:"/cart",element:e.jsx(Mi,{})}),e.jsx(y,{path:"/checkout",element:e.jsx(Fi,{})}),e.jsx(y,{path:"/wishlist",element:e.jsx(Vi,{})}),e.jsx(y,{path:"/forgot-password",element:e.jsx(Sn,{})}),e.jsx(y,{path:"/account",element:e.jsx(ss,{})}),e.jsx(y,{path:"/my-account",element:e.jsx(ss,{})}),e.jsx(y,{path:"/settings",element:e.jsx(In,{})}),e.jsx(y,{path:"/orders",element:e.jsx(ts,{})}),e.jsx(y,{path:"/my-orders",element:e.jsx(ts,{})}),e.jsx(y,{path:"/orders/:orderId/track",element:e.jsx(qi,{})}),e.jsx(y,{path:"/l/:linkCode",element:e.jsx(Cn,{})}),e.jsx(y,{path:"/affiliate/links",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(rs,{})})}),e.jsx(y,{path:"/affiliate/analytics",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(Bi,{})})}),e.jsx(y,{path:"/affiliate/creatives",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(Wi,{})})}),e.jsx(y,{path:"/affiliate/coupons",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(Gi,{})})}),e.jsx(y,{path:"/affiliate/dashboard",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(Ui,{})})}),e.jsx(y,{path:"/affiliate/banners",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(Hi,{})})}),e.jsx(y,{path:"/affiliate/marketing-tips",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(Qi,{})})}),e.jsx(y,{path:"/affiliate/courses",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(Ki,{})})}),e.jsx(y,{path:"/affiliate/withdraw",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(Ji,{})})}),e.jsx(y,{path:"/affiliate/resources",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(Yi,{})})}),e.jsx(y,{path:"/affiliate/support",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(Xi,{})})}),e.jsx(y,{path:"/affiliate/referrals",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(Zi,{})})}),e.jsx(y,{path:"/update-affiliate-prefs",element:e.jsx(O,{requiredRole:"affiliate",children:e.jsx(Rn,{})})}),e.jsx(y,{path:"/admin",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(as,{})})}),e.jsx(y,{path:"/admin/dashboard",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(as,{})})}),e.jsx(y,{path:"/admin/pending-accounts",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(dn,{})})}),e.jsx(y,{path:"/admin/analytics",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(on,{})})}),e.jsx(y,{path:"/admin/products",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(an,{})})}),e.jsx(y,{path:"/admin/products-advanced",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(hn,{})})}),e.jsx(y,{path:"/admin/categories",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(ln,{})})}),e.jsx(y,{path:"/admin/users",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(is,{})})}),e.jsx(y,{path:"/admin/user-management",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(mn,{})})}),e.jsx(y,{path:"/admin/users-fixed",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(un,{})})}),e.jsx(y,{path:"/admin/orders",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(nn,{})})}),e.jsx(y,{path:"/admin/affiliates",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(is,{})})}),e.jsx(y,{path:"/admin/commissions",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(cn,{})})}),e.jsx(y,{path:"/admin/settings",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(pn,{})})}),e.jsx(y,{path:"/admin/coupons",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(rn,{})})}),e.jsx(y,{path:"/admin/shipping",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(xn,{})})}),e.jsx(y,{path:"/admin/advanced-settings",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(fn,{})})}),e.jsx(y,{path:"/admin/notifications",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(gn,{})})}),e.jsx(y,{path:"/admin/ai-dashboard",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(jn,{})})}),e.jsx(y,{path:"/admin/ai-tools",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(yn,{})})}),e.jsx(y,{path:"/merchant/dashboard",element:e.jsx(O,{requiredRole:"merchant",children:e.jsx(tn,{})})}),e.jsx(y,{path:"/intermediary/dashboard",element:e.jsx(O,{requiredRole:"intermediary",children:e.jsx(Pn,{})})}),e.jsx(y,{path:"/intermediary/import",element:e.jsx(O,{requiredRole:"intermediary",children:e.jsx(os,{})})}),e.jsx(y,{path:"/intermediary/products",element:e.jsx(O,{requiredRole:"intermediary",children:e.jsx(sn,{})})}),e.jsx(y,{path:"/intermediary/links",element:e.jsx(O,{requiredRole:"intermediary",children:e.jsx(rs,{})})}),e.jsx(y,{path:"/admin/vendoor-import",element:e.jsx(O,{requiredRole:"admin",children:e.jsx(os,{})})}),e.jsx(y,{path:"/about",element:e.jsx(wn,{})}),e.jsx(y,{path:"/contact",element:e.jsx(vn,{})}),e.jsx(y,{path:"/shipping",element:e.jsx(An,{})}),e.jsx(y,{path:"/returns",element:e.jsx(En,{})}),e.jsx(y,{path:"/faq",element:e.jsx(bn,{})}),e.jsx(y,{path:"/privacy",element:e.jsx(Nn,{})}),e.jsx(y,{path:"/terms",element:e.jsx(_n,{})}),e.jsx(y,{path:"*",element:e.jsx(Oi,{})})]})})})]})})})})})})})})});Gr(document.getElementById("root")).render(e.jsx(Wn,{}));export{Zn as A,se as B,Z as C,Da as D,ro as E,to as F,Rt as G,wt as H,ie as I,bt as J,eo as K,ee as L,xe as M,C as N,Te as O,he as P,Ta as Q,It as R,Ka as S,io as T,Zs as U,ci as a,ao as b,k as c,A as d,R as e,te as f,Ee as g,Ja as h,Ws as i,Gs as j,Hs as k,ot as l,Ze as m,zs as n,be as o,Fe as p,Ge as q,we as r,ve as s,Os as t,oi as u,$a as v,Ma as w,Fa as x,La as y,so as z};
