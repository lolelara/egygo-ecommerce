import{u as O,r as j,f as A,j as e,bH as Q,aE as J,bI as P,bJ as W,bu as E,bq as Y,aT as Z}from"./vendor-react-BTCGZZAN.js";import{o as X,u as z,C as i,f as c,e as o,r as x,s as h,G as f,L as q,B as ee,d as se,p as ae}from"./index-DAwEpow4.js";import{Q as le}from"./vendor-appwrite-BQhTxLk4.js";import{bi as te}from"./vendor-other-ws_0vYaO.js";import{S as B,a as I,b as D,c as M,d as H}from"./select-DcBOtlUf.js";import{T as ne,a as re,b as T,c as R}from"./tabs-43GTZMZA.js";import{T as ie}from"./textarea-DC34-8pe.js";import"./vendor-ui-BA32w1ww.js";import"./vendor-query-GexG3wnZ.js";import"./vendor-animations-W1Z2cmit.js";const ce="",N=[{name:"Leaderboard",width:728,height:90},{name:"Medium Rectangle",width:300,height:250},{name:"Wide Skyscraper",width:160,height:600},{name:"Mobile Banner",width:320,height:50},{name:"Large Rectangle",width:336,height:280},{name:"Half Page",width:300,height:600}];function Ne(){const{user:t}=X(),{toast:b}=z(),w=O(),[l,U]=j.useState(""),[r,k]=j.useState(N[0]),[p,G]=j.useState(""),m=j.useRef(null),{data:g=[]}=A({queryKey:["affiliate-links",t==null?void 0:t.$id],queryFn:async()=>t!=null&&t.$id?(await se.listDocuments(ce,"affiliate_links",[le.equal("affiliateId",t.$id)])).documents:[],enabled:!!(t!=null&&t.$id)}),{data:u}=A({queryKey:["products"],queryFn:()=>ae.getAll()}),y=Array.isArray(u)?u:(u==null?void 0:u.products)||[];j.useEffect(()=>{if(l){const s=`${window.location.origin}/#/l/${l}`;te.toDataURL(s,{width:300,margin:2,color:{dark:"#000000",light:"#ffffff"}}).then(a=>G(a)).catch(a=>console.error(a))}},[l]);const V=()=>{if(!m.current||!l)return;const s=m.current,a=s.getContext("2d");if(!a)return;const{width:n,height:d}=r;s.width=n,s.height=d;const v=a.createLinearGradient(0,0,n,0);v.addColorStop(0,"#f97316"),v.addColorStop(1,"#fb923c"),a.fillStyle=v,a.fillRect(0,0,n,d),a.fillStyle="#ffffff",a.font="bold 24px Arial",a.textAlign="center";const C=g.find(S=>S.linkCode===l),$=y.find(S=>S.id===(C==null?void 0:C.productId));$?(a.fillText($.name,n/2,d/2-20),a.font="16px Arial",a.fillText("احصل على خصم خاص!",n/2,d/2+10),a.fillText(`egygo.com/l/${l}`,n/2,d/2+35)):(a.fillText("EGYGO",n/2,d/2-10),a.font="16px Arial",a.fillText(`egygo.com/l/${l}`,n/2,d/2+20))};j.useEffect(()=>{V()},[l,r,g,y]);const _=()=>{if(!m.current)return;const s=m.current.toDataURL("image/png"),a=document.createElement("a");a.download=`banner-${r.width}x${r.height}.png`,a.href=s,a.click(),b({title:"تم التحميل! ✓",description:"تم تحميل البانر بنجاح"})},F=()=>{if(!p)return;const s=document.createElement("a");s.download=`qr-code-${l}.png`,s.href=p,s.click(),b({title:"تم التحميل! ✓",description:"تم تحميل رمز QR بنجاح"})},L=()=>{var a;return l?`<a href="${`${window.location.origin}/l/${l}`}" target="_blank">
  <img src="${(a=m.current)==null?void 0:a.toDataURL()}" alt="عرض خاص" />
</a>`:""},K=()=>{const s=L();navigator.clipboard.writeText(s),b({title:"تم النسخ! ✓",description:"تم نسخ كود التضمين"})};return t!=null&&t.isAffiliate?g.length===0?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(i,{children:e.jsxs(c,{className:"p-6 text-center space-y-4",children:[e.jsx(J,{className:"h-12 w-12 mx-auto text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"أنشئ رابط تسويقي أولاً لتتمكن من إنشاء البانرات"}),e.jsx(o,{onClick:()=>w("/affiliate/dashboard"),children:"إنشاء رابط الآن"})]})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"الأدوات التسويقية"}),e.jsx("p",{className:"text-muted-foreground",children:"بانرات، أكواد تضمين، ورموز QR جاهزة لحملاتك التسويقية"})]}),e.jsxs(i,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"اختر الرابط"}),e.jsx(f,{children:"اختر الرابط التسويقي لإنشاء المواد الترويجية"})]}),e.jsx(c,{children:e.jsxs(B,{value:l,onValueChange:U,children:[e.jsx(I,{children:e.jsx(D,{placeholder:"اختر رابط تسويقي..."})}),e.jsx(M,{children:g.map(s=>{const a=y.find(n=>n.id===s.productId);return e.jsxs(H,{value:s.linkCode,children:[s.linkCode," - ",(a==null?void 0:a.name)||"منتج"]},s.$id)})})]})})]}),l&&e.jsxs(ne,{defaultValue:"banners",className:"space-y-4",children:[e.jsxs(re,{className:"grid w-full grid-cols-3",children:[e.jsxs(T,{value:"banners",children:[e.jsx(Q,{className:"ml-2 h-4 w-4"}),"البانرات"]}),e.jsxs(T,{value:"qr",children:[e.jsx(P,{className:"ml-2 h-4 w-4"}),"رمز QR"]}),e.jsxs(T,{value:"embed",children:[e.jsx(W,{className:"ml-2 h-4 w-4"}),"كود التضمين"]})]}),e.jsxs(R,{value:"banners",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(i,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"إعدادات البانر"}),e.jsx(f,{children:"اختر حجم البانر المناسب لمنصتك"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{children:"حجم البانر"}),e.jsxs(B,{value:r.name,onValueChange:s=>{const a=N.find(n=>n.name===s);a&&k(a)},children:[e.jsx(I,{children:e.jsx(D,{})}),e.jsx(M,{children:N.map(s=>e.jsxs(H,{value:s.name,children:[s.name," (",s.width,"x",s.height,")"]},s.name))})]})]}),e.jsxs("div",{className:"pt-4 space-y-2",children:[e.jsxs(ee,{variant:"outline",children:[r.width,"x",r.height," بكسل"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["مناسب لـ:"," ",r.name==="Leaderboard"?"أعلى الصفحات والمواقع":r.name==="Medium Rectangle"?"المدونات والمقالات":r.name==="Mobile Banner"?"التطبيقات والمواقع المحمولة":"الشريط الجانبي"]})]}),e.jsxs(o,{onClick:_,className:"w-full",children:[e.jsx(E,{className:"ml-2 h-4 w-4"}),"تحميل البانر"]})]})]}),e.jsxs(i,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"معاينة البانر"}),e.jsx(f,{children:"هكذا سيظهر البانر في حملتك"})]}),e.jsx(c,{children:e.jsx("div",{className:"border rounded-lg p-4 bg-gray-50 flex items-center justify-center min-h-[300px]",children:e.jsx("canvas",{ref:m,className:"max-w-full h-auto shadow-lg"})})})]})]}),e.jsxs(i,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"جميع المقاسات المتاحة"}),e.jsx(f,{children:"اختر المقاس المناسب لكل منصة"})]}),e.jsx(c,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:N.map(s=>e.jsxs(o,{variant:r.name===s.name?"default":"outline",onClick:()=>k(s),className:"h-auto py-4 flex-col",children:[e.jsx("span",{className:"font-semibold",children:s.name}),e.jsxs("span",{className:"text-xs mt-1",children:[s.width,"x",s.height]})]},s.name))})})]})]}),e.jsx(R,{value:"qr",children:e.jsxs(i,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"رمز QR"}),e.jsx(f,{children:"اطبعه على المنتجات، البروشورات، أو البطاقات"})]}),e.jsxs(c,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p&&e.jsx("img",{src:p,alt:"QR Code",className:"border rounded-lg shadow-lg"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-sm font-medium mb-1",children:["egygo.com/l/",l]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"امسح الرمز للوصول المباشر للمنتج"})]}),e.jsxs(o,{onClick:F,size:"lg",children:[e.jsx(E,{className:"ml-2 h-4 w-4"}),"تحميل رمز QR"]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"طرق استخدام رمز QR:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• اطبعه على البروشورات والكتيبات التسويقية"}),e.jsx("li",{children:"• أضفه على بطاقات العمل الخاصة بك"}),e.jsx("li",{children:"• استخدمه في المعارض والفعاليات"}),e.jsx("li",{children:"• شاركه على وسائل التواصل الاجتماعي"})]})]})]})]})}),e.jsx(R,{value:"embed",children:e.jsxs(i,{children:[e.jsxs(x,{children:[e.jsx(h,{children:"كود التضمين HTML"}),e.jsx(f,{children:"انسخ هذا الكود وضعه في موقعك أو مدونتك"})]}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(q,{children:"كود HTML"}),e.jsx(ie,{value:L(),readOnly:!0,className:"font-mono text-sm mt-2",rows:5})]}),e.jsxs(o,{onClick:K,className:"w-full",children:[e.jsx(Y,{className:"ml-2 h-4 w-4"}),"نسخ الكود"]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"كيفية الاستخدام:"}),e.jsxs("ol",{className:"space-y-2 text-sm text-muted-foreground list-decimal list-inside",children:[e.jsx("li",{children:"انسخ الكود أعلاه"}),e.jsx("li",{children:"افتح محرر HTML لموقعك أو مدونتك"}),e.jsx("li",{children:"الصق الكود في المكان المناسب"}),e.jsx("li",{children:"احفظ وانشر التغييرات"})]})]})]})]})})]}),e.jsxs(i,{className:"bg-gradient-to-r from-primary/10 to-orange-500/10 border-primary",children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-5 w-5"}),"نصائح للترويج الفعّال"]})}),e.jsxs(c,{className:"space-y-2",children:[e.jsx("p",{className:"text-sm",children:"• استخدم البانرات في مواقع التواصل الاجتماعي لجذب الانتباه"}),e.jsx("p",{className:"text-sm",children:"• ضع رموز QR في أماكن مرئية للحصول على أفضل النتائج"}),e.jsx("p",{className:"text-sm",children:"• جرب أحجام مختلفة من البانرات لمعرفة أيها يحقق أفضل أداء"}),e.jsx("p",{className:"text-sm",children:"• شارك المواد الترويجية على قنوات متعددة لزيادة الوصول"})]})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(i,{children:e.jsxs(c,{className:"p-12 text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Q,{className:"h-8 w-8 text-orange-600"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"هذه الصفحة للمسوقين فقط"}),e.jsx("p",{className:"text-muted-foreground max-w-md mx-auto",children:"يجب أن يكون حسابك مفعّلاً كحساب مسوق للوصول إلى البانرات والأدوات التسويقية"}),e.jsxs("div",{className:"flex gap-3 justify-center pt-4",children:[e.jsx(o,{onClick:()=>w("/update-affiliate-prefs"),children:"تفعيل حساب المسوق"}),e.jsx(o,{variant:"outline",onClick:()=>w("/affiliate"),children:"معرفة المزيد"})]})]})})})}export{Ne as default};
