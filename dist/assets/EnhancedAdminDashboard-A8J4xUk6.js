import{r as m,j as e,aj as A,_ as F,o as P,n as D,U as R,b9 as B,a7 as p,ci as E,b_ as i,cj as U,bz as M,Z as $,aF as V,p as o,c0 as _}from"./vendor-react-CCFRLLzk.js";import{c as z,u as H,f as N,C as t,x as r,y as l,P as g,B as d,h as c}from"./index-CtsYZAzS.js";import{P as f}from"./progress-CYuOOZOb.js";import{T as Z,a as q,b as h}from"./tabs-Boky9FfO.js";import{D as G}from"./LoadingSkeletons-CR-zcJD3.js";import{A as K}from"./AdminLayout-C-VSnXvz.js";import{c as I}from"./admin-api-pmR1cZ6X.js";import"./vendor-ui-BA32w1ww.js";import"./vendor-query-j_rPqiug.js";import"./vendor-other-CzBBjgu5.js";import"./vendor-animations-CPHPqPXb.js";import"./vendor-appwrite-CuqfvTq9.js";import"./skeleton-CNtgH3zu.js";import"./avatar-Glpu3gcq.js";import"./appwrite-client-DFce-dPK.js";function oe(){var w,y,C;const{user:j}=z(),[J,Q]=m.useState("month"),[s,L]=m.useState(null),[O,v]=m.useState(!0),{toast:T}=H();m.useEffect(()=>{b()},[]);const b=async()=>{try{v(!0);const a=await I.getStats();L(a)}catch(a){console.error("Error fetching stats:",a),T({variant:"destructive",title:"خطأ",description:"فشل في تحميل الإحصائيات"})}finally{v(!1)}},x=({title:a,value:n,change:u,icon:k,trend:S})=>e.jsxs(t,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:a}),e.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n}),e.jsxs("div",{className:"flex items-center text-xs mt-1",children:[S==="up"?e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"h-3 w-3 text-green-500 ml-1"}),e.jsxs("span",{className:"text-green-500",children:["+",u,"%"]})]}):S==="down"?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-3 w-3 text-red-500 ml-1"}),e.jsxs("span",{className:"text-red-500",children:[u,"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"h-3 w-3 text-green-500 ml-1"}),e.jsxs("span",{className:"text-green-500",children:["+",u,"%"]})]}),e.jsx("span",{className:"text-muted-foreground mr-1",children:"عن الشهر الماضي"})]})]})]});return e.jsx(K,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"لوحة التحكم"}),e.jsxs("p",{className:"text-muted-foreground",children:["مرحباً ",j==null?void 0:j.name,"، إليك ملخص نشاط موقعك"]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(N,{variant:"outline",size:"sm",onClick:b,children:[e.jsx(A,{className:"h-4 w-4 ml-2"}),"تحديث"]})})]}),O?e.jsx("div",{className:"py-8",children:e.jsx(G,{count:4})}):s?e.jsxs(e.Fragment,{children:[e.jsx(Z,{defaultValue:"month",className:"w-full",children:e.jsxs(q,{children:[e.jsx(h,{value:"today",children:"اليوم"}),e.jsx(h,{value:"week",children:"هذا الأسبوع"}),e.jsx(h,{value:"month",children:"هذا الشهر"}),e.jsx(h,{value:"year",children:"هذا العام"})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(x,{title:"إجمالي الإيرادات",value:`${s.totalRevenue.toLocaleString()} ج.م`,change:s.revenueChange||0,icon:F,trend:"up"}),e.jsx(x,{title:"إجمالي الطلبات",value:s.totalOrders.toLocaleString(),change:s.ordersChange||0,icon:P,trend:"up"}),e.jsx(x,{title:"المنتجات",value:s.totalProducts,change:Math.abs(s.productsChange),icon:D,trend:"down"}),e.jsx(x,{title:"المستخدمين",value:s.totalUsers.toLocaleString(),change:s.usersChange,icon:R,trend:"up"})]}),e.jsxs(t,{className:"border-primary/20 bg-primary/5",children:[e.jsx(r,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-primary"}),"الميزات الجديدة"]}),e.jsx(g,{children:"تم إضافة ميزات متقدمة جديدة لتحسين تجربتك"})]}),e.jsx(d,{variant:"default",className:"animate-pulse",children:"جديد"})]})}),e.jsx(c,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(p,{to:"/admin/analytics",children:e.jsxs(t,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-primary",children:[e.jsxs(r,{className:"pb-3",children:[e.jsx(E,{className:"h-8 w-8 text-blue-500 mb-2"}),e.jsx(l,{className:"text-base",children:"لوحة التحليلات"})]}),e.jsxs(c,{className:"pb-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"رسوم بيانية احترافية وتحليلات شاملة"}),e.jsxs("div",{className:"flex items-center text-xs text-primary mt-2",children:["عرض التحليلات ",e.jsx(i,{className:"h-3 w-3 mr-1"})]})]})]})}),e.jsx(p,{to:"/admin/products-advanced",children:e.jsxs(t,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-primary",children:[e.jsxs(r,{className:"pb-3",children:[e.jsx(U,{className:"h-8 w-8 text-green-500 mb-2"}),e.jsx(l,{className:"text-base",children:"إدارة متقدمة"})]}),e.jsxs(c,{className:"pb-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"عمليات جماعية وتصدير/استيراد CSV"}),e.jsxs("div",{className:"flex items-center text-xs text-primary mt-2",children:["إدارة المنتجات ",e.jsx(i,{className:"h-3 w-3 mr-1"})]})]})]})}),e.jsx(p,{to:"/admin/pending-accounts",children:e.jsxs(t,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-yellow-500 bg-yellow-50/50",children:[e.jsxs(r,{className:"pb-3",children:[e.jsx(M,{className:"h-8 w-8 text-yellow-600 mb-2"}),e.jsx(l,{className:"text-base",children:"الحسابات المعلقة"})]}),e.jsxs(c,{className:"pb-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"مراجعة والموافقة على حسابات المسوقين والتجار"}),e.jsxs("div",{className:"flex items-center text-xs text-primary mt-2",children:["عرض المعلقة ",e.jsx(i,{className:"h-3 w-3 mr-1"})]})]})]})}),e.jsxs(t,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-primary",children:[e.jsxs(r,{className:"pb-3",children:[e.jsx($,{className:"h-8 w-8 text-purple-500 mb-2"}),e.jsx(l,{className:"text-base",children:"مركز الإشعارات"})]}),e.jsxs(c,{className:"pb-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"موجود في الـ Header - اضغط الجرس 🔔"}),e.jsx(d,{variant:"secondary",className:"mt-2 text-xs",children:"متاح الآن"})]})]}),e.jsxs(t,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-primary",children:[e.jsxs(r,{className:"pb-3",children:[e.jsx(V,{className:"h-8 w-8 text-orange-500 mb-2"}),e.jsx(l,{className:"text-base",children:"المزيد قريباً"})]}),e.jsxs(c,{className:"pb-3",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Kanban Board، Command Palette، وأكثر..."}),e.jsx(d,{variant:"outline",className:"mt-2 text-xs",children:"قيد التطوير"})]})]})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(t,{children:[e.jsx(r,{className:"pb-2",children:e.jsx(l,{className:"text-sm font-medium",children:"طلبات قيد الانتظار"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:s.pendingOrders}),e.jsxs(N,{variant:"link",className:"p-0 h-auto text-xs mt-2",children:["عرض الطلبات ",e.jsx(i,{className:"h-3 w-3 mr-1"})]})]})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-2",children:e.jsx(l,{className:"text-sm font-medium",children:"طلبات مكتملة"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.completedOrders}),e.jsx(f,{value:94,className:"mt-2"})]})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-2",children:e.jsx(l,{className:"text-sm font-medium",children:"طلبات ملغاة"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:s.cancelledOrders}),e.jsx(f,{value:4,className:"mt-2"})]})]}),e.jsxs(t,{children:[e.jsx(r,{className:"pb-2",children:e.jsx(l,{className:"text-sm font-medium",children:"المسوقين"})}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold text-brand-purple",children:s.totalAffiliates}),e.jsxs(N,{variant:"link",className:"p-0 h-auto text-xs mt-2",children:["إدارة المسوقين ",e.jsx(i,{className:"h-3 w-3 mr-1"})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[e.jsxs(t,{className:"col-span-4",children:[e.jsxs(r,{children:[e.jsx(l,{children:"النشاط الأخير"}),e.jsx(g,{children:"آخر الطلبات في الموقع"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:s.recentOrders&&s.recentOrders.length>0?s.recentOrders.slice(0,5).map((a,n)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`h-2 w-2 rounded-full ${a.status==="completed"?"bg-green-500":a.status==="pending"?"bg-yellow-500":a.status==="cancelled"?"bg-red-500":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium",children:["طلب #",a.id.substring(0,8)," - ",a.total.toLocaleString()," ج.م"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(a.createdAt).toLocaleString("ar-EG")})]}),e.jsx(d,{variant:a.status==="completed"?"default":a.status==="pending"?"secondary":"destructive",children:a.status==="completed"?"مكتمل":a.status==="pending"?"قيد المراجعة":a.status==="cancelled"?"ملغي":a.status})]},a.id)):e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"لا توجد طلبات حديثة"})})})]}),e.jsxs(t,{className:"col-span-3",children:[e.jsxs(r,{children:[e.jsx(l,{children:"أفضل المنتجات"}),e.jsx(g,{children:"الأكثر مبيعاً هذا الشهر"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:s.topProducts&&s.topProducts.length>0?s.topProducts.slice(0,5).map((a,n)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:a.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(d,{variant:"secondary",className:"text-xs",children:[a.quantity," مبيعة"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.revenue.toLocaleString()," ج.م"]})]})]}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(o,{className:"h-3 w-3 text-green-500 ml-1"}),e.jsxs("span",{children:[n+1,"#"]})]})]},n)):e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"لا توجد بيانات منتجات"})})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(l,{className:"text-sm font-medium",children:"معدل التحويل"})}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[((w=s==null?void 0:s.conversionRate)==null?void 0:w.toFixed(2))||0,"%"]}),e.jsx(f,{value:(s==null?void 0:s.conversionRate)||0,className:"mt-2"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"من إجمالي الزيارات"})]})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(l,{className:"text-sm font-medium",children:"متوسط قيمة الطلب"})}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",((y=s==null?void 0:s.averageOrderValue)==null?void 0:y.toFixed(2))||0]}),e.jsxs("div",{className:"flex items-center text-xs mt-2",children:[e.jsx(o,{className:"h-3 w-3 text-green-500 ml-1"}),e.jsxs("span",{className:"text-green-500",children:[(s==null?void 0:s.totalOrders)>0?"+":"",((s==null?void 0:s.thisMonthOrders)/Math.max(s==null?void 0:s.totalOrders,1)*100).toFixed(1),"%"]})]})]})]}),e.jsxs(t,{children:[e.jsx(r,{children:e.jsx(l,{className:"text-sm font-medium",children:"معدل رضا العملاء"})}),e.jsxs(c,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[((C=s==null?void 0:s.customerSatisfaction)==null?void 0:C.toFixed(1))||0,"/5.0"]}),e.jsx("div",{className:"flex gap-1 mt-2",children:[...Array(5)].map((a,n)=>e.jsx("div",{className:`h-2 flex-1 rounded ${n<Math.round((s==null?void 0:s.customerSatisfaction)||0)?"bg-yellow-400":"bg-gray-200"}`},n))})]})]})]})]}):e.jsx("div",{className:"text-center text-muted-foreground",children:"لا توجد بيانات"})]})})}export{oe as default};
