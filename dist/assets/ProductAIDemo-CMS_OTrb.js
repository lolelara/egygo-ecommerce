var ce=Object.defineProperty;var oe=(n,s,c)=>s in n?ce(n,s,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[s]=c;var D=(n,s,c)=>oe(n,typeof s!="symbol"?s+"":s,c);import{r as h,j as e,af as C,aq as $,bC as de,aj as ae,z as W,p as F,bF as S,U as pe,bB as ne,bl as O,cz as V,an as M,b3 as R,b1 as J,ap as X,ao as G,am as Q,b2 as q,ae as me,_ as he,cA as xe,bd as ge,b9 as ue,a0 as je,a_ as be,n as fe,bR as ye}from"./vendor-react-CCFRLLzk.js";import{u as z,f,C as v,x as T,y as E,h as k,B as U,a5 as Ne,I as K,L as P,S as H,i as Z,j as ee,k as se,l as te,T as we}from"./index-CtsYZAzS.js";import{T as ve,a as ke,b as L,c as _}from"./tabs-Boky9FfO.js";import{e as B}from"./env-B8jD6Wsc.js";import{A as Ie,a as Ae,b as Se,c as Ce}from"./accordion-ZLNPodRp.js";import"./vendor-ui-BA32w1ww.js";import"./vendor-query-j_rPqiug.js";import"./vendor-other-CzBBjgu5.js";import"./vendor-animations-CPHPqPXb.js";import"./vendor-appwrite-CuqfvTq9.js";class Pe{constructor(){D(this,"apiKey");D(this,"apiEndpoint","https://api.openai.com/v1/chat/completions");this.apiKey=B.OPENAI_API_KEY,console.log("ProductAIService initialized, API Key present:",!!this.apiKey),this.apiKey&&this.apiKey.length>0&&console.log("API Key preview:",this.apiKey.substring(0,10)+"...")}async enhanceProductDescription(s){var r;if(!this.apiKey)throw new Error("OpenAI API key not configured");const c=`أنت خبير في كتابة أوصاف المنتجات الجذابة والاحترافية.

المنتج:
- الاسم: ${s.name}
- الوصف الحالي: ${s.description||"لا يوجد وصف"}
- الفئة: ${s.category||"غير محدد"}
- السعر: ${s.price?`${s.price} جنيه`:"غير محدد"}

المطلوب:
1. اكتب وصفاً محسّناً وجذاباً للمنتج (3-4 فقرات)
2. استخرج 5-7 كلمات مفتاحية SEO
3. اذكر 4-5 نقاط بارزة (highlights) للمنتج

قواعد الكتابة:
- استخدم لغة عربية فصحى مبسطة
- ركز على الفوائد وليس فقط المميزات
- اجعل الوصف مقنعاً ومحفزاً للشراء
- استخدم أسلوب تسويقي احترافي

أرجع النتيجة بصيغة JSON:
{
  "enhanced": "الوصف المحسّن",
  "seoKeywords": ["كلمة1", "كلمة2", ...],
  "highlights": ["نقطة1", "نقطة2", ...]
}`;try{console.log("🚀 Calling OpenAI API for product description enhancement...");const a=await fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:"أنت خبير في التسويق الإلكتروني وكتابة المحتوى التسويقي باللغة العربية."},{role:"user",content:c}],temperature:.7,max_tokens:1e3})});if(!a.ok){const u=await a.json().catch(()=>({}));throw console.error("❌ OpenAI API Error:",a.status,u),new Error(`OpenAI API error: ${a.status} - ${((r=u.error)==null?void 0:r.message)||"Unknown error"}`)}const o=await a.json();if(console.log("✅ OpenAI Response received:",o),!o.choices||!o.choices[0]||!o.choices[0].message)throw console.error("❌ Invalid API response structure:",o),new Error("Invalid API response structure");const i=o.choices[0].message.content.match(/\{[\s\S]*\}/);if(!i)throw new Error("Invalid AI response format");const p=JSON.parse(i[0]);return{original:s.description||"",enhanced:p.enhanced,seoKeywords:p.seoKeywords||[],highlights:p.highlights||[]}}catch(a){throw console.error("Error enhancing product description:",a),a}}async getMarketingSuggestions(s){if(!this.apiKey)throw new Error("OpenAI API key not configured");const c=`أنت خبير في التسويق الإلكتروني والتسويق بالعمولة في السوق المصري.

المنتج:
- الاسم: ${s.name}
- الوصف: ${s.description||"لا يوجد"}
- الفئة: ${s.category||"غير محدد"}
- السعر: ${s.price?`${s.price} جنيه`:"غير محدد"}

المطلوب:
اقترح 5-6 منصات تسويقية مناسبة لهذا المنتج مع استراتيجية تسويق لكل منصة.

المنصات المتاحة:
- فيسبوك (Facebook)
- إنستجرام (Instagram)
- تيك توك (TikTok)
- يوتيوب (YouTube)
- واتساب (WhatsApp Business)
- تليجرام (Telegram)
- تويتر/X (Twitter/X)
- لينكد إن (LinkedIn)
- سناب شات (Snapchat)

لكل منصة، قدم:
1. استراتيجية التسويق المناسبة
2. الجمهور المستهدف
3. الوصول المتوقع (تقديري)
4. 3-4 نصائح عملية للتسويق

أرجع النتيجة بصيغة JSON array:
[
  {
    "platform": "اسم المنصة",
    "strategy": "الاستراتيجية",
    "targetAudience": "الجمهور المستهدف",
    "estimatedReach": "الوصول المتوقع",
    "tips": ["نصيحة1", "نصيحة2", "نصيحة3"]
  }
]`;try{const r=await fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:"أنت خبير في التسويق الإلكتروني والتسويق بالعمولة في السوق المصري والعربي."},{role:"user",content:c}],temperature:.8,max_tokens:1500})});if(!r.ok)throw new Error(`OpenAI API error: ${r.status}`);const d=(await r.json()).choices[0].message.content.match(/\[[\s\S]*\]/);if(!d)throw new Error("Invalid AI response format");return JSON.parse(d[0])}catch(r){throw console.error("Error getting marketing suggestions:",r),r}}async generateProductTags(s){if(!this.apiKey)throw new Error("OpenAI API key not configured");const c=`استخرج 8-10 تاجات (tags) مناسبة لهذا المنتج:

المنتج:
- الاسم: ${s.name}
- الوصف: ${s.description||"لا يوجد"}
- الفئة: ${s.category||"غير محدد"}

التاجات يجب أن تكون:
- كلمات بحث شائعة
- مرتبطة بالمنتج
- مفيدة لـ SEO
- باللغة العربية والإنجليزية

أرجع النتيجة كـ JSON array: ["tag1", "tag2", ...]`;try{const r=await fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:c}],temperature:.6,max_tokens:200})});if(!r.ok)throw new Error(`OpenAI API error: ${r.status}`);const d=(await r.json()).choices[0].message.content.match(/\[[\s\S]*\]/);if(!d)throw new Error("Invalid AI response format");return JSON.parse(d[0])}catch(r){throw console.error("Error generating product tags:",r),r}}}const le=new Pe;function $e({product:n,onApply:s}){const[c,r]=h.useState(!1),[a,o]=h.useState(null),{toast:d}=z(),i=async()=>{r(!0);try{const x=await le.enhanceProductDescription(n);o(x),d({title:"✨ تم تحسين الوصف بنجاح",description:"يمكنك الآن مراجعة الوصف المحسّن وتطبيقه"})}catch(x){d({title:"❌ خطأ",description:x.message||"فشل تحسين الوصف",variant:"destructive"})}finally{r(!1)}},p=()=>{a&&(s(a),d({title:"✅ تم التطبيق",description:"تم تطبيق الوصف المحسّن"}))},u=()=>{a&&(navigator.clipboard.writeText(a.enhanced),d({title:"📋 تم النسخ",description:"تم نسخ الوصف المحسّن"}))};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(f,{onClick:i,disabled:c||!n.name,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:c?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"جاري التحسين بالذكاء الاصطناعي..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"تحسين الوصف بالذكاء الاصطناعي"]})}),a&&e.jsxs(v,{className:"border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",children:[e.jsx(T,{children:e.jsxs(E,{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 text-purple-600"}),"الوصف المحسّن"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{variant:"outline",size:"sm",onClick:u,children:[e.jsx(de,{className:"h-4 w-4 mr-1"}),"نسخ"]}),e.jsxs(f,{variant:"outline",size:"sm",onClick:i,children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),"إعادة التوليد"]})]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-purple-900",children:"📝 الوصف:"}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:a.enhanced})]}),a.seoKeywords.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-purple-900",children:"🔍 كلمات SEO:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.seoKeywords.map((x,g)=>e.jsx(U,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:x},g))})]}),a.highlights.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2 text-purple-900",children:"✨ النقاط البارزة:"}),e.jsx("ul",{className:"space-y-1",children:a.highlights.map((x,g)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx(W,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:x})]},g))})]}),e.jsxs(f,{onClick:p,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"تطبيق الوصف المحسّن"]})]})]})]})}const Te={Facebook:Q,فيسبوك:Q,Instagram:G,إنستجرام:G,TikTok:O,"تيك توك":O,YouTube:X,يوتيوب:X,WhatsApp:J,واتساب:J,Telegram:R,تليجرام:R,Twitter:M,X:M,تويتر:M,LinkedIn:V,"لينكد إن":V,Snapchat:O,"سناب شات":O},Ee={Facebook:"bg-blue-100 text-blue-800 border-blue-200",فيسبوك:"bg-blue-100 text-blue-800 border-blue-200",Instagram:"bg-pink-100 text-pink-800 border-pink-200",إنستجرام:"bg-pink-100 text-pink-800 border-pink-200",TikTok:"bg-purple-100 text-purple-800 border-purple-200","تيك توك":"bg-purple-100 text-purple-800 border-purple-200",YouTube:"bg-red-100 text-red-800 border-red-200",يوتيوب:"bg-red-100 text-red-800 border-red-200",WhatsApp:"bg-green-100 text-green-800 border-green-200",واتساب:"bg-green-100 text-green-800 border-green-200",Telegram:"bg-cyan-100 text-cyan-800 border-cyan-200",تليجرام:"bg-cyan-100 text-cyan-800 border-cyan-200",Twitter:"bg-sky-100 text-sky-800 border-sky-200",X:"bg-sky-100 text-sky-800 border-sky-200",تويتر:"bg-sky-100 text-sky-800 border-sky-200",LinkedIn:"bg-indigo-100 text-indigo-800 border-indigo-200","لينكد إن":"bg-indigo-100 text-indigo-800 border-indigo-200",Snapchat:"bg-yellow-100 text-yellow-800 border-yellow-200","سناب شات":"bg-yellow-100 text-yellow-800 border-yellow-200"};function Oe(n){for(const[s,c]of Object.entries(Te))if(n.includes(s))return c;return O}function Ke(n){for(const[s,c]of Object.entries(Ee))if(n.includes(s))return c;return"bg-gray-100 text-gray-800 border-gray-200"}function Fe({product:n}){const[s,c]=h.useState(!1),[r,a]=h.useState([]),{toast:o}=z(),d=async()=>{c(!0);try{const i=await le.getMarketingSuggestions(n);a(i),o({title:"✨ تم إنشاء الاقتراحات بنجاح",description:`تم إنشاء ${i.length} اقتراح تسويقي`})}catch(i){o({title:"❌ خطأ",description:i.message||"فشل إنشاء الاقتراحات",variant:"destructive"})}finally{c(!1)}};return e.jsxs("div",{className:"space-y-4",children:[r.length===0&&e.jsx(v,{className:"border-2 border-dashed border-purple-300 bg-gradient-to-br from-purple-50 to-pink-50",children:e.jsx(k,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-4 bg-purple-100 rounded-full",children:e.jsx(F,{className:"h-8 w-8 text-purple-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-2",children:"اقتراحات تسويقية ذكية"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"احصل على اقتراحات تسويقية مخصصة لهذا المنتج باستخدام الذكاء الاصطناعي"})]}),e.jsx(f,{onClick:d,disabled:s||!n.name,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",size:"lg",children:s?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"جاري إنشاء الاقتراحات..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"احصل على اقتراحات تسويقية"]})})]})})}),r.length>0&&e.jsxs(v,{className:"border-2 border-purple-200",children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5 text-purple-600"}),"اقتراحات تسويقية (",r.length,")"]}),e.jsx(f,{variant:"outline",size:"sm",onClick:d,disabled:s,children:s?e.jsx(C,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"h-4 w-4 mr-1"}),"تحديث"]})})]})}),e.jsx(k,{children:e.jsx(Ie,{type:"single",collapsible:!0,className:"w-full",children:r.map((i,p)=>{const u=Oe(i.platform),x=Ke(i.platform);return e.jsxs(Ae,{value:`item-${p}`,children:[e.jsx(Se,{className:"hover:no-underline",children:e.jsxs("div",{className:"flex items-center gap-3 text-right",children:[e.jsx("div",{className:`p-2 rounded-lg ${x}`,children:e.jsx(u,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-right",children:i.platform}),e.jsx("p",{className:"text-xs text-muted-foreground text-right",children:i.targetAudience})]})]})}),e.jsx(Ce,{children:e.jsxs("div",{className:"space-y-4 pt-4 pr-14",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(S,{className:"h-4 w-4 text-purple-600"}),e.jsx("h5",{className:"font-semibold text-sm",children:"الاستراتيجية:"})]}),e.jsx("p",{className:"text-sm text-gray-700 pr-6",children:i.strategy})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(pe,{className:"h-4 w-4 text-blue-600"}),e.jsx("h5",{className:"font-semibold text-sm",children:"الجمهور المستهدف:"})]}),e.jsx("p",{className:"text-sm text-gray-700 pr-6",children:i.targetAudience})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(F,{className:"h-4 w-4 text-green-600"}),e.jsx("h5",{className:"font-semibold text-sm",children:"الوصول المتوقع:"})]}),e.jsx(U,{variant:"secondary",className:"bg-green-100 text-green-800",children:i.estimatedReach})]}),i.tips&&i.tips.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ne,{className:"h-4 w-4 text-yellow-600"}),e.jsx("h5",{className:"font-semibold text-sm",children:"نصائح عملية:"})]}),e.jsx("ul",{className:"space-y-2 pr-6",children:i.tips.map((g,w)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[e.jsx("span",{className:"text-purple-600 font-bold mt-0.5",children:"•"}),e.jsx("span",{children:g})]},w))})]})]})})]},p)})})})]})]})}const ze=[{icon:he,text:"ما السعر المناسب؟",prompt:"ما هو السعر المناسب لهذا المنتج في السوق المصري؟"},{icon:F,text:"كيف أزيد المبيعات؟",prompt:"ما هي أفضل استراتيجيات لزيادة مبيعات هذا المنتج؟"},{icon:S,text:"من الجمهور المستهدف؟",prompt:"من هو الجمهور المستهدف الأمثل لهذا المنتج؟"},{icon:ne,text:"أفكار تسويقية",prompt:"أعطني 5 أفكار تسويقية إبداعية لهذا المنتج"}];function Le({productName:n,productDescription:s,productPrice:c,productCategory:r}){const[a,o]=h.useState([{role:"assistant",content:`مرحباً! 👋 أنا مساعدك الذكي للمنتجات. يمكنني مساعدتك في:

• تحسين الوصف والعنوان
• اقتراح السعر المناسب
• استراتيجيات التسويق
• تحليل المنافسين
• SEO والكلمات المفتاحية

كيف يمكنني مساعدتك اليوم؟`,timestamp:new Date}]),[d,i]=h.useState(""),[p,u]=h.useState(!1),{toast:x}=z(),g=h.useRef(null);h.useEffect(()=>{g.current&&(g.current.scrollTop=g.current.scrollHeight)},[a]);const w=async t=>{if(!t.trim())return;const m={role:"user",content:t,timestamp:new Date};o(l=>[...l,m]),i(""),u(!0);try{const l=B.OPENAI_API_KEY;if(!l)throw new Error("OpenAI API key not configured");const N=`أنت خبير في التجارة الإلكترونية والتسويق الرقمي في السوق المصري والعربي.

معلومات المنتج الحالي:
- الاسم: ${n}
- الوصف: ${s||"غير متوفر"}
- السعر: ${c?`${c} جنيه`:"غير محدد"}
- الفئة: ${r||"غير محدد"}

قدم نصائح عملية ومحددة بناءً على السوق المصري. استخدم لغة عربية واضحة ومهنية.`,j=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:N},...a.slice(-5).map(y=>({role:y.role,content:y.content})),{role:"user",content:t}],temperature:.7,max_tokens:800})});if(!j.ok)throw new Error(`API error: ${j.status}`);const A={role:"assistant",content:(await j.json()).choices[0].message.content,timestamp:new Date};o(y=>[...y,A])}catch(l){x({title:"❌ خطأ",description:l.message||"فشل إرسال الرسالة",variant:"destructive"})}finally{u(!1)}},I=t=>{w(t)};return e.jsxs(v,{className:"border-2 border-purple-200",children:[e.jsx(T,{className:"bg-gradient-to-r from-purple-50 to-pink-50",children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(J,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg",children:"مساعد المنتجات الذكي"}),e.jsx("p",{className:"text-xs text-muted-foreground font-normal",children:"اسأل عن أي شيء متعلق بالمنتج"})]})]})}),e.jsxs(k,{className:"p-0",children:[e.jsx(Ne,{className:"h-[400px] p-4",ref:g,children:e.jsxs("div",{className:"space-y-4",children:[a.map((t,m)=>e.jsxs("div",{className:`flex gap-3 ${t.role==="user"?"justify-end":"justify-start"}`,children:[t.role==="assistant"&&e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx(q,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-3 ${t.role==="user"?"bg-purple-600 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:t.content}),e.jsx("p",{className:`text-xs mt-2 ${t.role==="user"?"text-purple-200":"text-gray-500"}`,children:t.timestamp.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})})]}),t.role==="user"&&e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(me,{className:"h-4 w-4 text-white"})})]},m)),p&&e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx(q,{className:"h-4 w-4 text-white"})}),e.jsx("div",{className:"bg-gray-100 rounded-2xl px-4 py-3",children:e.jsx(C,{className:"h-4 w-4 animate-spin text-purple-600"})})]})]})}),e.jsxs("div",{className:"p-4 border-t bg-gray-50",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"أسئلة سريعة:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ze.map((t,m)=>{const l=t.icon;return e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>I(t.prompt),disabled:p,className:"text-xs",children:[e.jsx(l,{className:"h-3 w-3 mr-1"}),t.text]},m)})})]}),e.jsx("div",{className:"p-4 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{value:d,onChange:t=>i(t.target.value),onKeyPress:t=>t.key==="Enter"&&!p&&w(d),placeholder:"اكتب سؤالك هنا...",disabled:p,className:"flex-1"}),e.jsx(f,{onClick:()=>w(d),disabled:p||!d.trim(),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:p?e.jsx(C,{className:"h-4 w-4 animate-spin"}):e.jsx(R,{className:"h-4 w-4"})})]})})]})]})}const re=[{value:"realistic",label:"واقعي",prompt:"photorealistic, high quality, professional product photography"},{value:"minimalist",label:"بسيط",prompt:"minimalist, clean background, modern, simple"},{value:"lifestyle",label:"نمط حياة",prompt:"lifestyle photography, in use, natural setting"},{value:"studio",label:"استوديو",prompt:"studio lighting, white background, professional"},{value:"artistic",label:"فني",prompt:"artistic, creative, colorful, eye-catching"}],_e=[{value:"1024x1024",label:"مربع (1024×1024)"},{value:"1792x1024",label:"عريض (1792×1024)"},{value:"1024x1792",label:"طويل (1024×1792)"}];function Je({productName:n,productDescription:s,onImageGenerated:c}){const[r,a]=h.useState(!1),[o,d]=h.useState(null),[i,p]=h.useState("realistic"),[u,x]=h.useState("1024x1024"),[g,w]=h.useState(""),{toast:I}=z(),t=async()=>{a(!0);try{const l=B.OPENAI_API_KEY;if(!l)throw new Error("OpenAI API key not configured");const N=re.find(ie=>ie.value===i),j=`${n}${s?`, ${s}`:""}`,b=(N==null?void 0:N.prompt)||"",A=g||`${j}, ${b}`,y=await fetch("https://api.openai.com/v1/images/generations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({model:"dall-e-3",prompt:A,n:1,size:u,quality:"standard"})});if(!y.ok)throw new Error(`API error: ${y.status}`);const Y=(await y.json()).data[0].url;d(Y),c&&c(Y),I({title:"✨ تم إنشاء الصورة بنجاح",description:"يمكنك الآن تحميل الصورة أو إعادة التوليد"})}catch(l){I({title:"❌ خطأ",description:l.message||"فشل إنشاء الصورة",variant:"destructive"})}finally{a(!1)}},m=async()=>{if(o)try{const N=await(await fetch(o)).blob(),j=window.URL.createObjectURL(N),b=document.createElement("a");b.href=j,b.download=`${n.replace(/\s+/g,"-")}-${Date.now()}.png`,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(j),I({title:"✅ تم التحميل",description:"تم تحميل الصورة بنجاح"})}catch{I({title:"❌ خطأ",description:"فشل تحميل الصورة",variant:"destructive"})}};return e.jsxs(v,{className:"border-2 border-purple-200",children:[e.jsx(T,{className:"bg-gradient-to-r from-purple-50 to-pink-50",children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"h-5 w-5 text-purple-600"}),"توليد صور بالذكاء الاصطناعي"]})}),e.jsxs(k,{className:"space-y-4 pt-6",children:[e.jsxs("div",{children:[e.jsx(P,{htmlFor:"style",children:"نمط الصورة"}),e.jsxs(H,{value:i,onValueChange:p,children:[e.jsx(Z,{id:"style",children:e.jsx(ee,{})}),e.jsx(se,{children:re.map(l=>e.jsx(te,{value:l.value,children:l.label},l.value))})]})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"size",children:"حجم الصورة"}),e.jsxs(H,{value:u,onValueChange:x,children:[e.jsx(Z,{id:"size",children:e.jsx(ee,{})}),e.jsx(se,{children:_e.map(l=>e.jsx(te,{value:l.value,children:l.label},l.value))})]})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"customPrompt",children:"وصف مخصص (اختياري)"}),e.jsx(K,{id:"customPrompt",value:g,onChange:l=>w(l.target.value),placeholder:"اكتب وصفاً مخصصاً للصورة..."}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"اترك فارغاً لاستخدام الوصف التلقائي"})]}),e.jsx(f,{onClick:t,disabled:r||!n,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",size:"lg",children:r?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"جاري إنشاء الصورة..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"توليد صورة بالذكاء الاصطناعي"]})}),o&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"relative rounded-lg overflow-hidden border-2 border-purple-200",children:e.jsx("img",{src:o,alt:n,className:"w-full h-auto"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{onClick:m,variant:"outline",className:"flex-1",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"تحميل الصورة"]}),e.jsxs(f,{onClick:t,variant:"outline",className:"flex-1",disabled:r,children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"إعادة التوليد"]})]}),e.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"💡 الصورة متاحة لمدة ساعة واحدة. قم بتحميلها الآن!"})]}),e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"💰 التكلفة:"})," ~$0.04 لكل صورة (DALL-E 3)"]})})]})]})}function Be({productName:n,productPrice:s,productCategory:c}){const[r,a]=h.useState(!1),[o,d]=h.useState([]),{toast:i}=z(),p=async()=>{a(!0);try{const t=B.OPENAI_API_KEY;if(!t)throw new Error("OpenAI API key not configured");const m=`أنت محلل منافسة خبير في السوق المصري.

المنتج:
- الاسم: ${n}
- السعر: ${s?`${s} جنيه`:"غير محدد"}
- الفئة: ${c||"غير محدد"}

قم بتحليل SWOT (نقاط القوة، الضعف، الفرص، التهديدات) للمنتج في السوق المصري.

أرجع النتيجة بصيغة JSON array:
[
  {
    "category": "strength|weakness|opportunity|threat",
    "title": "عنوان قصير",
    "content": "شرح تفصيلي"
  }
]

قدم 3-4 نقاط لكل فئة.`,l=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:"أنت محلل منافسة خبير في السوق المصري والعربي."},{role:"user",content:m}],temperature:.7,max_tokens:1500})});if(!l.ok)throw new Error(`API error: ${l.status}`);const b=(await l.json()).choices[0].message.content.match(/\[[\s\S]*\]/);if(!b)throw new Error("Invalid AI response format");const A=JSON.parse(b[0]);d(A.map(y=>({...y,type:y.category,icon:u(y.category)}))),i({title:"✨ تم التحليل بنجاح",description:`تم تحليل ${A.length} نقطة`})}catch(t){i({title:"❌ خطأ",description:t.message||"فشل التحليل",variant:"destructive"})}finally{a(!1)}},u=t=>{switch(t){case"strength":return"CheckCircle";case"weakness":return"AlertCircle";case"opportunity":return"TrendingUp";case"threat":return"Target";default:return"Zap"}},x=t=>{switch(t){case"strength":return"نقاط القوة";case"weakness":return"نقاط الضعف";case"opportunity":return"الفرص";case"threat":return"التهديدات";default:return t}},g=t=>{switch(t){case"strength":return"bg-green-100 text-green-800 border-green-200";case"weakness":return"bg-red-100 text-red-800 border-red-200";case"opportunity":return"bg-blue-100 text-blue-800 border-blue-200";case"threat":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},w=t=>{switch(t){case"CheckCircle":return be;case"AlertCircle":return je;case"TrendingUp":return F;case"Target":return S;default:return ue}},I=o.reduce((t,m)=>(t[m.type]||(t[m.type]=[]),t[m.type].push(m),t),{});return e.jsxs(v,{className:"border-2 border-purple-200",children:[e.jsx(T,{className:"bg-gradient-to-r from-purple-50 to-pink-50",children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-5 w-5 text-purple-600"}),"تحليل المنافسة (SWOT)"]})}),e.jsx(k,{className:"space-y-4 pt-6",children:o.length===0?e.jsxs("div",{className:"text-center space-y-4 py-8",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-4 bg-purple-100 rounded-full",children:e.jsx(S,{className:"h-8 w-8 text-purple-600"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 mb-2",children:"تحليل شامل للمنافسة"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"احصل على تحليل SWOT كامل لمنتجك في السوق المصري"})]}),e.jsx(f,{onClick:p,disabled:r||!n,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",size:"lg",children:r?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}),"جاري التحليل..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"تحليل المنافسة"]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{onClick:p,disabled:r,variant:"outline",className:"w-full",children:r?e.jsx(C,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"تحديث التحليل"]})}),e.jsx("div",{className:"space-y-6",children:Object.entries(I).map(([t,m])=>{const l=g(t),N=x(t);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:`${l} border`,children:N}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",m.length,")"]})]}),e.jsx("div",{className:"space-y-2",children:m.map((j,b)=>{const A=w(j.icon);return e.jsx(v,{className:`border-2 ${l.replace("bg-","border-").replace("text-","bg-").replace("800","50")}`,children:e.jsx(k,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${l}`,children:e.jsx(A,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:j.title}),e.jsx("p",{className:"text-sm text-gray-700",children:j.content})]})]})})},b)})})]},t)})})]})})]})}function Ze(){const[n,s]=h.useState({name:"",description:"",category:"",price:0}),c=r=>{s(a=>({...a,description:r.enhanced}))};return e.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx($,{className:"h-8 w-8 text-purple-600"}),e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"تحسين المنتجات بالذكاء الاصطناعي"})]}),e.jsx("p",{className:"text-muted-foreground",children:"استخدم الذكاء الاصطناعي لتحسين أوصاف المنتجات والحصول على اقتراحات تسويقية"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(v,{children:[e.jsx(T,{children:e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"h-5 w-5"}),"معلومات المنتج"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(P,{htmlFor:"name",children:"اسم المنتج *"}),e.jsx(K,{id:"name",value:n.name,onChange:r=>s(a=>({...a,name:r.target.value})),placeholder:"مثال: ساعة ذكية رياضية"})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"description",children:"الوصف الحالي"}),e.jsx(we,{id:"description",value:n.description,onChange:r=>s(a=>({...a,description:r.target.value})),placeholder:"اكتب وصفاً مختصراً للمنتج...",rows:6})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(P,{htmlFor:"category",children:"الفئة"}),e.jsx(K,{id:"category",value:n.category,onChange:r=>s(a=>({...a,category:r.target.value})),placeholder:"مثال: إلكترونيات"})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"price",children:"السعر (جنيه)"}),e.jsx(K,{id:"price",type:"number",value:n.price||"",onChange:r=>s(a=>({...a,price:parseFloat(r.target.value)||0})),placeholder:"0"})]})]})]})]}),e.jsx($e,{product:n,onApply:c})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(ve,{defaultValue:"marketing",className:"w-full",children:[e.jsxs(ke,{className:"grid w-full grid-cols-4",children:[e.jsxs(L,{value:"marketing",className:"text-xs",children:[e.jsx(F,{className:"h-3 w-3 mr-1"}),"تسويق"]}),e.jsxs(L,{value:"chat",className:"text-xs",children:[e.jsx(J,{className:"h-3 w-3 mr-1"}),"محادثة"]}),e.jsxs(L,{value:"images",className:"text-xs",children:[e.jsx(ye,{className:"h-3 w-3 mr-1"}),"صور"]}),e.jsxs(L,{value:"analysis",className:"text-xs",children:[e.jsx(S,{className:"h-3 w-3 mr-1"}),"تحليل"]})]}),e.jsx(_,{value:"marketing",className:"space-y-4",children:e.jsx(Fe,{product:n})}),e.jsx(_,{value:"chat",className:"space-y-4",children:e.jsx(Le,{productName:n.name,productDescription:n.description,productPrice:n.price,productCategory:n.category})}),e.jsx(_,{value:"images",className:"space-y-4",children:e.jsx(Je,{productName:n.name,productDescription:n.description})}),e.jsx(_,{value:"analysis",className:"space-y-4",children:e.jsx(Be,{productName:n.name,productPrice:n.price,productCategory:n.category})})]})})]}),e.jsxs(v,{className:"mt-8 border-2 border-blue-200 bg-blue-50",children:[e.jsx(T,{children:e.jsx(E,{className:"text-blue-900",children:"📚 كيفية الاستخدام"})}),e.jsxs(k,{className:"space-y-3 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"1. تحسين الوصف:"}),e.jsx("p",{children:'أدخل اسم المنتج ووصف مختصر، ثم اضغط "تحسين الوصف بالذكاء الاصطناعي" للحصول على وصف محسّن وكلمات SEO'})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"2. الاقتراحات التسويقية:"}),e.jsx("p",{children:'اضغط "احصل على اقتراحات تسويقية" للحصول على استراتيجيات تسويق مخصصة لكل منصة'})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"3. التطبيق:"}),e.jsx("p",{children:'راجع النتائج واضغط "تطبيق" لاستخدام الوصف المحسّن في منتجك'})]}),e.jsxs("div",{className:"pt-2 border-t border-blue-200",children:[e.jsx("strong",{children:"💡 نصيحة:"})," كلما كانت معلومات المنتج أكثر تفصيلاً، كانت النتائج أفضل!"]})]})]})]})}export{Ze as default};
