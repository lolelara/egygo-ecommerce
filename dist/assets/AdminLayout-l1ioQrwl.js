import{r as c,j as e,a6 as v,at as N,l as b,bN as C,n as y,a_ as w,cf as m,cg as S,U as A,o as I,b8 as D,_ as E,aF as B,aC as O,aq as P,Z as k,b7 as T,a7 as q,ad as F}from"./vendor-react-CCFRLLzk.js";import{d as L,e as h,m as U,n as _,f,o as z,c as Q,B as u}from"./index-D-h96Znd.js";import{A as $,b as M,a as R}from"./avatar-diaDjQwV.js";import{Q as d}from"./vendor-appwrite-CuqfvTq9.js";import{d as Z,D as G}from"./appwrite-client-DFce-dPK.js";function H(){const[s,t]=c.useState(0),[n,a]=c.useState(!0);return c.useEffect(()=>{const r=async()=>{try{const o=await L.listDocuments(h.databaseId,h.collections.users,[d.equal("accountStatus","pending"),d.limit(1)]);t(o.total)}catch(o){console.error("Error fetching pending accounts count:",o),t(0)}finally{a(!1)}};r();const l=setInterval(r,6e4);return()=>clearInterval(l)},[]),{count:s,loading:n}}function J(){const[s,t]=c.useState(0);return c.useEffect(()=>{const n=async()=>{try{const r=await Z.listDocuments(G,"products",[d.equal("status","pending"),d.limit(1)]);t(r.total)}catch(r){console.error("Error fetching pending products count:",r),t(0)}};n();const a=setInterval(n,3e4);return()=>clearInterval(a)},[]),s}const K=[{title:"لوحة التحكم",href:"/admin",icon:C,roles:["admin"]},{title:"إدارة المنتجات",href:"/admin/products",icon:y,roles:["admin","merchant"]},{title:"حالة المنتجات",href:"/merchant/products-status",icon:w,roles:["merchant"]},{title:"موافقة المنتجات",href:"/admin/product-approval",icon:m,roles:["admin"],badge:!0},{title:"إدارة الفئات",href:"/admin/categories",icon:S,roles:["admin","merchant"]},{title:"إدارة المستخدمين والشركاء",href:"/admin/users",icon:A,roles:["admin"]},{title:"الحسابات المعلقة",href:"/admin/pending-accounts",icon:m,roles:["admin"]},{title:"إدارة الطلبات",href:"/admin/orders",icon:I,roles:["admin"]},{title:"إدارة الكوبونات",href:"/admin/coupons",icon:D,roles:["admin"]},{title:"إدارة العمولات",href:"/admin/commissions",icon:E,roles:["admin"]},{title:"التحليلات المتقدمة",href:"/admin/analytics",icon:B,roles:["admin"]},{title:"إدارة الشحن",href:"/admin/shipping",icon:O,roles:["admin"]},{title:"الإعدادات المتقدمة",href:"/admin/advanced-settings",icon:P,roles:["admin"]},{title:"الإشعارات",href:"/admin/notifications",icon:k,roles:["admin"]},{title:"الإعدادات",href:"/admin/settings",icon:T,roles:["admin"]}],x=({onLinkClick:s})=>{const t=N(),n=b(),{user:a}=Q(),{count:r}=H(),l=J(),o=()=>{n("/login"),s==null||s()},p=K.filter(i=>i.roles.includes((a==null?void 0:a.role)||"customer"));return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-primary",children:(a==null?void 0:a.role)==="merchant"?"لوحة تحكم التاجر":"لوحة تحكم الإدارة"})}),e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:p.map(i=>{const g=i.icon,j=t.pathname===i.href;return e.jsxs(q,{to:i.href,onClick:s,className:`flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors hover:bg-accent ${j?"bg-accent text-accent-foreground":"text-muted-foreground hover:text-foreground"}`,children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{className:"flex-1",children:i.title}),i.href==="/admin/pending-accounts"&&r>0&&e.jsx(u,{variant:"destructive",className:"h-5 min-w-5 flex items-center justify-center px-1.5",children:r}),i.href==="/admin/product-approval"&&l>0&&e.jsx(u,{variant:"destructive",className:"h-5 min-w-5 flex items-center justify-center px-1.5",children:l})]},i.href)})}),e.jsxs("div",{className:"p-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs($,{className:"h-8 w-8",children:[e.jsx(M,{src:""}),e.jsx(R,{children:"أدمن"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:"المدير العام"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"admin@example.com"})]})]}),e.jsxs(f,{variant:"outline",size:"sm",className:"w-full justify-start gap-2",onClick:o,children:[e.jsx(F,{className:"h-4 w-4"}),"تسجيل الخروج"]})]})]})},se=({children:s})=>{const[t,n]=c.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs(U,{open:t,onOpenChange:n,children:[e.jsx("div",{className:"lg:hidden",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h1",{className:"text-lg font-semibold",children:"لوحة التحكم"}),e.jsx(_,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",children:e.jsx(v,{className:"h-4 w-4"})})})]})}),e.jsx(z,{side:"right",className:"w-[280px] p-0",children:e.jsx(x,{onLinkClick:()=>n(!1)})})]}),e.jsxs("div",{className:"lg:flex",children:[e.jsx("div",{className:"hidden lg:block lg:w-[280px] lg:border-r lg:bg-muted/30",children:e.jsx("div",{className:"sticky top-0 h-screen",children:e.jsx(x,{})})}),e.jsx("div",{className:"flex-1 lg:max-w-[calc(100vw-280px)]",children:e.jsx("main",{className:"p-4 lg:p-6",children:s})})]})]})};export{se as A};
