import{af as y,w as A,r as m,b as M,j as s,B as p,aF as O,au as T,a2 as F,a3 as R,a4 as o,ab as D,J as P,o as B,aw as E,C as t,e as l,f as r,a6 as u,a as d,g as c,d as N,ao as V,ac as Z,q as g,aa as h}from"./index-Ce-RwxJS.js";import{A as _}from"./AdminLayout-DRAN_nM7.js";import{a as $}from"./admin-api-DJKkOHRe.js";import{Z as z}from"./zap-CZ8kwfra.js";import{A as i}from"./arrow-up-right-zD7_oLce.js";import{C as U}from"./clock-D_TAAEO_.js";import{T as q}from"./trending-down-SSQIHDEp.js";import"./tag-BB9opunb.js";import"./settings-DdUeHZqS.js";/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]],G=y("boxes",H);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],J=y("chart-line",I);function cs(){const{user:w}=A(),[K,Q]=m.useState("month"),[e,k]=m.useState(null),[C,v]=m.useState(!0),{toast:S}=M();m.useEffect(()=>{f()},[]);const f=async()=>{try{v(!0);const a=await $.getStats();k(a)}catch(a){console.error("Error fetching stats:",a),S({variant:"destructive",title:"خطأ",description:"فشل في تحميل الإحصائيات"})}finally{v(!1)}},x=({title:a,value:n,change:j,icon:L,trend:b})=>s.jsxs(t,{children:[s.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(r,{className:"text-sm font-medium",children:a}),s.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold",children:n}),s.jsxs("div",{className:"flex items-center text-xs mt-1",children:[b==="up"?s.jsxs(s.Fragment,{children:[s.jsx(h,{className:"h-3 w-3 text-green-500 ml-1"}),s.jsxs("span",{className:"text-green-500",children:["+",j,"%"]})]}):b==="down"?s.jsxs(s.Fragment,{children:[s.jsx(q,{className:"h-3 w-3 text-red-500 ml-1"}),s.jsxs("span",{className:"text-red-500",children:[j,"%"]})]}):s.jsxs(s.Fragment,{children:[s.jsx(h,{className:"h-3 w-3 text-green-500 ml-1"}),s.jsxs("span",{className:"text-green-500",children:["+",j,"%"]})]}),s.jsx("span",{className:"text-muted-foreground mr-1",children:"عن الشهر الماضي"})]})]})]});return s.jsx(_,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"لوحة التحكم"}),s.jsxs("p",{className:"text-muted-foreground",children:["مرحباً ",w?.name,"، إليك ملخص نشاط موقعك"]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(p,{variant:"outline",size:"sm",onClick:f,children:[s.jsx(O,{className:"h-4 w-4 ml-2"}),"تحديث"]})})]}),C?s.jsx("div",{className:"py-8",children:s.jsx(T,{count:4})}):e?s.jsxs(s.Fragment,{children:[s.jsx(F,{defaultValue:"month",className:"w-full",children:s.jsxs(R,{children:[s.jsx(o,{value:"today",children:"اليوم"}),s.jsx(o,{value:"week",children:"هذا الأسبوع"}),s.jsx(o,{value:"month",children:"هذا الشهر"}),s.jsx(o,{value:"year",children:"هذا العام"})]})}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsx(x,{title:"إجمالي الإيرادات",value:`${e.totalRevenue.toLocaleString()} ج.م`,change:e.revenueChange||0,icon:D,trend:"up"}),s.jsx(x,{title:"إجمالي الطلبات",value:e.totalOrders.toLocaleString(),change:e.ordersChange||0,icon:P,trend:"up"}),s.jsx(x,{title:"المنتجات",value:e.totalProducts,change:Math.abs(e.productsChange),icon:B,trend:"down"}),s.jsx(x,{title:"المستخدمين",value:e.totalUsers.toLocaleString(),change:e.usersChange,icon:E,trend:"up"})]}),s.jsxs(t,{className:"border-primary/20 bg-primary/5",children:[s.jsx(l,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(r,{className:"flex items-center gap-2",children:[s.jsx(z,{className:"h-5 w-5 text-primary"}),"الميزات الجديدة"]}),s.jsx(u,{children:"تم إضافة ميزات متقدمة جديدة لتحسين تجربتك"})]}),s.jsx(d,{variant:"default",className:"animate-pulse",children:"جديد"})]})}),s.jsx(c,{children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsx(N,{to:"/admin/analytics",children:s.jsxs(t,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-primary",children:[s.jsxs(l,{className:"pb-3",children:[s.jsx(J,{className:"h-8 w-8 text-blue-500 mb-2"}),s.jsx(r,{className:"text-base",children:"لوحة التحليلات"})]}),s.jsxs(c,{className:"pb-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"رسوم بيانية احترافية وتحليلات شاملة"}),s.jsxs("div",{className:"flex items-center text-xs text-primary mt-2",children:["عرض التحليلات ",s.jsx(i,{className:"h-3 w-3 mr-1"})]})]})]})}),s.jsx(N,{to:"/admin/products-advanced",children:s.jsxs(t,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-primary",children:[s.jsxs(l,{className:"pb-3",children:[s.jsx(G,{className:"h-8 w-8 text-green-500 mb-2"}),s.jsx(r,{className:"text-base",children:"إدارة متقدمة"})]}),s.jsxs(c,{className:"pb-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"عمليات جماعية وتصدير/استيراد CSV"}),s.jsxs("div",{className:"flex items-center text-xs text-primary mt-2",children:["إدارة المنتجات ",s.jsx(i,{className:"h-3 w-3 mr-1"})]})]})]})}),s.jsx(N,{to:"/admin/pending-accounts",children:s.jsxs(t,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-yellow-500 bg-yellow-50/50",children:[s.jsxs(l,{className:"pb-3",children:[s.jsx(U,{className:"h-8 w-8 text-yellow-600 mb-2"}),s.jsx(r,{className:"text-base",children:"الحسابات المعلقة"})]}),s.jsxs(c,{className:"pb-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"مراجعة والموافقة على حسابات المسوقين والتجار"}),s.jsxs("div",{className:"flex items-center text-xs text-primary mt-2",children:["عرض المعلقة ",s.jsx(i,{className:"h-3 w-3 mr-1"})]})]})]})}),s.jsxs(t,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-primary",children:[s.jsxs(l,{className:"pb-3",children:[s.jsx(V,{className:"h-8 w-8 text-purple-500 mb-2"}),s.jsx(r,{className:"text-base",children:"مركز الإشعارات"})]}),s.jsxs(c,{className:"pb-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"موجود في الـ Header - اضغط الجرس 🔔"}),s.jsx(d,{variant:"secondary",className:"mt-2 text-xs",children:"متاح الآن"})]})]}),s.jsxs(t,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-primary",children:[s.jsxs(l,{className:"pb-3",children:[s.jsx(Z,{className:"h-8 w-8 text-orange-500 mb-2"}),s.jsx(r,{className:"text-base",children:"المزيد قريباً"})]}),s.jsxs(c,{className:"pb-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Kanban Board، Command Palette، وأكثر..."}),s.jsx(d,{variant:"outline",className:"mt-2 text-xs",children:"قيد التطوير"})]})]})]})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(t,{children:[s.jsx(l,{className:"pb-2",children:s.jsx(r,{className:"text-sm font-medium",children:"طلبات قيد الانتظار"})}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:e.pendingOrders}),s.jsxs(p,{variant:"link",className:"p-0 h-auto text-xs mt-2",children:["عرض الطلبات ",s.jsx(i,{className:"h-3 w-3 mr-1"})]})]})]}),s.jsxs(t,{children:[s.jsx(l,{className:"pb-2",children:s.jsx(r,{className:"text-sm font-medium",children:"طلبات مكتملة"})}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.completedOrders}),s.jsx(g,{value:94,className:"mt-2"})]})]}),s.jsxs(t,{children:[s.jsx(l,{className:"pb-2",children:s.jsx(r,{className:"text-sm font-medium",children:"طلبات ملغاة"})}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.cancelledOrders}),s.jsx(g,{value:4,className:"mt-2"})]})]}),s.jsxs(t,{children:[s.jsx(l,{className:"pb-2",children:s.jsx(r,{className:"text-sm font-medium",children:"المسوقين"})}),s.jsxs(c,{children:[s.jsx("div",{className:"text-2xl font-bold text-brand-purple",children:e.totalAffiliates}),s.jsxs(p,{variant:"link",className:"p-0 h-auto text-xs mt-2",children:["إدارة المسوقين ",s.jsx(i,{className:"h-3 w-3 mr-1"})]})]})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[s.jsxs(t,{className:"col-span-4",children:[s.jsxs(l,{children:[s.jsx(r,{children:"النشاط الأخير"}),s.jsx(u,{children:"آخر الطلبات في الموقع"})]}),s.jsx(c,{children:s.jsx("div",{className:"space-y-4",children:e.recentOrders&&e.recentOrders.length>0?e.recentOrders.slice(0,5).map((a,n)=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`h-2 w-2 rounded-full ${a.status==="completed"?"bg-green-500":a.status==="pending"?"bg-yellow-500":a.status==="cancelled"?"bg-red-500":"bg-blue-500"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"text-sm font-medium",children:["طلب #",a.id.substring(0,8)," - ",a.total.toLocaleString()," ج.م"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(a.createdAt).toLocaleString("ar-EG")})]}),s.jsx(d,{variant:a.status==="completed"?"default":a.status==="pending"?"secondary":"destructive",children:a.status==="completed"?"مكتمل":a.status==="pending"?"قيد المراجعة":a.status==="cancelled"?"ملغي":a.status})]},a.id)):s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"لا توجد طلبات حديثة"})})})]}),s.jsxs(t,{className:"col-span-3",children:[s.jsxs(l,{children:[s.jsx(r,{children:"أفضل المنتجات"}),s.jsx(u,{children:"الأكثر مبيعاً هذا الشهر"})]}),s.jsx(c,{children:s.jsx("div",{className:"space-y-4",children:e.topProducts&&e.topProducts.length>0?e.topProducts.slice(0,5).map((a,n)=>s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("p",{className:"text-sm font-medium",children:a.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(d,{variant:"secondary",className:"text-xs",children:[a.quantity," مبيعة"]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.revenue.toLocaleString()," ج.م"]})]})]}),s.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[s.jsx(h,{className:"h-3 w-3 text-green-500 ml-1"}),s.jsxs("span",{children:[n+1,"#"]})]})]},n)):s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"لا توجد بيانات منتجات"})})})]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(r,{className:"text-sm font-medium",children:"معدل التحويل"})}),s.jsxs(c,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[e?.conversionRate?.toFixed(2)||0,"%"]}),s.jsx(g,{value:e?.conversionRate||0,className:"mt-2"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"من إجمالي الزيارات"})]})]}),s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(r,{className:"text-sm font-medium",children:"متوسط قيمة الطلب"})}),s.jsxs(c,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:["$",e?.averageOrderValue?.toFixed(2)||0]}),s.jsxs("div",{className:"flex items-center text-xs mt-2",children:[s.jsx(h,{className:"h-3 w-3 text-green-500 ml-1"}),s.jsxs("span",{className:"text-green-500",children:[e?.totalOrders>0?"+":"",(e?.thisMonthOrders/Math.max(e?.totalOrders,1)*100).toFixed(1),"%"]})]})]})]}),s.jsxs(t,{children:[s.jsx(l,{children:s.jsx(r,{className:"text-sm font-medium",children:"معدل رضا العملاء"})}),s.jsxs(c,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[e?.customerSatisfaction?.toFixed(1)||0,"/5.0"]}),s.jsx("div",{className:"flex gap-1 mt-2",children:[...Array(5)].map((a,n)=>s.jsx("div",{className:`h-2 flex-1 rounded ${n<Math.round(e?.customerSatisfaction||0)?"bg-yellow-400":"bg-gray-200"}`},n))})]})]})]})]}):s.jsx("div",{className:"text-center text-muted-foreground",children:"لا توجد بيانات"})]})})}export{cs as default};
