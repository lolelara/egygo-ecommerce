import{W as le,r as o,m as J,Y as D,j as e,av as z,a_ as re,a$ as xe,aX as he,a6 as q,b0 as ue,z as ge,b1 as pe,o as je,ae as fe,ab as ve,aW as Ne,aw as X,az as be,a7 as ye,n as we,X as Ce}from"./vendor-react-BMq-IxHG.js";import{o as ne,u as ce,C as y,f as w,r as ke,s as Se,l as j,e as h,D as Pe,t as $e,v as Fe,w as qe,x as ze,y as Le,z as U,q as k,a as Me,A as Te,B as ie,E as H,p as Ie}from"./index-DuObFWLq.js";import{T as Re,a as Ae,b as Z,c as _}from"./tabs-BjR-Yo_C.js";import{T as De}from"./textarea-D45AJvw_.js";import{A as Ee,a as Oe}from"./avatar-CmuBIAxY.js";import{P as Be}from"./progress-DNFeGbm3.js";import{P as We}from"./loading-screen-D0KcphAN.js";import"./vendor-ui-BA32w1ww.js";import"./vendor-query-GexG3wnZ.js";import"./vendor-other-C5r3s8Py.js";import"./vendor-animations-W1Z2cmit.js";import"./vendor-appwrite-BGb_FC-V.js";function Ke({productId:d}){const{user:l}=ne(),{toast:c}=ce(),L=le(),[M,x]=o.useState(!1),[C,f]=o.useState(5),[P,u]=o.useState(""),{data:v,isLoading:N}=J({queryKey:k.reviews(d),queryFn:()=>U.getProductReviews(d)}),$=(v==null?void 0:v.reviews)||[],S=(v==null?void 0:v.stats)||{totalReviews:0,averageRating:0,ratingDistribution:[]},b=D({mutationFn:U.createReview,onSuccess:()=>{L.invalidateQueries({queryKey:k.reviews(d)}),x(!1),u(""),f(5),c({title:"âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…",description:"Ø´ÙƒØ±Ø§Ù‹ Ù„ØªÙ‚ÙŠÙŠÙ…Ùƒ! ØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ø±Ø§Ø¬Ø¹ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­"})},onError:t=>{c({title:"Ø®Ø·Ø£",description:t.message||"ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",variant:"destructive"})}}),T=D({mutationFn:({id:t,userId:r})=>U.deleteReview(t,r),onSuccess:()=>{L.invalidateQueries({queryKey:k.reviews(d)}),c({title:"ØªÙ… Ø§Ù„Ø­Ø°Ù",description:"ØªÙ… Ø­Ø°Ù Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¨Ù†Ø¬Ø§Ø­"})},onError:t=>{c({title:"Ø®Ø·Ø£",description:t.message||"ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©",variant:"destructive"})}}),I=()=>{if(!l){c({title:"ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",description:"Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© ØªÙ‚ÙŠÙŠÙ…",variant:"destructive"});return}b.mutate({productId:d,userId:l.$id,rating:C,comment:P.trim()||void 0})},s=t=>{l&&confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„ØªÙ‚ÙŠÙŠÙ…ØŸ")&&T.mutate({id:t,userId:l.$id})},E=$.find(t=>l&&t.userEmail===l.email);return N?e.jsx(y,{children:e.jsx(w,{className:"p-6",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª..."})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(y,{children:[e.jsx(ke,{children:e.jsx(Se,{children:"ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬"})}),e.jsxs(w,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl font-bold mb-2",children:S.averageRating.toFixed(1)}),e.jsx("div",{className:"flex justify-center gap-1 mb-2",children:[1,2,3,4,5].map(t=>e.jsx(z,{className:`h-6 w-6 ${t<=Math.round(S.averageRating)?"fill-yellow-400 text-yellow-400":"text-muted"}`},t))}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ",S.totalReviews," ØªÙ‚ÙŠÙŠÙ…"]})]}),e.jsx("div",{className:"space-y-2",children:S.ratingDistribution.map(t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 w-16",children:[e.jsx("span",{className:"text-sm font-medium",children:t.stars}),e.jsx(z,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"})]}),e.jsx(Be,{value:t.percentage,className:"flex-1"}),e.jsx("span",{className:"text-sm text-muted-foreground w-12 text-right",children:t.count})]},t.stars))})]}),e.jsx(j,{className:"my-6"}),l&&!E&&e.jsxs(h,{onClick:()=>x(!0),className:"w-full",children:[e.jsx(re,{className:"h-4 w-4 ml-2 rtl:ml-0 rtl:mr-2"}),"Ø£Ø¶Ù ØªÙ‚ÙŠÙŠÙ…Ùƒ"]}),!l&&e.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© ØªÙ‚ÙŠÙŠÙ…"})]})]}),e.jsx("div",{className:"space-y-4",children:$.length===0?e.jsx(y,{children:e.jsx(w,{className:"p-6 text-center text-muted-foreground",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø¹Ø¯. ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠÙ‚ÙŠÙ…!"})}):$.map(t=>e.jsx(y,{children:e.jsxs(w,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ee,{children:e.jsx(Oe,{children:t.userName.substring(0,2).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:t.userName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(r=>e.jsx(z,{className:`h-4 w-4 ${r<=t.rating?"fill-yellow-400 text-yellow-400":"text-muted"}`},r))}),e.jsx("span",{className:"text-sm text-muted-foreground",children:t.date})]})]})]}),l&&t.userEmail===l.email&&e.jsx(h,{variant:"ghost",size:"sm",onClick:()=>s(t.id),disabled:T.isPending,children:e.jsx(xe,{className:"h-4 w-4 text-destructive"})})]}),t.comment&&e.jsx("p",{className:"text-muted-foreground",children:t.comment})]})},t.id))}),e.jsx(Pe,{open:M,onOpenChange:x,children:e.jsxs($e,{children:[e.jsxs(Fe,{children:[e.jsx(qe,{children:"Ø£Ø¶Ù ØªÙ‚ÙŠÙŠÙ…Ùƒ"}),e.jsx(ze,{children:"Ø´Ø§Ø±ÙƒÙ†Ø§ Ø±Ø£ÙŠÙƒ Ø­ÙˆÙ„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Ø§Ù„ØªÙ‚ÙŠÙŠÙ…"}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>f(t),className:"focus:outline-none",children:e.jsx(z,{className:`h-8 w-8 cursor-pointer transition-colors ${t<=C?"fill-yellow-400 text-yellow-400":"text-muted hover:text-yellow-200"}`})},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Ø§Ù„ØªØ¹Ù„ÙŠÙ‚ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsx(De,{placeholder:"Ø§ÙƒØªØ¨ ØªØ¹Ù„ÙŠÙ‚Ùƒ Ù‡Ù†Ø§...",value:P,onChange:t=>u(t.target.value),rows:4})]})]}),e.jsxs(Le,{children:[e.jsx(h,{variant:"outline",onClick:()=>x(!1),disabled:b.isPending,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(h,{onClick:I,disabled:b.isPending,children:b.isPending?"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø¶Ø§ÙØ©...":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…"})]})]})})]})}const G={black:{name:"Ø£Ø³ÙˆØ¯",hex:"#000000"},white:{name:"Ø£Ø¨ÙŠØ¶",hex:"#FFFFFF",border:!0},blue:{name:"Ø£Ø²Ø±Ù‚",hex:"#3B82F6"},red:{name:"Ø£Ø­Ù…Ø±",hex:"#EF4444"},green:{name:"Ø£Ø®Ø¶Ø±",hex:"#10B981"},yellow:{name:"Ø£ØµÙØ±",hex:"#FBBF24"},purple:{name:"Ø¨Ù†ÙØ³Ø¬ÙŠ",hex:"#A855F7"},pink:{name:"ÙˆØ±Ø¯ÙŠ",hex:"#EC4899"},gray:{name:"Ø±Ù…Ø§Ø¯ÙŠ",hex:"#6B7280"},brown:{name:"Ø¨Ù†ÙŠ",hex:"#92400E"}};function as(){var Y,ee,se,ae,te;const{id:d}=he(),{user:l}=ne(),{toast:c}=ce(),{addItem:L}=Me(),M=le(),[x,C]=o.useState(0),[f,P]=o.useState(1),[u,v]=o.useState(""),[N,$]=o.useState(""),[S,b]=o.useState(!1),[T,I]=o.useState(!1),{data:s,isLoading:E}=J({queryKey:[...k.products,d],queryFn:()=>Ie.getById(d),enabled:!!d,retry:1,refetchOnWindowFocus:!1}),t=o.useMemo(()=>{if(!s)return[];try{const a=s.colorSizeInventory;if(a&&a!=="[]"&&a!==""){const i=JSON.parse(a);if(i.length>0)return console.log("ðŸ“¦ Product inventory loaded:",{inventory:i}),i}}catch(a){console.error("âŒ Error parsing inventory:",a)}return[]},[s==null?void 0:s.id,s==null?void 0:s.colorSizeInventory]),r=o.useMemo(()=>{if(!s)return 0;if(t.length>0){const g=t.reduce((p,A)=>p+(A.quantity||0),0);return console.log("ðŸ“¦ Total stock from inventory:",g),g}const a=s.colors||[],i=s.sizes||[];if(a.length>0||i.length>0)return console.log("âœ… Product has colors/sizes, defaulting to stock: 999"),999;const n=s.stock||s.stockQuantity||0;return console.log("ðŸ“¦ Using old stock or default:",n||999),n>0?n:999},[s==null?void 0:s.id,t]),F=o.useMemo(()=>!t||t.length===0?[]:[...new Set(t.filter(i=>i.quantity>0&&i.color).map(i=>i.color.toLowerCase()))].map(i=>{var n,g,p;return{name:((n=G[i])==null?void 0:n.name)||i,value:i,hex:((g=G[i])==null?void 0:g.hex)||"#999999",border:(p=G[i])==null?void 0:p.border}}),[t]),O=o.useMemo(()=>{if(!t||t.length===0)return[];const a=[...new Set(t.filter(n=>n.quantity>0&&n.size).map(n=>n.size.toUpperCase()))],i=["XS","S","M","L","XL","XXL","XXXL"];return a.sort((n,g)=>{const p=i.indexOf(n),A=i.indexOf(g);return p===-1?1:A===-1?-1:p-A})},[t]);if(E)return e.jsx(We,{message:"Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬..."});if(!s)return e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"}),e.jsx(h,{asChild:!0,children:e.jsx(q,{to:"/products",children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª"})})]});const m=(Y=s.images)!=null&&Y.length?s.images:[{url:Te.product(s==null?void 0:s.name),alt:(s==null?void 0:s.name)||"Ù…Ù†ØªØ¬"}],V=s.originalPrice?Math.round((s.originalPrice-s.price)/s.originalPrice*100):0,oe=()=>{var n,g;if(F.length>0&&!u){c({title:"ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù„ÙˆÙ†",description:"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù„ÙˆÙ† Ø§Ù„Ù…Ù†ØªØ¬ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©",variant:"destructive"});return}if(O.length>0&&!N){c({title:"ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù‚Ø§Ø³",description:"Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù‚Ø§Ø³ Ø§Ù„Ù…Ù†ØªØ¬ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©",variant:"destructive"});return}const a=u?(n=F.find(p=>p.value===u))==null?void 0:n.name:void 0;L({productId:s.id,name:s.name,price:s.price,originalPrice:s.originalPrice,image:((g=m[0])==null?void 0:g.url)||"",quantity:f,stockQuantity:r,inStock:r>0,color:a,size:N||void 0});const i=[a,N].filter(Boolean).join(" - ");c({title:"âœ… ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚",description:`ØªÙ… Ø¥Ø¶Ø§ÙØ© ${f} Ù…Ù† ${s.name}${i?` (${i})`:""} Ø¥Ù„Ù‰ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚`})},{data:R=[]}=J({queryKey:k.wishlist((l==null?void 0:l.$id)||""),queryFn:()=>H.getUserWishlist((l==null?void 0:l.$id)||""),enabled:!!(l!=null&&l.$id)}),B=o.useMemo(()=>R.some(a=>a.productId===d),[R,d]),W=o.useMemo(()=>R.find(a=>a.productId===d),[R,d]),K=D({mutationFn:()=>H.addToWishlist((l==null?void 0:l.$id)||"",d||""),onSuccess:()=>{M.invalidateQueries({queryKey:k.wishlist((l==null?void 0:l.$id)||"")}),c({title:"âœ… ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù…ÙØ¶Ù„Ø©",description:"ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©"})},onError:a=>{c({title:"Ø®Ø·Ø£",description:a.message||"ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ù…ÙØ¶Ù„Ø©",variant:"destructive"})}}),Q=D({mutationFn:()=>H.removeFromWishlist((W==null?void 0:W.id)||"",(l==null?void 0:l.$id)||""),onSuccess:()=>{M.invalidateQueries({queryKey:k.wishlist((l==null?void 0:l.$id)||"")}),c({title:"ØªÙ…Øª Ø§Ù„Ø¥Ø²Ø§Ù„Ø©",description:"ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©"})},onError:a=>{c({title:"Ø®Ø·Ø£",description:a.message||"ÙØ´Ù„ ÙÙŠ Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ù…ÙØ¶Ù„Ø©",variant:"destructive"})}}),de=()=>{if(!l){c({title:"ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",description:"ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙØ¶Ù„Ø©",variant:"destructive"});return}B?Q.mutate():K.mutate()},me=()=>{navigator.share?navigator.share({title:s.name,text:s.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),c({title:"ØªÙ… Ø§Ù„Ù†Ø³Ø®",description:"ØªÙ… Ù†Ø³Ø® Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©"}))};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(q,{to:"/",className:"hover:text-foreground",children:"Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"}),e.jsx("span",{children:"/"}),e.jsx(q,{to:"/products",className:"hover:text-foreground",children:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),e.jsx("span",{children:"/"}),(ee=s.category)!=null&&ee.slug?e.jsx(q,{to:`/category/${s.category.slug}`,className:"hover:text-foreground",children:s.category.name}):e.jsx("span",{className:"text-muted-foreground",children:((se=s.category)==null?void 0:se.name)||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-foreground",children:s.name})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 mb-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden bg-muted group cursor-zoom-in",onClick:()=>b(!0),onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:[e.jsx("img",{src:m[x].url,alt:m[x].alt||s.name,className:`w-full h-full object-cover transition-transform duration-300 ${T?"scale-110":"scale-100"}`}),V>0&&e.jsxs(ie,{className:"absolute top-4 left-4 bg-red-500",children:["Ø®ØµÙ… ",V,"%"]}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:e.jsx(ue,{className:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}),m.length>1&&e.jsx("div",{className:"grid grid-cols-4 gap-2",children:m.map((a,i)=>e.jsx("button",{onClick:()=>C(i),className:`aspect-square rounded-lg overflow-hidden border-2 transition-colors ${x===i?"border-primary":"border-transparent hover:border-muted-foreground"}`,children:e.jsx("img",{src:a.url,alt:a.alt||`${s.name} ${i+1}`,className:"w-full h-full object-cover"})},i))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((a,i)=>e.jsx(z,{className:`h-5 w-5 ${i<Math.floor(s.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},i)),e.jsxs("span",{className:"text-sm text-muted-foreground mr-2",children:["(",s.reviewCount," ØªÙ‚ÙŠÙŠÙ…)"]})]}),e.jsx(j,{orientation:"vertical",className:"h-5"}),e.jsx(ie,{variant:r>0?"default":"destructive",children:r>0?`Ù…ØªÙˆÙØ± (${r})`:"ØºÙŠØ± Ù…ØªÙˆÙØ±"})]})]}),e.jsx(j,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-baseline gap-3",children:[e.jsxs("span",{className:"text-4xl font-bold text-primary",children:[s.price.toLocaleString()," Ø¬.Ù…"]}),s.originalPrice&&e.jsxs("span",{className:"text-2xl text-muted-foreground line-through",children:[s.originalPrice.toLocaleString()," Ø¬.Ù…"]})]}),s.originalPrice&&e.jsxs("p",{className:"text-sm text-green-600",children:["ÙˆÙÙ‘Ø± ",(s.originalPrice-s.price).toLocaleString()," Ø¬.Ù…"]})]}),e.jsx(j,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:s.description})]}),e.jsx(j,{}),F.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold",children:["Ø§Ù„Ù„ÙˆÙ†: ",u&&e.jsx("span",{className:"text-primary",children:(ae=F.find(a=>a.value===u))==null?void 0:ae.name})]}),e.jsx("div",{className:"flex gap-3 flex-wrap",children:F.map(a=>e.jsx("button",{onClick:()=>v(a.value),className:`relative w-12 h-12 rounded-full transition-all ${u===a.value?"ring-2 ring-primary ring-offset-2 scale-110":"hover:scale-105"} ${a.border?"border-2 border-gray-300":""}`,style:{backgroundColor:a.hex},title:a.name,children:u===a.value&&e.jsx(ge,{className:"h-6 w-6 absolute inset-0 m-auto text-white drop-shadow-lg",style:{color:a.value==="white"?"#000000":"#ffffff"}})},a.value))})]}),O.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-semibold",children:["Ø§Ù„Ù…Ù‚Ø§Ø³: ",N&&e.jsx("span",{className:"text-primary",children:N})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:O.map(a=>e.jsx("button",{onClick:()=>$(a),className:`px-6 py-3 rounded-lg border-2 font-medium transition-all ${N===a?"border-primary bg-primary text-primary-foreground":"border-muted hover:border-primary/50"}`,children:a},a))})]}),e.jsx(j,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-semibold",children:"Ø§Ù„ÙƒÙ…ÙŠØ©:"}),e.jsxs("div",{className:"flex items-center border rounded-lg",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>P(Math.max(1,f-1)),disabled:r===0,children:e.jsx(pe,{className:"h-4 w-4"})}),e.jsx("span",{className:"px-4 font-semibold min-w-[3rem] text-center",children:f}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>P(Math.min(r,f+1)),disabled:r===0,children:e.jsx(re,{className:"h-4 w-4"})})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",r," Ù…ØªÙˆÙØ±)"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(h,{size:"lg",className:"flex-1 btn-hover-lift",onClick:oe,disabled:r===0,children:[e.jsx(je,{className:"ml-2 h-5 w-5 rtl:ml-0 rtl:mr-2"}),"Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©"]}),e.jsx(h,{size:"lg",variant:B?"default":"outline",onClick:de,disabled:K.isPending||Q.isPending,children:K.isPending||Q.isPending?e.jsx(fe,{className:"h-5 w-5 animate-spin"}):e.jsx(ve,{className:`h-5 w-5 ${B?"fill-current":""}`})}),e.jsx(h,{size:"lg",variant:"outline",onClick:me,children:e.jsx(Ne,{className:"h-5 w-5"})})]}),e.jsx(h,{size:"lg",variant:"secondary",className:"w-full",asChild:!0,disabled:r===0,children:e.jsxs(q,{to:"/cart",children:["Ø§Ø´ØªØ± Ø§Ù„Ø¢Ù†",e.jsx(X,{className:"mr-2 h-5 w-5 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})})]}),e.jsx(y,{children:e.jsxs(w,{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(be,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ù„Ù„Ø·Ù„Ø¨Ø§Øª ÙÙˆÙ‚ 500 Ø¬.Ù…"})]})]}),e.jsx(j,{}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ye,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Ø¶Ù…Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Ø¶Ù…Ø§Ù† Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø§Ù„ Ù„Ù…Ø¯Ø© 14 ÙŠÙˆÙ…"})]})]}),e.jsx(j,{}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(we,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ÙŠØµÙ„Ùƒ Ø®Ù„Ø§Ù„ 2-5 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„"})]})]})]})}),(l==null?void 0:l.role)!=="customer"&&e.jsx(y,{className:"bg-gradient-to-br from-primary/10 to-brand-purple/10",children:e.jsxs(w,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ø´Ø±ÙƒØ§Ø¡"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:[s.affiliateCommission,"%"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Ø§ÙƒØ³Ø¨ ",(s.price*s.affiliateCommission/100).toLocaleString()," ","Ø¬.Ù… Ø¹Ù„Ù‰ ÙƒÙ„ Ø¹Ù…Ù„ÙŠØ© Ø¨ÙŠØ¹"]})]})})]})]}),e.jsxs(Re,{defaultValue:"reviews",className:"space-y-8",children:[e.jsxs(Ae,{className:"grid w-full grid-cols-3",children:[e.jsxs(Z,{value:"reviews",children:["Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª (",s.reviewCount,")"]}),e.jsx(Z,{value:"specs",children:"Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª"}),e.jsx(Z,{value:"shipping",children:"Ø§Ù„Ø´Ø­Ù† ÙˆØ§Ù„Ø¥Ø±Ø¬Ø§Ø¹"})]}),e.jsx(_,{value:"reviews",className:"space-y-6",children:e.jsx(Ke,{productId:s.id})}),e.jsx(_,{value:"specs",children:e.jsx(y,{children:e.jsx(w,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-2 border-b",children:[e.jsx("span",{className:"font-semibold",children:"Ø±Ù…Ø² Ø§Ù„Ù…Ù†ØªØ¬ (SKU)"}),e.jsx("span",{children:s.sku||"ØºÙŠØ± Ù…ØªÙˆÙØ±"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-2 border-b",children:[e.jsx("span",{className:"font-semibold",children:"Ø§Ù„ÙØ¦Ø©"}),e.jsx("span",{children:((te=s.category)==null?void 0:te.name)||"ØºÙŠØ± Ù…Ø­Ø¯Ø¯"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-2 border-b",children:[e.jsx("span",{className:"font-semibold",children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx("span",{children:r>0?"Ù…ØªÙˆÙØ±":"ØºÙŠØ± Ù…ØªÙˆÙØ±"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-2",children:[e.jsx("span",{className:"font-semibold",children:"Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªÙˆÙØ±Ø©"}),e.jsx("span",{children:r})]})]})})})}),e.jsx(_,{value:"shipping",children:e.jsx(y,{children:e.jsxs(w,{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø´Ø­Ù†"}),e.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[e.jsx("li",{children:"â€¢ Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ Ù„Ù„Ø·Ù„Ø¨Ø§Øª ÙÙˆÙ‚ 500 Ø¬.Ù…"}),e.jsx("li",{children:"â€¢ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø®Ù„Ø§Ù„ 2-5 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„"}),e.jsx("li",{children:"â€¢ Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… Ù…ØªØ§Ø­"}),e.jsx("li",{children:"â€¢ ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†Ø© Ù…ØªØ§Ø­ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª"})]})]}),e.jsx(j,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹"}),e.jsxs("ul",{className:"space-y-2 text-muted-foreground",children:[e.jsx("li",{children:"â€¢ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹ Ø®Ù„Ø§Ù„ 14 ÙŠÙˆÙ… Ù…Ù† ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…"}),e.jsx("li",{children:"â€¢ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø­Ø§Ù„ØªÙ‡ Ø§Ù„Ø£ØµÙ„ÙŠØ©"}),e.jsx("li",{children:"â€¢ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø¨Ù„Øº Ø£Ùˆ Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx("li",{children:"â€¢ ØªÙƒÙ„ÙØ© Ø§Ù„Ø´Ø­Ù† Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹"})]})]})]})})})]})]}),S&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center p-4",onClick:()=>b(!1),children:[e.jsx("button",{onClick:()=>b(!1),className:"absolute top-4 right-4 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors z-10",children:e.jsx(Ce,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"absolute top-4 left-4 text-white text-sm bg-black/50 px-3 py-1 rounded-full",children:[x+1," / ",m.length]}),e.jsx("div",{className:"relative max-w-6xl max-h-[90vh] w-full h-full flex items-center justify-center",children:e.jsx("img",{src:m[x].url,alt:m[x].alt||s.name,className:"max-w-full max-h-full object-contain",onClick:a=>a.stopPropagation()})}),m.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),C(i=>i>0?i-1:m.length-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(X,{className:"w-6 h-6 text-white"})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),C(i=>i<m.length-1?i+1:0)},className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(X,{className:"w-6 h-6 text-white rotate-180"})})]}),m.length>1&&e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 bg-black/50 p-2 rounded-lg",children:m.map((a,i)=>e.jsx("button",{onClick:n=>{n.stopPropagation(),C(i)},className:`w-16 h-16 rounded overflow-hidden border-2 transition-all ${x===i?"border-white scale-110":"border-transparent opacity-60 hover:opacity-100"}`,children:e.jsx("img",{src:a.url,alt:a.alt||"",className:"w-full h-full object-cover"})},i))})]})]})}export{as as default};
