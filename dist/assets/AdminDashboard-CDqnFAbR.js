import{r as m,j as e,U as g,n as f,o as p,_ as N,bz as b,cf as y,a$ as S,p as v}from"./vendor-react-CCFRLLzk.js";import{C as c,x as d,h as o,f as u,y as x,P as h,B as w}from"./index-CtsYZAzS.js";import{A as j}from"./AdminLayout-C-VSnXvz.js";import{c as C}from"./admin-api-pmR1cZ6X.js";import"./vendor-ui-BA32w1ww.js";import"./vendor-query-j_rPqiug.js";import"./vendor-other-CzBBjgu5.js";import"./vendor-animations-CPHPqPXb.js";import"./vendor-appwrite-CuqfvTq9.js";import"./avatar-Glpu3gcq.js";import"./appwrite-client-DFce-dPK.js";const a=({title:t,value:i,description:r,icon:n,trend:s})=>e.jsxs(c,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:t}),e.jsx(n,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i}),r&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:r}),s&&e.jsxs("div",{className:`flex items-center text-xs mt-1 ${s.isPositive?"text-green-600":"text-red-600"}`,children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),s.isPositive?"+":"",s.value,"% من الشهر الماضي"]})]})]}),P=({status:t})=>{const i={PENDING:{label:"في الانتظار",variant:"secondary"},PROCESSING:{label:"قيد المعالجة",variant:"default"},SHIPPED:{label:"تم الشحن",variant:"outline"},DELIVERED:{label:"تم التسليم",variant:"secondary"},CANCELLED:{label:"ملغي",variant:"destructive"}},r=i[t]||i.PENDING;return e.jsx(w,{variant:r.variant,children:r.label})};function G(){const[t,i]=m.useState(null),[r,n]=m.useState(!0);return m.useEffect(()=>{(async()=>{n(!0);try{const l=await C.getStats();i(l)}catch(l){console.error("Error fetching admin stats:",l),i(null)}finally{n(!1)}})()},[]),r?e.jsx(j,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"لوحة التحكم"})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((s,l)=>e.jsxs(c,{children:[e.jsx(d,{className:"animate-pulse",children:e.jsx("div",{className:"h-4 bg-muted rounded w-24"})}),e.jsxs(o,{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-16 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-32"})]})]},l))})]})}):t?e.jsx(j,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"لوحة التحكم"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(u,{size:"sm",children:"تحديث البيانات"})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(a,{title:"إجمالي المستخدمين",value:t.totalUsers.toLocaleString(),icon:g,trend:{value:12,isPositive:!0}}),e.jsx(a,{title:"إجمالي المنتجات",value:t.totalProducts,icon:f,trend:{value:8,isPositive:!0}}),e.jsx(a,{title:"إجمالي الطلبات",value:t.totalOrders.toLocaleString(),icon:p,trend:{value:15,isPositive:!0}}),e.jsx(a,{title:"إجمالي الإيرادات",value:`${t.totalRevenue.toLocaleString()} ج.م`,icon:N,trend:{value:23,isPositive:!0}})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(a,{title:"الطلبات المعلقة",value:t.pendingOrders,description:"تحتاج لمراجعة",icon:b}),e.jsx(a,{title:"إجمالي الشركاء",value:t.totalAffiliates,icon:y,trend:{value:5,isPositive:!0}}),e.jsx(a,{title:"العمولات المعلقة",value:`${t.pendingCommissions.toLocaleString()} ج.م`,description:"في انتظار الدفع",icon:S}),e.jsx(a,{title:"إيرادات هذا الشهر",value:`${t.thisMonthRevenue.toLocaleString()} ج.م`,description:`${t.thisMonthOrders} طلب`,icon:v})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(x,{children:"المنتجات الأكثر مبيعاً"}),e.jsx(h,{children:"أفضل المنتجات من حيث المبيعات"})]}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:t.topProducts.map((s,l)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm font-medium",children:l+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.product.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.soldQuantity," قطعة •"," ",s.revenue.toLocaleString()," ج.م"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.product.price," ج.م"]})]},s.product.id))})})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(x,{children:"الطلبات الحديثة"}),e.jsx(h,{children:"آخر الطلبات المستلمة"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"space-y-4",children:t.recentOrders.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:s.orderNumber}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString("ar-EG")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:[s.total," ج.م"]}),e.jsx(P,{status:s.status})]})]},s.id))}),e.jsx("div",{className:"mt-4",children:e.jsx(u,{variant:"outline",size:"sm",className:"w-full",children:"عرض جميع الطلبات"})})]})]})]})]})}):null}export{G as default};
