import{r as v,j as e,aa as ie,bR as le,X as re,bH as te,aX as ne,g as ce,i as M,bQ as oe,e as de,bS as me,aY as xe}from"./vendor-react-BTCGZZAN.js";import{A as J}from"./AdminLayout-DqAgGWSf.js";import{O as L,u as he,e as k,C as z,B as $,o as ge,D as Q,A as X,t as V,v as G,w as _,x as W,r as T,s as q,f as B,I as w,g as je,p as ue,n as fe,L as N,y as ve}from"./index-DAwEpow4.js";import{T as ye}from"./textarea-DC34-8pe.js";import{T as Ne,a as pe,b as Y,c as S,d as be,e as I}from"./table-C5DXC0ob.js";import{S as Z,a as ee,b as se,c as ae,d as H}from"./select-DcBOtlUf.js";import{b as U}from"./admin-api-C0fQRsN9.js";import"./vendor-ui-BA32w1ww.js";import"./vendor-query-GexG3wnZ.js";import"./vendor-other-ws_0vYaO.js";import"./vendor-animations-W1Z2cmit.js";import"./avatar-Bz0dpiLw.js";import"./vendor-appwrite-BQhTxLk4.js";function we({value:a=[],onChange:f,maxFiles:j=5,disabled:p=!1}){const[r,h]=v.useState(!1),[c,C]=v.useState(a.map(o=>({url:o,fileId:L.extractFileId(o)||void 0}))),P=v.useRef(null),{toast:y}=he(),A=async o=>{const n=Array.from(o.target.files||[]);if(n.length===0)return;if(c.length+n.length>j){y({title:"ØªØ­Ø°ÙŠØ±",description:`ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ ${j} ØµÙˆØ± ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰`,variant:"destructive"});return}const i=L.validateFiles(n);if(!i.valid){y({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ù„ÙØ§Øª",description:i.errors.join(`
`),variant:"destructive"});return}h(!0);try{const l=await L.uploadFiles(n),d=l.map(x=>({url:x.url,fileId:x.fileId})),u=[...c,...d];C(u),f(u.map(x=>x.url)),y({title:"ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­",description:`ØªÙ… Ø±ÙØ¹ ${l.length} ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­`})}catch(l){y({title:"ÙØ´Ù„ Ø§Ù„Ø±ÙØ¹",description:l.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±",variant:"destructive"})}finally{h(!1),P.current&&(P.current.value="")}},F=async o=>{const n=c[o];if(n.fileId)try{await L.deleteFile(n.fileId)}catch(l){console.error("Failed to delete file:",l)}const i=c.filter((l,d)=>d!==o);C(i),f(i.map(l=>l.url)),y({title:"ØªÙ… Ø§Ù„Ø­Ø°Ù",description:"ØªÙ… Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­"})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{ref:P,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",multiple:!0,onChange:A,disabled:p||r||c.length>=j,className:"hidden"}),e.jsx(k,{type:"button",variant:"outline",onClick:()=>{var o;return(o=P.current)==null?void 0:o.click()},disabled:p||r||c.length>=j,className:"w-full",children:r?e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"ml-2 h-4 w-4 animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹..."]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"ml-2 h-4 w-4"}),"Ø±ÙØ¹ ØµÙˆØ± (",c.length,"/",j,")"]})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: ",j," ØµÙˆØ±ØŒ 5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª Ù„ÙƒÙ„ ØµÙˆØ±Ø© (JPG, PNG, WEBP)"]})]}),c.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:c.map((o,n)=>e.jsx(z,{className:"relative group",children:e.jsxs("div",{className:"aspect-square",children:[e.jsx("img",{src:o.url,alt:`ØµÙˆØ±Ø© ${n+1}`,className:"w-full h-full object-cover rounded-lg",onError:i=>{i.currentTarget.src="/placeholder.svg"}}),n===0&&e.jsx($,{className:"absolute top-2 left-2 bg-primary",children:"Ø±Ø¦ÙŠØ³ÙŠØ©"}),e.jsx(k,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>F(n),disabled:p||r,children:e.jsx(re,{className:"h-4 w-4"})})]})},n))}),c.length===0&&!r&&e.jsx(z,{className:"border-dashed",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(te,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ù„Ù… ÙŠØªÙ… Ø±ÙØ¹ ØµÙˆØ± Ø¨Ø¹Ø¯"})]})})]})}const K=({product:a,categories:f,onSubmit:j,onCancel:p})=>{var F,o,n;const[r,h]=v.useState({name:(a==null?void 0:a.name)||"",description:(a==null?void 0:a.description)||"",price:(a==null?void 0:a.price)||0,originalPrice:(a==null?void 0:a.originalPrice)||0,basePrice:(a==null?void 0:a.basePrice)||(a==null?void 0:a.price)||0,minCommissionPrice:(a==null?void 0:a.minCommissionPrice)||(a==null?void 0:a.price)||0,categoryId:(a==null?void 0:a.category)||"",images:(a==null?void 0:a.images)||[],tags:((F=a==null?void 0:a.tags)==null?void 0:F.join(", "))||"",stockQuantity:100,affiliateCommission:(a==null?void 0:a.affiliateCommission)||8,colors:((o=a==null?void 0:a.colors)==null?void 0:o.join(", "))||"",sizes:((n=a==null?void 0:a.sizes)==null?void 0:n.join(", "))||""}),[c,C]=v.useState(()=>{try{const i=a==null?void 0:a.colorSizeInventory;return i?JSON.parse(i):[]}catch{return[]}}),P=i=>{i.preventDefault();const l=r.colors.split(",").map(s=>s.trim()).filter(Boolean),d=r.sizes.split(",").map(s=>s.trim()).filter(Boolean),u=[];l.length>0&&d.length>0&&u.push(...c);const x=u.reduce((s,t)=>s+t.quantity,0);console.log("ğŸ“¦ Inventory data being saved:",u),console.log("ğŸ“Š Total stock calculated:",x);const b={...r,images:r.images,tags:r.tags.split(",").map(s=>s.trim()).filter(Boolean),colors:l,sizes:d,colorSizeInventory:JSON.stringify(u),stock:x||r.stockQuantity||0};console.log("ğŸ’¾ Submit data:",b),j(a?{...b,id:a.id}:b)},y=()=>{const i=r.colors.split(",").map(d=>d.trim()).filter(Boolean),l=r.sizes.split(",").map(d=>d.trim()).filter(Boolean);if(i.length>0&&l.length>0){const d=[];i.forEach(u=>{l.forEach(x=>{const b=c.find(s=>s.color===u&&s.size===x);d.push({color:u,size:x,quantity:(b==null?void 0:b.quantity)||0})})}),C(d)}},A=(i,l,d)=>{C(u=>u.map(x=>x.color===i&&x.size===l?{...x,quantity:Math.max(0,d)}:x))};return e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"name",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx(w,{id:"name",value:r.name,onChange:i=>h(l=>({...l,name:i.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"category",children:"Ø§Ù„ÙØ¦Ø©"}),e.jsxs(Z,{value:r.categoryId,onValueChange:i=>h(l=>({...l,categoryId:i})),children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Ø§Ø®ØªØ± ÙØ¦Ø©"})}),e.jsx(ae,{children:f.map(i=>e.jsx(H,{value:i.id,children:i.name},i.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx(ye,{id:"description",value:r.description,onChange:i=>h(l=>({...l,description:i.target.value})),rows:3,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"price",children:"Ø§Ù„Ø³Ø¹Ø± Ù„Ù„Ø¹Ø±Ø¶ (Ø¬.Ù…)"}),e.jsx(w,{id:"price",type:"number",value:r.price,onChange:i=>h(l=>({...l,price:Number(i.target.value)})),min:"0",step:"0.01",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø°ÙŠ Ø³ÙŠØ¸Ù‡Ø± Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"originalPrice",children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ (Ø¬.Ù…)"}),e.jsx(w,{id:"originalPrice",type:"number",value:r.originalPrice,onChange:i=>h(l=>({...l,originalPrice:Number(i.target.value)})),min:"0",step:"0.01"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø§Ù„Ø³Ø¹Ø± Ù‚Ø¨Ù„ Ø§Ù„Ø®ØµÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3 text-primary",children:"âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ù„Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ†"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"basePrice",children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)"}),e.jsx(w,{id:"basePrice",type:"number",value:r.basePrice,onChange:i=>h(l=>({...l,basePrice:Number(i.target.value)})),min:"0",step:"0.01",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø°ÙŠ Ø³ØªØ­ØµÙ„ Ø¹Ù„ÙŠÙ‡ (Ø¨Ø¯ÙˆÙ† Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ø³ÙˆÙ‚)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"minCommissionPrice",children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø¹Ø± (Ø´Ø§Ù…Ù„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)"}),e.jsx(w,{id:"minCommissionPrice",type:"number",value:r.minCommissionPrice,onChange:i=>h(l=>({...l,minCommissionPrice:Number(i.target.value)})),min:r.basePrice,step:"0.01",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø£Ù‚Ù„ Ø³Ø¹Ø± ÙŠÙ…ÙƒÙ† Ù„Ù„Ù…Ø³ÙˆÙ‚ Ø¨ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù‡"})]})]}),r.basePrice>0&&r.minCommissionPrice>0&&e.jsxs("div",{className:"mt-3 p-3 bg-muted rounded-lg",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø¹Ù…ÙˆÙ„Ø©:"})," ",(r.minCommissionPrice-r.basePrice).toFixed(2)," Ø¬.Ù…"," ","(",((r.minCommissionPrice-r.basePrice)/r.basePrice*100).toFixed(1),"%)"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Ø§Ù„Ù…Ø³ÙˆÙ‚ ÙŠÙ…ÙƒÙ†Ù‡ Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ù‚ÙŠÙ…Ø© Ø£Ø¹Ù„Ù‰ Ù…Ù† ",r.minCommissionPrice.toFixed(2)," Ø¬.Ù…"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{children:"ØµÙˆØ± Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx(we,{value:r.images,onChange:i=>h(l=>({...l,images:i})),maxFiles:5})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"tags",children:"Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© (Ù…Ù†ÙØµÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)"}),e.jsx(w,{id:"tags",value:r.tags,onChange:i=>h(l=>({...l,tags:i.target.value})),placeholder:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª, Ø³Ù…Ø§Ø¹Ø§Øª, Ø¨Ù„ÙˆØªÙˆØ«"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"colors",children:"Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ØªØ§Ø­Ø© (Ù…Ù†ÙØµÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)"}),e.jsx(w,{id:"colors",value:r.colors,onChange:i=>{h(l=>({...l,colors:i.target.value}))},onBlur:y,placeholder:"Ø£Ø­Ù…Ø±, Ø£Ø²Ø±Ù‚, Ø£Ø®Ø¶Ø±"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø±, Ø£Ø²Ø±Ù‚, Ø£Ø³ÙˆØ¯ Ø£Ùˆ Red, Blue, Black"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"sizes",children:"Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© (Ù…Ù†ÙØµÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)"}),e.jsx(w,{id:"sizes",value:r.sizes,onChange:i=>{h(l=>({...l,sizes:i.target.value}))},onBlur:y,placeholder:"S, M, L, XL"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ù…Ø«Ø§Ù„: S, M, L, XL Ø£Ùˆ 38, 40, 42, 44"})]})]}),c.length>0&&e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-muted/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{className:"text-base font-semibold",children:"Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ù„ÙƒÙ„ Ù„ÙˆÙ† ÙˆÙ…Ù‚Ø§Ø³"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†: ",c.reduce((i,l)=>i+l.quantity,0)]})]}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 max-h-[300px] overflow-y-auto",children:c.map((i,l)=>e.jsxs("div",{className:"space-y-1 border rounded p-2 bg-background",children:[e.jsxs("div",{className:"text-xs font-medium text-center",children:[i.color," - ",i.size]}),e.jsx(w,{type:"number",min:"0",value:i.quantity,onChange:d=>A(i.color,i.size,Number(d.target.value)),className:"h-8 text-center",placeholder:"0"})]},l))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ğŸ’¡ Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„ÙƒÙ„ ØªØ±ÙƒÙŠØ¨Ø© Ù„ÙˆÙ† ÙˆÙ…Ù‚Ø§Ø³. Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø³ÙŠØªÙ… Ø­Ø³Ø§Ø¨Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹."})]}),e.jsxs(ve,{children:[e.jsx(k,{type:"button",variant:"outline",onClick:p,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(k,{type:"submit",children:a?"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬"})]})]})};function Le(){const{user:a}=ge(),[f,j]=v.useState([]),[p,r]=v.useState([]),[h,c]=v.useState(!0),[C,P]=v.useState(""),[y,A]=v.useState("all"),[F,o]=v.useState(!1),[n,i]=v.useState(null);v.useEffect(()=>{(async()=>{c(!0);try{const[t,m]=await Promise.all([ue.getAll({}),fe.getAll()]);let g=t.products;a&&a.labels&&!a.labels.includes("admin")&&(console.log("Filtering products for merchant:",a.$id),g=t.products.filter(E=>E.merchantId===a.$id),console.log("Merchant products:",g.length)),j(g),r(m.categories)}catch(t){console.error("Error fetching data:",t)}c(!1)})()},[a]);const l=f.filter(s=>{const t=s.name.toLowerCase().includes(C.toLowerCase())||s.description.toLowerCase().includes(C.toLowerCase()),m=y==="all"||s.category===y;return t&&m}),d=async s=>{try{const t=await U.create(s,a==null?void 0:a.$id);j(m=>[t,...m]),o(!1)}catch(t){console.error("Error adding product:",t),alert("ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬")}},u=async s=>{var t;try{const m=f.find(D=>D.id===s.id),g=a&&((t=a.labels)==null?void 0:t.includes("admin")),E=m&&m.merchantId===(a==null?void 0:a.$id);if(!g&&!E){alert("Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬");return}const O=await U.update(s);j(D=>D.map(R=>R.id===s.id?{...O,category:s.categoryId||R.category}:R)),i(null)}catch(m){console.error("Error updating product:",m),alert("ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬")}},x=async s=>{if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ"))try{await U.delete(s),j(t=>t.filter(m=>m.id!==s)),alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­")}catch(t){console.error("Error deleting product:",t),alert("ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: "+t.message)}},b=s=>{var t,m;if(s.colorSizeInventory)try{const g=JSON.parse(s.colorSizeInventory);if(Array.isArray(g)&&g.length>0)return g.reduce((O,D)=>O+(D.quantity||0),0)>0}catch(g){console.error("Error parsing inventory for product:",s.id,g)}return((t=s.colors)==null?void 0:t.length)>0||((m=s.sizes)==null?void 0:m.length)>0||s.stock!==void 0&&s.stock>0?!0:s.inStock!==void 0?s.inStock:!0};return h?e.jsx(J,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"})}),e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-10 bg-muted rounded mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((s,t)=>e.jsx("div",{className:"h-16 bg-muted rounded"},t))})]})]})}):e.jsx(J,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),e.jsxs(Q,{open:F,onOpenChange:o,children:[e.jsx(X,{asChild:!0,children:e.jsxs(k,{children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯"]})}),e.jsxs(V,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsx(_,{children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯"}),e.jsx(W,{children:"Ø£Ø¯Ø®Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø¬Ø¯ÙŠØ¯"})]}),e.jsx(K,{categories:p,onSubmit:d,onCancel:()=>o(!1)})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(z,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:f.length})})]}),e.jsxs(z,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©"}),e.jsx(M,{className:"h-4 w-4 text-green-600"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:f.filter(s=>b(s)).length})})]}),e.jsxs(z,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ØºÙŠØ± Ø§Ù„Ù…ØªØ§Ø­Ø©"}),e.jsx(oe,{className:"h-4 w-4 text-red-600"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:f.filter(s=>!b(s)).length})})]}),e.jsxs(z,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(q,{className:"text-sm font-medium",children:"Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚ÙŠÙŠÙ…"}),e.jsx(M,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold",children:f.length>0?(f.reduce((s,t)=>s+t.rating,0)/f.length).toFixed(1):"0.0"})})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(w,{placeholder:"Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...",value:C,onChange:s=>P(s.target.value),className:"pl-10"})]})}),e.jsxs(Z,{value:y,onValueChange:A,children:[e.jsx(ee,{className:"w-48",children:e.jsx(se,{})}),e.jsxs(ae,{children:[e.jsx(H,{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª"}),p.map(s=>e.jsx(H,{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs(z,{children:[e.jsx(T,{children:e.jsxs(q,{children:["Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (",l.length,")"]})}),e.jsx(B,{children:e.jsxs(Ne,{children:[e.jsx(pe,{children:e.jsxs(Y,{children:[e.jsx(S,{children:"Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx(S,{children:"Ø§Ù„ÙØ¦Ø©"}),e.jsx(S,{children:"Ø§Ù„Ø³Ø¹Ø±"}),e.jsx(S,{children:"Ø§Ù„ØªÙ‚ÙŠÙŠÙ…"}),e.jsx(S,{children:"Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"}),e.jsx(S,{children:"Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©"}),e.jsx(S,{className:"text-center",children:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx(be,{children:l.map(s=>{var m;const t=p.find(g=>g.id===s.category);return e.jsxs(Y,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:je((m=s.images)==null?void 0:m[0]),alt:s.name,className:"w-10 h-10 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:s.description})]})]})}),e.jsx(I,{children:e.jsx($,{variant:"outline",children:(t==null?void 0:t.name)||s.category})}),e.jsx(I,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.price," Ø¬.Ù…"]}),s.originalPrice&&e.jsxs("div",{className:"text-sm text-muted-foreground line-through",children:[s.originalPrice," Ø¬.Ù…"]})]})}),e.jsx(I,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:s.rating.toFixed(1)}),e.jsxs("span",{className:"text-muted-foreground",children:["(",s.reviewCount,")"]})]})}),e.jsx(I,{children:e.jsx($,{variant:s.inStock?"default":"secondary",children:s.inStock?"Ù…ØªØ§Ø­":"ØºÙŠØ± Ù…ØªØ§Ø­"})}),e.jsxs(I,{children:[s.affiliateCommission,"%"]}),e.jsx(I,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{open:(n==null?void 0:n.id)===s.id,onOpenChange:g=>!g&&i(null),children:[e.jsx(X,{asChild:!0,children:e.jsx(k,{variant:"outline",size:"sm",onClick:()=>i(s),children:e.jsx(me,{className:"h-4 w-4"})})}),e.jsxs(V,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsx(_,{children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx(W,{children:"ØªØ¹Ø¯ÙŠÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬"})]}),n&&e.jsx(K,{product:n,categories:p,onSubmit:u,onCancel:()=>i(null)})]})]}),e.jsx(k,{variant:"outline",size:"sm",onClick:()=>{confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ")&&x(s.id)},children:e.jsx(xe,{className:"h-4 w-4 text-red-600"})})]})})]},s.id)})})]})})]})]})})}export{Le as default};
