import{r as h,j as e,Z as ae,au as re,U as Be,p as Pe,a0 as ge,b8 as He,b3 as Je,cm as je,ao as fe,aO as Ye,bz as ze,be as Ve,a$ as Qe,b7 as We}from"./vendor-react-wP-gPk8e.js";import{A as Ze}from"./AdminLayout-Bi0XjebE.js";import{d,c as Ae,R as ce,u as Ke,B as I,C as w,r as v,s as S,f as A,H as V,L as g,I as ie,m as Ne,e as k,D as Xe,t as es,v as ss,w as ts,x as as}from"./index-BjwBfcA6.js";import{T as ye}from"./textarea-DqtwzpPR.js";import{T as rs,a as is,b as Q,c as W}from"./tabs-W766L0g2.js";import{R as cs,a as Z}from"./radio-group-CBhLECa9.js";import{S as ns,a as ls,b as os,c as ds,d as M}from"./select--uXl0eT9.js";import{T as we,a as ve,b as K,c as x,d as Se,e as p}from"./table-DjZxPEeY.js";import{Q as l,I as Ce}from"./vendor-appwrite-BGb_FC-V.js";import"./vendor-ui-BA32w1ww.js";import"./vendor-query-GexG3wnZ.js";import"./vendor-other-DcnDEVts.js";import"./vendor-animations-W1Z2cmit.js";import"./avatar-DWfEzynm.js";const u=Ae.databaseId,j="notifications",us="notification_templates",ne="scheduled_notifications";async function ms(t=100){try{return(await d.listDocuments(u,j,[l.orderDesc("$createdAt"),l.limit(t)])).documents}catch(a){return console.error("Error fetching all notifications:",a),[]}}async function hs(t=50){try{const a=await ce.get();return(await d.listDocuments(u,j,[l.equal("userId",a.$id),l.orderDesc("$createdAt"),l.limit(t)])).documents}catch(a){return console.error("Error fetching notifications:",a),[]}}async function xs(){try{const t=await ce.get();return(await d.listDocuments(u,j,[l.equal("userId",t.$id),l.equal("isRead",!1),l.limit(1e3)])).total}catch(t){return console.error("Error fetching unread count:",t),0}}async function be(t){try{await d.updateDocument(u,j,t,{isRead:!0})}catch(a){throw console.error("Error marking notification as read:",a),a}}async function ps(){try{const t=await ce.get(),a=await d.listDocuments(u,j,[l.equal("userId",t.$id),l.equal("isRead",!1),l.limit(100)]);await Promise.all(a.documents.map(r=>d.updateDocument(u,j,r.$id,{isRead:!0})))}catch(t){throw console.error("Error marking all as read:",t),t}}async function gs(t){try{await d.deleteDocument(u,j,t)}catch(a){throw console.error("Error deleting notification:",a),a}}async function le(t,a,r,i="info",n){try{return await d.createDocument(u,j,Ce.unique(),{userId:t,title:a,message:r,type:i,isRead:!1,link:n||null})}catch(m){throw console.error("Error creating notification:",m),m}}async function De(t,a,r="info"){try{const i=await d.listDocuments(u,Ae.collections.users,[l.limit(1e3)]);let n=0,m=0;return await Promise.all(i.documents.map(async N=>{try{await le(N.$id,t,a,r),n++}catch{m++}})),{success:n,failed:m}}catch(i){throw console.error("Error broadcasting notification:",i),i}}async function Te(){try{return(await d.listDocuments(u,us,[l.orderDesc("$createdAt"),l.limit(100)])).documents}catch(t){return console.error("Error fetching templates:",t),Ee()}}function Ee(){return[{$id:"welcome",name:"ØªØ±Ø­ÙŠØ¨ Ø¨Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯",title:"Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¥ÙŠØ¬ÙŠ Ø¬Ùˆ! ðŸŽ‰",message:"Ù…Ø±Ø­Ø¨Ø§Ù‹ {userName}ØŒ Ù†Ø­Ù† Ø³Ø¹Ø¯Ø§Ø¡ Ø¨Ø§Ù†Ø¶Ù…Ø§Ù…Ùƒ Ø¥Ù„ÙŠÙ†Ø§. Ø§Ø³ØªÙƒØ´Ù Ù…Ù†ØªØ¬Ø§ØªÙ†Ø§ ÙˆØ§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„ØªØ³ÙˆÙ‚!",type:"success",targetAudience:"customers",channels:["inApp","email"],variables:["userName"],isActive:!0,usageCount:0,$createdAt:new Date().toISOString()},{$id:"order_confirmed",name:"ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨",title:"ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨Ùƒ âœ…",message:"Ø·Ù„Ø¨Ùƒ Ø±Ù‚Ù… {orderNumber} ØªÙ… ØªØ£ÙƒÙŠØ¯Ù‡ Ø¨Ù†Ø¬Ø§Ø­. Ø³ÙŠØªÙ… Ø´Ø­Ù†Ù‡ Ù‚Ø±ÙŠØ¨Ø§Ù‹.",type:"success",targetAudience:"customers",channels:["inApp","email","sms"],variables:["orderNumber"],isActive:!0,usageCount:0,$createdAt:new Date().toISOString()},{$id:"order_shipped",name:"ØªÙ… Ø´Ø­Ù† Ø§Ù„Ø·Ù„Ø¨",title:"Ø·Ù„Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ ðŸšš",message:"Ø·Ù„Ø¨Ùƒ Ø±Ù‚Ù… {orderNumber} ØªÙ… Ø´Ø­Ù†Ù‡. Ø±Ù‚Ù… Ø§Ù„ØªØªØ¨Ø¹: {trackingNumber}",type:"info",targetAudience:"customers",channels:["inApp","email","sms","push"],variables:["orderNumber","trackingNumber"],isActive:!0,usageCount:0,$createdAt:new Date().toISOString()},{$id:"commission_earned",name:"Ø¹Ù…ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©",title:"ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø¹Ù…ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø© ðŸ’°",message:"Ù„Ù‚Ø¯ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø¹Ù…ÙˆÙ„Ø© {amount} Ø¬.Ù… Ù…Ù† Ø·Ù„Ø¨ Ø±Ù‚Ù… {orderNumber}",type:"success",targetAudience:"affiliates",channels:["inApp","email","push"],variables:["amount","orderNumber"],isActive:!0,usageCount:0,$createdAt:new Date().toISOString()},{$id:"commission_paid",name:"ØªÙ… Ø¯ÙØ¹ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©",title:"ØªÙ… ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ ðŸ’¸",message:"ØªÙ… ØªØ­ÙˆÙŠÙ„ Ù…Ø¨Ù„Øº {amount} Ø¬.Ù… Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ. Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©: {transactionId}",type:"success",targetAudience:"affiliates",channels:["inApp","email"],variables:["amount","transactionId"],isActive:!0,usageCount:0,$createdAt:new Date().toISOString()},{$id:"promotion",name:"Ø¹Ø±Ø¶ ØªØ±ÙˆÙŠØ¬ÙŠ",title:"Ø¹Ø±Ø¶ Ø®Ø§Øµ Ù„ÙØªØ±Ø© Ù…Ø­Ø¯ÙˆØ¯Ø©! ðŸŽ",message:"Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø®ØµÙ… {discount}% Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª. Ø§Ø³ØªØ®Ø¯Ù… ÙƒÙˆØ¯: {couponCode}",type:"promotion",targetAudience:"all",channels:["inApp","email","push"],variables:["discount","couponCode"],isActive:!0,usageCount:0,$createdAt:new Date().toISOString()},{$id:"product_back_in_stock",name:"Ø§Ù„Ù…Ù†ØªØ¬ Ù…ØªÙˆÙØ± Ø§Ù„Ø¢Ù†",title:"Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø°ÙŠ ØªÙ†ØªØ¸Ø±Ù‡ Ù…ØªÙˆÙØ± Ø§Ù„Ø¢Ù†! ðŸŽ‰",message:"{productName} Ø¹Ø§Ø¯ Ù„Ù„Ù…Ø®Ø²ÙˆÙ†. Ø§Ø·Ù„Ø¨Ù‡ Ø§Ù„Ø¢Ù† Ù‚Ø¨Ù„ Ù†ÙØ§Ø° Ø§Ù„ÙƒÙ…ÙŠØ©!",type:"info",targetAudience:"customers",channels:["inApp","email","push"],variables:["productName"],isActive:!0,usageCount:0,$createdAt:new Date().toISOString()},{$id:"password_reset",name:"Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",title:"Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±",message:"ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.",type:"info",targetAudience:"all",channels:["inApp","email"],variables:[],isActive:!0,usageCount:0,$createdAt:new Date().toISOString()}]}async function F(t,a,r){try{const n=(await Te()).find(y=>y.$id===t);if(!n)throw new Error("Template not found");let m=n.title,N=n.message;if(Object.entries(a).forEach(([y,T])=>{m=m.replace(`{${y}}`,T),N=N.replace(`{${y}}`,T)}),r&&r.length>0){let y=0,T=0;return await Promise.all(r.map(async C=>{try{await le(C,m,N,n.type),y++}catch{T++}})),{success:y,failed:T}}return await De(m,N,n.type)}catch(i){throw console.error("Error creating notification from template:",i),i}}async function js(t,a){try{return await d.createDocument(u,ne,Ce.unique(),{...t,status:"scheduled",scheduledFor:a.toISOString(),readCount:0,clickCount:0,totalRecipients:0})}catch(r){console.error("Error scheduling notification:",r);const i=JSON.parse(localStorage.getItem("scheduled_notifications")||"[]"),n={id:Date.now().toString(),...t,status:"scheduled",scheduledFor:a.toISOString(),readCount:0,clickCount:0};return i.push(n),localStorage.setItem("scheduled_notifications",JSON.stringify(i)),n}}async function fs(){try{return(await d.listDocuments(u,ne,[l.equal("status","scheduled"),l.orderAsc("scheduledFor"),l.limit(100)])).documents}catch(t){return console.error("Error fetching scheduled notifications:",t),JSON.parse(localStorage.getItem("scheduled_notifications")||"[]")}}async function Ns(t){try{await d.updateDocument(u,ne,t,{status:"cancelled"})}catch(a){console.error("Error cancelling scheduled notification:",a);const i=JSON.parse(localStorage.getItem("scheduled_notifications")||"[]").filter(n=>n.id!==t);localStorage.setItem("scheduled_notifications",JSON.stringify(i))}}async function ys(t){try{await be(t);try{const a=await d.getDocument(u,j,t);await d.updateDocument(u,j,t,{readCount:(a.readCount||0)+1,readAt:new Date().toISOString()})}catch(a){console.log("Could not update read count:",a)}}catch(a){console.error("Error tracking notification read:",a)}}async function ws(t){try{const a=await d.getDocument(u,j,t);await d.updateDocument(u,j,t,{clickCount:(a.clickCount||0)+1})}catch(a){console.error("Error tracking notification click:",a)}}async function vs(){try{const a=(await d.listDocuments(u,j,[l.equal("status","sent"),l.limit(1e3)])).documents,r=a.length,i=a.filter(m=>m.isRead).length,n=a.reduce((m,N)=>m+(N.clickCount||0),0);return{totalSent:r,totalRead:i,totalClicks:n,readRate:r>0?i/r*100:0,clickRate:r>0?n/r*100:0}}catch(t){return console.error("Error getting notification analytics:",t),{totalSent:0,totalRead:0,totalClicks:0,readRate:0,clickRate:0}}}async function Ss(t,a,r){try{await F("order_confirmed",{orderNumber:a,orderTotal:r.toFixed(2)},[t])}catch(i){console.error("Error sending order confirmation:",i)}}async function As(t,a,r){try{await F("commission_earned",{amount:a.toFixed(2),orderNumber:r},[t])}catch(i){console.error("Error sending commission notification:",i)}}async function Cs(t,a,r){try{await F("commission_paid",{amount:a.toFixed(2),transactionId:r},[t])}catch(i){console.error("Error sending commission paid notification:",i)}}async function bs(t,a,r){try{await F("order_shipped",{orderNumber:a,trackingNumber:r},[t])}catch(i){console.error("Error sending order shipped notification:",i)}}async function Ds(t,a){try{await F("welcome",{userName:a},[t])}catch(r){console.error("Error sending welcome notification:",r)}}const U={getUserNotifications:hs,getUnreadCount:xs,markAsRead:be,markAllAsRead:ps,deleteNotification:gs,getAllNotifications:ms,createNotification:le,broadcastNotification:De,getNotificationTemplates:Te,getDefaultTemplates:Ee,createFromTemplate:F,scheduleNotification:js,getScheduledNotifications:fs,cancelScheduledNotification:Ns,trackNotificationRead:ys,trackNotificationClick:ws,getNotificationAnalytics:vs,sendOrderConfirmationNotification:Ss,sendCommissionEarnedNotification:As,sendCommissionPaidNotification:Cs,sendOrderShippedNotification:bs,sendWelcomeNotification:Ds};function Bs(){const{toast:t}=Ke(),[a,r]=h.useState(!0),[i,n]=h.useState([]),[m,N]=h.useState([]),[y,T]=h.useState([]),[C,G]=h.useState(""),[E,q]=h.useState(""),[B,P]=h.useState("info"),[R,H]=h.useState("all"),[b,$]=h.useState(["inApp"]),[X,ee]=h.useState(""),[Re,oe]=h.useState(!1),[_,de]=h.useState(""),[L,ue]=h.useState(""),[O,me]=h.useState({totalNotifications:0,readRate:0,activeUsersToday:0,engagementRate:0,monthlyGrowth:0});h.useEffect(()=>{$e()},[]);const $e=async()=>{r(!0);try{await Promise.all([Ie(),Oe(),se()])}catch(s){console.error("Error loading data:",s)}finally{r(!1)}},Ie=async()=>{try{const o=(await U.getAllNotifications()).map(c=>({id:c.$id,title:c.title,message:c.message,type:c.type,targetAudience:c.targetAudience,specificUsers:c.specificUsers,channels:c.channels,status:c.status,sentAt:c.sentAt,readCount:c.readCount,totalRecipients:c.totalRecipients,createdAt:c.$createdAt,clickCount:c.clickCount}));n(o),ke(o)}catch(s){console.error("Error loading notifications:",s),n([]),me({totalNotifications:0,readRate:0,activeUsersToday:0,engagementRate:0,monthlyGrowth:0})}},ke=s=>{const o=s.length,c=s.reduce((D,f)=>D+f.totalRecipients,0),xe=s.reduce((D,f)=>D+f.readCount,0),_e=c>0?xe/c*100:0,Y=new Date,z=Y.getMonth(),Le=z===0?11:z-1,pe=s.filter(D=>{const f=new Date(D.createdAt);return f.getMonth()===z&&f.getFullYear()===Y.getFullYear()}).length,te=s.filter(D=>{const f=new Date(D.createdAt),qe=z===0?Y.getFullYear()-1:Y.getFullYear();return f.getMonth()===Le&&f.getFullYear()===qe}).length,Me=te>0?(pe-te)/te*100:pe>0?100:0,Ue=s.reduce((D,f)=>f.clickCount||0,0),Ge=c>0?(xe+Ue)/c*100:0;me({totalNotifications:o,readRate:Math.round(_e*10)/10,activeUsersToday:c,engagementRate:Math.round(Ge*10)/10,monthlyGrowth:Math.round(Me*10)/10})},Oe=async()=>{try{const s=await U.getNotificationTemplates();N(s)}catch(s){console.error("Error loading templates:",s)}},se=async()=>{try{const s=await U.getScheduledNotifications();T(s)}catch(s){console.error("Error loading scheduled notifications:",s)}},he=async(s=!1)=>{if(!C||!E){t({variant:"destructive",title:"Ø®Ø·Ø£",description:"ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©"});return}if(s&&(!_||!L)){t({variant:"destructive",title:"Ø®Ø·Ø£",description:"ÙŠØ±Ø¬Ù‰ ØªØ­Ø¯ÙŠØ¯ ØªØ§Ø±ÙŠØ® ÙˆÙˆÙ‚Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"});return}r(!0);try{if(s){const o=new Date(`${_}T${L}`);await U.scheduleNotification({title:C,message:E,type:B,targetAudience:R,specificUsers:R==="specific"?X.split(",").map(c=>c.trim()):void 0,channels:b,isRead:!1,totalRecipients:0},o),t({title:"ØªÙ… Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø© Ø¨Ù†Ø¬Ø§Ø­",description:`Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙÙŠ ${o.toLocaleString("ar-EG")}`}),se()}else{await new Promise(c=>setTimeout(c,1500));const o={id:Date.now().toString(),title:C,message:E,type:B,targetAudience:R,specificUsers:R==="specific"?X.split(",").map(c=>c.trim()):void 0,channels:b,status:"sent",sentAt:new Date().toISOString(),readCount:0,totalRecipients:R==="all"?1200:120,createdAt:new Date().toISOString()};n([o,...i]),t({title:"ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­",description:`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¥Ù„Ù‰ ${o.totalRecipients} Ù…Ø³ØªØ®Ø¯Ù…`})}G(""),q(""),P("info"),H("all"),$(["inApp"]),ee(""),de(""),ue("")}catch{t({variant:"destructive",title:"Ø®Ø·Ø£",description:"ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±"})}finally{r(!1)}},Fe=s=>{G(s.title),q(s.message),P(s.type),H(s.targetAudience),$(s.channels),t({title:"ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø§Ù„Ø¨",description:`ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ù‚Ø§Ù„Ø¨ "${s.name}"`})},J=s=>{switch(s){case"info":return"bg-blue-500";case"success":return"bg-green-500";case"warning":return"bg-yellow-500";case"error":return"bg-red-500";case"promotion":return"bg-purple-500";default:return"bg-gray-500"}};return e.jsx(Ze,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Ø£Ø±Ø³Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ÙˆØªØ§Ø¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„Ø©"})]}),e.jsxs(I,{variant:"outline",className:"gap-1",children:[e.jsx(ae,{className:"h-4 w-4"}),i.length," Ø¥Ø´Ø¹Ø§Ø±"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(w,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"}),e.jsx(ae,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.totalNotifications}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[O.monthlyGrowth>0?"+":"",O.monthlyGrowth,"% Ù…Ù† Ø§Ù„Ø´Ù‡Ø± Ø§Ù„Ù…Ø§Ø¶ÙŠ"]})]})]}),e.jsxs(w,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©"}),e.jsx(re,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[O.readRate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ù…Ù† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø±Ø³Ù„"})]})]}),e.jsxs(w,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ†"}),e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O.activeUsersToday.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ù…Ø³ØªØ®Ø¯Ù…"})]})]}),e.jsxs(w,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(S,{className:"text-sm font-medium",children:"Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªÙØ§Ø¹Ù„"}),e.jsx(Pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(A,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[O.engagementRate,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ù‚Ø±Ø§Ø¡Ø© + Ù†Ù‚Ø±"})]})]})]}),e.jsxs(rs,{defaultValue:"send",className:"space-y-4",children:[e.jsxs(is,{children:[e.jsx(Q,{value:"send",children:"Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯"}),e.jsx(Q,{value:"templates",children:"Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨"}),e.jsx(Q,{value:"scheduled",children:"Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø©"}),e.jsx(Q,{value:"history",children:"Ø³Ø¬Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"})]}),e.jsx(W,{value:"send",className:"space-y-4",children:e.jsxs(w,{children:[e.jsxs(v,{children:[e.jsx(S,{children:"Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¬Ø¯ÙŠØ¯"}),e.jsx(V,{children:"Ø£Ø±Ø³Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø¹Ø¨Ø± Ù‚Ù†ÙˆØ§Øª Ù…ØªØ¹Ø¯Ø¯Ø©"})]}),e.jsxs(A,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"title",children:"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± *"}),e.jsx(ie,{id:"title",placeholder:"Ø£Ø¯Ø®Ù„ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±",value:C,onChange:s=>G(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"message",children:"Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© *"}),e.jsx(ye,{id:"message",placeholder:"Ø£Ø¯Ø®Ù„ Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©...",rows:4,value:E,onChange:s=>q(s.target.value)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[E.length,"/500 Ø­Ø±Ù"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±"}),e.jsxs(cs,{value:B,onValueChange:s=>P(s),children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Z,{value:"info",id:"info"}),e.jsxs(g,{htmlFor:"info",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(ge,{className:"h-4 w-4 text-blue-500"}),"Ù…Ø¹Ù„ÙˆÙ…Ø§Øª"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Z,{value:"success",id:"success"}),e.jsxs(g,{htmlFor:"success",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(He,{className:"h-4 w-4 text-green-500"}),"Ù†Ø¬Ø§Ø­"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Z,{value:"warning",id:"warning"}),e.jsxs(g,{htmlFor:"warning",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(ge,{className:"h-4 w-4 text-yellow-500"}),"ØªØ­Ø°ÙŠØ±"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Z,{value:"promotion",id:"promotion"}),e.jsxs(g,{htmlFor:"promotion",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Je,{className:"h-4 w-4 text-purple-500"}),"Ø¹Ø±Ø¶ ØªØ±ÙˆÙŠØ¬ÙŠ"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù"}),e.jsxs(ns,{value:R,onValueChange:s=>H(s),children:[e.jsx(ls,{children:e.jsx(os,{placeholder:"Ø§Ø®ØªØ± Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù"})}),e.jsxs(ds,{children:[e.jsx(M,{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsx(M,{value:"customers",children:"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙ‚Ø·"}),e.jsx(M,{value:"affiliates",children:"Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ† Ø¨Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©"}),e.jsx(M,{value:"merchants",children:"Ø§Ù„ØªØ¬Ø§Ø±"}),e.jsx(M,{value:"specific",children:"Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ø­Ø¯Ø¯ÙŠÙ†"})]})]})]}),R==="specific"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"emails",children:"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"}),e.jsx(ye,{id:"emails",placeholder:"Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…ÙØµÙˆÙ„Ø§Ù‹ Ø¨ÙØ§ØµÙ„Ø©...",rows:3,value:X,onChange:s=>ee(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Ne,{id:"inApp",checked:b.includes("inApp"),onCheckedChange:s=>{$(s?[...b,"inApp"]:b.filter(o=>o!=="inApp"))}}),e.jsxs(g,{htmlFor:"inApp",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(je,{className:"h-4 w-4"}),"Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(Ne,{id:"email",checked:b.includes("email"),onCheckedChange:s=>{$(s?[...b,"email"]:b.filter(o=>o!=="email"))}}),e.jsxs(g,{htmlFor:"email",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(fe,{className:"h-4 w-4"}),"Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{children:"Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(ie,{type:"date",value:_,onChange:s=>de(s.target.value),min:new Date().toISOString().split("T")[0]})}),e.jsx("div",{children:e.jsx(ie,{type:"time",value:L,onChange:s=>ue(s.target.value)})})]}),_&&L&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ø³ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ÙÙŠ: ",new Date(`${_}T${L}`).toLocaleString("ar-EG")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(k,{variant:"outline",onClick:()=>oe(!0),disabled:!C||!E,children:[e.jsx(re,{className:"h-4 w-4 ml-2"}),"Ù…Ø¹Ø§ÙŠÙ†Ø©"]}),e.jsxs("div",{className:"space-x-2 rtl:space-x-reverse",children:[e.jsx(k,{variant:"outline",onClick:()=>{G(""),q(""),P("info"),H("all"),$(["inApp"]),ee("")},children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(k,{onClick:()=>he(!1),disabled:a,children:a?e.jsx(e.Fragment,{children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„..."}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"h-4 w-4 ml-2"}),"Ø¥Ø±Ø³Ø§Ù„ ÙÙˆØ±Ø§Ù‹"]})}),e.jsx(k,{variant:"secondary",onClick:()=>he(!0),disabled:a,children:a?e.jsx(e.Fragment,{children:"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„Ø©..."}):e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"h-4 w-4 ml-2"}),"Ø¬Ø¯ÙˆÙ„Ø© Ù„Ù„Ø¥Ø±Ø³Ø§Ù„"]})})]})]})]})]})}),e.jsx(W,{value:"history",className:"space-y-4",children:e.jsxs(w,{children:[e.jsxs(v,{children:[e.jsx(S,{children:"Ø³Ø¬Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„Ø©"}),e.jsx(V,{children:"Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø±Ø³Ù„Ø© Ø³Ø§Ø¨Ù‚Ø§Ù‹"})]}),e.jsx(A,{children:e.jsxs(we,{children:[e.jsx(ve,{children:e.jsxs(K,{children:[e.jsx(x,{children:"Ø§Ù„Ù†ÙˆØ¹"}),e.jsx(x,{children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx(x,{children:"Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±"}),e.jsx(x,{children:"Ø§Ù„Ù‚Ù†ÙˆØ§Øª"}),e.jsx(x,{children:"Ø§Ù„Ù…Ø³ØªÙ„Ù…ÙŠÙ†"}),e.jsx(x,{children:"Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©"}),e.jsx(x,{children:"Ø§Ù„ØªØ§Ø±ÙŠØ®"}),e.jsx(x,{children:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx(Se,{children:i.map(s=>e.jsxs(K,{children:[e.jsx(p,{children:e.jsx(I,{className:`${J(s.type)} text-white`,children:s.type})}),e.jsx(p,{className:"font-medium",children:s.title}),e.jsxs(p,{children:[s.targetAudience==="all"&&"Ø§Ù„Ø¬Ù…ÙŠØ¹",s.targetAudience==="customers"&&"Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",s.targetAudience==="affiliates"&&"Ø§Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ†",s.targetAudience==="merchants"&&"Ø§Ù„ØªØ¬Ø§Ø±",s.targetAudience==="specific"&&"Ù…Ø­Ø¯Ø¯"]}),e.jsx(p,{children:e.jsxs("div",{className:"flex gap-1",children:[s.channels.includes("inApp")&&e.jsx(je,{className:"h-4 w-4"}),s.channels.includes("email")&&e.jsx(fe,{className:"h-4 w-4"})]})}),e.jsx(p,{children:s.totalRecipients}),e.jsxs(p,{children:[Math.round(s.readCount/s.totalRecipients*100),"%"]}),e.jsx(p,{className:"text-sm",children:new Date(s.sentAt||s.createdAt).toLocaleDateString("ar-EG")}),e.jsx(p,{children:e.jsx(k,{variant:"ghost",size:"icon",children:e.jsx(re,{className:"h-4 w-4"})})})]},s.id))})]})})]})}),e.jsx(W,{value:"templates",className:"space-y-4",children:e.jsxs(w,{children:[e.jsxs(v,{children:[e.jsx(S,{children:"Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¬Ø§Ù‡Ø²Ø©"}),e.jsx(V,{children:"Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ Ø§Ù„Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©"})]}),e.jsx(A,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(s=>e.jsxs(w,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:[e.jsx(v,{children:e.jsxs(S,{className:"text-lg flex items-center gap-2",children:[e.jsx(I,{className:`${J(s.type)} text-white`,children:s.type}),s.name]})}),e.jsxs(A,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.message})]}),s.variables&&s.variables.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.variables.map(o=>e.jsx(I,{variant:"outline",className:"text-xs",children:`{${o}}`},o))})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsx(I,{variant:"secondary",children:s.targetAudience}),e.jsxs(k,{size:"sm",onClick:()=>Fe(s),children:[e.jsx(Ve,{className:"h-4 w-4 ml-2"}),"Ø§Ø³ØªØ®Ø¯Ø§Ù…"]})]})]})]},s.$id))})})]})}),e.jsx(W,{value:"scheduled",className:"space-y-4",children:e.jsxs(w,{children:[e.jsxs(v,{children:[e.jsx(S,{children:"Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø©"}),e.jsx(V,{children:"Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù‚Ø±Ø± Ø¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹"})]}),e.jsx(A,{children:y.length>0?e.jsxs(we,{children:[e.jsx(ve,{children:e.jsxs(K,{children:[e.jsx(x,{children:"Ø§Ù„Ø¹Ù†ÙˆØ§Ù†"}),e.jsx(x,{children:"Ø§Ù„Ù†ÙˆØ¹"}),e.jsx(x,{children:"Ø§Ù„Ø¬Ù…Ù‡ÙˆØ±"}),e.jsx(x,{children:"Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"}),e.jsx(x,{children:"Ø§Ù„Ø­Ø§Ù„Ø©"}),e.jsx(x,{children:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx(Se,{children:y.map(s=>e.jsxs(K,{children:[e.jsx(p,{className:"font-medium",children:s.title}),e.jsx(p,{children:e.jsx(I,{className:`${J(s.type)} text-white`,children:s.type})}),e.jsx(p,{children:s.targetAudience}),e.jsx(p,{className:"text-sm",children:new Date(s.scheduledFor).toLocaleString("ar-EG")}),e.jsx(p,{children:e.jsx(I,{variant:"outline",children:"Ù…Ø¬Ø¯ÙˆÙ„"})}),e.jsx(p,{children:e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>{confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù„ØºØ§Ø¡ Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„?")&&(U.cancelScheduledNotification(s.id||s.$id),se(),t({title:"ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡",description:"ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„"}))},children:e.jsx(Qe,{className:"h-4 w-4"})})})]},s.id||s.$id))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(We,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù…Ø¬Ø¯ÙˆÙ„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹"})]})})]})})]}),e.jsx(Xe,{open:Re,onOpenChange:oe,children:e.jsxs(es,{children:[e.jsxs(ss,{children:[e.jsx(ts,{children:"Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±"}),e.jsx(as,{children:"Ù‡ÙƒØ°Ø§ Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†"})]}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${J(B)} text-white`,children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:C||"Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:E||"Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©"})]})]})})})]})})]})})}export{Bs as default};
