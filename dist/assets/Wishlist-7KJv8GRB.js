import{W as w,l as C,m as k,Y as S,r as $,j as s,ac as m,bl as z,X as x,a7 as l,o as h,ay as F,z as q,a0 as E,ax as I}from"./vendor-react-CCFRLLzk.js";import{c as P,a as A,u as Q,v as p,f as r,C as u,h as g,g as j,B as n,M as f}from"./index-D-h96Znd.js";import{S as W}from"./SEO-B8rW5KXS.js";import{P as B}from"./loading-screen-Cpi-xclz.js";import"./vendor-ui-BA32w1ww.js";import"./vendor-query-j_rPqiug.js";import"./vendor-other-CzBBjgu5.js";import"./vendor-animations-CPHPqPXb.js";import"./vendor-appwrite-CuqfvTq9.js";function Y(){const{user:a}=P(),{addItem:N}=A(),{toast:c}=Q(),v=w(),d=C(),{data:t=[],isLoading:y}=k({queryKey:p.wishlist((a==null?void 0:a.$id)||""),queryFn:()=>f.getUserWishlist((a==null?void 0:a.$id)||""),enabled:!!(a!=null&&a.$id)}),o=S({mutationFn:({id:e})=>f.removeFromWishlist(e,(a==null?void 0:a.$id)||""),onSuccess:()=>{v.invalidateQueries({queryKey:p.wishlist((a==null?void 0:a.$id)||"")}),c({title:"ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ",description:"ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸÜÿ™ÿ¨ ŸÖŸÜ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©"})},onError:e=>{c({title:"ÿÆÿ∑ÿ£",description:e.message||"ŸÅÿ¥ŸÑ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸÜÿ™ÿ¨",variant:"destructive"})}}),b=e=>{var i;N({productId:e.id,name:e.name,price:e.price,image:j((i=e.images)==null?void 0:i[0]),quantity:1,stockQuantity:e.stockQuantity||e.stock||0,inStock:e.inStock??e.isActive??!0}),c({title:"ÿ™ŸÖ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ©",description:"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿ•ŸÑŸâ ÿßŸÑÿ≥ŸÑÿ©"})};return $.useEffect(()=>{a||d("/login",{replace:!0})},[a,d]),a?y?s.jsx(B,{message:"ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©..."}):s.jsxs(s.Fragment,{children:[s.jsx(W,{title:"ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©",description:"ÿπÿ±ÿ∂ Ÿàÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© ŸÑÿØŸäŸÉ"}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8 flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(m,{className:"h-8 w-8 text-red-500 fill-red-500"}),s.jsx("h1",{className:"text-3xl font-bold",children:"ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©"})]}),s.jsxs("p",{className:"text-muted-foreground",children:["ŸÑÿØŸäŸÉ ",s.jsx("span",{className:"font-semibold text-primary",children:t.length})," ",t.length===1?"ŸÖŸÜÿ™ÿ¨":"ŸÖŸÜÿ™ÿ¨ÿßÿ™"," ŸÅŸä ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©"]})]}),t.length>0&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(r,{variant:"outline",size:"sm",children:[s.jsx(z,{className:"h-4 w-4 ml-2"}),"ŸÖÿ¥ÿßÿ±ŸÉÿ©"]}),s.jsxs(r,{variant:"outline",size:"sm",onClick:()=>{window.confirm(`ŸáŸÑ ÿ™ÿ±ŸäÿØ ÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™ (${t.length}) ŸÖŸÜ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©ÿü`)&&t.forEach(e=>o.mutate({id:e.id}))},children:[s.jsx(x,{className:"h-4 w-4 ml-2"}),"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÉŸÑ"]})]})]}),t.length===0?s.jsx(u,{className:"border-2 border-dashed",children:s.jsx(g,{className:"py-20",children:s.jsxs("div",{className:"text-center max-w-md mx-auto space-y-4",children:[s.jsx("div",{className:"h-24 w-24 rounded-full bg-red-100 dark:bg-red-900/20 mx-auto flex items-center justify-center",children:s.jsx(m,{className:"h-12 w-12 text-red-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© ŸÅÿßÿ±ÿ∫ÿ©"}),s.jsx("p",{className:"text-muted-foreground",children:"ŸÑŸÖ ÿ™ÿ∂ŸÅ ÿ£Ÿä ŸÖŸÜÿ™ÿ¨ÿßÿ™ ÿ•ŸÑŸâ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© ÿ®ÿπÿØ. ÿßÿ®ÿØÿ£ ÿ®ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿ™ÿ¨ÿßÿ™ŸÉ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©!"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center pt-4",children:[s.jsx(r,{size:"lg",asChild:!0,className:"bg-gradient-to-r from-primary to-purple-600",children:s.jsxs(l,{to:"/products",children:[s.jsx(h,{className:"h-5 w-5 ml-2"}),"ÿßÿ®ÿØÿ£ ÿßŸÑÿ™ÿ≥ŸàŸÇ"]})}),s.jsx(r,{size:"lg",variant:"outline",asChild:!0,children:s.jsx(l,{to:"/deals",children:"ÿßŸÑÿπÿ±Ÿàÿ∂ ÿßŸÑÿÆÿßÿµÿ©"})})]})]})})}):s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:t.map(e=>{var i;return s.jsx(u,{className:"card-hover group",children:s.jsxs(g,{className:"p-4",children:[s.jsxs("div",{className:"relative aspect-square mb-4 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800",children:[s.jsx(l,{to:`/products/${e.productId}`,children:s.jsx("img",{src:j((i=e.product.images)==null?void 0:i[0]),alt:e.product.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),s.jsx(r,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>o.mutate({id:e.id}),children:s.jsx(x,{className:"h-4 w-4"})}),!e.product.inStock&&s.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:s.jsx(n,{variant:"destructive",className:"text-sm",children:"ŸÜŸÅÿ∞ÿ™ ÿßŸÑŸÉŸÖŸäÿ©"})}),e.product.originalPrice&&s.jsxs(n,{className:"absolute top-2 left-2 bg-gradient-to-r from-red-500 to-orange-500",children:["-",Math.round((e.product.originalPrice-e.product.price)/e.product.originalPrice*100),"%"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(l,{to:`/products/${e.productId}`,children:s.jsx("h3",{className:"font-semibold text-lg line-clamp-2 hover:text-primary",children:e.product.name})}),e.product.category&&s.jsx(n,{variant:"outline",className:"text-xs",children:e.product.category.name}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.product.rating>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(F,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),s.jsx("span",{className:"font-semibold",children:e.product.rating.toFixed(1)}),s.jsxs("span",{className:"text-muted-foreground",children:["(",e.product.reviewCount,")"]})]}),e.product.inStock?s.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[s.jsx(q,{className:"h-4 w-4"}),s.jsx("span",{className:"font-semibold",children:"ŸÖÿ™ŸàŸÅÿ±"})]}):s.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[s.jsx(E,{className:"h-4 w-4"}),s.jsx("span",{className:"font-semibold",children:"ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±"})]})]}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsxs("span",{className:"text-2xl font-bold text-primary",children:[e.product.price.toFixed(2)," ÿ¨ŸÜŸäŸá"]}),e.product.originalPrice&&s.jsxs("span",{className:"text-sm text-gray-500 line-through",children:[e.product.originalPrice.toFixed(2)," ÿ¨ŸÜŸäŸá"]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsxs(r,{onClick:()=>b(e.product),disabled:!e.product.inStock,className:"flex-1 bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",size:"sm",children:[s.jsx(h,{className:"h-4 w-4 ml-2"}),"ÿ£ÿ∂ŸÅ ŸÑŸÑÿ≥ŸÑÿ© üõí"]}),s.jsx(r,{variant:"outline",size:"sm",asChild:!0,children:s.jsx(l,{to:`/products/${e.productId}`,children:s.jsx(I,{className:"h-4 w-4"})})})]})]})]})},e.id)})})]})]}):null}export{Y as default};
