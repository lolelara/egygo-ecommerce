import{r as x,j as e,C as c,e as d,g as o,B as u,aw as g,o as f,J as p,ab as N,av as b,aa as v,f as m,a6 as h,a as S}from"./index-Ce-RwxJS.js";import{A as j,U as y}from"./AdminLayout-DRAN_nM7.js";import{a as w}from"./admin-api-DJKkOHRe.js";import{C}from"./clock-D_TAAEO_.js";import"./tag-BB9opunb.js";import"./settings-DdUeHZqS.js";const a=({title:t,value:i,description:l,icon:n,trend:s})=>e.jsxs(c,{children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium",children:t}),e.jsx(n,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i}),l&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l}),s&&e.jsxs("div",{className:`flex items-center text-xs mt-1 ${s.isPositive?"text-green-600":"text-red-600"}`,children:[e.jsx(v,{className:"h-3 w-3 mr-1"}),s.isPositive?"+":"",s.value,"% من الشهر الماضي"]})]})]}),P=({status:t})=>{const i={PENDING:{label:"في الانتظار",variant:"secondary"},PROCESSING:{label:"قيد المعالجة",variant:"default"},SHIPPED:{label:"تم الشحن",variant:"outline"},DELIVERED:{label:"تم التسليم",variant:"secondary"},CANCELLED:{label:"ملغي",variant:"destructive"}},l=i[t]||i.PENDING;return e.jsx(S,{variant:l.variant,children:l.label})};function I(){const[t,i]=x.useState(null),[l,n]=x.useState(!0);return x.useEffect(()=>{(async()=>{n(!0);try{const r=await w.getStats();i(r)}catch(r){console.error("Error fetching admin stats:",r),i(null)}finally{n(!1)}})()},[]),l?e.jsx(j,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"لوحة التحكم"})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((s,r)=>e.jsxs(c,{children:[e.jsx(d,{className:"animate-pulse",children:e.jsx("div",{className:"h-4 bg-muted rounded w-24"})}),e.jsxs(o,{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-16 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-32"})]})]},r))})]})}):t?e.jsx(j,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"لوحة التحكم"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(u,{size:"sm",children:"تحديث البيانات"})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(a,{title:"إجمالي المستخدمين",value:t.totalUsers.toLocaleString(),icon:g,trend:{value:12,isPositive:!0}}),e.jsx(a,{title:"إجمالي المنتجات",value:t.totalProducts,icon:f,trend:{value:8,isPositive:!0}}),e.jsx(a,{title:"إجمالي الطلبات",value:t.totalOrders.toLocaleString(),icon:p,trend:{value:15,isPositive:!0}}),e.jsx(a,{title:"إجمالي الإيرادات",value:`${t.totalRevenue.toLocaleString()} ج.م`,icon:N,trend:{value:23,isPositive:!0}})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(a,{title:"الطلبات المعلقة",value:t.pendingOrders,description:"تحتاج لمراجعة",icon:C}),e.jsx(a,{title:"إجمالي الشركاء",value:t.totalAffiliates,icon:y,trend:{value:5,isPositive:!0}}),e.jsx(a,{title:"العمولات المعلقة",value:`${t.pendingCommissions.toLocaleString()} ج.م`,description:"في انتظار الدفع",icon:b}),e.jsx(a,{title:"إيرادات هذا الشهر",value:`${t.thisMonthRevenue.toLocaleString()} ج.م`,description:`${t.thisMonthOrders} طلب`,icon:v})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(m,{children:"المنتجات الأكثر مبيعاً"}),e.jsx(h,{children:"أفضل المنتجات من حيث المبيعات"})]}),e.jsx(o,{children:e.jsx("div",{className:"space-y-4",children:t.topProducts.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-sm font-medium",children:r+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.product.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.soldQuantity," قطعة •"," ",s.revenue.toLocaleString()," ج.م"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.product.price," ج.م"]})]},s.product.id))})})]}),e.jsxs(c,{children:[e.jsxs(d,{children:[e.jsx(m,{children:"الطلبات الحديثة"}),e.jsx(h,{children:"آخر الطلبات المستلمة"})]}),e.jsxs(o,{children:[e.jsx("div",{className:"space-y-4",children:t.recentOrders.map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:s.orderNumber}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString("ar-EG")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:[s.total," ج.م"]}),e.jsx(P,{status:s.status})]})]},s.id))}),e.jsx("div",{className:"mt-4",children:e.jsx(u,{variant:"outline",size:"sm",className:"w-full",children:"عرض جميع الطلبات"})})]})]})]})]})}):null}export{I as default};
