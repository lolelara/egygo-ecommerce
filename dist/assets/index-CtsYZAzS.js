const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Products-Cwr0LLN-.js","assets/vendor-react-CCFRLLzk.js","assets/vendor-ui-BA32w1ww.js","assets/vendor-query-j_rPqiug.js","assets/vendor-other-CzBBjgu5.js","assets/vendor-other-FVOTwPhI.css","assets/vendor-animations-CPHPqPXb.js","assets/vendor-animations-BpgSqZrL.css","assets/vendor-react-DFW2o1-N.css","assets/LoadingSkeletons-CR-zcJD3.js","assets/skeleton-CNtgH3zu.js","assets/vendor-appwrite-CuqfvTq9.js","assets/SEOHead-vAugBEQv.js","assets/ProductDetail-BOO05SUN.js","assets/tabs-Boky9FfO.js","assets/avatar-Glpu3gcq.js","assets/progress-CYuOOZOb.js","assets/loading-screen-mNgkYjLx.js","assets/Cart-9B_RxNVu.js","assets/coupons-api-USCFv_Xl.js","assets/Checkout-FBkJWBnK.js","assets/radio-group-BqKCXO6V.js","assets/Wishlist-Csm-oMZ9.js","assets/SEO-B8rW5KXS.js","assets/MyOrders-BVfskfEi.js","assets/OrderTracking-cwCOhs5j.js","assets/OrderSuccess-DVinv4BU.js","assets/CustomerAccount-D_YZh2-a.js","assets/appwrite-client-DFce-dPK.js","assets/Affiliate-Dk38fFt5.js","assets/AffiliateDashboard-B0jV5Hvp.js","assets/AffiliateSidebar-DQOqKqks.js","assets/NewAffiliateDashboard-Dq4eLWNE.js","assets/EnhancedAffiliateDashboard-DK_xvijr.js","assets/PendingApprovalScreen-Ce1_X_Se.js","assets/affiliate-api-BMy8PTXd.js","assets/AffiliateLandingPages-DQSBduqW.js","assets/AffiliateAnalytics-B5WdhVoe.js","assets/AffiliateLinkManager-DF-j79rh.js","assets/table-DM4QjHXT.js","assets/AffiliateCreatives-w2Iwyh9k.js","assets/AffiliateCoupons-DaaGm9L1.js","assets/AffiliateBanners-BWXURyJM.js","assets/AffiliateMarketingTips-BxPfACjR.js","assets/AffiliateCourses-BkQ9BlTx.js","assets/AffiliateWithdrawPage-BdC7e-DN.js","assets/AffiliateResourcesPage-BB027oa0.js","assets/AffiliateSupportPage-B1NGKEdO.js","assets/AffiliateReferralSystem-kADVdy9N.js","assets/AffiliateEarningsHistory-MczPY2Vm.js","assets/Merchant-CjR52pPc.js","assets/MerchantDashboard-BJZgQtIs.js","assets/AdminLayout-C-VSnXvz.js","assets/MerchantProducts-DcqP6YKK.js","assets/AdminProducts-7JmU1mv0.js","assets/admin-api-pmR1cZ6X.js","assets/MerchantProductsStatus-BMCUgd1j.js","assets/MerchantOrders-DYltJkag.js","assets/AdminOrders-DirRQBTh.js","assets/MerchantAnalytics-BrOns-2f.js","assets/AdminAnalytics-BC5Q_cp0.js","assets/MerchantAdvertising-haoy3ICR.js","assets/MerchantFinancialHistory-C3Jh6TdC.js","assets/AdminDashboard-CDqnFAbR.js","assets/EnhancedAdminDashboard-A8J4xUk6.js","assets/AdminUsers-BelWJS-t.js","assets/AdminCouponsManager-Gsi4SSik.js","assets/AdminOffersManager-B0Vci40a.js","assets/AdminProductApproval-Cj_oXJXS.js","assets/AdminCategories-qBVZSmnS.js","assets/AdminCommissions-BdGs6epx.js","assets/AdminPendingAccounts-Cup4a44N.js","assets/AdminUserManagement-B5dORfU8.js","assets/AdminUserManagementFixed-CeYJbKwi.js","assets/AdminProductsAdvanced-CUy0Wc0r.js","assets/AdminSettingsPage-CHV0vifL.js","assets/AdminShipping--A2PUWeV.js","assets/AdminAdvancedSettings-DFT-zI7e.js","assets/AdminNotifications-CXeP6dNb.js","assets/AdminCoupons-CtzPd5DS.js","assets/AdminAIDashboard-BZPR1BaM.js","assets/env-B8jD6Wsc.js","assets/AdminFinancialDashboard-V13JrI0l.js","assets/ProductAIDemo-CMS_OTrb.js","assets/accordion-ZLNPodRp.js","assets/TestAI-Bu2yOIDj.js","assets/AboutPage-D29MabBQ.js","assets/ContactPage-DKyiA_-p.js","assets/FAQPage-CTIM8C5P.js","assets/PrivacyPolicy-Csdd6qXb.js","assets/TermsOfService-fQ1Iwvxa.js","assets/ReturnPolicy-CYI_HPGP.js","assets/ShippingPage-BnGy8Stf.js","assets/Categories-DL57Q_fx.js","assets/CategoryPage-KSqs9KfT.js","assets/DealsPage-Bt_4MnCU.js","assets/ProductLanding-CIQFxgjJ.js","assets/ForgotPassword-2UtbX6H1.js","assets/SettingsPage-DE9LV4On.js","assets/UpdateAffiliatePrefs-BadOI_Yf.js","assets/VendoorImport--Fxk47OH.js","assets/IntermediaryDashboard-BVJIlZvx.js"])))=>i.map(i=>d[i]);
var aa=Object.defineProperty;var na=(s,t,r)=>t in s?aa(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var ve=(s,t,r)=>na(s,typeof t!="symbol"?t+"":t,r);import{j as e,r as i,f as Vs,g as ia,S as oa,O as xt,c as zs,C as pt,h as Us,X as Re,T as ft,D as gt,b as Bs,i as Gs,k as Ht,l as De,m as Ye,n as Tt,o as Ce,p as ue,U as ge,F as la,q as Ws,s as Hs,t as Ks,v as ca,w as Qs,I as Js,x as Ys,y as Zs,z as je,B as Xs,E as da,L as er,G as tr,H as ma,J as ua,K as sr,V as ha,M as xa,N as rr,Q as pa,W as fa,Y as ss,Z as lt,_ as Ot,$ as ga,a0 as ja,a1 as rs,a2 as as,a3 as ya,a4 as wa,a5 as va,a6 as ba,a7 as w,a8 as xe,a9 as be,aa as ns,ab as Kt,ac as Lt,ad as $t,ae as jt,af as Ue,ag as Ge,ah as Na,ai as ct,aj as ar,ak as nr,al as Xe,am as ir,an as Aa,ao as ka,ap as Ea,aq as Ee,ar as _a,as as or,at as Qt,au as Sa,av as is,aw as os,ax as dt,ay as Me,az as Le,aA as ls,aB as Ca,aC as mt,aD as Ia,aE as Pa,aF as Ra,aG as lr,aH as cr,aI as Da,aJ as Mt,aK as dr,aL as Ta,aM as mr,aN as ur,aO as Oa,aP as hr,aQ as La,aR as xr,aS as pr,aT as $a,aU as Ma,aV as fr,aW as Fa,aX as qa,aY as Va,aZ as cs,a_ as Ft,a$ as qt,b0 as za,b1 as Ua,b2 as ds,b3 as Ba,b4 as gr,b5 as Ga,b6 as ms,b7 as Wa,b8 as Ha,b9 as Ka,ba as Qa,bb as Ja,bc as Ya,bd as st,be as Za,bf as Xa,bg as en,bh as tn,bi as sn,bj as rn,bk as g}from"./vendor-react-CCFRLLzk.js";import{ae as an,af as nn,ag as on,ah as ln,ai as tt,aj as le,ak as cn,al as rt,am as bt,an as Nt,ao as dn,ap as de,aq as At,ar as mn}from"./vendor-other-CzBBjgu5.js";import{b as un}from"./vendor-query-j_rPqiug.js";import{Q as I,C as hn,D as xn,A as pn,S as fn,O as us,I as Ne}from"./vendor-appwrite-CuqfvTq9.js";import{h as gn,P as jn,W as yn,A as wn,D as hs,i as vn,G as bn,F as Nn,T as An,M as xs,j as kt,k as kn,B as En,l as _n,o as ps,p as Et,L as Sn,q as Cn,C as In,r as Pn,s as Rn,t as Dn,O as Tn,v as Ae,x as On,y as fs,N as gs,z as js,E as Ln,H as $n,I as Mn,J as Fn}from"./vendor-animations-CPHPqPXb.js";import"./vendor-ui-BA32w1ww.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();const qn=({...s})=>{const{theme:t="system"}=an();return e.jsx(nn,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})};function _(...s){return on(ln(s))}const Vn=ia,zn=i.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(Vs,{ref:a,sideOffset:t,className:_("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r}));zn.displayName=Vs.displayName;const Un=tt("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=i.forwardRef(({className:s,variant:t,size:r,asChild:a=!1,...n},l)=>{const u=a?oa:"button";return e.jsx(u,{className:_(Un({variant:t,size:r,className:s})),ref:l,...n})});N.displayName="Button";const jr=Bs,Rl=Gs,Bn=zs,yr=i.forwardRef(({className:s,...t},r)=>e.jsx(xt,{ref:r,className:_("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));yr.displayName=xt.displayName;const Jt=i.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(Bn,{children:[e.jsx(yr,{}),e.jsxs(pt,{ref:a,className:_("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[t,e.jsxs(Us,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Jt.displayName=pt.displayName;const wr=({className:s,...t})=>e.jsx("div",{className:_("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});wr.displayName="DialogHeader";const Gn=({className:s,...t})=>e.jsx("div",{className:_("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Gn.displayName="DialogFooter";const vr=i.forwardRef(({className:s,...t},r)=>e.jsx(ft,{ref:r,className:_("text-lg font-semibold leading-none tracking-tight",s),...t}));vr.displayName=ft.displayName;const br=i.forwardRef(({className:s,...t},r)=>e.jsx(gt,{ref:r,className:_("text-sm text-muted-foreground",s),...t}));br.displayName=gt.displayName;const Nr=i.forwardRef(({className:s,...t},r)=>e.jsx(le,{ref:r,className:_("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...t}));Nr.displayName=le.displayName;const Wn=({children:s,...t})=>e.jsx(jr,{...t,children:e.jsx(Jt,{className:"overflow-hidden p-0 shadow-lg",children:e.jsx(Nr,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:s})})}),Ar=i.forwardRef(({className:s,...t},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Ht,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(le.Input,{ref:r,className:_("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...t})]}));Ar.displayName=le.Input.displayName;const kr=i.forwardRef(({className:s,...t},r)=>e.jsx(le.List,{ref:r,className:_("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...t}));kr.displayName=le.List.displayName;const Er=i.forwardRef((s,t)=>e.jsx(le.Empty,{ref:t,className:"py-6 text-center text-sm",...s}));Er.displayName=le.Empty.displayName;const _r=i.forwardRef(({className:s,...t},r)=>e.jsx(le.Group,{ref:r,className:_("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...t}));_r.displayName=le.Group.displayName;const Hn=i.forwardRef(({className:s,...t},r)=>e.jsx(le.Separator,{ref:r,className:_("-mx-1 h-px bg-border",s),...t}));Hn.displayName=le.Separator.displayName;const Sr=i.forwardRef(({className:s,...t},r)=>e.jsx(le.Item,{ref:r,className:_("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",s),...t}));Sr.displayName=le.Item.displayName;const Oe="notifications";class Kn{async getUserNotifications(t,r=50){try{return(await k.listDocuments(C.databaseId,Oe,[I.equal("userId",t),I.orderDesc("$createdAt"),I.limit(r)])).documents}catch(a){return console.error("Error fetching notifications:",a),[]}}async getUnreadCount(t){try{return(await k.listDocuments(C.databaseId,Oe,[I.equal("userId",t),I.equal("read",!1)])).total}catch(r){return console.error("Error fetching unread count:",r),0}}async createNotification(t){try{return await k.createDocument(C.databaseId,Oe,"unique()",{...t,read:!1})}catch(r){return console.error("Error creating notification:",r),null}}async markAsRead(t){try{return await k.updateDocument(C.databaseId,Oe,t,{read:!0}),!0}catch(r){return console.error("Error marking notification as read:",r),!1}}async markAllAsRead(t){try{const a=(await this.getUserNotifications(t)).filter(n=>!n.read);return await Promise.all(a.map(n=>this.markAsRead(n.$id))),!0}catch(r){return console.error("Error marking all as read:",r),!1}}async deleteNotification(t){try{return await k.deleteDocument(C.databaseId,Oe,t),!0}catch(r){return console.error("Error deleting notification:",r),!1}}async deleteAllNotifications(t){try{const r=await this.getUserNotifications(t);return await Promise.all(r.map(a=>this.deleteNotification(a.$id))),!0}catch(r){return console.error("Error deleting all notifications:",r),!1}}subscribeToNotifications(t,r){try{const a=yt.subscribe(`databases.${C.databaseId}.collections.${Oe}.documents`,n=>{const l=n.payload;l.userId===t&&r(l)});return()=>{var n;try{typeof a=="function"&&a()}catch(l){(n=l==null?void 0:l.message)!=null&&n.includes("CLOSING or CLOSED")||console.error("Error unsubscribing from notifications:",l)}}}catch(a){return console.error("Error subscribing to notifications:",a),()=>{}}}async notifyOrderStatus(t,r,a){const l={confirmed:{title:"تم تأكيد طلبك",message:`تم تأكيد طلبك #${r} وجاري التجهيز للشحن`,type:"order"},shipped:{title:"تم شحن طلبك",message:`طلبك #${r} في الطريق إليك`,type:"shipping"},delivered:{title:"تم تسليم طلبك",message:`تم تسليم طلبك #${r} بنجاح`,type:"delivery"},cancelled:{title:"تم إلغاء طلبك",message:`تم إلغاء طلبك #${r}`,type:"alert"}}[a];return this.createNotification({userId:t,...l,relatedId:r})}async notifyAffiliateCommission(t,r,a){return this.createNotification({userId:t,type:"commission",title:"عمولة جديدة",message:`حصلت على عمولة ${r} ج.م من الطلب #${a}`,relatedId:a,metadata:{amount:r}})}}const He=new Kn,C={endpoint:"https://cloud.appwrite.io/v1",projectId:"",databaseId:"68de037e003bd03c4d45",storageId:"product-images",collections:{users:"users",products:"products",categories:"categories",orders:"orders",orderItems:"order_items",reviews:"reviews",affiliates:"affiliates",notifications:"notifications",favorites:"favorites",productViews:"product_views",affiliateActivities:"affiliate_activities",affiliateClicks:"affiliate_clicks",affiliateStats:"affiliate_stats",withdrawalRequests:"withdrawal_requests",userPreferences:"user_preferences",referrals:"referrals",referral_earnings:"referral_earnings",offers:"offers"}},yt=new hn().setEndpoint(C.endpoint).setProject(C.projectId),we=new pn(yt),k=new xn(yt),_e=new fn(yt);class se{static isConfigured(){return!1}static async getCurrentUser(){try{return await we.get()}catch(t){return console.log("No active session",t),null}}static async login(t,r){try{return await we.createEmailPasswordSession(t,r)}catch(a){throw console.error("Login error:",a),a}}static async register(t,r,a){try{const n=await we.create("unique()",t,r,a);return n&&await this.login(t,r)}catch(n){throw console.error("Registration error:",n),n}}static async loginWithGoogle(){try{const t=window.location.origin,r=`${t}/#/`,a=`${t}/#/login`;return await we.createOAuth2Session(us.Google,r,a)}catch(t){throw console.error("Google login error:",t),t}}static async loginWithFacebook(){try{const t=window.location.origin,r=`${t}/#/`,a=`${t}/#/login`;return await we.createOAuth2Session(us.Facebook,r,a)}catch(t){throw console.error("Facebook login error:",t),t}}static async logout(){try{return await we.deleteSession("current")}catch(t){throw console.error("Logout error:",t),t}}static async getProducts(t){try{const r=[];return t!=null&&t.categoryId&&r.push(`categoryId="${t.categoryId}"`),t!=null&&t.search&&r.push(`name~"${t.search}"`),await k.listDocuments(C.databaseId,C.collections.products,r)}catch(r){throw console.error("Error fetching products:",r),r}}static async getProduct(t){try{return await k.getDocument(C.databaseId,C.collections.products,t)}catch(r){throw console.error("Error fetching product:",r),r}}static async getCategories(){try{return await k.listDocuments(C.databaseId,C.collections.categories)}catch(t){throw console.error("Error fetching categories:",t),t}}static async updateUserPreferences(t){try{return await we.updatePrefs(t)}catch(r){throw console.error("Error updating user preferences:",r),r}}static async getUserDocument(t){try{return await k.getDocument(C.databaseId,C.collections.users,t)}catch(r){throw console.error("Error fetching user document:",r),r}}static async createUserDocument(t){try{return await k.createDocument(C.databaseId,C.collections.users,t.userId,t)}catch(r){throw console.error("Error creating user document:",r),r}}static async updateUserDocument(t,r){try{return await k.updateDocument(C.databaseId,C.collections.users,t,r)}catch(a){throw console.error("Error updating user document:",a),a}}static async createOrder(t){try{const r=await k.createDocument(C.databaseId,C.collections.orders,"unique()",t);try{await He.notifyOrderStatus(t.userId,r.$id,"confirmed")}catch(a){console.error("Error sending notification:",a)}return r}catch(r){throw console.error("Error creating order:",r),r}}static async getUserOrders(t){try{return await k.listDocuments(C.databaseId,C.collections.orders,[])}catch(r){throw console.error("Error fetching user orders:",r),r}}static async uploadFile(t){try{return await _e.createFile(C.storageId,"unique()",t)}catch(r){throw console.error("Error uploading file:",r),r}}static getFilePreview(t){try{return _e.getFilePreview(C.storageId,t,400,400,"center",100)}catch(r){throw console.error("Error getting file preview:",r),r}}}function wt(s){const{width:t=600,height:r=600,text:a="لا توجد صورة",bgColor:n="f3f4f6",textColor:l="6b7280"}=s,u=`
    <svg width="${t}" height="${r}" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" fill="#${n}"/>
      <text 
        x="50%" 
        y="50%" 
        font-family="Cairo, Arial, sans-serif" 
        font-size="${Math.min(t,r)/10}"
        fill="#${l}" 
        text-anchor="middle" 
        dominant-baseline="middle"
        direction="rtl"
      >
        ${a}
      </text>
    </svg>
  `.trim();return`data:image/svg+xml,${encodeURIComponent(u).replace(/'/g,"%27").replace(/"/g,"%22")}`}function Qn(s){return wt({width:600,height:600,text:s||"منتج",bgColor:"f3f4f6",textColor:"9ca3af"})}function Jn(s){return wt({width:1200,height:300,text:s||"فئة",bgColor:"e5e7eb",textColor:"6b7280"})}function Yn(s,t=300){return wt({width:t,height:t,text:s||"صورة",bgColor:"f9fafb",textColor:"9ca3af"})}function Zn(s){const{width:t=600,height:r=600,text:a="EgyGo",gradient:n="purple"}=s,l={purple:["#8b5cf6","#ec4899"],blue:["#2563eb","#06b6d4"],pink:["#db2777","#f43f5e"],green:["#059669","#10b981"]},[u,h]=l[n],x=`
    <svg width="${t}" height="${r}" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:${u};stop-opacity:1" />
          <stop offset="100%" style="stop-color:${h};stop-opacity:1" />
        </linearGradient>
      </defs>
      <rect width="100%" height="100%" fill="url(#grad)"/>
      <text 
        x="50%" 
        y="50%" 
        font-family="Cairo, Arial, sans-serif" 
        font-size="${Math.min(t,r)/8}"
        font-weight="bold"
        fill="#ffffff" 
        text-anchor="middle" 
        dominant-baseline="middle"
      >
        ${a}
      </text>
    </svg>
  `.trim();return`data:image/svg+xml,${encodeURIComponent(x).replace(/'/g,"%27").replace(/"/g,"%22")}`}function Xn(s){const{width:t=600,height:r=600,icon:a="🖼️",bgColor:n="f3f4f6"}=s,l=`
    <svg width="${t}" height="${r}" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" fill="#${n}"/>
      <text 
        x="50%" 
        y="50%" 
        font-size="${Math.min(t,r)/3}"
        text-anchor="middle" 
        dominant-baseline="middle"
      >
        ${a}
      </text>
    </svg>
  `.trim();return`data:image/svg+xml,${encodeURIComponent(l).replace(/'/g,"%27").replace(/"/g,"%22")}`}const at={product:Qn,category:Jn,square:Yn,gradient:Zn,icon:Xn,custom:wt},We="product-images",Ke={uploadFile:async s=>{try{const t=Ne.unique(),r=await _e.createFile(We,t,s),a=_e.getFileView(We,r.$id);return{fileId:r.$id,url:a.toString(),name:r.name,size:r.sizeOriginal}}catch(t){throw console.error("Error uploading file:",t),new Error(t.message||"فشل رفع الملف")}},uploadFiles:async s=>{try{const t=s.map(r=>Ke.uploadFile(r));return await Promise.all(t)}catch(t){throw console.error("Error uploading files:",t),new Error(t.message||"فشل رفع الملفات")}},deleteFile:async s=>{try{await _e.deleteFile(We,s)}catch(t){throw console.error("Error deleting file:",t),new Error(t.message||"فشل حذف الملف")}},deleteFiles:async s=>{try{const t=s.map(r=>Ke.deleteFile(r));await Promise.all(t)}catch(t){throw console.error("Error deleting files:",t),new Error(t.message||"فشل حذف الملفات")}},getFileUrl:s=>_e.getFileView(We,s).toString(),getImageUrl:s=>s?typeof s=="object"&&"url"in s?s.url:typeof s=="string"?s.startsWith("http://")||s.startsWith("https://")?s:_e.getFileView(We,s).toString():at.product():at.product(),getImageUrls:s=>!s||!Array.isArray(s)||s.length===0?[at.product()]:s.map(t=>Ke.getImageUrl(t)),extractFileId:s=>{try{const t=s.match(/files\/([^\/]+)\/view/);return t?t[1]:null}catch{return null}},validateFile:s=>s.size>5242880?{valid:!1,error:"حجم الملف يجب أن يكون أقل من 5 ميجابايت"}:["image/jpeg","image/jpg","image/png","image/webp"].includes(s.type)?{valid:!0}:{valid:!1,error:"نوع الملف غير مدعوم. يرجى رفع صورة (JPG, PNG, WEBP)"},validateFiles:s=>{const t=[];return s.forEach((r,a)=>{const n=Ke.validateFile(r);!n.valid&&n.error&&t.push(`ملف ${a+1}: ${n.error}`)}),{valid:t.length===0,errors:t}}},$e=Ke.getImageUrl,H="68de037e003bd03c4d45",K={PRODUCTS:"products",CATEGORIES:"categories",ORDERS:"orders",REVIEWS:"reviews",WISHLIST:"wishlist",USERS:"users"},ne=()=>{try{return!!H}catch{return!1}},et={getAll:async s=>{try{if(!ne())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const t=[];t.push(I.equal("status","approved")),s!=null&&s.categoryId&&t.push(I.equal("categoryId",s.categoryId)),(s==null?void 0:s.inStock)!==void 0&&t.push(I.equal("inStock",s.inStock)),(s==null?void 0:s.minPrice)!==void 0&&t.push(I.greaterThanEqual("price",s.minPrice)),(s==null?void 0:s.maxPrice)!==void 0&&t.push(I.lessThanEqual("price",s.maxPrice)),s!=null&&s.searchQuery&&t.push(I.search("name",s.searchQuery));const r=(s==null?void 0:s.limit)||20,a=(s==null?void 0:s.page)||1,n=(a-1)*r;t.push(I.limit(r)),t.push(I.offset(n)),t.push(I.orderDesc("$createdAt"));const l=await k.listDocuments(H,K.PRODUCTS,t);return{products:l.documents.map(h=>({id:h.$id,name:h.name,description:h.description,price:h.price,originalPrice:h.originalPrice,sku:h.sku||`SKU-${h.$id.slice(0,8)}`,inStock:h.inStock,stockQuantity:h.stockQuantity||0,rating:h.rating||0,reviewCount:h.reviewCount||0,affiliateCommission:h.affiliateCommission||0,images:Array.isArray(h.images)?h.images.map(x=>typeof x=="string"?{url:$e(x)}:x):[],tags:h.tags||[],reviews:h.reviews||[],categoryId:h.categoryId,category:h.category,createdAt:new Date(h.$createdAt),updatedAt:new Date(h.$updatedAt)})),total:l.total,page:a,limit:r}}catch(t){console.error("Error fetching products from Appwrite:",t)}},getById:async s=>{try{if(!ne())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const t=await k.getDocument(H,K.PRODUCTS,s);let r=null;if(t.categoryId)try{const a=await k.getDocument(H,K.CATEGORIES,t.categoryId);r={id:a.$id,name:a.name,slug:a.slug}}catch(a){console.log("Category not found:",a)}return{id:t.$id,name:t.name,description:t.description,price:t.price,originalPrice:t.originalPrice,sku:t.sku||`SKU-${t.$id.slice(0,8)}`,inStock:t.inStock,stockQuantity:t.stockQuantity||0,rating:t.rating||0,reviewCount:t.reviewCount||0,affiliateCommission:t.affiliateCommission||0,images:Array.isArray(t.images)?t.images.map(a=>typeof a=="string"?{url:$e(a)}:a):[],tags:t.tags||[],reviews:t.reviews||[],categoryId:t.categoryId,category:r,createdAt:new Date(t.$createdAt),updatedAt:new Date(t.$updatedAt)}}catch(t){console.error("Error fetching product from Appwrite:",t)}},getByCategory:async(s,t)=>{try{if(!ne())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const r=await k.listDocuments(H,K.CATEGORIES,[I.equal("slug",s),I.limit(1)]);if(r.documents.length===0)throw new Error("الفئة غير موجودة");const a=r.documents[0];return et.getAll({...t,categoryId:a.$id})}catch(r){console.error("Error fetching products by category from Appwrite:",r)}}},Cr={getAll:async()=>{try{if(!ne())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");return{categories:(await k.listDocuments(H,K.CATEGORIES,[I.orderAsc("name")])).documents.map(r=>({id:r.$id,name:r.name,slug:r.slug,description:r.description,image:r.image,productCount:r.productCount||0,createdAt:new Date(r.$createdAt),updatedAt:new Date(r.$updatedAt)}))}}catch(s){console.error("Error fetching categories from Appwrite:",s)}},getBySlug:async s=>{try{if(!ne())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const t=await k.listDocuments(H,K.CATEGORIES,[I.equal("slug",s),I.limit(1)]);if(t.documents.length===0)return null;const r=t.documents[0];return{id:r.$id,name:r.name,slug:r.slug,description:r.description,image:r.image,productCount:r.productCount||0,createdAt:new Date(r.$createdAt),updatedAt:new Date(r.$updatedAt)}}catch(t){console.error("Error fetching category from Appwrite:",t)}},getProductsByCategory:async(s,t)=>{try{if(!ne())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const r=await k.listDocuments(H,K.CATEGORIES,[I.equal("slug",s),I.limit(1)]);if(r.documents.length===0)return{products:[],total:0,page:1,limit:20};const a=r.documents[0].$id;return et.getAll({...t,categoryId:a})}catch(r){return console.error("Error fetching products by category from Appwrite:",r),{products:[],total:0,page:1,limit:(t==null?void 0:t.limit)||20}}}},nt={products:["products"],product:s=>["products",s],categories:["categories"],category:s=>["categories",s],categoryProducts:s=>["categories",s,"products"],orders:s=>["orders",s],order:s=>["orders",s],reviews:s=>["reviews",s],wishlist:s=>["wishlist",s],wishlistCheck:(s,t)=>["wishlist-check",s,t]},Dl={getUserOrders:async s=>{try{return ne()?(await k.listDocuments(H,K.ORDERS,[I.equal("userId",s),I.orderDesc("$createdAt")])).documents.map(r=>({id:r.$id,orderNumber:r.orderNumber,status:r.status,total:r.total,subtotal:r.subtotal,shipping:r.shipping||0,discount:r.discount||0,items:r.items||[],shippingAddress:r.shippingAddress,paymentMethod:r.paymentMethod,paymentStatus:r.paymentStatus,createdAt:r.$createdAt,updatedAt:r.$updatedAt})):(console.log("Appwrite not configured for orders"),[])}catch(t){return console.error("Error fetching orders from Appwrite:",t),[]}},getOrderById:async(s,t)=>{try{if(!ne())return null;const r=await k.getDocument(H,K.ORDERS,s);if(r.userId!==t)throw new Error("Unauthorized");return{id:r.$id,orderNumber:r.orderNumber,status:r.status,total:r.total,subtotal:r.subtotal,shipping:r.shipping||0,discount:r.discount||0,items:r.items||[],shippingAddress:r.shippingAddress,billingAddress:r.billingAddress,paymentMethod:r.paymentMethod,paymentStatus:r.paymentStatus,createdAt:r.$createdAt,updatedAt:r.$updatedAt}}catch(r){return console.error("Error fetching order details from Appwrite:",r),null}}},Tl={getProductReviews:async s=>{try{if(!ne())return{reviews:[],stats:{totalReviews:0,averageRating:0,ratingDistribution:[]}};const r=(await k.listDocuments(H,K.REVIEWS,[I.equal("productId",s),I.orderDesc("$createdAt")])).documents.map(u=>({id:u.$id,userId:u.userId,userName:u.userName||"مستخدم",userAvatar:u.userAvatar,rating:u.rating,comment:u.comment,createdAt:u.$createdAt})),a=r.length,n=a>0?r.reduce((u,h)=>u+h.rating,0)/a:0,l=[5,4,3,2,1].map(u=>({rating:u,count:r.filter(h=>h.rating===u).length}));return{reviews:r,stats:{totalReviews:a,averageRating:n,ratingDistribution:l}}}catch(t){return(t==null?void 0:t.code)===404||(t==null?void 0:t.type)==="collection_not_found"?console.log("Reviews collection not found - feature disabled"):console.error("Error fetching reviews from Appwrite:",t),{reviews:[],stats:{totalReviews:0,averageRating:0,ratingDistribution:[]}}}},createReview:async s=>{try{if(!ne())throw new Error("Appwrite not configured");if((await k.listDocuments(H,K.REVIEWS,[I.equal("productId",s.productId),I.equal("userId",s.userId)])).documents.length>0)throw new Error("لقد قمت بتقييم هذا المنتج بالفعل");const r=await k.createDocument(H,K.REVIEWS,"unique()",s);return{id:r.$id,...s,createdAt:r.$createdAt}}catch(t){throw new Error(t.message||"فشل في إضافة المراجعة")}},updateReview:async(s,t)=>{try{if(!ne())throw new Error("Appwrite not configured");if((await k.getDocument(H,K.REVIEWS,s)).userId!==t.userId)throw new Error("غير مصرح لك بتعديل هذه المراجعة");const a={};t.rating!==void 0&&(a.rating=t.rating),t.comment!==void 0&&(a.comment=t.comment);const n=await k.updateDocument(H,K.REVIEWS,s,a);return{id:n.$id,rating:n.rating,comment:n.comment,updatedAt:n.$updatedAt}}catch(r){throw new Error(r.message||"فشل في تحديث المراجعة")}},deleteReview:async(s,t)=>{try{if(!ne())throw new Error("Appwrite not configured");if((await k.getDocument(H,K.REVIEWS,s)).userId!==t)throw new Error("غير مصرح لك بحذف هذه المراجعة");await k.deleteDocument(H,K.REVIEWS,s)}catch(r){throw new Error(r.message||"فشل في حذف المراجعة")}}},Ol={getUserWishlist:async s=>{try{if(!ne())return[];const t=await k.listDocuments(H,K.WISHLIST,[I.equal("userId",s),I.orderDesc("$createdAt")]);return(await Promise.all(t.documents.map(async a=>{try{const n=await k.getDocument(H,K.PRODUCTS,a.productId);return{id:a.$id,productId:a.productId,addedAt:a.$createdAt,product:{id:n.$id,name:n.name,description:n.description,price:n.price,originalPrice:n.originalPrice,inStock:n.inStock,stockQuantity:n.stockQuantity||0,rating:n.rating||0,reviewCount:n.reviewCount||0,images:n.images||[],category:n.category}}}catch(n){return console.error(`Product ${a.productId} not found:`,n),null}}))).filter(a=>a!==null)}catch(t){return console.error("Error fetching wishlist from Appwrite:",t),[]}},addToWishlist:async(s,t)=>{try{if(!ne())throw new Error("Appwrite not configured");if((await k.listDocuments(H,K.WISHLIST,[I.equal("userId",s),I.equal("productId",t)])).documents.length>0)throw new Error("المنتج موجود بالفعل في قائمة المفضلة");const a=await k.createDocument(H,K.WISHLIST,"unique()",{userId:s,productId:t});return{id:a.$id,productId:a.productId,addedAt:a.$createdAt}}catch(r){throw new Error(r.message||"فشل في إضافة المنتج للمفضلة")}},removeFromWishlist:async(s,t)=>{try{if(!ne())throw new Error("Appwrite not configured");if((await k.getDocument(H,K.WISHLIST,s)).userId!==t)throw new Error("غير مصرح لك بحذف هذا العنصر");await k.deleteDocument(H,K.WISHLIST,s)}catch(r){throw new Error(r.message||"فشل في حذف المنتج من المفضلة")}},isInWishlist:async(s,t)=>{try{if(!ne())return{inWishlist:!1,wishlistItemId:null};const r=await k.listDocuments(H,K.WISHLIST,[I.equal("userId",s),I.equal("productId",t)]),a=r.documents.length>0,n=a?r.documents[0].$id:null;return{inWishlist:a,wishlistItemId:n}}catch(r){return console.error("Error checking wishlist:",r),{inWishlist:!1,wishlistItemId:null}}}};function ys(){const[s,t]=i.useState(!1),[r,a]=i.useState(""),n=De();i.useEffect(()=>{const o=c=>{c.key==="k"&&(c.metaKey||c.ctrlKey)&&(c.preventDefault(),t(y=>!y))};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[]);const{data:l}=Ye({queryKey:[...nt.products,"search",r],queryFn:()=>et.getAll({limit:5}),enabled:r.length>2}),h=[...[{id:"products-page",title:"المنتجات",subtitle:"عرض جميع المنتجات",category:"pages",url:"/products",icon:e.jsx(Tt,{className:"h-4 w-4"})},{id:"orders-page",title:"طلباتي",subtitle:"تتبع الطلبات",category:"pages",url:"/orders",icon:e.jsx(Ce,{className:"h-4 w-4"})},{id:"affiliate-dashboard",title:"لوحة المسوق",subtitle:"إحصائيات وروابط",category:"pages",url:"/affiliate/dashboard",icon:e.jsx(ue,{className:"h-4 w-4"})},{id:"admin-dashboard",title:"لوحة الإدارة",subtitle:"إدارة الموقع",category:"pages",url:"/admin/dashboard",icon:e.jsx(ge,{className:"h-4 w-4"})},{id:"docs",title:"المساعدة والدعم",subtitle:"مركز المساعدة",category:"pages",url:"/faq",icon:e.jsx(la,{className:"h-4 w-4"})}].filter(o=>{var c;return o.title.toLowerCase().includes(r.toLowerCase())||((c=o.subtitle)==null?void 0:c.toLowerCase().includes(r.toLowerCase()))}),...((l==null?void 0:l.products)||[]).map(o=>({id:o.id,title:o.name,subtitle:`${o.price} جنيه`,category:"products",url:`/product/${o.id}`,icon:e.jsx(Tt,{className:"h-4 w-4"})}))],x=i.useCallback(o=>{t(!1),a(""),n(o.url)},[n]),A=o=>({products:"المنتجات",orders:"الطلبات",users:"المستخدمين",pages:"الصفحات",analytics:"التحليلات"})[o]||o,m=h.reduce((o,c)=>(o[c.category]||(o[c.category]=[]),o[c.category].push(c),o),{});return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>t(!0),className:_("inline-flex items-center gap-2 rounded-lg border border-input bg-background px-3 py-2","text-sm text-muted-foreground transition-colors","hover:bg-accent hover:text-accent-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"),children:[e.jsx(Ht,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"بحث سريع..."}),e.jsxs("kbd",{className:"pointer-events-none hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex",children:[e.jsx("span",{className:"text-xs",children:"⌘"}),"K"]})]}),e.jsxs(Wn,{open:s,onOpenChange:t,children:[e.jsx(Ar,{placeholder:"ابحث عن منتجات، طلبات، صفحات...",value:r,onValueChange:a}),e.jsxs(kr,{children:[e.jsx(Er,{children:"لا توجد نتائج"}),Object.entries(m).map(([o,c])=>e.jsx(_r,{heading:A(o),children:c.map(y=>e.jsx(Sr,{value:y.title,onSelect:()=>x(y),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[y.icon,e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:y.title}),y.subtitle&&e.jsx("span",{className:"text-xs text-muted-foreground",children:y.subtitle})]})]})},y.id))},o))]})]})]})}const Ie=ma,Pe=ua,ei=i.forwardRef(({className:s,inset:t,children:r,...a},n)=>e.jsxs(Ws,{ref:n,className:_("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...a,children:[r,e.jsx(Hs,{className:"ml-auto h-4 w-4"})]}));ei.displayName=Ws.displayName;const ti=i.forwardRef(({className:s,...t},r)=>e.jsx(Ks,{ref:r,className:_("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));ti.displayName=Ks.displayName;const ke=i.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(ca,{children:e.jsx(Qs,{ref:a,sideOffset:t,className:_("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}));ke.displayName=Qs.displayName;const M=i.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(Js,{ref:a,className:_("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...r}));M.displayName=Js.displayName;const si=i.forwardRef(({className:s,children:t,checked:r,...a},n)=>e.jsxs(Ys,{ref:n,className:_("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Zs,{children:e.jsx(je,{className:"h-4 w-4"})})}),t]}));si.displayName=Ys.displayName;const ri=i.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(Xs,{ref:a,className:_("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Zs,{children:e.jsx(da,{className:"h-2 w-2 fill-current"})})}),t]}));ri.displayName=Xs.displayName;const Ir=i.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(er,{ref:a,className:_("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...r}));Ir.displayName=er.displayName;const ie=i.forwardRef(({className:s,...t},r)=>e.jsx(tr,{ref:r,className:_("-mx-1 my-1 h-px bg-muted",s),...t}));ie.displayName=tr.displayName;const ws=Bs,vs=Gs,ai=zs,Pr=i.forwardRef(({className:s,...t},r)=>e.jsx(xt,{className:_("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));Pr.displayName=xt.displayName;const ni=tt("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Vt=i.forwardRef(({side:s="right",className:t,children:r,...a},n)=>e.jsxs(ai,{children:[e.jsx(Pr,{}),e.jsxs(pt,{ref:n,className:_(ni({side:s}),t),...a,children:[r,e.jsxs(Us,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Vt.displayName=pt.displayName;const Rr=({className:s,...t})=>e.jsx("div",{className:_("flex flex-col space-y-2 text-center sm:text-left",s),...t});Rr.displayName="SheetHeader";const Dr=i.forwardRef(({className:s,...t},r)=>e.jsx(ft,{ref:r,className:_("text-lg font-semibold text-foreground",s),...t}));Dr.displayName=ft.displayName;const ii=i.forwardRef(({className:s,...t},r)=>e.jsx(gt,{ref:r,className:_("text-sm text-muted-foreground",s),...t}));ii.displayName=gt.displayName;const oi=tt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function X({className:s,variant:t,...r}){return e.jsx("div",{className:_(oi({variant:t}),s),...r})}function li(s){const{userId:t,onUpdate:r,interval:a=1e4}=s;let n,l=null;const u=async()=>{try{const h=await k.listDocuments(C.databaseId,"userPreferences",[I.equal("userId",t)]);if(h.documents.length>0){const x=h.documents[0];l===null?l=x.accountStatus:l!==x.accountStatus&&(console.log("🔄 Account status changed:",l,"→",x.accountStatus),r(x),l=x.accountStatus)}}catch(h){console.error("Error checking for updates:",h)}};return n=setInterval(u,a),u(),()=>{n&&clearInterval(n)}}const Tr=i.createContext(void 0),ye=()=>{const s=i.useContext(Tr);return s===void 0?{user:null,loading:!0,login:async()=>{},loginWithGoogle:async()=>{},loginWithFacebook:async()=>{},register:async()=>{},logout:async()=>{},updateUser:async()=>{},refreshUser:async()=>{}}:s},ci=({children:s})=>{const[t,r]=i.useState(null),[a,n]=i.useState(!0),l=i.useRef(null);i.useEffect(()=>(u(),()=>{l.current&&l.current()}),[]);const u=async()=>{try{if(n(!0),!se.isConfigured()){console.debug("Appwrite not configured, using fallback auth"),r(null);return}const p=await se.getCurrentUser();if(p){let d={};try{const L=await k.listDocuments(C.databaseId,"userPreferences",[I.equal("userId",p.$id)]);L.documents.length>0?(d=L.documents[0],console.log("✅ Loaded user data from userPreferences:",d)):console.debug("No userPreferences found for user (normal for new users)")}catch(L){console.log("Error loading userPreferences:",L)}const f=p.prefs||{},P=["lolelarap@gmail.com","admin@egygo.me"];let T=d.role||f.role||"customer";if(f.role){if(P.includes(p.email.toLowerCase())&&f.role!=="admin"){T="admin";try{await se.updateUserPreferences({role:"admin",isAdmin:!0,isSuperAdmin:!0}),console.log(`✅ تم تحديث دور المستخدم إلى Admin: ${p.email}`)}catch(L){console.log("Could not update user role:",L)}}}else{P.includes(p.email.toLowerCase())?(T="admin",console.log(`✅ تم تحديد المستخدم كـ Admin: ${p.email}`)):p.email.includes("admin")?T="admin":p.email.includes("merchant")||p.email.includes("vendor")?T="merchant":f.isAffiliate?T="affiliate":T="customer";try{await se.updateUserPreferences({role:T,isAdmin:T==="admin",isSuperAdmin:P.includes(p.email.toLowerCase())})}catch(L){console.log("Could not save user role:",L)}}const D={$id:p.$id,name:d.name||p.name,email:d.email||p.email,role:T,phone:d.phone||f.phone||"",address:d.address||f.address||"",isAffiliate:d.isAffiliate||f.isAffiliate||T==="affiliate",isMerchant:d.isMerchant||f.isMerchant||T==="merchant",isIntermediary:d.isIntermediary||f.isIntermediary||T==="intermediary",affiliateCode:d.affiliateCode||f.affiliateCode||"",intermediaryCode:d.intermediaryCode||f.intermediaryCode||"",commissionRate:d.commissionRate||f.commissionRate||.15,defaultMarkupPercentage:d.defaultMarkupPercentage||f.defaultMarkupPercentage||20,accountStatus:d.accountStatus||f.accountStatus||"approved",approvedAt:d.approvedAt||f.approvedAt,approvedBy:d.approvedBy||f.approvedBy,rejectionReason:d.rejectionReason||f.rejectionReason};r(D),l.current&&l.current(),l.current=li({userId:p.$id,onUpdate:L=>{console.log("🔄 Session auto-updated:",L),r(j=>j?{...j,accountStatus:L.accountStatus,approvedAt:L.approvedAt,approvedBy:L.approvedBy,rejectionReason:L.rejectionReason}:null)},interval:1e4})}else r(null)}catch(p){(p==null?void 0:p.code)===401||(p==null?void 0:p.type)==="general_unauthorized_scope"?console.debug("User not authenticated"):console.error("Error checking auth user:",p),r(null)}finally{n(!1)}},E={user:t,loading:a,login:async(p,d)=>{try{if(n(!0),!se.isConfigured())throw new Error("Appwrite غير مُعد. يرجى التحقق من إعدادات المشروع.");await se.login(p,d),await u()}catch(f){throw console.error("Login error:",f),f}finally{n(!1)}},loginWithGoogle:async()=>{try{if(!se.isConfigured())throw new Error("Appwrite غير مُعد. يرجى التحقق من إعدادات المشروع.");await se.loginWithGoogle()}catch(p){throw console.error("Google login error:",p),p}},loginWithFacebook:async()=>{try{if(!se.isConfigured())throw new Error("Appwrite غير مُعد. يرجى التحقق من إعدادات المشروع.");await se.loginWithFacebook()}catch(p){throw console.error("Facebook login error:",p),p}},register:async(p,d,f,P="customer",T,D)=>{var L;try{if(n(!0),!se.isConfigured())throw new Error("Appwrite غير مُعد. يرجى التحقق من إعدادات المشروع.");await se.register(p,d,f);const j=await se.getCurrentUser(),O=P==="affiliate"||P==="merchant",W=O?"pending":"approved",z={role:P,isAffiliate:P==="affiliate",isMerchant:P==="merchant",isIntermediary:P==="intermediary",phone:T||"",alternativePhone:D||"",accountStatus:W,approvedAt:O?null:new Date().toISOString()};if(P==="affiliate"){const ee=Math.random().toString(36).substring(2,9).toUpperCase();z.affiliateCode=`AF${ee}`.substring(0,10),z.commissionRate=.15}if(P==="intermediary"){const ee=Math.random().toString(36).substring(2,9).toUpperCase();z.intermediaryCode=`IN${ee}`.substring(0,10),z.defaultMarkupPercentage=.2}await se.updateUserPreferences(z);try{await k.createDocument(C.databaseId,C.collections.users,j.$id,{email:p,name:f,phone:T||"",alternativePhone:D||"",address:"",isAffiliate:P==="affiliate",isMerchant:P==="merchant",isIntermediary:P==="intermediary",affiliateCode:z.affiliateCode||null,commissionRate:z.commissionRate||.15,totalEarnings:0,pendingEarnings:0,referralCount:0,accountStatus:W,approvedAt:z.approvedAt,approvedBy:null,rejectionReason:null,isActive:!O})}catch(ee){console.error("Failed to create user document:",ee)}return await u(),{$id:j.$id,email:j.email,name:j.name}}catch(j){throw console.error("Registration error:",j),(j==null?void 0:j.code)===409||(L=j==null?void 0:j.message)!=null&&L.includes("already exists")?new Error("هذا البريد الإلكتروني أو رقم الهاتف مستخدم بالفعل. يرجى تسجيل الدخول أو استخدام بريد آخر."):j}finally{n(!1)}},logout:async()=>{try{if(n(!0),!se.isConfigured()){r(null);return}await se.logout(),r(null)}catch(p){throw console.error("Logout error:",p),p}finally{n(!1)}},updateUser:async p=>{try{if(!t)return;n(!0),await se.updateUserPreferences(p),r(d=>d?{...d,...p}:null)}catch(d){throw console.error("Update user error:",d),d}finally{n(!1)}},refreshUser:async()=>{try{await u()}catch(p){console.error("Refresh user error:",p)}}};return e.jsx(Tr.Provider,{value:E,children:s})},di=1,mi=1e6;let _t=0;function ui(){return _t=(_t+1)%Number.MAX_SAFE_INTEGER,_t.toString()}const St=new Map,bs=s=>{if(St.has(s))return;const t=setTimeout(()=>{St.delete(s),Ze({type:"REMOVE_TOAST",toastId:s})},mi);St.set(s,t)},hi=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,di)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?bs(r):s.toasts.forEach(a=>{bs(a.id)}),{...s,toasts:s.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(r=>r.id!==t.toastId)}}},it=[];let ot={toasts:[]};function Ze(s){ot=hi(ot,s),it.forEach(t=>{t(ot)})}function xi({...s}){const t=ui(),r=n=>Ze({type:"UPDATE_TOAST",toast:{...n,id:t}}),a=()=>Ze({type:"DISMISS_TOAST",toastId:t});return Ze({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:n=>{n||a()}}}),{id:t,dismiss:a,update:r}}function Or(){const[s,t]=i.useState(ot);return i.useEffect(()=>(it.push(t),()=>{const r=it.indexOf(t);r>-1&&it.splice(r,1)}),[s]),{...s,toast:xi,dismiss:r=>Ze({type:"DISMISS_TOAST",toastId:r})}}const Lr=i.createContext(void 0),Ns="shopko_cart";function pi({children:s}){const{toast:t}=Or(),[r,a]=i.useState([]);i.useEffect(()=>{try{const c=localStorage.getItem(Ns);c&&a(JSON.parse(c))}catch(c){console.error("Error loading cart:",c)}},[]),i.useEffect(()=>{try{localStorage.setItem(Ns,JSON.stringify(r))}catch(c){console.error("Error saving cart:",c)}},[r]);const n=c=>{a(y=>{const E=y.find(d=>d.productId===c.productId);if(E){const d=E.quantity+c.quantity;return d>c.stockQuantity?(t({title:"الكمية غير متوفرة",description:`الكمية المتوفرة فقط ${c.stockQuantity}`,variant:"destructive"}),y):y.map(f=>f.productId===c.productId?{...f,quantity:d}:f)}const p={...c,id:`cart-${Date.now()}-${Math.random()}`};return t({title:"تمت الإضافة لسلة التسوق",description:`تم إضافة ${c.name} إلى سلة التسوق`}),[...y,p]})},l=c=>{a(y=>y.filter(E=>E.id!==c)),t({title:"تمت الإزالة",description:"تم إزالة المنتج من السلة"})},u=(c,y)=>{y<1||a(E=>{const p=E.find(d=>d.id===c);return p?y>p.stockQuantity?(t({title:"الكمية غير متوفرة",description:`الكمية المتوفرة فقط ${p.stockQuantity}`,variant:"destructive"}),E):E.map(d=>d.id===c?{...d,quantity:y}:d):E})},h=()=>{a([]),t({title:"تم إفراغ السلة",description:"تم إزالة جميع المنتجات من السلة"})},x=c=>r.some(y=>y.productId===c),A=r.reduce((c,y)=>c+y.quantity,0),m=r.reduce((c,y)=>c+y.price*y.quantity,0),o={items:r,itemCount:A,subtotal:m,addItem:n,removeItem:l,updateQuantity:u,clearCart:h,isInCart:x};return e.jsx(Lr.Provider,{value:o,children:s})}function fi(){const s=i.useContext(Lr);if(!s)throw new Error("useCart must be used within CartProvider");return s}const $r=i.createContext(void 0);function gi({children:s}){const{user:t}=ye(),[r,a]=i.useState([]),[n,l]=i.useState(!0);i.useEffect(()=>{u()},[t]);const u=async()=>{try{if(l(!0),t)try{const o=(await k.listDocuments(C.databaseId,C.collections.favorites,[I.equal("userId",t.$id),I.limit(100)])).documents.map(c=>c.productId);a(o)}catch(m){console.error("Error loading favorites from Appwrite:",m);const o=localStorage.getItem("favorites");o&&a(JSON.parse(o))}else{const m=localStorage.getItem("favorites");m&&a(JSON.parse(m))}}catch(m){console.error("Error loading favorites:",m)}finally{l(!1)}},h=async m=>{console.log("🔵 addFavorite called for:",m,"User:",t==null?void 0:t.$id);try{if(t)try{await k.createDocument(C.databaseId,C.collections.favorites,Ne.unique(),{userId:t.$id,productId:m,createdAt:new Date().toISOString()})}catch(c){console.error("Error saving to Appwrite:",c)}const o=[...r,m];a(o),localStorage.setItem("favorites",JSON.stringify(o)),console.log("✅ Favorite added successfully. New favorites:",o)}catch(o){throw console.error("Error adding favorite:",o),o}},x=async m=>{console.log("🔴 removeFavorite called for:",m);try{if(t)try{const c=await k.listDocuments(C.databaseId,C.collections.favorites,[I.equal("userId",t.$id),I.equal("productId",m)]);c.documents.length>0&&await k.deleteDocument(C.databaseId,C.collections.favorites,c.documents[0].$id)}catch(c){console.error("Error removing from Appwrite:",c)}const o=r.filter(c=>c!==m);a(o),localStorage.setItem("favorites",JSON.stringify(o)),console.log("✅ Favorite removed successfully. New favorites:",o)}catch(o){throw console.error("Error removing favorite:",o),o}},A=m=>r.includes(m);return e.jsx($r.Provider,{value:{favorites:r,addFavorite:h,removeFavorite:x,isFavorite:A,loading:n},children:s})}function ji(){const s=i.useContext($r);if(s===void 0)throw new Error("useFavorites must be used within a FavoritesProvider");return s}const yi={ar:{nav:{home:"الرئيسية",products:"المنتجات",cart:"السلة",orders:"طلباتي",profile:"الحساب",logout:"تسجيل الخروج",login:"تسجيل الدخول",register:"إنشاء حساب"},common:{loading:"جاري التحميل...",save:"حفظ",cancel:"إلغاء",delete:"حذف",edit:"تعديل",add:"إضافة",search:"بحث...",filter:"تصفية"},whatsapp:{chat:"تواصل عبر واتساب",title:"دعم العملاء",subtitle:"نحن هنا للمساعدة",quickMessages:"رسائل سريعة",customMessage:"رسالة مخصصة",messagePlaceholder:"اكتب رسالتك هنا...",send:"إرسال",poweredBy:"مدعوم بواسطة",sort:"ترتيب",reset:"إعادة تعيين",apply:"تطبيق",close:"إغلاق",back:"رجوع",next:"التالي",previous:"السابق",submit:"إرسال",confirm:"تأكيد",success:"نجحت العملية",error:"حدث خطأ",warning:"تحذير",info:"معلومة"},products:{title:"المنتجات",addToCart:"أضف للسلة",price:"السعر",inStock:"متوفر",outOfStock:"غير متوفر",viewDetails:"عرض التفاصيل",category:"التصنيف",brand:"العلامة التجارية",rating:"التقييم",reviews:"تقييم",description:"الوصف",specifications:"المواصفات"},cart:{title:"سلة التسوق",empty:"السلة فارغة",subtotal:"المجموع الفرعي",shipping:"الشحن",total:"الإجمالي",checkout:"إتمام الطلب",remove:"إزالة",quantity:"الكمية",continueShopping:"متابعة التسوق"},orders:{title:"طلباتي",orderNumber:"رقم الطلب",date:"التاريخ",status:"الحالة",total:"المبلغ",viewOrder:"عرض الطلب",trackShipment:"تتبع الشحنة",cancelOrder:"إلغاء الطلب",reorder:"إعادة الطلب",statuses:{pending:"قيد الانتظار",processing:"قيد المعالجة",shipped:"تم الشحن",delivered:"تم التوصيل",cancelled:"ملغي"}},profile:{title:"الحساب الشخصي",personalInfo:"المعلومات الشخصية",name:"الاسم",email:"البريد الإلكتروني",phone:"رقم الهاتف",address:"العنوان",changePassword:"تغيير كلمة المرور",currentPassword:"كلمة المرور الحالية",newPassword:"كلمة المرور الجديدة",confirmPassword:"تأكيد كلمة المرور",updateProfile:"تحديث الحساب"},auth:{login:"تسجيل الدخول",register:"إنشاء حساب جديد",email:"البريد الإلكتروني",password:"كلمة المرور",rememberMe:"تذكرني",forgotPassword:"نسيت كلمة المرور؟",noAccount:"ليس لديك حساب؟",hasAccount:"لديك حساب بالفعل؟",createAccount:"إنشاء حساب",loginNow:"تسجيل الدخول الآن"},notifications:{title:"الإشعارات",markAllRead:"تعيين الكل كمقروء",noNotifications:"لا توجد إشعارات",new:"جديد"},search:{placeholder:"ابحث عن منتجات...",results:"نتائج البحث",noResults:"لا توجد نتائج",showingResults:"عرض {count} نتيجة"},errors:{general:"حدث خطأ غير متوقع",network:"خطأ في الاتصال بالشبكة",notFound:"الصفحة غير موجودة",unauthorized:"غير مصرح لك بالوصول",validation:"يرجى التحقق من المدخلات",required:"هذا الحقل مطلوب",invalidEmail:"البريد الإلكتروني غير صحيح",passwordMismatch:"كلمات المرور غير متطابقة",minLength:"يجب أن يكون الطول أكبر من {min} أحرف",maxLength:"يجب أن يكون الطول أقل من {max} حرف"},site:{name:"إيجي جو",slogan:"التسوق الذكي يبدأ هنا",joinFamily:"انضم إلى عائلة إيجي جو",smartShopping:"أهلاً بك في عالم التسوق الذكي"},trust:{fastDelivery:"توصيل سريع",freeReturn:"إرجاع مجاني",securePayment:"دفع آمن",original:"منتج أصلي",secureEncrypted:"دفع آمن ومشفر 100%",freeReturn14Days:"إرجاع مجاني خلال 14 يوم",fastSecureDelivery:"توصيل سريع وآمن",deliveryTime:"خلال 2-5 أيام عمل",originalQuality:"ضمان الجودة والأصالة",contact24h:"التواصل خلال 24 ساعة"},register:{title:"إنشاء حساب جديد",subtitle:"املأ البيانات للبدء",fullName:"الاسم الكامل",enterName:"أدخل اسمك الكامل",enterEmail:"أدخل بريدك الإلكتروني",enterPhone:"مثال: 01012345678",phoneNote:"سيتم استخدام هذا الرقم للتواصل معك",alternativePhone:"رقم هاتف بديل (اختياري)",alternativePhoneNote:"يمكنك إضافة رقم آخر للتواصل معك",whatsappAvailable:"هذا الرقم متاح على WhatsApp أو للاتصال",whatsappNote:"تأكد من إمكانية التواصل معك عبر هذا الرقم",confirmPassword:"تأكيد كلمة المرور",showPassword:"إظهار كلمة المرور",hidePassword:"إخفاء كلمة المرور",accountType:"نوع الحساب",accountTypeNote:"اختر نوع حسابك",customer:"عميل",customerDesc:"للتسوق والشراء",affiliate:"مسوق",affiliateDesc:"اربح عمولات على المبيعات",merchant:"تاجر",merchantDesc:"بيع منتجاتك",referralCode:"كود الإحالة (اختياري)",enterReferralCode:"أدخل كود الإحالة إن وجد",referredBy:"تمت الإحالة من",invalidReferralCode:"كود الإحالة غير صحيح",acceptTerms:"أوافق على",termsAndConditions:"الشروط والأحكام",and:"و",privacyPolicy:"سياسة الخصوصية",createAccount:"إنشاء الحساب",creating:"جاري إنشاء الحساب...",orRegisterWith:"أو يمكنك التسجيل عبر",registerGoogle:"التسجيل بحساب Google",registerFacebook:"التسجيل بحساب Facebook",dataProtected:"جميع بياناتك محمية وفق",oneAccount:"حساب واحد لجميع الخدمات",exclusiveCommissions:"عمولات مميزة للتجار والمسوقين",secureData:"بيانات آمنة ومشفرة",testimonial:"تجربة رائعة! التسجيل سهل والمنصة احترافية جداً",testimonialAuthor:"أحمد محمد، تاجر شريك",safe:"آمن",trusted:"موثوق",fast:"سريع"},login:{title:"تسجيل الدخول",subtitle:"مرحباً بعودتك",welcomeBack:"أهلاً بعودتك إلى إيجي جو",enterCredentials:"أدخل بياناتك للمتابعة",loginButton:"تسجيل الدخول",loggingIn:"جاري تسجيل الدخول...",orLoginWith:"أو سجّل الدخول عبر",loginGoogle:"تسجيل الدخول بحساب Google",loginFacebook:"تسجيل الدخول بحساب Facebook",thousandsProducts:"آلاف المنتجات المميزة",easyReturn:"استرجاع سهل خلال 14 يوم",testimonial:"أفضل موقع تسوق استخدمته! المنتجات عالية الجودة",testimonialAuthor:"أحمد محمد، القاهرة"},productsPage:{allProducts:"جميع المنتجات",discoverProducts:"اكتشف مجموعتنا الكاملة من المنتجات عالية الجودة",productsAvailable:"منتج متاح",searchProducts:"البحث عن المنتجات...",sortBy:"ترتيب حسب",featured:"مميز",priceLowToHigh:"السعر: من الأقل إلى الأعلى",priceHighToLow:"السعر: من الأعلى إلى الأقل",highestRated:"الأعلى تقييمًا",newest:"الأحدث",filters:"المرشحات",categories:"الفئات",priceRange:"نطاق السعر",min:"الحد الأدنى",max:"الحد الأقصى",specialOffers:"العروض الخاصة",saleOnly:"المنتجات المخفضة فقط",clearFilters:"مسح جميع المرشحات",showing:"عرض",of:"من",product:"منتج",noProducts:"لا توجد منتجات",tryFilters:"جرّب تعديل معايير البحث أو التصفية",viewCategories:"عرض الفئات",page:"صفحة"},checkout:{title:"إتمام الطلب",steps:{cart:"السلة",information:"البيانات",confirmation:"التأكيد"},shippingAddress:"عنوان الشحن",fullName:"الاسم الكامل",phoneNumber:"رقم الهاتف",city:"المدينة",selectCity:"اختر المدينة",address:"العنوان",addressPlaceholder:"الشارع، رقم المبنى، الشقة",postalCode:"الرمز البريدي",landmark:"علامة مميزة",landmarkPlaceholder:"بجوار المسجد / المدرسة",paymentMethod:"طريقة الدفع",cashOnDelivery:"الدفع عند الاستلام",cashOnDeliveryDesc:"ادفع نقداً عند استلام الطلب",vodafoneCash:"فودافون كاش",vodafoneCashDesc:"تحويل فوري عبر فودافون كاش",creditCard:"بطاقة ائتمان",creditCardDesc:"Visa, Mastercard, Amex",cardNumber:"رقم البطاقة",expiryDate:"تاريخ الانتهاء",additionalNotes:"ملاحظات إضافية",notesPlaceholder:"أي ملاحظات خاصة بالطلب...",orderSummary:"ملخص الطلب",quantity:"الكمية",subtotal:"المجموع الفرعي",shipping:"الشحن",free:"مجاني",total:"الإجمالي",confirmOrder:"تأكيد الطلب",processing:"جاري المعالجة..."},marketing:{partnerProgram:"انضم لفريق الشركاء!",partnerDesc:"سجّل الآن كتاجر أو مسوق واحصل على عمولات مميزة وأرباح مستمرة",registerEarn:"سجّل كتاجر أو مسوق واربح عمولات مميزة!"}},en:{nav:{home:"Home",products:"Products",cart:"Cart",orders:"My Orders",profile:"Profile",logout:"Logout",login:"Login",register:"Register"},common:{loading:"Loading...",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",add:"Add",search:"Search...",filter:"Filter",sort:"Sort",reset:"Reset",apply:"Apply",close:"Close",back:"Back",next:"Next",previous:"Previous",submit:"Submit",confirm:"Confirm",success:"Operation successful",error:"An error occurred",warning:"Warning",info:"Information"},whatsapp:{chat:"Chat on WhatsApp",title:"Customer Support",subtitle:"We are here to help",quickMessages:"Quick Messages",customMessage:"Custom Message",messagePlaceholder:"Type your message here...",send:"Send",poweredBy:"Powered by"},products:{title:"Products",addToCart:"Add to Cart",price:"Price",inStock:"In Stock",outOfStock:"Out of Stock",viewDetails:"View Details",category:"Category",brand:"Brand",rating:"Rating",reviews:"reviews",description:"Description",specifications:"Specifications"},cart:{title:"Shopping Cart",empty:"Your cart is empty",subtotal:"Subtotal",shipping:"Shipping",total:"Total",checkout:"Checkout",remove:"Remove",quantity:"Quantity",continueShopping:"Continue Shopping"},orders:{title:"My Orders",orderNumber:"Order Number",date:"Date",status:"Status",total:"Total",viewOrder:"View Order",trackShipment:"Track Shipment",cancelOrder:"Cancel Order",reorder:"Reorder",statuses:{pending:"Pending",processing:"Processing",shipped:"Shipped",delivered:"Delivered",cancelled:"Cancelled"}},profile:{title:"My Profile",personalInfo:"Personal Information",name:"Name",email:"Email",phone:"Phone",address:"Address",changePassword:"Change Password",currentPassword:"Current Password",newPassword:"New Password",confirmPassword:"Confirm Password",updateProfile:"Update Profile"},auth:{login:"Login",register:"Create New Account",email:"Email",password:"Password",rememberMe:"Remember me",forgotPassword:"Forgot password?",noAccount:"Don't have an account?",hasAccount:"Already have an account?",createAccount:"Create Account",loginNow:"Login Now"},notifications:{title:"Notifications",markAllRead:"Mark all as read",noNotifications:"No notifications",new:"New"},search:{placeholder:"Search for products...",results:"Search Results",noResults:"No results found",showingResults:"Showing {count} results"},errors:{general:"An unexpected error occurred",network:"Network connection error",notFound:"Page not found",unauthorized:"Unauthorized access",validation:"Please check your inputs",required:"This field is required",invalidEmail:"Invalid email address",passwordMismatch:"Passwords do not match",minLength:"Must be at least {min} characters",maxLength:"Must be at most {max} characters"},site:{name:"EgyGo",slogan:"Smart Shopping Starts Here",joinFamily:"Join the EgyGo Family",smartShopping:"Welcome to the World of Smart Shopping"},trust:{fastDelivery:"Fast Delivery",freeReturn:"Free Return",securePayment:"Secure Payment",original:"Original Product",secureEncrypted:"100% Secure & Encrypted Payment",freeReturn14Days:"Free Return within 14 Days",fastSecureDelivery:"Fast & Secure Delivery",deliveryTime:"Within 2-5 Business Days",originalQuality:"Quality & Authenticity Guaranteed",contact24h:"Contact within 24 Hours"},register:{title:"Create New Account",subtitle:"Fill in the details to get started",fullName:"Full Name",enterName:"Enter your full name",enterEmail:"Enter your email",enterPhone:"Example: 01012345678",phoneNote:"This number will be used to contact you",alternativePhone:"Alternative Phone (optional)",alternativePhoneNote:"You can add another number to contact you",whatsappAvailable:"This number is available on WhatsApp or for calls",whatsappNote:"Make sure we can reach you via this number",confirmPassword:"Confirm Password",showPassword:"Show Password",hidePassword:"Hide Password",accountType:"Account Type",accountTypeNote:"Choose your account type",customer:"Customer",customerDesc:"For shopping and purchases",affiliate:"Affiliate",affiliateDesc:"Earn commissions on sales",merchant:"Merchant",merchantDesc:"Sell your products",referralCode:"Referral Code (optional)",enterReferralCode:"Enter referral code if available",referredBy:"Referred by",invalidReferralCode:"Invalid referral code",acceptTerms:"I agree to the",termsAndConditions:"Terms and Conditions",and:"and",privacyPolicy:"Privacy Policy",createAccount:"Create Account",creating:"Creating account...",orRegisterWith:"Or register with",registerGoogle:"Register with Google",registerFacebook:"Register with Facebook",dataProtected:"Your data is protected according to our",oneAccount:"One account for all services",exclusiveCommissions:"Exclusive commissions for merchants and affiliates",secureData:"Secure & Encrypted Data",testimonial:"Great experience! Registration is easy and the platform is very professional",testimonialAuthor:"Ahmed Mohamed, Partner Merchant",safe:"Safe",trusted:"Trusted",fast:"Fast"},login:{title:"Login",subtitle:"Welcome Back",welcomeBack:"Welcome Back to EgyGo",enterCredentials:"Enter your credentials to continue",loginButton:"Login",loggingIn:"Logging in...",orLoginWith:"Or login with",loginGoogle:"Login with Google",loginFacebook:"Login with Facebook",thousandsProducts:"Thousands of Premium Products",easyReturn:"Easy Return within 14 Days",testimonial:"Best shopping site I've used! High quality products",testimonialAuthor:"Ahmed Mohamed, Cairo"},productsPage:{allProducts:"All Products",discoverProducts:"Discover our complete range of high-quality products",productsAvailable:"products available",searchProducts:"Search for products...",sortBy:"Sort by",featured:"Featured",priceLowToHigh:"Price: Low to High",priceHighToLow:"Price: High to Low",highestRated:"Highest Rated",newest:"Newest",filters:"Filters",categories:"Categories",priceRange:"Price Range",min:"Minimum",max:"Maximum",specialOffers:"Special Offers",saleOnly:"On Sale Only",clearFilters:"Clear All Filters",showing:"Showing",of:"of",product:"product",noProducts:"No Products Found",tryFilters:"Try adjusting your search or filter criteria",viewCategories:"View Categories",page:"Page"},checkout:{title:"Checkout",steps:{cart:"Cart",information:"Information",confirmation:"Confirmation"},shippingAddress:"Shipping Address",fullName:"Full Name",phoneNumber:"Phone Number",city:"City",selectCity:"Select City",address:"Address",addressPlaceholder:"Street, Building Number, Apartment",postalCode:"Postal Code",landmark:"Landmark",landmarkPlaceholder:"Near Mosque / School",paymentMethod:"Payment Method",cashOnDelivery:"Cash on Delivery",cashOnDeliveryDesc:"Pay cash upon receiving the order",vodafoneCash:"Vodafone Cash",vodafoneCashDesc:"Instant transfer via Vodafone Cash",creditCard:"Credit Card",creditCardDesc:"Visa, Mastercard, Amex",cardNumber:"Card Number",expiryDate:"Expiry Date",additionalNotes:"Additional Notes",notesPlaceholder:"Any special notes about the order...",orderSummary:"Order Summary",quantity:"Quantity",subtotal:"Subtotal",shipping:"Shipping",free:"Free",total:"Total",confirmOrder:"Confirm Order",processing:"Processing..."},marketing:{partnerProgram:"Join Our Partners Team!",partnerDesc:"Register now as a merchant or affiliate and get exclusive commissions and continuous earnings",registerEarn:"Register as merchant or affiliate and earn exclusive commissions!"}}},Mr=i.createContext(void 0);function wi({children:s,defaultLocale:t="ar"}){const[r,a]=i.useState(()=>localStorage.getItem("locale")||t),n=h=>{a(h),localStorage.setItem("locale",h),document.documentElement.dir=h==="ar"?"rtl":"ltr",document.documentElement.lang=h};i.useEffect(()=>{document.documentElement.dir=r==="ar"?"rtl":"ltr",document.documentElement.lang=r},[r]);const l=(h,x)=>{const A=h.split(".");let m=yi[r];for(const c of A)if(m=m==null?void 0:m[c],m===void 0)return console.warn(`Translation key not found: ${h}`),h;let o=String(m);return x&&Object.entries(x).forEach(([c,y])=>{o=o.replace(`{${c}}`,String(y))}),o},u=r==="ar"?"rtl":"ltr";return e.jsx(Mr.Provider,{value:{locale:r,setLocale:n,t:l,dir:u},children:s})}function Fr(){const s=i.useContext(Mr);if(!s)throw new Error("useI18n must be used within I18nProvider");return s}const Yt=i.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(sr,{ref:a,className:_("relative overflow-hidden",s),...r,children:[e.jsx(ha,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(qr,{}),e.jsx(xa,{})]}));Yt.displayName=sr.displayName;const qr=i.forwardRef(({className:s,orientation:t="vertical",...r},a)=>e.jsx(rr,{ref:a,orientation:t,className:_("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:e.jsx(pa,{className:"relative flex-1 rounded-full bg-border"})}));qr.displayName=rr.displayName;const vi={order:Tt,shipping:Ce,delivery:je,alert:ja,info:ga,commission:Ot,affiliate:Ot};function bi(s){const t=new Date(s),a=Math.floor((new Date().getTime()-t.getTime())/1e3);return a<60?"الآن":a<3600?`منذ ${Math.floor(a/60)} دقيقة`:a<86400?`منذ ${Math.floor(a/3600)} ساعة`:a<604800?`منذ ${Math.floor(a/86400)} يوم`:t.toLocaleDateString("ar-EG")}function Ni(){const{user:s}=ye(),t=De(),[r,a]=i.useState(!1),n=fa(),{data:l=[],isLoading:u}=Ye({queryKey:["notifications",s==null?void 0:s.$id],queryFn:()=>He.getUserNotifications(s.$id),enabled:!!(s!=null&&s.$id),refetchInterval:3e4});i.useEffect(()=>{if(!(s!=null&&s.$id))return;const o=He.subscribeToNotifications(s.$id,c=>{n.setQueryData(["notifications",s.$id],(y=[])=>[c,...y])});return()=>{o()}},[s==null?void 0:s.$id,n]);const h=ss({mutationFn:o=>He.markAsRead(o),onSuccess:()=>{n.invalidateQueries({queryKey:["notifications",s==null?void 0:s.$id]})}}),x=ss({mutationFn:()=>He.markAllAsRead(s.$id),onSuccess:()=>{n.invalidateQueries({queryKey:["notifications",s==null?void 0:s.$id]})}}),A=l.filter(o=>!o.read).length,m=o=>{o.read||h.mutate(o.$id),a(!1),o.relatedId&&o.type==="order"&&t(`/my-orders/${o.relatedId}`)};return s?e.jsxs(Ie,{open:r,onOpenChange:a,children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(lt,{className:"h-5 w-5"}),A>0&&e.jsx(X,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:A>9?"9+":A})]})}),e.jsxs(ke,{align:"end",className:"w-80",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[e.jsx("h3",{className:"font-semibold",children:"الإشعارات"}),A>0&&e.jsxs(N,{variant:"ghost",size:"sm",onClick:()=>x.mutate(),disabled:x.isPending,className:"text-xs",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"تحديد الكل كمقروء"]})]}),e.jsx(ie,{}),u?e.jsx("div",{className:"px-4 py-8 text-center text-muted-foreground",children:"جاري التحميل..."}):l.length===0?e.jsxs("div",{className:"px-4 py-8 text-center text-muted-foreground",children:[e.jsx(lt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"لا توجد إشعارات"})]}):e.jsx(Yt,{className:"h-[400px]",children:e.jsx("div",{className:"space-y-1",children:l.map(o=>{const c=vi[o.type];return e.jsxs(M,{className:`flex items-start gap-3 px-4 py-3 cursor-pointer ${o.read?"":"bg-accent/50"}`,onClick:()=>m(o),children:[e.jsx("div",{className:`mt-1 p-2 rounded-full ${o.read?"bg-muted text-muted-foreground":"bg-primary text-primary-foreground"}`,children:e.jsx(c,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:"font-medium text-sm leading-tight",children:o.title}),!o.read&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary flex-shrink-0 mt-1"})]}),e.jsx("p",{className:"text-sm text-muted-foreground leading-tight",children:o.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:bi(o.$createdAt)})]})]},o.$id)})})})]})]}):null}const Vr={"purple-orange":{name:"Purple & Orange",nameAr:"بنفسجي وبرتقالي",primary:"270 95% 60%",primaryStart:"260 100% 65%",primaryEnd:"280 90% 55%",secondary:"25 95% 58%",secondaryStart:"20 100% 60%",secondaryEnd:"35 95% 55%",accent:"190 95% 55%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"222.2 84% 4.9%",darkModeForeground:"210 40% 98%",description:"Vibrant and energetic",descriptionAr:"نابض بالحياة والطاقة",icon:"🟣"},"blue-cyan":{name:"Blue & Cyan",nameAr:"أزرق وسماوي",primary:"210 100% 50%",primaryStart:"200 100% 55%",primaryEnd:"220 95% 45%",secondary:"185 100% 40%",secondaryStart:"175 100% 45%",secondaryEnd:"195 95% 35%",accent:"160 90% 45%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"210 100% 15%",darkModeForeground:"210 40% 98%",description:"Cool and professional",descriptionAr:"بارد واحترافي",icon:"🔵"},"green-teal":{name:"Green & Teal",nameAr:"أخضر وفيروزي",primary:"145 85% 40%",primaryStart:"135 90% 45%",primaryEnd:"155 80% 35%",secondary:"170 100% 35%",secondaryStart:"160 100% 40%",secondaryEnd:"180 95% 30%",accent:"195 85% 45%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"145 85% 15%",darkModeForeground:"145 40% 95%",description:"Fresh and natural",descriptionAr:"منعش وطبيعي",icon:"🟢"},"pink-purple":{name:"Pink & Purple",nameAr:"وردي وبنفسجي",primary:"330 85% 50%",primaryStart:"320 90% 55%",primaryEnd:"340 80% 45%",secondary:"280 85% 50%",secondaryStart:"270 90% 55%",secondaryEnd:"290 80% 45%",accent:"200 90% 55%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"330 60% 20%",darkModeForeground:"330 40% 95%",description:"Sweet and playful",descriptionAr:"حلو ومرح",icon:"🩷"},"red-orange":{name:"Red & Orange",nameAr:"أحمر وبرتقالي",primary:"0 85% 50%",primaryStart:"350 90% 55%",primaryEnd:"10 80% 45%",secondary:"30 100% 45%",secondaryStart:"20 100% 50%",secondaryEnd:"40 95% 40%",accent:"45 100% 50%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"0 60% 20%",darkModeForeground:"0 40% 98%",description:"Bold and passionate",descriptionAr:"جريء وعاطفي",icon:"🔴"},"indigo-blue":{name:"Indigo & Blue",nameAr:"نيلي وأزرق",primary:"240 85% 45%",primaryStart:"230 90% 50%",primaryEnd:"250 80% 40%",secondary:"210 90% 50%",secondaryStart:"200 95% 55%",secondaryEnd:"220 85% 45%",accent:"180 85% 50%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"240 60% 15%",darkModeForeground:"240 40% 98%",description:"Deep and trustworthy",descriptionAr:"عميق وموثوق",icon:"🔷"},"emerald-lime":{name:"Emerald & Lime",nameAr:"زمردي وليموني",primary:"150 90% 35%",primaryStart:"140 95% 40%",primaryEnd:"160 85% 30%",secondary:"80 90% 40%",secondaryStart:"70 95% 45%",secondaryEnd:"90 85% 35%",accent:"50 100% 50%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"150 60% 15%",darkModeForeground:"150 40% 95%",description:"Bright and lively",descriptionAr:"مشرق وحيوي",icon:"💚"},"rose-pink":{name:"Rose & Pink",nameAr:"وردي فاتح",primary:"340 90% 55%",primaryStart:"330 95% 60%",primaryEnd:"350 85% 50%",secondary:"0 85% 60%",secondaryStart:"350 90% 65%",secondaryEnd:"10 80% 55%",accent:"30 90% 55%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"340 60% 20%",darkModeForeground:"340 40% 98%",description:"Romantic and elegant",descriptionAr:"رومانسي وأنيق",icon:"🌸"}},zr=i.createContext(void 0);function Ai({children:s}){const[t,r]=i.useState(()=>localStorage.getItem("egygo-theme")||"system"),[a,n]=i.useState(()=>localStorage.getItem("egygo-color-theme")||"purple-orange"),[l,u]=i.useState("light");i.useEffect(()=>{const m=window.document.documentElement,o=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",c=()=>{const p=t==="system"?o():t;m.classList.remove("light","dark"),m.classList.add(p),u(p)};c();const y=window.matchMedia("(prefers-color-scheme: dark)"),E=()=>{t==="system"&&c()};return y.addEventListener("change",E),()=>y.removeEventListener("change",E)},[t]),i.useEffect(()=>{const m=Vr[a],o=document.documentElement;o.style.setProperty("--primary",m.primary),o.style.setProperty("--primary-start",m.primaryStart),o.style.setProperty("--primary-end",m.primaryEnd),o.style.setProperty("--primary-light",m.primary),o.style.setProperty("--primary-dark",m.primaryEnd),o.style.setProperty("--primary-foreground",m.textOnPrimary),o.style.setProperty("--secondary",m.secondary),o.style.setProperty("--secondary-start",m.secondaryStart),o.style.setProperty("--secondary-end",m.secondaryEnd),o.style.setProperty("--secondary-light",m.secondary),o.style.setProperty("--secondary-foreground",m.textOnSecondary),o.style.setProperty("--accent-cyan",m.accent),l==="light"?(o.style.setProperty("--foreground",m.lightModeForeground),o.style.setProperty("--card-foreground",m.lightModeForeground),o.style.setProperty("--popover-foreground",m.lightModeForeground)):(o.style.setProperty("--foreground",m.darkModeForeground),o.style.setProperty("--card-foreground",m.darkModeForeground),o.style.setProperty("--popover-foreground",m.darkModeForeground)),localStorage.setItem("egygo-color-theme",a)},[a,l]);const h=m=>{r(m),localStorage.setItem("egygo-theme",m)},x=m=>{n(m)},A=()=>{h(l==="light"?"dark":"light")};return e.jsx(zr.Provider,{value:{theme:t,actualTheme:l,colorTheme:a,setTheme:h,setColorTheme:x,toggleTheme:A},children:s})}function Ur(){const s=i.useContext(zr);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s}function ki(){const{theme:s,setTheme:t}=Ur();return e.jsxs(Ie,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(rs,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(as,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(ke,{align:"end",children:[e.jsxs(M,{onClick:()=>t("light"),className:"cursor-pointer",children:[e.jsx(rs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"فاتح"}),s==="light"&&e.jsx("span",{className:"mr-auto",children:"✓"})]}),e.jsxs(M,{onClick:()=>t("dark"),className:"cursor-pointer",children:[e.jsx(as,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"داكن"}),s==="dark"&&e.jsx("span",{className:"mr-auto",children:"✓"})]}),e.jsxs(M,{onClick:()=>t("system"),className:"cursor-pointer",children:[e.jsx(ya,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"تلقائي"}),s==="system"&&e.jsx("span",{className:"mr-auto",children:"✓"})]})]})]})}function Ei(){const{colorTheme:s,setColorTheme:t}=Ur(),r=["purple-orange","blue-cyan","green-teal","pink-purple","red-orange","indigo-blue","emerald-lime","rose-pink"];return e.jsxs(Ie,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(wa,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"اختر الثيم"})]})}),e.jsxs(ke,{align:"end",className:"w-72",children:[e.jsx(Ir,{className:"text-center text-base font-semibold",dir:"rtl",children:"اختر ثيم الألوان 🎨"}),e.jsx(ie,{}),e.jsx("div",{className:"grid grid-cols-2 gap-2 p-2",dir:"rtl",children:r.map(a=>{const n=Vr[a],l=s===a;return e.jsxs(M,{onClick:()=>t(a),className:`
                  flex flex-col items-start gap-2 p-3 cursor-pointer
                  rounded-lg border-2 transition-all
                  ${l?"border-primary bg-primary/10":"border-transparent hover:border-primary/30 hover:bg-accent"}
                `,children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:n.icon}),e.jsx("span",{className:"font-semibold text-sm",children:n.nameAr})]}),l&&e.jsx(je,{className:"h-4 w-4 text-primary"})]}),e.jsxs("div",{className:"flex gap-1 w-full",children:[e.jsx("div",{className:"h-6 flex-1 rounded",style:{background:`hsl(${n.primary})`}}),e.jsx("div",{className:"h-6 flex-1 rounded",style:{background:`hsl(${n.secondary})`}}),e.jsx("div",{className:"h-6 flex-1 rounded",style:{background:`hsl(${n.accent})`}})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n.descriptionAr})]},a)})}),e.jsx(ie,{}),e.jsx("div",{className:"p-2 text-xs text-center text-muted-foreground",children:"اختر الثيم المفضل لديك من بين 8 تصاميم مختلفة"})]})]})}function _i(){const{locale:s,setLocale:t}=Fr(),r=a=>{t(a)};return e.jsxs(Ie,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"sm",className:"gap-2 h-8 px-2",children:[e.jsx(va,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:s==="ar"?"عربي":"English"})]})}),e.jsxs(ke,{align:"end",className:"w-40",children:[e.jsxs(M,{onClick:()=>r("ar"),className:s==="ar"?"bg-primary/10 font-bold":"",children:[e.jsx("span",{className:"mr-2",children:"🇪🇬"}),"العربية",s==="ar"&&e.jsx("span",{className:"ml-auto text-primary",children:"✓"})]}),e.jsxs(M,{onClick:()=>r("en"),className:s==="en"?"bg-primary/10 font-bold":"",children:[e.jsx("span",{className:"mr-2",children:"🇬🇧"}),"English",s==="en"&&e.jsx("span",{className:"ml-auto text-primary",children:"✓"})]})]})]})}function Si({cartItemCount:s}){var o,c;const[t,r]=i.useState([]),{user:a,logout:n}=ye(),{items:l,itemCount:u}=fi(),{favorites:h}=ji(),{t:x}=Fr(),A=s??u,m=h.length;return i.useEffect(()=>{Cr.getAll().then(y=>{r(y.categories)}).catch(()=>{r([])})},[]),e.jsxs("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur-lg supports-[backdrop-filter]:bg-background/80 shadow-lg",children:[e.jsx("div",{className:"border-b border-border/40 bg-gradient-to-r from-primary/5 via-purple-500/5 to-primary/5",children:e.jsx("div",{className:"container mx-auto px-4 py-2",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("span",{className:"text-muted-foreground hidden sm:inline",children:["💼 ",x("marketing.registerEarn")]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_i,{}),e.jsx("div",{className:"h-4 w-px bg-border hidden sm:block"}),e.jsx(Ei,{}),e.jsx(ki,{})]})]})})}),e.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between gap-4 px-4",children:[e.jsxs(ws,{children:[e.jsx(vs,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"icon",className:"md:hidden",children:e.jsx(ba,{className:"h-5 w-5"})})}),e.jsxs(Vt,{side:"right",className:"w-80",children:[e.jsx(Rr,{children:e.jsx(Dr,{children:e.jsx(w,{to:"/",className:"text-2xl font-bold text-primary",children:"إيجي جو"})})}),e.jsxs("nav",{className:"mt-6 space-y-4",children:[(a==null?void 0:a.role)==="admin"&&e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs(w,{to:"/admin",className:"flex items-center gap-2 py-2 px-3 bg-gradient-to-r from-purple-100 to-purple-50 dark:from-purple-900 dark:to-purple-800 text-primary rounded-lg font-semibold hover:shadow-md transition-all",children:[e.jsx(xe,{className:"h-5 w-5"}),"لوحة تحكم الإدارة"]})}),(a==null?void 0:a.isAffiliate)&&e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs(w,{to:"/affiliate/dashboard",className:"flex items-center gap-2 py-2 px-3 bg-gradient-to-r from-orange-100 to-yellow-50 dark:from-orange-900 dark:to-yellow-800 text-orange-600 dark:text-orange-300 rounded-lg font-semibold hover:shadow-md transition-all",children:[e.jsx(ue,{className:"h-5 w-5"}),"لوحة تحكم المسوق"]})}),(a==null?void 0:a.isMerchant)&&e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs(w,{to:"/merchant/dashboard",className:"flex items-center gap-2 py-2 px-3 bg-gradient-to-r from-purple-100 to-pink-50 dark:from-purple-900 dark:to-pink-800 text-purple-600 dark:text-purple-300 rounded-lg font-semibold hover:shadow-md transition-all",children:[e.jsx(be,{className:"h-5 w-5"}),"لوحة تحكم التاجر"]})}),(a==null?void 0:a.isIntermediary)&&e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs(w,{to:"/intermediary/dashboard",className:"flex items-center gap-2 py-2 px-3 bg-gradient-to-r from-indigo-100 to-blue-50 dark:from-indigo-900 dark:to-blue-800 text-indigo-600 dark:text-indigo-300 rounded-lg font-semibold hover:shadow-md transition-all",children:[e.jsx(ge,{className:"h-5 w-5"}),"لوحة تحكم الوسيط"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ns,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"الفئات"})]}),t.filter(y=>y.slug).map(y=>e.jsxs(w,{to:`/category/${y.slug}`,className:"flex items-center justify-between py-2 px-3 text-sm hover:bg-muted rounded-md hover:text-primary transition-all",children:[e.jsx("span",{children:y.name}),e.jsx(X,{variant:"secondary",className:"text-xs",children:y.productCount})]},y.id)),e.jsx(w,{to:"/categories",className:"flex items-center justify-center py-2 px-3 mt-2 text-sm font-semibold text-primary bg-primary/10 rounded-md hover:bg-primary/20 transition-all",children:"عرض جميع الفئات"})]}),e.jsxs("div",{className:"pt-4 border-t space-y-2",children:[e.jsxs(w,{to:"/affiliate",className:"flex items-center gap-2 py-2 text-sm hover:text-primary transition-colors",children:[e.jsx(ge,{className:"h-4 w-4"}),"برنامج الشراكة"]}),e.jsx(w,{to:"/deals",className:"block py-2 text-sm hover:text-primary transition-colors",children:"العروض الخاصة"})]})]})]})]}),e.jsxs(w,{to:"/",className:"flex items-center gap-2 group",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center shadow-lg group-hover:shadow-xl group-hover:scale-105 transition-all",children:e.jsx("span",{className:"text-white font-bold text-xl",children:"EG"})}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("div",{className:"text-xl font-bold bg-gradient-to-r from-primary via-purple-600 to-secondary bg-clip-text text-transparent",children:"إيجي جو"}),e.jsx("div",{className:"text-[10px] text-muted-foreground",children:"التسوق الذكي"})]})]}),e.jsxs("nav",{className:"hidden lg:flex items-center gap-1",children:[e.jsxs(Ie,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"sm",className:"gap-1 font-medium",children:[e.jsx(ns,{className:"h-4 w-4"}),e.jsx("span",{children:"الفئات"}),e.jsx(Kt,{className:"h-3 w-3"})]})}),e.jsxs(ke,{className:"w-56",align:"start",children:[e.jsx("div",{className:"px-2 py-1.5 text-sm font-semibold text-muted-foreground",children:"تصفح حسب الفئة"}),e.jsx(ie,{}),t.filter(y=>y.slug).map(y=>e.jsx(M,{asChild:!0,children:e.jsxs(w,{to:`/category/${y.slug}`,className:"flex items-center justify-between w-full cursor-pointer",children:[e.jsx("span",{children:y.name}),e.jsx(X,{variant:"secondary",className:"ml-2 text-xs",children:y.productCount})]})},y.id)),e.jsx(ie,{}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/categories",className:"flex items-center justify-center w-full font-semibold text-primary cursor-pointer",children:"عرض جميع الفئات"})})]})]}),e.jsx(N,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(w,{to:"/deals",className:"gap-1",children:[e.jsx(ue,{className:"h-4 w-4"}),"العروض"]})}),e.jsx(N,{variant:"ghost",size:"sm",asChild:!0,className:"bg-gradient-to-r from-orange-500/10 to-yellow-500/10 hover:from-orange-500/20 hover:to-yellow-500/20",children:e.jsxs(w,{to:"/affiliate",className:"gap-1",children:[e.jsx(ge,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent font-semibold",children:"كن شريكاً"})]})})]}),e.jsx("div",{className:"hidden lg:flex items-center flex-1 max-w-xl",children:e.jsx(ys,{})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(ws,{children:[e.jsx(vs,{asChild:!0,children:e.jsx(N,{variant:"ghost",size:"icon",className:"lg:hidden",children:e.jsx(Ht,{className:"h-5 w-5"})})}),e.jsx(Vt,{side:"top",className:"h-auto",children:e.jsx("div",{className:"p-4",children:e.jsx(ys,{})})})]}),a&&(a.role==="admin"||a.isAffiliate||a.role==="merchant"||a.isIntermediary)&&e.jsx(N,{variant:"default",size:"sm",className:"hidden md:inline-flex gap-2 bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",asChild:!0,children:e.jsxs(w,{to:a.role==="admin"?"/admin":a.role==="merchant"?"/merchant/dashboard":a.isIntermediary?"/intermediary/dashboard":"/affiliate/dashboard",children:[a.role==="admin"&&e.jsx(xe,{className:"h-4 w-4"}),a.role==="merchant"&&e.jsx(be,{className:"h-4 w-4"}),a.isIntermediary&&e.jsx(ge,{className:"h-4 w-4"}),a.isAffiliate&&a.role!=="admin"&&a.role!=="merchant"&&a.role!=="intermediary"&&e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden xl:inline",children:"لوحة التحكم"})]})}),a&&(a.role==="admin"||a.isAffiliate||a.role==="merchant"||a.isIntermediary)&&e.jsxs(Ie,{children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(N,{variant:"ghost",size:"icon",className:"md:hidden",children:[a.role==="admin"&&e.jsx(xe,{className:"h-5 w-5"}),a.role==="merchant"&&e.jsx(be,{className:"h-5 w-5"}),a.isIntermediary&&e.jsx(ge,{className:"h-5 w-5"}),a.isAffiliate&&a.role!=="admin"&&a.role!=="merchant"&&a.role!=="intermediary"&&e.jsx(ue,{className:"h-5 w-5"})]})}),e.jsxs(ke,{align:"end",className:"w-56",children:[a.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(w,{to:"/admin",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(xe,{className:"h-4 w-4"}),"لوحة الإدارة"]})}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/admin/products",className:"flex items-center gap-2 cursor-pointer",children:"إدارة المنتجات"})}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/admin/orders",className:"flex items-center gap-2 cursor-pointer",children:"إدارة الطلبات"})})]}),a.role==="merchant"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(w,{to:"/merchant/dashboard",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(be,{className:"h-4 w-4"}),"لوحة التاجر"]})}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/admin/products",className:"flex items-center gap-2 cursor-pointer",children:"منتجاتي"})})]}),a.isAffiliate&&e.jsxs(e.Fragment,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(w,{to:"/affiliate/dashboard",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(ue,{className:"h-4 w-4"}),"لوحة المسوق"]})}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/affiliate/analytics",className:"flex items-center gap-2 cursor-pointer",children:"التحليلات"})}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/affiliate/withdraw",className:"flex items-center gap-2 cursor-pointer",children:"سحب الأرباح"})})]}),a.isIntermediary&&e.jsxs(e.Fragment,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(w,{to:"/intermediary/dashboard",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(ge,{className:"h-4 w-4"}),"لوحة الوسيط"]})}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/intermediary/products",className:"flex items-center gap-2 cursor-pointer",children:"منتجاتي"})}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/intermediary/links",className:"flex items-center gap-2 cursor-pointer",children:"روابطي"})})]}),e.jsx(ie,{}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/orders",className:"flex items-center gap-2 cursor-pointer",children:"طلباتي"})}),e.jsx(M,{asChild:!0,children:e.jsxs(w,{to:"/wishlist",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(Lt,{className:"h-4 w-4"}),"المفضلة"]})}),e.jsx(ie,{}),e.jsxs(M,{onClick:n,className:"flex items-center gap-2 cursor-pointer text-red-600",children:[e.jsx($t,{className:"h-4 w-4"}),"تسجيل الخروج"]})]})]}),a&&e.jsx(Ni,{}),e.jsx(N,{variant:"ghost",size:"icon",className:"relative group",asChild:!0,children:e.jsxs(w,{to:"/wishlist",children:[e.jsx(Lt,{className:"h-5 w-5 group-hover:fill-red-500 group-hover:text-red-500 transition-all"}),m>0&&e.jsx(X,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-[10px] bg-gradient-to-r from-pink-500 to-red-500 border-2 border-background",children:m})]})}),e.jsx(N,{variant:"default",size:"icon",className:"relative bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",asChild:!0,children:e.jsxs(w,{to:"/cart",children:[e.jsx(Ce,{className:"h-5 w-5"}),A>0&&e.jsx(X,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-[10px] bg-gradient-to-r from-orange-500 to-red-500 border-2 border-background animate-pulse",children:A})]})}),e.jsxs(Ie,{children:[e.jsx(Pe,{asChild:!0,children:e.jsx(N,{variant:"outline",size:"icon",className:"relative rounded-full",children:a?e.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center text-white text-sm font-bold",children:((o=a.name)==null?void 0:o.charAt(0).toUpperCase())||"U"}):e.jsx(jt,{className:"h-5 w-5"})})}),e.jsx(ke,{align:"end",className:"w-56",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3 px-2 py-3 border-b",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center text-white font-bold",children:((c=a.name)==null?void 0:c.charAt(0).toUpperCase())||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold truncate",children:a.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:a.email})]})]}),e.jsx(ie,{}),a.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(w,{to:"/admin",className:"text-primary font-semibold",children:[e.jsx(xe,{className:"ml-2 h-4 w-4"}),"لوحة تحكم الإدارة"]})}),e.jsx(ie,{})]}),a.isAffiliate&&e.jsxs(e.Fragment,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(w,{to:"/affiliate/dashboard",className:"text-orange-600 font-semibold",children:[e.jsx(ue,{className:"ml-2 h-4 w-4"}),"لوحة تحكم المسوق"]})}),e.jsx(ie,{})]}),a.isMerchant&&e.jsxs(e.Fragment,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(w,{to:"/merchant/dashboard",className:"text-purple-600 font-semibold",children:[e.jsx(be,{className:"ml-2 h-4 w-4"}),"لوحة تحكم التاجر"]})}),e.jsx(ie,{})]}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/my-orders",children:"طلباتي"})}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/account",children:"حسابي"})}),a.isAffiliate&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/affiliate/dashboard",className:"text-brand-orange",children:"لوحة تحكم الشراكة"})})]}),e.jsx(ie,{}),e.jsxs(M,{onClick:()=>n(),children:[e.jsx($t,{className:"ml-2 h-4 w-4"}),"تسجيل الخروج"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/login",children:"تسجيل الدخول"})}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/register",children:"إنشاء حساب"})}),e.jsx(ie,{}),e.jsx(M,{asChild:!0,children:e.jsx(w,{to:"/affiliate",className:"text-brand-orange",children:"برنامج الشراكة"})})]})})]})]})]})]})}function Ci(){cn.init({duration:1e3,easing:"ease-in-out",once:!0,mirror:!1,offset:100})}var zt=(s=>(s.CUSTOMER="customer",s.AFFILIATE="affiliate",s.MERCHANT="merchant",s.INTERMEDIARY="intermediary",s.ADMIN="admin",s.SUPER_ADMIN="super_admin",s))(zt||{}),Br=(s=>(s.VIEW_PRODUCTS="view_products",s.CREATE_PRODUCT="create_product",s.EDIT_OWN_PRODUCT="edit_own_product",s.EDIT_ANY_PRODUCT="edit_any_product",s.DELETE_OWN_PRODUCT="delete_own_product",s.DELETE_ANY_PRODUCT="delete_any_product",s.VIEW_OWN_ORDERS="view_own_orders",s.VIEW_ALL_ORDERS="view_all_orders",s.MANAGE_OWN_ORDERS="manage_own_orders",s.MANAGE_ALL_ORDERS="manage_all_orders",s.VIEW_AFFILIATE_STATS="view_affiliate_stats",s.GENERATE_AFFILIATE_LINKS="generate_affiliate_links",s.WITHDRAW_EARNINGS="withdraw_earnings",s.VIEW_CREATIVES="view_creatives",s.VIEW_MERCHANT_DASHBOARD="view_merchant_dashboard",s.MANAGE_INVENTORY="manage_inventory",s.VIEW_SALES_REPORTS="view_sales_reports",s.MANAGE_SHIPPING="manage_shipping",s.VIEW_INTERMEDIARY_DASHBOARD="view_intermediary_dashboard",s.IMPORT_PRODUCTS="import_products",s.SCRAPE_PRODUCTS="scrape_products",s.MANAGE_MARKUP="manage_markup",s.GENERATE_INTERMEDIARY_LINKS="generate_intermediary_links",s.VIEW_INTERMEDIARY_STATS="view_intermediary_stats",s.VIEW_ADMIN_DASHBOARD="view_admin_dashboard",s.MANAGE_USERS="manage_users",s.MANAGE_CATEGORIES="manage_categories",s.MANAGE_COUPONS="manage_coupons",s.MANAGE_COMMISSIONS="manage_commissions",s.VIEW_ANALYTICS="view_analytics",s.MANAGE_SETTINGS="manage_settings",s.APPROVE_ACCOUNTS="approve_accounts",s.PLACE_ORDER="place_order",s.VIEW_WISHLIST="view_wishlist",s.WRITE_REVIEW="write_review",s))(Br||{});const Ii={customer:["view_products","view_own_orders","place_order","view_wishlist","write_review"],affiliate:["view_products","view_own_orders","place_order","view_wishlist","view_affiliate_stats","generate_affiliate_links","withdraw_earnings","view_creatives"],merchant:["view_products","create_product","edit_own_product","delete_own_product","view_own_orders","manage_own_orders","view_merchant_dashboard","manage_inventory","view_sales_reports","manage_shipping"],intermediary:["view_products","create_product","edit_own_product","delete_own_product","view_own_orders","manage_own_orders","view_intermediary_dashboard","import_products","scrape_products","manage_markup","generate_intermediary_links","view_intermediary_stats","place_order","view_wishlist"],admin:["view_products","create_product","edit_any_product","delete_any_product","view_all_orders","manage_all_orders","view_admin_dashboard","manage_users","manage_categories","manage_coupons","manage_commissions","view_analytics","approve_accounts"],super_admin:[...Object.values(Br)]};function Pi(s,t){return(Ii[s]||[]).includes(t)}function Ct(s){switch(s){case"admin":case"super_admin":return"/admin/dashboard";case"merchant":return"/merchant/dashboard";case"intermediary":return"/intermediary/dashboard";case"affiliate":return"/affiliate/dashboard";case"customer":default:return"/account"}}const Ri=tt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Fe=i.forwardRef(({className:s,variant:t,...r},a)=>e.jsx("div",{ref:a,role:"alert",className:_(Ri({variant:t}),s),...r}));Fe.displayName="Alert";const Ut=i.forwardRef(({className:s,...t},r)=>e.jsx("h5",{ref:r,className:_("mb-1 font-medium leading-none tracking-tight",s),...t}));Ut.displayName="AlertTitle";const qe=i.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:_("text-sm [&_p]:leading-relaxed",s),...t}));qe.displayName="AlertDescription";function S({children:s,requiredRole:t,requiredPermission:r,requireAuth:a=!0,fallbackPath:n}){const{user:l,loading:u,refreshUser:h}=ye(),[x,A]=i.useState(!1);if(i.useEffect(()=>{if(l&&l.accountStatus==="pending"&&(t==="merchant"||t==="affiliate")){const m=setInterval(async()=>{await h()},3e4);return()=>clearInterval(m)}},[l,t,h]),u)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-purple-50 to-orange-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ue,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})});if(a&&!l){const m=window.location.pathname+window.location.search;return sessionStorage.setItem("redirectAfterLogin",m),e.jsx(Ge,{to:"/login",state:{from:m},replace:!0})}if(r&&l){const m=l.role;if(!Pi(m,r))return e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gradient-to-br from-red-50 to-orange-50",children:e.jsxs(Fe,{variant:"destructive",className:"max-w-md",children:[e.jsx(Na,{className:"h-5 w-5"}),e.jsx(Ut,{className:"text-xl font-bold",children:"🚫 غير مصرح"}),e.jsxs(qe,{className:"mt-2",children:[e.jsx("p",{className:"mb-2 font-semibold",children:"ليس لديك صلاحية للوصول إلى هذه الصفحة."}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["الصفحة المطلوبة تحتاج صلاحية: ",e.jsx("strong",{children:r})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{onClick:()=>window.location.href=Ct(m),className:"btn-hover-lift",children:"العودة للوحة التحكم"}),e.jsx(N,{onClick:()=>window.location.href="/",variant:"outline",children:"الصفحة الرئيسية"})]})]})]})})}if(t&&l){const m=l.role;if(m===zt.ADMIN||m===zt.SUPER_ADMIN)return e.jsx(e.Fragment,{children:s});if(t==="intermediary"){if(!l.isIntermediary){const o=Ct(m);return e.jsx(Ge,{to:o,replace:!0})}}else if(t==="affiliate"){if(!l.isAffiliate)return e.jsx(Ge,{to:"/affiliate",replace:!0})}else if(t==="merchant"){if(!l.isMerchant)return e.jsx(Ge,{to:"/merchant",replace:!0})}else if(l.role!==t){const o=n||Ct(m);return e.jsx(Ge,{to:o,replace:!0})}if((t==="merchant"||t==="affiliate"||t==="intermediary")&&l.accountStatus!=="approved")return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-br from-yellow-50 to-orange-50",children:e.jsxs(Fe,{className:"max-w-md border-yellow-500 bg-yellow-50",children:[e.jsx(ct,{className:"h-5 w-5 text-yellow-600"}),e.jsx(Ut,{className:"text-xl font-bold text-yellow-900",children:"حسابك قيد المراجعة"}),e.jsxs(qe,{className:"mt-2 text-yellow-800",children:[e.jsx("p",{className:"mb-4",children:l.accountStatus==="pending"?"حسابك قيد المراجعة من قبل الإدارة. سيتم إشعارك عند الموافقة عبر البريد الإلكتروني.":l.accountStatus==="rejected"?`تم رفض حسابك. السبب: ${l.rejectionReason||"غير محدد"}. يمكنك التواصل مع الدعم الفني.`:"حالة حسابك غير معروفة. يرجى التواصل مع الدعم الفني."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(N,{onClick:async()=>{A(!0),await h(),A(!1)},variant:"default",className:"flex items-center gap-2",disabled:x,children:[e.jsx(ar,{className:`h-4 w-4 ${x?"animate-spin":""}`}),x?"جاري التحديث...":"تحديث الحالة"]}),e.jsx(N,{onClick:()=>window.location.href="/",variant:"outline",children:"الصفحة الرئيسية"}),e.jsx(N,{onClick:()=>window.location.href="/contact",variant:"outline",children:"تواصل معنا"})]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-3",children:"💡 يتم التحديث التلقائي كل 30 ثانية"})]})]})})}return e.jsx(e.Fragment,{children:s})}const me=i.forwardRef(({className:s,type:t,...r},a)=>e.jsx("input",{type:t,className:_("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r}));me.displayName="Input";const vt=i.forwardRef(({className:s,orientation:t="horizontal",decorative:r=!0,...a},n)=>e.jsx(nr,{ref:n,decorative:r,orientation:t,className:_("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...a}));vt.displayName=nr.displayName;function Di(){return e.jsx("footer",{className:"bg-gradient-to-br from-purple-50 via-white to-orange-50 dark:from-neutral-900 dark:via-neutral-900 dark:to-neutral-900 border-t border-purple-100 dark:border-purple-900",children:e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(w,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-primary via-purple-600 to-secondary bg-clip-text text-transparent",children:"EgyGo"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"وجهتك الوحيدة للمنتجات عالية الجودة مع أفضل برنامج شراكة في الصناعة."}),e.jsxs("div",{className:"space-y-2 mt-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(Xe,{className:"h-4 w-4"}),"info@egygo.me"]}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),e.jsx("span",{dir:"ltr",children:"01034324951"})]})]}),e.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse",children:[e.jsx(N,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-blue-100 hover:text-blue-600 dark:hover:bg-blue-900 transition-colors",children:e.jsx(ir,{className:"h-4 w-4"})}),e.jsx(N,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-sky-100 hover:text-sky-600 dark:hover:bg-sky-900 transition-colors",children:e.jsx(Aa,{className:"h-4 w-4"})}),e.jsx(N,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-pink-100 hover:text-pink-600 dark:hover:bg-pink-900 transition-colors",children:e.jsx(ka,{className:"h-4 w-4"})}),e.jsx(N,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-900 transition-colors",children:e.jsx(Ea,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"روابط سريعة"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(w,{to:"/about",className:"text-muted-foreground hover:text-primary transition-colors",children:"معلومات عنا"})}),e.jsx("li",{children:e.jsx(w,{to:"/contact",className:"text-muted-foreground hover:text-primary transition-colors",children:"اتصل بنا"})}),e.jsx("li",{children:e.jsx(w,{to:"/shipping",className:"text-muted-foreground hover:text-primary transition-colors",children:"معلومات الشحن"})}),e.jsx("li",{children:e.jsx(w,{to:"/returns",className:"text-muted-foreground hover:text-primary transition-colors",children:"الإرجاع والاستبدال"})}),e.jsx("li",{children:e.jsx(w,{to:"/faq",className:"text-muted-foreground hover:text-primary transition-colors",children:"الأسئلة الشائعة"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent",children:"برنامج الشراكة"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(w,{to:"/affiliate",className:"text-muted-foreground hover:text-secondary transition-colors",children:"انضم كشريك"})}),e.jsx("li",{children:e.jsx(w,{to:"/affiliate/dashboard",className:"text-muted-foreground hover:text-secondary transition-colors",children:"لوحة تحكم الشراكة"})}),e.jsx("li",{children:e.jsx(w,{to:"/affiliate/resources",className:"text-muted-foreground hover:text-secondary transition-colors",children:"مصادر التسويق"})}),e.jsx("li",{children:e.jsx(w,{to:"/affiliate/commission",className:"text-muted-foreground hover:text-secondary transition-colors",children:"هيكل العمولة"})}),e.jsx("li",{children:e.jsx(w,{to:"/affiliate/support",className:"text-muted-foreground hover:text-secondary transition-colors",children:"دعم الشركاء"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"ابق على اطلاع"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"اشترك للحصول على عروض خاصة وهدايا مجانية وفرص شراكة."}),e.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse",children:[e.jsx(me,{placeholder:"أدخل بريدك الإلكتروني",type:"email",className:"flex-1"}),e.jsxs(N,{size:"sm",className:"bg-gradient-to-r from-primary to-secondary hover:from-purple-700 hover:to-orange-600",children:[e.jsx(Xe,{className:"h-4 w-4 ml-2 rtl:ml-0 rtl:mr-2"}),"اشترك"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"بالاشتراك، فإنك توافق على سياسة الخصوصية وشروط الخدمة."})]})]}),e.jsx(vt,{className:"my-8"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center text-sm text-muted-foreground",children:[e.jsx("p",{children:"© 2024 EgyGo. جميع الحقوق محفوظة."}),e.jsxs("div",{className:"flex space-x-4 rtl:space-x-reverse mt-4 sm:mt-0",children:[e.jsx(w,{to:"/privacy",className:"hover:text-primary transition-colors",children:"سياسة الخصوصية"}),e.jsx(w,{to:"/terms",className:"hover:text-primary transition-colors",children:"شروط الخدمة"}),e.jsx(w,{to:"/cookies",className:"hover:text-primary transition-colors",children:"سياسة ملفات تعريف الارتباط"})]})]})]})})}function Ti(){const[s,t]=i.useState([]),[r,a]=i.useState(0),[n,l]=i.useState(!0),{user:u}=ye();i.useEffect(()=>{h()},[u]);const h=async()=>{try{const o=await k.listDocuments(C.databaseId,C.collections.offers,[I.equal("isActive",!0),I.orderDesc("priority"),I.limit(10)]),c=u!=null&&u.isAffiliate?"affiliate":(u==null?void 0:u.role)==="merchant"?"merchant":u?"customer":"all",y=o.documents.filter(E=>E.targetAudience==="all"||E.targetAudience===c);t(y.map(E=>({id:E.$id,title:E.title,description:E.description,backgroundColor:E.backgroundColor||"from-brand-purple via-brand-orange to-brand-purple",textColor:E.textColor||"text-white",icon:E.icon,isActive:E.isActive,targetAudience:E.targetAudience,priority:E.priority||0})))}catch{const y=(document.documentElement.lang||"ar")==="ar";t([{id:"default",title:y?"💼 انضم لفريق الشركاء!":"💼 Join Our Partners Team!",description:y?"سجّل الآن كتاجر أو مسوق واحصل على عمولات مميزة وأرباح مستمرة":"Register now as a merchant or affiliate and get exclusive commissions and continuous earnings",backgroundColor:"from-brand-purple via-brand-orange to-brand-purple",textColor:"text-white",isActive:!0,targetAudience:"all",priority:1}])}};i.useEffect(()=>{const o=setTimeout(()=>{l(!1)},6e3);return()=>clearTimeout(o)},[]),i.useEffect(()=>{if(s.length<=1)return;const o=setInterval(()=>{a(c=>(c+1)%s.length)},5e3);return()=>clearInterval(o)},[s.length]);const x=()=>{a(o=>(o+1)%s.length)},A=()=>{a(o=>(o-1+s.length)%s.length)};if(!n||s.length===0)return null;const m=s[r];return e.jsx("div",{className:`bg-gradient-to-r ${m.backgroundColor} ${m.textColor} py-2.5 text-center text-sm font-medium animate-gradient-x relative`,children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.length>1&&e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white hover:bg-white/20 flex-shrink-0",onClick:A,children:e.jsx(Hs,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 flex-1 min-w-0",children:[e.jsx(Ee,{className:"h-4 w-4 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[e.jsx("span",{className:"font-bold",children:m.title}),m.description&&e.jsxs(e.Fragment,{children:[" - ",m.description]})]}),e.jsx(Ee,{className:"h-4 w-4 flex-shrink-0"})]}),s.length>1&&e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white hover:bg-white/20 flex-shrink-0",onClick:x,children:e.jsx(_a,{className:"h-4 w-4"})}),e.jsx(N,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white hover:bg-white/20 flex-shrink-0",onClick:()=>l(!1),children:e.jsx(Re,{className:"h-4 w-4"})})]}),s.length>1&&e.jsx("div",{className:"flex items-center justify-center gap-1.5 mt-1",children:s.map((o,c)=>e.jsx("button",{onClick:()=>a(c),className:`h-1.5 rounded-full transition-all ${c===r?"w-6 bg-white":"w-1.5 bg-white/50 hover:bg-white/75"}`},c))})]})})}function Oi({className:s}){const[t,r]=i.useState(!1);i.useEffect(()=>{const n=()=>{r(window.scrollY>320)};return n(),window.addEventListener("scroll",n,{passive:!0}),()=>{window.removeEventListener("scroll",n)}},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsx("button",{type:"button",onClick:a,"aria-label":"العودة لأعلى الصفحة",className:_("fixed bottom-6 end-6 z-40 inline-flex h-11 w-11 items-center justify-center rounded-full","bg-primary text-primary-foreground shadow-lg transition-all","hover:shadow-xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","focus-visible:ring-primary",t?"opacity-100 scale-100":"pointer-events-none opacity-0 scale-95",s),children:e.jsx(or,{className:"h-5 w-5"})})}const Li="modulepreload",$i=function(s){return"/"+s},As={},v=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));n=Promise.allSettled(r.map(x=>{if(x=$i(x),x in As)return;As[x]=!0;const A=x.endsWith(".css"),m=A?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${x}"]${m}`))return;const o=document.createElement("link");if(o.rel=A?"stylesheet":Li,A||(o.as="script"),o.crossOrigin="",o.href=x,h&&o.setAttribute("nonce",h),document.head.appendChild(o),A)return new Promise((c,y)=>{o.addEventListener("load",c),o.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${x}`)))})}))}function l(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return n.then(u=>{for(const h of u||[])h.status==="rejected"&&l(h.reason);return t().catch(l)})},U=i.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:_("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));U.displayName="Card";const Ve=i.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:_("flex flex-col space-y-1.5 p-6",s),...t}));Ve.displayName="CardHeader";const ze=i.forwardRef(({className:s,...t},r)=>e.jsx("h3",{ref:r,className:_("text-2xl font-semibold leading-none tracking-tight",s),...t}));ze.displayName="CardTitle";const Gr=i.forwardRef(({className:s,...t},r)=>e.jsx("p",{ref:r,className:_("text-sm text-muted-foreground",s),...t}));Gr.displayName="CardDescription";const re=i.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:_("p-6 pt-0",s),...t}));re.displayName="CardContent";const Mi=i.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:_("flex items-center p-6 pt-0",s),...t}));Mi.displayName="CardFooter";const ae={title:"إيجي جو - تسوق أونلاين في مصر | منتجات أصلية بأفضل الأسعار",description:"تسوق الآن من إيجي جو واحصل على أفضل المنتجات بأسعار تنافسية. شحن سريع لجميع أنحاء مصر، دفع عند الاستلام، وضمان على جميع المنتجات. انضم لبرنامج التسويق بالعمولة واكسب حتى 25%",keywords:"تسوق أونلاين, تسوق في مصر, شراء اونلاين, منتجات مصرية, التسوق الالكتروني, دفع عند الاستلام, شحن مجاني, تسويق بالعمولة, افلييت مصر, egygo, ايجي جو",image:"https://egygo.me/og-image.jpg",siteUrl:"https://egygo.me",siteName:"إيجي جو"};function Fi({title:s,description:t,keywords:r,image:a,type:n="website",price:l,currency:u="EGP",availability:h,brand:x,sku:A,rating:m,reviewCount:o,category:c}){const y=Qt(),E=`${ae.siteUrl}${y.pathname}`,p=s?`${s} | ${ae.siteName}`:ae.title,d=t||ae.description,f=r||ae.keywords,P=a||ae.image,T=n==="product"&&l?{"@context":"https://schema.org","@type":"Product",name:s,description:d,brand:x?{"@type":"Brand",name:x}:void 0,sku:A,category:c,image:P,offers:{"@type":"Offer",price:l,priceCurrency:u,availability:h==="in stock"?"https://schema.org/InStock":"https://schema.org/OutOfStock"}}:null,D={"@context":"https://schema.org","@type":"Organization",name:ae.siteName,url:ae.siteUrl,logo:`${ae.siteUrl}/logo.png`,description:ae.description,sameAs:["https://www.facebook.com/egygo","https://www.instagram.com/egygo","https://twitter.com/egygo"],contactPoint:{"@type":"ContactPoint",contactType:"Customer Service",telephone:"+20-123-456-7890",email:"support@egygo.com",availableLanguage:["ar","en"]}},L={"@context":"https://schema.org","@type":"WebSite",name:ae.siteName,url:ae.siteUrl,potentialAction:{"@type":"SearchAction",target:{"@type":"EntryPoint",urlTemplate:`${window.location.origin}/#/products?search={search_term_string}`},"query-input":"required name=search_term_string"}},j=y.pathname.split("/").filter(Boolean),O=j.length>0?{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"الرئيسية",item:ae.siteUrl},...j.map((W,z)=>({"@type":"ListItem",position:z+2,name:W,item:`${ae.siteUrl}/${j.slice(0,z+1).join("/")}`}))]}:null;return e.jsxs(Sa,{children:[e.jsx("html",{lang:"ar",dir:"rtl"}),e.jsx("title",{children:p}),e.jsx("meta",{name:"description",content:d}),e.jsx("meta",{name:"keywords",content:f}),e.jsx("meta",{property:"og:type",content:n}),e.jsx("meta",{property:"og:url",content:E}),e.jsx("meta",{property:"og:title",content:p}),e.jsx("meta",{property:"og:description",content:d}),e.jsx("meta",{property:"og:image",content:P}),e.jsx("meta",{property:"og:site_name",content:ae.siteName}),e.jsx("meta",{property:"og:locale",content:"ar_EG"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:url",content:E}),e.jsx("meta",{name:"twitter:title",content:p}),e.jsx("meta",{name:"twitter:description",content:d}),e.jsx("meta",{name:"twitter:image",content:P}),e.jsx("meta",{name:"robots",content:"index, follow"}),e.jsx("meta",{name:"googlebot",content:"index, follow"}),e.jsx("meta",{name:"language",content:"Arabic"}),e.jsx("meta",{name:"author",content:ae.siteName}),e.jsx("link",{rel:"canonical",href:E}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=5"}),e.jsx("meta",{name:"mobile-web-app-capable",content:"yes"}),e.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),e.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(D)}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(L)}),O&&e.jsx("script",{type:"application/ld+json",children:JSON.stringify(O)}),T&&e.jsx("script",{type:"application/ld+json",children:JSON.stringify(T)})]})}const qi={home:()=>({title:"إيجي جو - تسوق أونلاين في مصر",description:"أفضل موقع تسوق أونلاين في مصر. منتجات أصلية، أسعار تنافسية، شحن سريع، دفع عند الاستلام. انضم لبرنامج التسويق بالعمولة واكسب حتى 25%",keywords:"تسوق أونلاين مصر, شراء اونلاين, افضل موقع تسوق, egygo"}),products:s=>({title:s?`تسوق ${s}`:"تسوق جميع المنتجات",description:`اكتشف مجموعة واسعة من ${s||"المنتجات"} بأفضل الأسعار. شحن سريع لجميع أنحاء مصر ودفع عند الاستلام`,keywords:`${s||"منتجات"}, تسوق ${s||"اونلاين"}, شراء ${s||"منتجات"} مصر`}),affiliate:()=>({title:"برنامج التسويق بالعمولة - اكسب حتى 25%",description:"انضم لبرنامج التسويق بالعمولة من إيجي جو واكسب عمولة تصل إلى 25% على كل عملية بيع. أدوات تسويقية احترافية، دعم مستمر، وسحب أرباح سريع",keywords:"تسويق بالعمولة, افلييت مصر, اكسب من الانترنت, عمولة تسويق, affiliate egypt"}),merchant:()=>({title:"انضم كتاجر - بيع منتجاتك على إيجي جو",description:"ابدأ البيع على إيجي جو واصل لآلاف العملاء في مصر. لوحة تحكم احترافية، تقارير مفصلة، ودعم تقني متواصل",keywords:"بيع منتجات اونلاين, تجارة الكترونية مصر, merchant egypt, بائع اونلاين"}),login:()=>({title:"تسجيل الدخول - إيجي جو",description:"سجل دخولك لحسابك في إيجي جو وابدأ التسوق الآن",keywords:"تسجيل دخول, login egygo"}),register:()=>({title:"إنشاء حساب جديد - إيجي جو",description:"أنشئ حسابك المجاني في إيجي جو وابدأ التسوق أو التسويق بالعمولة",keywords:"انشاء حساب, تسجيل جديد, register egygo"}),cart:()=>({title:"عربة التسوق",description:"راجع منتجاتك وأكمل عملية الشراء بسهولة",keywords:"عربة التسوق, سلة المشتريات, cart"}),checkout:()=>({title:"إتمام الطلب",description:"أكمل طلبك الآن. دفع عند الاستلام متاح لجميع أنحاء مصر",keywords:"اتمام الطلب, checkout, دفع عند الاستلام"})},ks="ج.م";function Qe(s,t=!1){const r=typeof s=="string"?parseFloat(s):s;return isNaN(r)?`0 ${ks}`:`${(t?r.toFixed(2):Math.round(r).toString()).replace(/\B(?=(\d{3})+(?!\d))/g,",")} ${ks}`}function Vi(s,t){const r=s-t;return`وفر ${Qe(r)}`}function Zt({size:s="medium",interactive:t=!0,autoRotate:r=!0,showParticles:a=!0,colorScheme:n="gradient"}){const l=i.useRef(null),u=i.useRef(),h=i.useRef(),x=i.useRef(),A=i.useRef(),m=i.useRef(),[o,c]=i.useState(!1),y=()=>{switch(s){case"small":return{width:200,height:100,fontSize:30};case"large":return{width:600,height:300,fontSize:90};default:return{width:400,height:200,fontSize:60}}};return i.useEffect(()=>{if(!l.current)return;const E=y(),p=new gn;p.background=null,u.current=p;const d=new jn(75,E.width/E.height,.1,1e3);d.position.z=5,x.current=d;const f=new yn({antialias:!0,alpha:!0});f.setSize(E.width,E.height),f.setPixelRatio(window.devicePixelRatio),l.current.appendChild(f.domElement),h.current=f;const P=new wn(16777215,.4);p.add(P);const T=new hs(9133302,.8);T.position.set(5,5,5),p.add(T);const D=new hs(15485081,.6);D.position.set(-5,-5,5),p.add(D);const L=new vn(3900150,1,100);L.position.set(0,0,10),p.add(L);const j=new bn;A.current=j,p.add(j),new Nn().load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",F=>{const q=new An("EgyGo",{font:F,size:.8,height:.3,curveSegments:12,bevelEnabled:!0,bevelThickness:.05,bevelSize:.02,bevelOffset:0});q.computeBoundingBox();const G=-.5*(q.boundingBox.max.x-q.boundingBox.min.x);q.translate(G,0,0);const J=new xs({color:n==="gradient"?9133302:n==="neon"?65280:3900150,emissive:n==="neon"?65280:9133302,emissiveIntensity:n==="neon"?.5:.2,shininess:100,specular:16777215}),V=new kt(q,J);j.add(V);const he=new kn({color:16766720,side:En}),Z=new kt(q,he);Z.scale.multiplyScalar(1.05),j.add(Z)},void 0,F=>{console.error("Error loading font:",F),W()});const W=()=>{[{text:"E",x:-2,color:9133302},{text:"g",x:-1,color:15485081},{text:"y",x:0,color:3900150},{text:"G",x:1,color:16096779},{text:"o",x:2,color:16766720}].forEach(({text:q,x:G,color:J})=>{const V=new _n(.6,1.2,.3),he=new xs({color:J,emissive:J,emissiveIntensity:.2,shininess:100,specular:16777215}),Z=new kt(V,he);Z.position.set(G*.7,0,0),j.add(Z)})},z=new ps,ee=20,R=new Float32Array(ee*6);for(let F=0;F<ee;F++){const q=F/ee*Math.PI*2,G=.4;R[F*6]=1.2+Math.cos(q)*G,R[F*6+1]=Math.sin(q)*G,R[F*6+2]=.2,R[F*6+3]=1.2+Math.cos(q)*(G+.5),R[F*6+4]=Math.sin(q)*G,R[F*6+5]=.2-.3}z.setAttribute("position",new Et(R,3));const oe=new Sn({color:16766720,opacity:.6,transparent:!0,linewidth:2}),ce=new Cn(z,oe);if(j.add(ce),a){const F=new ps,q=500,G=new Float32Array(q*3),J=new Float32Array(q*3);for(let Z=0;Z<q*3;Z+=3){G[Z]=(Math.random()-.5)*10,G[Z+1]=(Math.random()-.5)*10,G[Z+2]=(Math.random()-.5)*10;const fe=new In;fe.setHSL(Math.random()*.3+.5,1,.5),J[Z]=fe.r,J[Z+1]=fe.g,J[Z+2]=fe.b}F.setAttribute("position",new Et(G,3)),F.setAttribute("color",new Et(J,3));const V=new Pn({size:.05,vertexColors:!0,transparent:!0,opacity:.8,blending:Rn}),he=new Dn(F,V);m.current=he,p.add(he)}let Y=null;t&&(Y=new Tn(d,f.domElement),Y.enableDamping=!0,Y.dampingFactor=.05,Y.enableZoom=!1,Y.autoRotate=r,Y.autoRotateSpeed=2);const $=()=>{r&&j&&Ae.to(j.rotation,{y:Math.PI*2,duration:10,repeat:-1,ease:"none"}),Ae.to(j.scale,{x:1.05,y:1.05,z:1.05,duration:2,repeat:-1,yoyo:!0,ease:"power2.inOut"})};setTimeout(()=>{$()},500);const B=F=>{if(!t)return;const q=f.domElement.getBoundingClientRect(),G=(F.clientX-q.left)/q.width*2-1,J=-((F.clientY-q.top)/q.height)*2+1;j&&Ae.to(j.rotation,{y:G*.5,x:J*.3,duration:.5,ease:"power2.out"})};f.domElement.addEventListener("mousemove",B),f.domElement.addEventListener("mouseenter",()=>c(!0)),f.domElement.addEventListener("mouseleave",()=>{c(!1),j&&Ae.to(j.rotation,{x:0,y:0,duration:.5,ease:"power2.out"})});const te=new On,pe=()=>{requestAnimationFrame(pe);const F=te.getElapsedTime();!t&&r&&j&&(j.rotation.y=F*.5),m.current&&(m.current.rotation.y=F*.1,m.current.rotation.x=F*.05),j&&(j.position.y=Math.sin(F*2)*.1),Y&&Y.update(),f.render(p,d)};return pe(),()=>{f.domElement.removeEventListener("mousemove",B),l.current&&f.domElement&&l.current.removeChild(f.domElement),f.dispose()}},[s,t,r,a,n]),e.jsxs(rt.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"relative inline-block",children:[e.jsx("div",{ref:l,className:`
          ${o?"cursor-grab":"cursor-pointer"}
          transition-all duration-300
          ${o?"drop-shadow-2xl":"drop-shadow-lg"}
        `,style:{filter:o?"drop-shadow(0 0 30px rgba(139, 92, 246, 0.5))":"drop-shadow(0 0 15px rgba(139, 92, 246, 0.3))"}}),e.jsx("div",{className:"absolute inset-0 -z-10 blur-3xl opacity-30",style:{background:"radial-gradient(circle, #8b5cf6 0%, #ec4899 50%, transparent 70%)"}})]})}function Ll({size:s="medium",animated:t=!0}){const r={small:"text-2xl",medium:"text-4xl",large:"text-6xl"};return e.jsxs(rt.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:`font-bold ${r[s]} relative inline-block`,children:[e.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Egy"}),e.jsx("span",{className:"bg-gradient-to-r from-pink-600 to-red-600 bg-clip-text text-transparent",children:"G"}),e.jsx(rt.span,{animate:t?{rotate:[0,360],scale:[1,1.2,1]}:{},transition:{duration:2,repeat:1/0,ease:"linear"},className:"inline-block bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",children:"o"}),t&&e.jsx(rt.div,{className:"absolute -right-8 top-1/2 -translate-y-1/2",animate:{opacity:[0,1,0],x:[0,20,40]},transition:{duration:1.5,repeat:1/0,ease:"easeOut"},children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-0.5 w-8 bg-gradient-to-r from-yellow-400 to-transparent"}),e.jsx("div",{className:"h-0.5 w-6 bg-gradient-to-r from-orange-400 to-transparent"}),e.jsx("div",{className:"h-0.5 w-4 bg-gradient-to-r from-red-400 to-transparent"})]})})]})}function zi({products:s,title:t,subtitle:r,variant:a="default",autoplay:n=!0,slidesPerView:l=4}){var o;const u=i.useRef(null),h=()=>{const c={modules:[gs,Ln,$n,Mn,js,fs],spaceBetween:20,navigation:!0,pagination:{clickable:!0,dynamicBullets:!0},autoplay:n?{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0}:!1,breakpoints:{320:{slidesPerView:1},640:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:l}}};switch(a){case"coverflow":return{...c,effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}};case"cards":return{...c,effect:"cards",grabCursor:!0,cardsEffect:{slideShadows:!0}};case"thumbs":return{...c,thumbs:{swiper:u.current}};default:return c}},x=c=>{bt.success(`تمت إضافة ${c.name} إلى السلة`)},A=c=>{bt.success(`تمت إضافة ${c.name} إلى المفضلة`)},m=c=>{bt.info(`عرض سريع لـ ${c.name}`)};return e.jsxs("div",{className:"swiper-product-slider py-8",children:[(t||r)&&e.jsxs("div",{className:"text-center mb-8",children:[t&&e.jsx("h2",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:t}),r&&e.jsx("p",{className:"text-muted-foreground",children:r})]}),a==="thumbs"&&((o=s[0])==null?void 0:o.images)&&e.jsx("div",{className:"mb-4",children:e.jsx(is,{onSwiper:c=>{u.current=c},spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,modules:[fs,gs,js],className:"thumbs-swiper h-24",children:s[0].images.map((c,y)=>e.jsx(os,{children:e.jsx("img",{src:c,alt:`Thumb ${y}`,className:"w-full h-full object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity"})},y))})}),e.jsx(is,{...h(),className:"product-swiper",children:s.map(c=>e.jsx(os,{children:e.jsxs(U,{className:"group relative overflow-hidden hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2",children:[c.badge&&e.jsx(X,{className:"absolute top-2 right-2 z-10 animate-pulse",children:c.badge}),c.discount&&e.jsxs(X,{variant:"destructive",className:"absolute top-2 left-2 z-10",children:["-",c.discount,"%"]}),e.jsxs("div",{className:"relative h-64 overflow-hidden",children:[e.jsx("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center gap-2",children:[e.jsx(N,{size:"icon",variant:"secondary",className:"transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",onClick:()=>m(c),children:e.jsx(dt,{className:"h-4 w-4"})}),e.jsx(N,{size:"icon",variant:"secondary",className:"transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300 delay-75",onClick:()=>A(c),children:e.jsx(Lt,{className:"h-4 w-4"})}),e.jsx(N,{size:"icon",className:"transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300 delay-150",onClick:()=>x(c),children:e.jsx(Ce,{className:"h-4 w-4"})})]})]}),e.jsxs(re,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:c.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((y,E)=>e.jsx(Me,{className:`h-4 w-4 ${E<Math.floor(c.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},E))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",c.reviews,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[c.price," ج.م"]}),c.originalPrice&&e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:[c.originalPrice," ج.م"]})]}),c.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:c.description})]})]})},c.id))}),e.jsx("style",{children:`
        .product-swiper .swiper-button-next,
        .product-swiper .swiper-button-prev {
          background: rgba(255, 255, 255, 0.9);
          width: 40px;
          height: 40px;
          border-radius: 50%;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .product-swiper .swiper-button-next:after,
        .product-swiper .swiper-button-prev:after {
          font-size: 20px;
          color: #333;
        }
        
        .product-swiper .swiper-pagination-bullet {
          background: #8b5cf6;
        }
        
        .product-swiper .swiper-pagination-bullet-active {
          background: #7c3aed;
          width: 24px;
          border-radius: 4px;
        }

        .thumbs-swiper .swiper-slide-thumb-active {
          border: 2px solid #8b5cf6;
          border-radius: 8px;
        }
      `})]})}Ae.registerPlugin(Fn);function Ui(){const{user:s}=ye(),t=De(),[r,a]=i.useState(""),[n,l]=i.useState(0),u=["متفوتش الفرصة","اعمل دخل بسهولة","حافظ على فلوسك","اكسب أكتر"];i.useEffect(()=>{const d=u[n];let f=0;const P=setInterval(()=>{f<=d.length?(a(d.substring(0,f)),f++):(clearInterval(P),setTimeout(()=>{l(T=>(T+1)%u.length)},2e3))},100);return()=>clearInterval(P)},[n]),i.useEffect(()=>{if(s){if(s.role==="merchant"||s.isMerchant){t("/merchant/dashboard");return}if(s.isAffiliate){t("/products");return}}},[s,t]),i.useEffect(()=>{document.querySelector(".hero-content")&&Ae.from(".hero-content",{opacity:0,y:50,duration:1,ease:"power3.out"});const f=document.querySelectorAll(".feature-card"),P=document.querySelector(".features-section");f.length>0&&P&&Ae.from(".feature-card",{opacity:0,y:30,duration:.8,stagger:.2,scrollTrigger:{trigger:".features-section",start:"top 80%"}});const T=document.querySelectorAll(".product-card"),D=document.querySelector(".products-section");T.length>0&&D&&Ae.from(".product-card",{opacity:0,scale:.9,y:30,duration:.6,stagger:.1,scrollTrigger:{trigger:".products-section",start:"top 80%"}})},[]);const{data:h,isLoading:x}=Ye({queryKey:nt.categories,queryFn:Cr.getAll}),{data:A,isLoading:m}=Ye({queryKey:[...nt.products,"featured"],queryFn:()=>et.getAll({sortBy:"featured",limit:4})}),{data:o,isLoading:c}=Ye({queryKey:[...nt.products,"bestsellers"],queryFn:()=>et.getAll({sortBy:"rating",limit:4})}),y=(h==null?void 0:h.categories)||[],E=(A==null?void 0:A.products)||[],p=(o==null?void 0:o.products.filter(d=>d.reviewCount>50))||[];return x||m?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(Ue,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-16 pb-16",children:[e.jsx(Fi,{...qi.home()}),e.jsxs("section",{className:"relative bg-gradient-to-br from-primary via-purple-600 to-secondary text-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-25 scale-[2] blur-[1px]",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center animate-[spin_60s_linear_infinite]",children:e.jsx(Zt,{size:"large",interactive:!1,autoRotate:!0,showParticles:!1,colorScheme:"gradient"})})}),e.jsx("div",{className:"relative container mx-auto px-4 py-24 lg:py-32 z-10",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"space-y-8 hero-content",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(X,{variant:"secondary",className:"bg-yellow-500 text-white shadow-lg",children:"✨ منتجات مميزة"}),e.jsxs("h1",{className:"egygo-heading text-4xl lg:text-6xl font-bold leading-tight text-white min-h-[120px]",children:[e.jsx("span",{className:"text-yellow-300",children:r}),e.jsx("span",{className:"animate-pulse",children:"|"})]}),e.jsx("p",{className:"text-xl text-white/90 max-w-lg",children:"اتسوق ما بين الآلاف من المنتجات بأسعار تنافسية"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(N,{size:"lg",variant:"secondary",className:"egygo-btn-secondary egygo-hover-lift",asChild:!0,children:e.jsxs(w,{to:"/products",children:["تسوق الآن",e.jsx(Le,{className:"mr-2 h-5 w-5 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})}),e.jsx(N,{size:"lg",variant:"outline",className:"egygo-glass text-white egygo-hover-lift",asChild:!0,children:e.jsxs(w,{to:"/register?type=affiliate",children:[e.jsx(ge,{className:"ml-2 h-5 w-5 rtl:ml-0 rtl:mr-2"}),"انضم لبرنامج الشراكة"]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-8",children:[e.jsxs("div",{className:"egygo-glass-dark rounded-xl p-4 text-center egygo-hover-scale",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-300",children:"+10K"}),e.jsx("div",{className:"text-sm text-white/80",children:"عميل راضي"})]}),e.jsxs("div",{className:"egygo-glass-dark rounded-xl p-4 text-center egygo-hover-scale",children:[e.jsx("div",{className:"text-2xl font-bold text-green-300",children:"+500"}),e.jsx("div",{className:"text-sm text-white/80",children:"منتج"})]}),e.jsxs("div",{className:"egygo-glass-dark rounded-xl p-4 text-center egygo-hover-scale",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-300",children:"+1K"}),e.jsx("div",{className:"text-sm text-white/80",children:"مسوق"})]})]})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center",children:[e.jsx("div",{className:"space-y-4",children:E.slice(0,2).map((d,f)=>{var P;return e.jsx(w,{to:`/product/${d.id}`,children:e.jsx(U,{className:"egygo-glass-dark egygo-hover-lift cursor-pointer",children:e.jsxs(re,{className:"p-4",children:[e.jsx("img",{src:$e((P=d.images)==null?void 0:P[0]),alt:d.name,className:"w-full h-32 object-cover rounded-lg mb-3"}),e.jsx("h3",{className:"font-semibold text-white text-sm",children:d.name}),e.jsx("p",{className:"text-brand-yellow font-bold",children:Qe(d.price)})]})})},d.id)})}),e.jsx("div",{className:"space-y-4 mt-8",children:E.slice(2,4).map((d,f)=>{var P;return e.jsx(w,{to:`/product/${d.id}`,children:e.jsx(U,{className:"egygo-glass-dark egygo-hover-lift cursor-pointer",children:e.jsxs(re,{className:"p-4",children:[e.jsx("img",{src:$e((P=d.images)==null?void 0:P[0]),alt:d.name,className:"w-full h-32 object-cover rounded-lg mb-3"}),e.jsx("h3",{className:"font-semibold text-white text-sm",children:d.name}),e.jsx("p",{className:"text-brand-yellow font-bold",children:Qe(d.price)})]})})},d.id)})})]})})]})})]}),e.jsxs("section",{className:"container mx-auto px-4 py-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx(X,{className:"mb-4",children:"📊 إحصائيات المنصة"}),e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"منصة موثوقة يستخدمها الآلاف"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"انضم لمجتمع متنامي من التجار والمسوقين والعملاء الراضين"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs(U,{className:"egygo-card egygo-hover-lift text-center p-6 feature-card",children:[e.jsx("div",{className:"text-4xl font-bold text-primary mb-2",children:"+10,000"}),e.jsx("div",{className:"text-muted-foreground",children:"عميل نشط"})]}),e.jsxs(U,{className:"egygo-card egygo-hover-lift text-center p-6 feature-card",children:[e.jsx("div",{className:"text-4xl font-bold text-brand-purple mb-2",children:"+500"}),e.jsx("div",{className:"text-muted-foreground",children:"تاجر ناجح"})]}),e.jsxs(U,{className:"egygo-card egygo-hover-lift text-center p-6 feature-card",children:[e.jsx("div",{className:"text-4xl font-bold text-brand-orange mb-2",children:"+2,000"}),e.jsx("div",{className:"text-muted-foreground",children:"مسوق نشط"})]}),e.jsxs(U,{className:"egygo-card egygo-hover-lift text-center p-6 feature-card",children:[e.jsx("div",{className:"text-4xl font-bold text-success mb-2",children:"5M+"}),e.jsx("div",{className:"text-muted-foreground",children:"جنيه مبيعات"})]})]})]}),e.jsx("section",{className:"bg-muted/40 py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx(X,{className:"mb-4",children:"⚙️ كيف تعمل"}),e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"ابدأ رحلتك في 3 خطوات بسيطة"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"سواء كنت تاجر، مسوق، أو عميل - نحن نسهل عليك البداية"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsxs(U,{className:"egygo-card egygo-hover-lift p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary/10 text-primary rounded-full mb-4",children:e.jsx(Ce,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"للعملاء"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"تصفح المنتجات"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"اكتشف آلاف المنتجات عالية الجودة"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"أضف للسلة"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"اختر ما يعجبك وأضفه لسلة المشتريات"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"اطلب واستلم"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ادفع واستلم طلبك في 2-4 أيام"})]})]})]})]}),e.jsxs(U,{className:"egygo-card egygo-hover-lift p-6 border-brand-purple",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand-purple/10 text-brand-purple rounded-full mb-4",children:e.jsx(Ee,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"للتجار"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-brand-purple text-white rounded-full flex items-center justify-center font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"سجل حساب"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"انشئ حساب تاجر مجاناً"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-brand-purple text-white rounded-full flex items-center justify-center font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"أضف منتجاتك"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"ارفع منتجاتك وحدد الأسعار والعمولات"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-brand-purple text-white rounded-full flex items-center justify-center font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"ابدأ البيع"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"راقب مبيعاتك واستلم أرباحك أسبوعياً"})]})]})]})]}),e.jsxs(U,{className:"egygo-card egygo-hover-lift p-6 border-brand-orange",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand-orange/10 text-brand-orange rounded-full mb-4",children:e.jsx(ue,{className:"h-8 w-8"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"للمسوقين"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-brand-orange text-white rounded-full flex items-center justify-center font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"انضم مجاناً"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"سجل كمسوق بدون أي رسوم"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-brand-orange text-white rounded-full flex items-center justify-center font-bold",children:"2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"احصل على روابطك"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"اختر المنتجات وخذ روابط التسويق"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-brand-orange text-white rounded-full flex items-center justify-center font-bold",children:"3"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:"سوّق واربح"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"اربح عمولة لحد 25% على كل بيعة"})]})]})]})]})]})]})}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12 space-y-2",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"تسوق حسب الفئة"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"اكتشف مجموعتنا الواسعة من المنتجات عبر فئات مختلفة"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:y.filter(d=>d.slug).map(d=>e.jsx(w,{to:`/products?category=${d.slug}`,className:"group",children:e.jsxs(U,{className:"overflow-hidden card-hover group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:d.image||at.category(d.name),alt:d.name,className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-colors"})]}),e.jsxs(re,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-semibold mb-1",children:d.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.productCount," منتج"]})]})]})},d.id))})]}),e.jsxs("section",{className:"container mx-auto px-4 products-section",children:[e.jsxs("div",{className:"flex justify-between items-center mb-12",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"المنتجات المميزة"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"منتجات مختارة بعناية خصيصًا لك"})]}),e.jsx(N,{variant:"outline",asChild:!0,children:e.jsxs(w,{to:"/products",children:["عرض الكل",e.jsx(Le,{className:"mr-2 h-4 w-4 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})})]}),E.length>0&&e.jsx(zi,{products:E.map(d=>{var f;return{id:d.id,name:d.name,price:d.price,originalPrice:d.originalPrice,image:$e((f=d.images)==null?void 0:f[0]),rating:d.rating,reviews:d.reviewCount,badge:d.originalPrice&&d.originalPrice>d.price?Vi(d.originalPrice,d.price):void 0,description:d.description||""}}),variant:"cards",autoplay:!0})]}),e.jsx("section",{className:"bg-gradient-to-r from-brand-orange to-brand-purple text-white",children:e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(X,{variant:"secondary",className:"text-brand-orange bg-white/90",children:"💰 برنامج الشراكة"}),e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold",children:"ابدأ تكسب دلوقتي مع برنامج الشراكة"}),e.jsx("p",{className:"text-xl text-white/90",children:"انضم لآلاف المسوقين الناجحين واكسب عمولة لحد 25% على كل عملية بيع تيجي منك. الانضمام مجاني وعندنا كل الأدوات اللي تحتاجها عشان تنجح."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[e.jsx(ue,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("div",{className:"font-bold text-lg",children:"لحد 25%"}),e.jsx("div",{className:"text-sm text-white/80",children:"عمولة"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[e.jsx(ge,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("div",{className:"font-bold text-lg",children:"+1000"}),e.jsx("div",{className:"text-sm text-white/80",children:"مسوق نشط"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[e.jsx(ls,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("div",{className:"font-bold text-lg",children:"+10 مليون جنيه"}),e.jsx("div",{className:"text-sm text-white/80",children:"اتدفع عمولات"})]})]}),e.jsx(N,{size:"lg",variant:"secondary",className:"text-primary font-semibold",asChild:!0,children:e.jsxs(w,{to:"/register?type=affiliate",children:["انضم لبرنامج الشراكة",e.jsx(Le,{className:"mr-2 h-5 w-5 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})})]}),e.jsx("div",{className:"relative",children:e.jsxs(U,{className:"bg-white/10 backdrop-blur-sm border-white/20 p-6",children:[e.jsx(Ve,{children:e.jsx(ze,{className:"text-white",children:"لماذا تختار برنامجنا؟"})}),e.jsxs(re,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-yellow flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-bold text-primary",children:"✓"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"معدلات عمولة عالية"}),e.jsx("p",{className:"text-white/80 text-sm",children:"اكسب 8-25% عمولة على جميع المبيعات"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-yellow flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-bold text-primary",children:"✓"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"تتبع فوري"}),e.jsx("p",{className:"text-white/80 text-sm",children:"راقب أداءك وأرباحك مباشرة"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-yellow flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-bold text-primary",children:"✓"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"دعم تسويقي"}),e.jsx("p",{className:"text-white/80 text-sm",children:"احصل على بانرات وروابط ومواد ترويجية"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-yellow flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-bold text-primary",children:"✓"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"دفعات سريعة"}),e.jsx("p",{className:"text-white/80 text-sm",children:"دفعات أسبوعية عبر PayPal أو التحويل البنكي"})]})]})]})]})})]})})}),p.length>0&&e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"الأكثر مبيعًا"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"منتجاتنا الأكثر شعبية المحبوبة من العملاء في جميع أنحاء مصر"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:p.slice(0,4).map(d=>{var f;return e.jsx(w,{to:`/product/${d.id}`,children:e.jsxs(U,{className:"group overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:$e((f=d.images)==null?void 0:f[0]),alt:d.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx(X,{className:"absolute top-2 left-2 bg-success text-success-foreground",children:"الأكثر مبيعًا"}),e.jsxs("div",{className:"absolute top-2 right-2 bg-brand-orange text-white text-xs px-2 py-1 rounded",children:[d.affiliateCommission,"% عمولة"]})]}),e.jsxs(re,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((P,T)=>e.jsx(Me,{className:`h-4 w-4 ${T<Math.floor(d.rating)?"text-yellow-400 fill-current":"text-gray-300"}`},T))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",d.reviewCount,")"]})]}),e.jsx("h3",{className:"font-semibold mb-2 line-clamp-2",children:d.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-bold",children:Qe(d.price)}),d.originalPrice&&d.originalPrice>d.price&&e.jsx("span",{className:"text-sm text-muted-foreground line-through",children:Qe(d.originalPrice)})]})}),e.jsx(N,{size:"sm",children:e.jsx(Ce,{className:"h-4 w-4"})})]})]})]})},d.id)})})]}),e.jsx("section",{className:"bg-muted/40",children:e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"grid gap-12 lg:grid-cols-[1.1fr_0.9fr] items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(X,{className:"bg-primary/10 text-primary",children:"لماذا إيجي جو؟"}),e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold leading-tight",children:"ثقة كاملة، دعم حقيقي، وتجربة تسوق ولا أسهل"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"بنقدم لك أقوى تجربة تسوق إلكتروني في مصر: منتجات أصلية مضمونة، دعم عربي 24/7، وسياسة إرجاع سهلة. هدفنا إنك تشتري وتكسب وأنت مطمن."}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:[{icon:Ca,title:"ضمان استرجاع 30 يوم",description:"في حالة المنتج مش مطابق للتوقعات، نرجعلك فلوسك بالكامل بدون أسئلة."},{icon:mt,title:"شحن سريع داخل مصر",description:"شراكتنا مع أفضل شركات الشحن تضمن توصيل الطلب في 2-4 أيام عمل."},{icon:Ia,title:"خدمة عملاء ودعم تسويقي",description:"فريق عربي جاهز يساعدك بالهاتف، الواتساب، أو الإيميل طول اليوم."},{icon:Pa,title:"تتبع لحظي للطلبات",description:"تابع حالة الطلب لحظة بلحظة من حسابك أو عبر صفحة تتبع الطلبات."}].map(d=>e.jsx(U,{className:"h-full",children:e.jsxs(re,{className:"flex h-full flex-col gap-3 p-5",children:[e.jsx("div",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary",children:e.jsx(d.icon,{className:"h-5 w-5"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:d.title}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:d.description})]})]})},d.title))})]}),e.jsxs(U,{className:"shadow-lg",children:[e.jsx(Ve,{children:e.jsx(ze,{className:"text-2xl",children:"آراء عملائنا"})}),e.jsxs(re,{className:"space-y-6",children:[[{name:"محمود السيد",role:"مسوق شريك",quote:"أرباحي زادت 3 أضعاف من أول شهر مع إيجي جو. لوحة التحكم واضحة، والعمولات بتتصرف في مواعيدها."},{name:"إسراء أحمد",role:"عميلة",quote:"تجربة الشراء كانت ممتازة، خدمة العملاء ساعدوني أختار الهدية المناسبة ووصلت في يومين."}].map(d=>e.jsxs("div",{className:"rounded-xl bg-muted/80 p-5",children:[e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["“",d.quote,"”"]}),e.jsxs("div",{className:"mt-4 text-sm font-semibold",children:[d.name,e.jsxs("span",{className:"ms-2 text-xs text-muted-foreground",children:["• ",d.role]})]})]},d.name)),e.jsxs("div",{className:"rounded-xl border border-dashed border-primary/50 p-5 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"عايز تتأكد بنفسك؟"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"تواصل مع فريق الدعم أو اطلب مكالمة مجانية دلوقتي وهنرد عليك خلال دقائق."}),e.jsx(N,{asChild:!0,variant:"outline",children:e.jsx(w,{to:"/contact",children:"تواصل معنا الآن"})})]})]})]})]})})}),e.jsx("section",{className:"bg-gradient-to-r from-brand-purple via-primary to-brand-orange text-white",children:e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"inline-block",children:e.jsx(X,{variant:"secondary",className:"text-primary bg-white/90 text-lg px-4 py-2",children:"🏪 للتجار والبائعين"})}),e.jsxs("h2",{className:"text-3xl lg:text-5xl font-bold leading-tight",children:["هل لديك منتجات للبيع؟",e.jsx("br",{}),e.jsx("span",{className:"text-brand-yellow",children:"ابدأ البيع معنا!"})]}),e.jsx("p",{className:"text-xl text-white/90",children:"انضم إلى أكثر من 500 تاجر ناجح على إيجي جو. عمولات منخفضة (5-10%)، دفعات أسبوعية، ووصول لملايين العملاء المحتملين."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:"5-10%"}),e.jsx("div",{className:"text-sm text-white/80",children:"عمولة فقط"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:"+500"}),e.jsx("div",{className:"text-sm text-white/80",children:"تاجر نشط"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:"أسبوعي"}),e.jsx("div",{className:"text-sm text-white/80",children:"دفع الأرباح"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:"مجاني"}),e.jsx("div",{className:"text-sm text-white/80",children:"بدون رسوم"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(N,{size:"lg",variant:"secondary",className:"text-primary font-semibold",asChild:!0,children:e.jsxs(w,{to:"/register?type=merchant",children:["ابدأ البيع الآن",e.jsx(Le,{className:"mr-2 h-5 w-5 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})}),e.jsx(N,{size:"lg",variant:"outline",className:"bg-white/10 border-white/30 text-white hover:bg-white/20",asChild:!0,children:e.jsx(w,{to:"/merchant",children:"اعرف المزيد"})})]})]}),e.jsx("div",{className:"relative",children:e.jsxs(U,{className:"bg-white/10 backdrop-blur-sm border-white/20 p-6",children:[e.jsx(Ve,{children:e.jsx(ze,{className:"text-white text-2xl mb-4",children:"لماذا تبيع على إيجي جو؟"})}),e.jsxs(re,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(Ot,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"عمولات منخفضة"}),e.jsx("p",{className:"text-sm text-white/80",children:"ادفع 5-10% فقط - أقل من المنافسين"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(Ra,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"تحليلات متقدمة"}),e.jsx("p",{className:"text-sm text-white/80",children:"تتبع مبيعاتك وأدائك لحظياً"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(ge,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"ملايين العملاء"}),e.jsx("p",{className:"text-sm text-white/80",children:"وصول لقاعدة عملاء ضخمة جاهزة للشراء"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(ls,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"دعم مخصص"}),e.jsx("p",{className:"text-sm text-white/80",children:"فريق دعم متخصص لمساعدتك 24/7"})]})]})]})]})})]})})}),e.jsx("section",{className:"egygo-gradient-ocean text-white py-20 egygo-animate-fade-in",children:e.jsx("div",{className:"container mx-auto px-4 text-center",children:e.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[e.jsx(X,{variant:"secondary",className:"bg-white text-blue-600 shadow-lg mb-4",children:"🚀 ابدأ الآن"}),e.jsx("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:"جاهز للبدء؟"}),e.jsx("p",{className:"text-xl text-white/90 mb-8",children:"انضم الآن لآلاف المستخدمين الناجحين واستمتع بتجربة فريدة"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(N,{size:"lg",variant:"secondary",className:"text-primary font-semibold",asChild:!0,children:e.jsxs(w,{to:"/products",children:[e.jsx(Ce,{className:"ml-2 h-5 w-5 rtl:ml-0 rtl:mr-2"}),"تسوق الآن"]})}),e.jsx(N,{size:"lg",variant:"outline",className:"bg-white/10 border-white/30 text-white hover:bg-white/20",asChild:!0,children:e.jsxs(w,{to:"/register?type=merchant",children:[e.jsx(Ee,{className:"ml-2 h-5 w-5 rtl:ml-0 rtl:mr-2"}),"سجل كتاجر"]})}),e.jsx(N,{size:"lg",variant:"outline",className:"bg-white/10 border-white/30 text-white hover:bg-white/20",asChild:!0,children:e.jsxs(w,{to:"/register?type=affiliate",children:[e.jsx(ue,{className:"ml-2 h-5 w-5 rtl:ml-0 rtl:mr-2"}),"انضم كمسوق"]})})]})]})})})]})}const Bi=tt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Q=i.forwardRef(({className:s,...t},r)=>e.jsx(lr,{ref:r,className:_(Bi(),s),...t}));Q.displayName=lr.displayName;const ut=i.forwardRef(({className:s,...t},r)=>e.jsx(cr,{ref:r,className:_("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(Da,{className:_("flex items-center justify-center text-current"),children:e.jsx(je,{className:"h-4 w-4"})})}));ut.displayName=cr.displayName;function Wr({className:s=""}){return null}const Xt={siteKey:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",secretKey:"6LeIxAcTAAAAAGG-vFI1TnRWxMZNFuojJ4WifJWe",verifyUrl:"https://www.google.com/recaptcha/api/siteverify",minScore:.5};function Hr(){return new Promise((s,t)=>{if(window.grecaptcha){s();return}const r=document.querySelector('script[src*="recaptcha"]');if(r){r.addEventListener("load",()=>s());return}const a=document.createElement("script");a.src=`https://www.google.com/recaptcha/api.js?render=${Xt.siteKey}`,a.async=!0,a.defer=!0,a.onload=()=>{console.log("✅ reCAPTCHA script loaded"),s()},a.onerror=()=>{console.error("❌ Failed to load reCAPTCHA script"),t(new Error("Failed to load reCAPTCHA"))},document.head.appendChild(a)})}async function Gi(s="submit"){try{await Hr(),await new Promise(r=>{window.grecaptcha&&window.grecaptcha.ready?window.grecaptcha.ready(()=>r()):setTimeout(()=>r(),1e3)});const t=await window.grecaptcha.execute(Xt.siteKey,{action:s});if(!t)throw new Error("No reCAPTCHA token received");return console.log("✅ reCAPTCHA token generated:",s),t}catch(t){throw console.error("❌ reCAPTCHA execution failed:",t),t}}function Wi(){return Xt.siteKey!=="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"}const Kr={LOGIN:"login",REGISTER:"register",FORGOT_PASSWORD:"forgot_password",RESET_PASSWORD:"reset_password",CONTACT:"contact",ORDER:"order",REVIEW:"review",COMMENT:"comment",NEWSLETTER:"newsletter"};async function Qr(s){try{if(!Wi())return{success:!0,token:"test-token"};const t=await Gi(s);return t?{success:!0,token:t}:{success:!1,error:"Failed to generate reCAPTCHA token"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}function Hi(){const[s,t]=i.useState(!1),r=async()=>{try{t(!0),we.createOAuth2Session("facebook",`${window.location.origin}/auth/callback`,`${window.location.origin}/login?error=facebook_failed`)}catch(a){console.error("Facebook login error:",a),t(!1)}};return e.jsxs(N,{onClick:r,disabled:s,variant:"outline",className:"w-full flex items-center justify-center gap-2 bg-[#1877F2] hover:bg-[#166FE5] text-white border-0",children:[e.jsx(ir,{className:"w-5 h-5"}),s?"جاري الاتصال...":"تسجيل الدخول بـ Facebook"]})}class Ki{constructor(){ve(this,"limits",new Map)}check(t,r){const a=Date.now(),n=this.limits.get(t)||{requests:[],blocked:!1};if(n.blocked&&n.blockUntil){if(a<n.blockUntil)return!1;n.blocked=!1,n.blockUntil=void 0}return n.requests=n.requests.filter(l=>a-l<r.windowMs),n.requests.length>=r.maxRequests?(r.blockDuration&&(n.blocked=!0,n.blockUntil=a+r.blockDuration),!1):(n.requests.push(a),this.limits.set(t,n),!0)}reset(t){this.limits.delete(t)}getStatus(t){const r=this.limits.get(t);return r?{blocked:r.blocked,remaining:r.blockUntil?Math.max(0,r.blockUntil-Date.now()):0,requests:r.requests.length}:{blocked:!1,remaining:1/0}}}const Jr=new Ki;function Qi(){const[s,t]=i.useState(!1),[r,a]=i.useState(""),[n,l]=i.useState(""),[u,h]=i.useState(!1),[x,A]=i.useState(!1),[m,o]=i.useState(""),[c,y]=i.useState(!0),{login:E,loginWithGoogle:p,loginWithFacebook:d,user:f}=ye(),P=De();i.useEffect(()=>{const D=()=>{const j=document.documentElement.dir,O=document.documentElement.lang;y(j==="rtl"||O==="ar")};D();const L=new MutationObserver(D);return L.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]}),()=>L.disconnect()},[]);const T=async D=>{D.preventDefault(),o(""),A(!0);try{if(!Jr.check(r,{maxRequests:5,windowMs:6e4,blockDuration:3e5}))throw new Error("محاولات كثيرة جداً. حاول بعد 5 دقائق");const L=await Qr(Kr.LOGIN);if(!L.success)throw new Error(L.error||"فشل التحقق من reCAPTCHA");await E(r,n)}catch(L){o((L==null?void 0:L.message)||"حدث خطأ أثناء تسجيل الدخول"),A(!1)}};return i.useEffect(()=>{if(f&&!x){const D=sessionStorage.getItem("redirectAfterLogin");if(D&&!D.includes("/login")&&!D.includes("/register")){sessionStorage.removeItem("redirectAfterLogin"),P(D);return}f.role==="admin"?P("/admin"):f.isMerchant?P("/merchant/dashboard"):f.isAffiliate?P("/affiliate/dashboard"):f.isIntermediary?P("/intermediary/dashboard"):P("/")}},[f,x,P]),f?null:e.jsxs("div",{className:`min-h-screen grid grid-cols-1 lg:grid-cols-2 ${c?"":"direction-ltr"}`,children:[e.jsxs("div",{className:`hidden lg:flex flex-col justify-center p-12 bg-gradient-to-br from-primary via-purple-600 to-secondary text-white relative overflow-hidden ${c?"lg:order-2":"lg:order-1"}`,children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center scale-150",children:e.jsx(Zt,{size:"large",interactive:!1,autoRotate:!0,showParticles:!1})})}),e.jsxs("div",{className:"relative z-10 max-w-md",children:[e.jsxs(w,{to:"/",className:"inline-flex items-center gap-2 text-5xl font-bold mb-6",children:[e.jsx(Ee,{className:"w-12 h-12"}),"إيجي جو"]}),e.jsx("p",{className:"text-2xl mb-8 opacity-90",children:"التسوق الذكي يبدأ هنا"}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(je,{className:"h-6 w-6"})}),e.jsx("div",{children:"آلاف المنتجات المميزة"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(mt,{className:"h-6 w-6"})}),e.jsx("div",{children:"توصيل سريع وآمن"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(je,{className:"h-6 w-6"})}),e.jsx("div",{children:"استرجاع سهل خلال 14 يوم"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(xe,{className:"h-6 w-6"})}),e.jsx("div",{children:"دفع آمن 100%"})]})]}),e.jsx(U,{className:"bg-white/10 backdrop-blur border-white/20",children:e.jsx(re,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Me,{className:"h-5 w-5 fill-yellow-400 text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm mb-1",children:'"أفضل موقع تسوق استخدمته! المنتجات عالية الجودة"'}),e.jsx("p",{className:"text-xs opacity-75",children:"- أحمد محمد، القاهرة"})]})]})})})]})]}),e.jsx("div",{className:`flex items-center justify-center p-6 lg:p-12 bg-background ${c?"lg:order-1":"lg:order-2"}`,children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsx("div",{className:"text-center lg:hidden",children:e.jsxs(w,{to:"/",className:"inline-flex items-center gap-2 text-3xl font-bold bg-gradient-to-r from-primary via-purple-600 to-secondary bg-clip-text text-transparent",children:[e.jsx(Ee,{className:"w-8 h-8 text-purple-600"}),"إيجي جو"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"مرحباً بعودتك"}),e.jsx("p",{className:"text-muted-foreground",children:"سجل دخولك للمتابعة"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(N,{type:"button",variant:"outline",size:"lg",className:"w-full",onClick:()=>{p().catch(D=>{o("حدث خطأ أثناء تسجيل الدخول بـ Google"),console.error(D)})},children:[e.jsxs("svg",{className:"w-5 h-5 ml-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"تسجيل الدخول بجوجل"]}),e.jsxs(N,{type:"button",variant:"outline",size:"lg",className:"w-full",onClick:()=>{d().catch(D=>{o("حدث خطأ أثناء تسجيل الدخول بـ Facebook"),console.error(D)})},children:[e.jsx("svg",{className:"w-5 h-5 ml-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"تسجيل الدخول بفيسبوك"]})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(vt,{})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-4 bg-background text-muted-foreground",children:"أو"})})]}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[m&&e.jsx("div",{className:"p-3 text-sm text-red-600 bg-gradient-to-r from-red-50 to-red-100 border border-red-300 rounded-md shadow-sm",children:m}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"email",children:"البريد الإلكتروني"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(Xe,{className:"h-5 w-5 text-gray-400"})}),e.jsx(me,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"أدخل بريدك الإلكتروني",value:r,onChange:D=>a(D.target.value),className:"pr-10"})]})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"password",children:"كلمة المرور"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(ct,{className:"h-5 w-5 text-gray-400"})}),e.jsx(me,{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",required:!0,placeholder:"أدخل كلمة المرور",value:n,onChange:D=>l(D.target.value),className:"pr-10 pl-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 left-0 pl-3 flex items-center",onClick:()=>t(!s),children:s?e.jsx(Mt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(dt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(ut,{id:"remember-me",checked:u,onCheckedChange:D=>h(!!D)}),e.jsx(Q,{htmlFor:"remember-me",className:"text-sm cursor-pointer",children:"تذكرني"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(w,{to:"/forgot-password",className:"font-medium text-primary hover:text-primary/80 transition-colors",children:"نسيت كلمة المرور؟"})})]}),e.jsx(N,{type:"submit",size:"lg",className:"w-full bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",disabled:x,children:x?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري تسجيل الدخول..."]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:["تسجيل الدخول",e.jsx(Le,{className:"h-4 w-4 rtl:rotate-180"})]})}),e.jsx(Wr,{className:"mt-2"})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"أو"})})]}),e.jsx(Hi,{}),e.jsxs("div",{className:"text-center text-sm mt-6",children:["ليس لديك حساب؟"," ",e.jsx(w,{to:"/register",className:"text-primary font-semibold hover:underline",children:"سجل الآن"})]}),e.jsx(U,{className:"bg-gradient-to-r from-orange-500/10 to-yellow-500/10 border-orange-200 dark:border-orange-800",children:e.jsxs(re,{className:"p-4 text-center",children:[e.jsx("p",{className:"text-sm font-semibold mb-1",children:"💰 انضم لبرنامج الشراكة"}),e.jsx(w,{to:"/affiliate",className:"text-sm text-orange-600 hover:underline",children:"اكسب عمولة تصل إلى 25%"})]})}),e.jsxs("div",{className:"text-center text-xs text-muted-foreground",children:["بتسجيل الدخول، فإنك توافق على"," ",e.jsx(w,{to:"/terms",className:"hover:underline",children:"شروط الخدمة"})," ","و"," ",e.jsx(w,{to:"/privacy",className:"hover:underline",children:"سياسة الخصوصية"})]})]})})]})}const Es=Fa,_s=qa,Bt=i.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(dr,{ref:a,className:_("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...r,children:[t,e.jsx(Ta,{asChild:!0,children:e.jsx(Kt,{className:"h-4 w-4 opacity-50"})})]}));Bt.displayName=dr.displayName;const Yr=i.forwardRef(({className:s,...t},r)=>e.jsx(mr,{ref:r,className:_("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(or,{className:"h-4 w-4"})}));Yr.displayName=mr.displayName;const Zr=i.forwardRef(({className:s,...t},r)=>e.jsx(ur,{ref:r,className:_("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Kt,{className:"h-4 w-4"})}));Zr.displayName=ur.displayName;const Gt=i.forwardRef(({className:s,children:t,position:r="popper",...a},n)=>e.jsx(Oa,{children:e.jsxs(hr,{ref:n,className:_("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...a,children:[e.jsx(Yr,{}),e.jsx(La,{className:_("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Zr,{})]})}));Gt.displayName=hr.displayName;const Ji=i.forwardRef(({className:s,...t},r)=>e.jsx(xr,{ref:r,className:_("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));Ji.displayName=xr.displayName;const Wt=i.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(pr,{ref:a,className:_("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx($a,{children:e.jsx(je,{className:"h-4 w-4"})})}),e.jsx(Ma,{children:t})]}));Wt.displayName=pr.displayName;const Yi=i.forwardRef(({className:s,...t},r)=>e.jsx(fr,{ref:r,className:_("-mx-1 my-1 h-px bg-muted",s),...t}));Yi.displayName=fr.displayName;const Xr=[{name:"Cairo",nameAr:"القاهرة",cities:[{name:"Nasr City",nameAr:"مدينة نصر"},{name:"Heliopolis",nameAr:"مصر الجديدة"},{name:"Maadi",nameAr:"المعادي"},{name:"Zamalek",nameAr:"الزمالك"},{name:"Downtown",nameAr:"وسط البلد"},{name:"Shubra",nameAr:"شبرا"},{name:"Ain Shams",nameAr:"عين شمس"},{name:"Helwan",nameAr:"حلوان"},{name:"New Cairo",nameAr:"القاهرة الجديدة"},{name:"Mokattam",nameAr:"المقطم"}]},{name:"Giza",nameAr:"الجيزة",cities:[{name:"Giza",nameAr:"الجيزة"},{name:"Dokki",nameAr:"الدقي"},{name:"Mohandessin",nameAr:"المهندسين"},{name:"Agouza",nameAr:"العجوزة"},{name:"6th of October",nameAr:"6 أكتوبر"},{name:"Sheikh Zayed",nameAr:"الشيخ زايد"},{name:"Haram",nameAr:"الهرم"},{name:"Faisal",nameAr:"فيصل"},{name:"Imbaba",nameAr:"إمبابة"},{name:"Bulaq Al Dakrour",nameAr:"بولاق الدكرور"},{name:"Al Badrashein",nameAr:"البدرشين"},{name:"Al Saff",nameAr:"الصف"},{name:"Atfih",nameAr:"أطفيح"},{name:"Al Ayat",nameAr:"العياط"},{name:"Kerdasa",nameAr:"كرداسة"},{name:"Abu Nomros",nameAr:"أبو النمرس"},{name:"Manshiyet Al Qanater",nameAr:"منشأة القناطر"},{name:"Ausim",nameAr:"أوسيم"}]},{name:"Alexandria",nameAr:"الإسكندرية",cities:[{name:"Montaza",nameAr:"المنتزه"},{name:"Sidi Gaber",nameAr:"سيدي جابر"},{name:"Miami",nameAr:"ميامي"},{name:"Smouha",nameAr:"سموحة"},{name:"Stanley",nameAr:"ستانلي"},{name:"Sporting",nameAr:"سبورتنج"},{name:"Agami",nameAr:"العجمي"},{name:"Borg El Arab",nameAr:"برج العرب"},{name:"Amreya",nameAr:"العامرية"}]},{name:"Qalyubia",nameAr:"القليوبية",cities:[{name:"Banha",nameAr:"بنها"},{name:"Qalyub",nameAr:"قليوب"},{name:"Shubra El Kheima",nameAr:"شبرا الخيمة"},{name:"Obour",nameAr:"العبور"},{name:"Khanka",nameAr:"الخانكة"},{name:"Kafr Shukr",nameAr:"كفر شكر"},{name:"Toukh",nameAr:"طوخ"},{name:"Qaha",nameAr:"قها"},{name:"Shibin El Qanater",nameAr:"شبين القناطر"}]},{name:"Sharqia",nameAr:"الشرقية",cities:[{name:"Zagazig",nameAr:"الزقازيق"},{name:"10th of Ramadan",nameAr:"العاشر من رمضان"},{name:"Bilbeis",nameAr:"بلبيس"},{name:"Abu Hammad",nameAr:"أبو حماد"},{name:"Faqous",nameAr:"فاقوس"},{name:"Minya El Qamh",nameAr:"منيا القمح"},{name:"Abu Kabir",nameAr:"أبو كبير"},{name:"Hihya",nameAr:"ههيا"},{name:"Diarb Negm",nameAr:"ديرب نجم"},{name:"Kafr Saqr",nameAr:"كفر صقر"},{name:"Awlad Saqr",nameAr:"أولاد صقر"},{name:"Husseiniya",nameAr:"الحسينية"},{name:"San El Hagar",nameAr:"صان الحجر"}]},{name:"Dakahlia",nameAr:"الدقهلية",cities:[{name:"Mansoura",nameAr:"المنصورة"},{name:"Talkha",nameAr:"طلخا"},{name:"Mit Ghamr",nameAr:"ميت غمر"},{name:"Dekernes",nameAr:"دكرنس"},{name:"Aga",nameAr:"أجا"},{name:"Manzala",nameAr:"المنزلة"},{name:"Belqas",nameAr:"بلقاس"},{name:"Sherbin",nameAr:"شربين"},{name:"Gamasa",nameAr:"الجمالية"},{name:"Menit El Nasr",nameAr:"منية النصر"},{name:"Nabaroh",nameAr:"نبروه"},{name:"Sinbillawein",nameAr:"السنبلاوين"},{name:"Tami El Amdid",nameAr:"تمي الأمديد"}]},{name:"Beheira",nameAr:"البحيرة",cities:[{name:"Damanhour",nameAr:"دمنهور"},{name:"Kafr El Dawwar",nameAr:"كفر الدوار"},{name:"Rashid",nameAr:"رشيد"},{name:"Edku",nameAr:"إدكو"},{name:"Abu Hummus",nameAr:"أبو حمص"},{name:"Abu El Matamir",nameAr:"أبو المطامير"},{name:"Delengat",nameAr:"الدلنجات"},{name:"Mahmoudiyah",nameAr:"المحمودية"},{name:"Rahmaniya",nameAr:"الرحمانية"},{name:"Itay El Barud",nameAr:"إيتاي البارود"},{name:"Housh Eissa",nameAr:"حوش عيسى"},{name:"Shubrakhit",nameAr:"شبراخيت"},{name:"Kom Hamada",nameAr:"كوم حمادة"},{name:"Badr",nameAr:"بدر"},{name:"Wadi El Natrun",nameAr:"وادي النطرون"}]},{name:"Gharbia",nameAr:"الغربية",cities:[{name:"Tanta",nameAr:"طنطا"},{name:"Mahalla El Kubra",nameAr:"المحلة الكبرى"},{name:"Kafr El Zayat",nameAr:"كفر الزيات"},{name:"Zefta",nameAr:"زفتى"},{name:"Samanoud",nameAr:"سمنود"},{name:"Basyoun",nameAr:"بسيون"},{name:"Kotour",nameAr:"قطور"},{name:"Santa",nameAr:"سنتا"}]},{name:"Monufia",nameAr:"المنوفية",cities:[{name:"Shibin El Kom",nameAr:"شبين الكوم"},{name:"Menouf",nameAr:"منوف"},{name:"Ashmoun",nameAr:"أشمون"},{name:"Quesna",nameAr:"قويسنا"},{name:"Berket El Saba",nameAr:"بركة السبع"},{name:"Tala",nameAr:"تلا"},{name:"El Bagour",nameAr:"الباجور"},{name:"Sers El Lyan",nameAr:"سرس الليان"},{name:"Sadat City",nameAr:"مدينة السادات"}]},{name:"Kafr El Sheikh",nameAr:"كفر الشيخ",cities:[{name:"Kafr El Sheikh",nameAr:"كفر الشيخ"},{name:"Desouk",nameAr:"دسوق"},{name:"Fuwwah",nameAr:"فوه"},{name:"Metoubes",nameAr:"مطوبس"},{name:"Baltim",nameAr:"بلطيم"},{name:"Sidi Salem",nameAr:"سيدي سالم"},{name:"Qallin",nameAr:"قلين"},{name:"Biyala",nameAr:"بيلا"},{name:"Riyadh",nameAr:"الرياض"},{name:"Hamoul",nameAr:"الحامول"}]},{name:"Damietta",nameAr:"دمياط",cities:[{name:"Damietta",nameAr:"دمياط"},{name:"New Damietta",nameAr:"دمياط الجديدة"},{name:"Ras El Bar",nameAr:"رأس البر"},{name:"Faraskour",nameAr:"فارسكور"},{name:"Zarqa",nameAr:"الزرقا"}]},{name:"Port Said",nameAr:"بورسعيد",cities:[{name:"Port Said",nameAr:"بورسعيد"},{name:"Port Fouad",nameAr:"بور فؤاد"}]},{name:"Ismailia",nameAr:"الإسماعيلية",cities:[{name:"Ismailia",nameAr:"الإسماعيلية"},{name:"Fayed",nameAr:"فايد"},{name:"Qantara",nameAr:"القنطرة"},{name:"Abu Suwir",nameAr:"أبو صوير"}]},{name:"Suez",nameAr:"السويس",cities:[{name:"Suez",nameAr:"السويس"},{name:"Ain Sokhna",nameAr:"العين السخنة"},{name:"Ataka",nameAr:"عتاقة"}]},{name:"North Sinai",nameAr:"شمال سيناء",cities:[{name:"Arish",nameAr:"العريش"},{name:"Rafah",nameAr:"رفح"},{name:"Sheikh Zuweid",nameAr:"الشيخ زويد"},{name:"Bir al-Abed",nameAr:"بئر العبد"}]},{name:"South Sinai",nameAr:"جنوب سيناء",cities:[{name:"Sharm El Sheikh",nameAr:"شرم الشيخ"},{name:"Dahab",nameAr:"دهب"},{name:"Nuweiba",nameAr:"نويبع"},{name:"Taba",nameAr:"طابا"},{name:"Saint Catherine",nameAr:"سانت كاترين"}]},{name:"Fayoum",nameAr:"الفيوم",cities:[{name:"Fayoum",nameAr:"الفيوم"},{name:"Ibshaway",nameAr:"إبشواي"},{name:"Tamiya",nameAr:"طامية"},{name:"Sinnuris",nameAr:"سنورس"}]},{name:"Beni Suef",nameAr:"بني سويف",cities:[{name:"Beni Suef",nameAr:"بني سويف"},{name:"Nasser",nameAr:"ناصر"},{name:"Beba",nameAr:"ببا"},{name:"Fashn",nameAr:"الفشن"}]},{name:"Minya",nameAr:"المنيا",cities:[{name:"Minya",nameAr:"المنيا"},{name:"Mallawi",nameAr:"ملوي"},{name:"Samalut",nameAr:"سمالوط"},{name:"Matay",nameAr:"مطاي"},{name:"Beni Mazar",nameAr:"بني مزار"}]},{name:"Assiut",nameAr:"أسيوط",cities:[{name:"Assiut",nameAr:"أسيوط"},{name:"Dayrout",nameAr:"ديروط"},{name:"Manfalut",nameAr:"منفلوط"},{name:"Abu Tig",nameAr:"أبو تيج"}]},{name:"Sohag",nameAr:"سوهاج",cities:[{name:"Sohag",nameAr:"سوهاج"},{name:"Akhmim",nameAr:"أخميم"},{name:"Girga",nameAr:"جرجا"},{name:"Dar El Salam",nameAr:"دار السلام"}]},{name:"Qena",nameAr:"قنا",cities:[{name:"Qena",nameAr:"قنا"},{name:"Nag Hammadi",nameAr:"نجع حمادي"},{name:"Qus",nameAr:"قوص"},{name:"Dishna",nameAr:"دشنا"}]},{name:"Luxor",nameAr:"الأقصر",cities:[{name:"Luxor",nameAr:"الأقصر"},{name:"Esna",nameAr:"إسنا"},{name:"Armant",nameAr:"أرمنت"}]},{name:"Aswan",nameAr:"أسوان",cities:[{name:"Aswan",nameAr:"أسوان"},{name:"Kom Ombo",nameAr:"كوم أمبو"},{name:"Edfu",nameAr:"إدفو"},{name:"Daraw",nameAr:"دراو"}]},{name:"Red Sea",nameAr:"البحر الأحمر",cities:[{name:"Hurghada",nameAr:"الغردقة"},{name:"Safaga",nameAr:"سفاجا"},{name:"Marsa Alam",nameAr:"مرسى علم"},{name:"Quseer",nameAr:"القصير"}]},{name:"New Valley",nameAr:"الوادي الجديد",cities:[{name:"Kharga",nameAr:"الخارجة"},{name:"Dakhla",nameAr:"الداخلة"},{name:"Farafra",nameAr:"الفرافرة"},{name:"Balat",nameAr:"بلاط"}]},{name:"Matrouh",nameAr:"مطروح",cities:[{name:"Marsa Matrouh",nameAr:"مرسى مطروح"},{name:"El Alamein",nameAr:"العلمين"},{name:"Sidi Barrani",nameAr:"سيدي براني"},{name:"Siwa",nameAr:"سيوة"}]}];function Zi(s){const t=Xr.find(r=>r.name===s||r.nameAr===s);return(t==null?void 0:t.cities)||[]}const Ss={egyptianPhone:de().regex(/^(010|011|012|015)\d{8}$/,"رقم هاتف مصري غير صحيح"),email:de().email("بريد إلكتروني غير صحيح"),price:At().min(0,"السعر يجب أن يكون موجب").max(1e6,"السعر كبير جداً"),productName:de().min(3,"الاسم قصير جداً").max(200,"الاسم طويل جداً").regex(/^[a-zA-Z0-9\u0600-\u06FF\s]+$/,"أحرف غير مسموحة"),address:Nt({governorate:de().min(1,"المحافظة مطلوبة"),city:de().min(1,"المدينة مطلوبة"),street:de().min(5,"اسم الشارع قصير جداً"),building:de().optional(),floor:de().optional(),apartment:de().optional()}),orderData:Nt({customerName:de().min(2,"الاسم قصير جداً"),phone:de().regex(/^(010|011|012|015)\d{8}$/,"رقم هاتف غير صحيح"),address:de().min(10,"العنوان قصير جداً"),items:dn(Nt({productId:de(),quantity:At().min(1),price:At().min(0)})).min(1,"يجب إضافة منتج واحد على الأقل")})};function Cs(s,t){try{return{success:!0,data:s.parse(t)}}catch(r){return r instanceof mn?{success:!1,errors:r.errors.map(a=>a.message)}:{success:!1,errors:["خطأ في التحقق"]}}}function Xi(){const[s,t]=i.useState(!1),[r,a]=i.useState(!1),[n,l]=i.useState({name:"",email:"",phone:"",alternativePhone:"",password:"",confirmPassword:"",referralCode:"",governorate:"",city:""}),[u,h]=i.useState([]),[x,A]=i.useState("customer"),[m,o]=i.useState(!1),[c,y]=i.useState(!1),[E,p]=i.useState(!1),[d,f]=i.useState(""),[P,T]=i.useState(null),[D,L]=i.useState(!0),{register:j,user:O}=ye(),W=De(),[z]=Va();i.useEffect(()=>{const $=()=>{const te=document.documentElement.dir,pe=document.documentElement.lang;L(te==="rtl"||pe==="ar")};$();const B=new MutationObserver($);return B.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]}),()=>B.disconnect()},[]),i.useEffect(()=>{const $=z.get("type");($==="affiliate"||$==="merchant")&&A($);const B=z.get("ref");B&&(l(te=>({...te,referralCode:B})),ee(B))},[z]);const ee=async $=>{if(!$){T(null);return}try{const B=await k.listDocuments(C.databaseId,C.collections.userPreferences,[I.equal("affiliateCode",$),I.limit(1)]);B.documents.length>0?T(B.documents[0]):T(null)}catch(B){console.error("Error validating referral code:",B),T(null)}},R=$=>B=>{l(te=>({...te,[$]:B.target.value}))},oe=$=>{l(te=>({...te,governorate:$,city:""}));const B=Zi($);h(B.map(te=>te.nameAr))},ce=$=>{l(B=>({...B,city:$}))};if(O)return W("/"),null;const Y=async $=>{var pe,F;if($.preventDefault(),f(""),!Jr.check(n.email,{maxRequests:3,windowMs:6e4,blockDuration:6e5})){f("محاولات كثيرة جداً. حاول بعد 10 دقائق");return}const B=Cs(Ss.egyptianPhone,n.phone);if(!B.success){f(((pe=B.errors)==null?void 0:pe[0])||"رقم هاتف غير صحيح");return}const te=Cs(Ss.email,n.email);if(!te.success){f(((F=te.errors)==null?void 0:F[0])||"بريد إلكتروني غير صحيح");return}if(!m){f("يجب الموافقة على شروط الخدمة للمتابعة");return}if(!n.phone){f("رقم الهاتف مطلوب");return}if(!n.governorate){f("المحافظة مطلوبة");return}if(!n.city){f("المركز/المدينة مطلوب");return}if(!c){f("يجب تأكيد توفر رقم الهاتف على WhatsApp أو للاتصال");return}if(n.password!==n.confirmPassword){f("كلمات المرور غير متطابقة");return}if(n.password.length<6){f("كلمة المرور يجب أن تكون 6 أحرف على الأقل");return}p(!0);try{const q=await Qr(Kr.REGISTER);if(!q.success)throw new Error(q.error||"فشل التحقق من reCAPTCHA");const G=await j(n.email,n.password,n.name,x,n.phone,n.alternativePhone);if(G){try{if(await k.createDocument(C.databaseId,"userPreferences",Ne.unique(),{userId:G.$id,email:n.email,name:n.name,phone:n.phone||"",governorate:n.governorate,city:n.city,role:x==="merchant"?"merchant":x==="affiliate"?"affiliate":"customer",accountStatus:x==="customer"?"approved":"pending",isAdmin:!1,isAffiliate:x==="affiliate",isMerchant:x==="merchant",isIntermediary:!1,affiliateCode:x==="affiliate"?`AFF${Date.now()}`:"",intermediaryCode:"",defaultMarkupPercentage:0,commissionRate:x==="affiliate"?10:0,businessName:"",businessAddress:"",taxId:""}),console.log("✅ User preferences created for admin panel"),n.referralCode&&P)try{await k.createDocument(C.databaseId,"referrals",Ne.unique(),{referrerId:P.userId,referredUserId:G.$id,referredUserName:n.name,referredUserEmail:n.email,referralCode:n.referralCode,status:"pending",reward:0,level:1,createdAt:new Date().toISOString()}),console.log("✅ Referral record created with complete data"),await k.createDocument(C.databaseId,C.collections.notifications,Ne.unique(),{userId:P.userId,title:"🎉 إحالة جديدة!",message:`قام ${n.name} بالتسجيل باستخدام كود الإحالة الخاص بك`,type:"affiliate",read:!1,relatedId:G.$id,metadata:JSON.stringify({referralCode:n.referralCode,newUserName:n.name,link:"/affiliate/referrals"})})}catch(J){console.error("Error creating referral record:",J)}}catch(J){console.error("Error creating user preferences:",J)}try{await k.createDocument(C.databaseId,C.collections.notifications,Ne.unique(),{userId:G.$id,title:"👋 مرحباً بك في إيجي جو",message:x==="customer"?"نتمنى لك تجربة تسوق ممتعة! ابدأ باستكشاف منتجاتنا الآن":"⏳ تم استلام طلبك وجاري المراجعة. سنخطرك فوراً عند الموافقة على حسابك",type:"info",read:!1,relatedId:G.$id,metadata:JSON.stringify({accountType:x,link:x==="customer"?"/products":void 0})})}catch(J){console.error("Error creating welcome notification:",J)}}x==="affiliate"||x==="merchant"?(alert(`تم إنشاء حسابك كـ${x==="affiliate"?"مسوق":"تاجر"} بنجاح!

⏳ حسابك قيد المراجعة من قبل الإدارة
📧 سيتم إخطارك عبر البريد الإلكتروني فور الموافقة
⚠️ لن تتمكن من الوصول لكامل المميزات حتى تتم الموافقة على حسابك`),W("/login")):W("/")}catch(q){f(q instanceof Error?q.message:"حدث خطأ أثناء إنشاء الحساب"),alert("حدث خطأ في إنشاء الحساب")}finally{p(!1)}};return e.jsxs("div",{className:`min-h-screen grid grid-cols-1 lg:grid-cols-2 ${D?"":"direction-ltr"}`,children:[e.jsxs("div",{className:`hidden lg:flex flex-col justify-center p-12 bg-gradient-to-br from-primary via-purple-600 to-secondary text-white relative overflow-hidden ${D?"lg:order-2":"lg:order-1"}`,children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center scale-150",children:e.jsx(Zt,{size:"large",interactive:!1,autoRotate:!0,showParticles:!1})})}),e.jsxs("div",{className:"relative z-10 max-w-md",children:[e.jsxs(w,{to:"/",className:"inline-flex items-center gap-2 text-5xl font-bold mb-6",children:[e.jsx(Ee,{className:"w-12 h-12"}),"إيجي جو"]}),e.jsx("p",{className:"text-2xl mb-8 opacity-90",children:"انضم إلى عائلة إيجي جو"}),e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(je,{className:"h-6 w-6"})}),e.jsx("div",{children:"حساب واحد لجميع الخدمات"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(Me,{className:"h-6 w-6"})}),e.jsx("div",{children:"عمولات مميزة للتجار والمسوقين"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(xe,{className:"h-6 w-6"})}),e.jsx("div",{children:"بيانات آمنة ومشفرة"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-white/20 flex items-center justify-center",children:e.jsx(mt,{className:"h-6 w-6"})}),e.jsx("div",{children:"توصيل سريع وآمن"})]})]}),e.jsx(U,{className:"bg-white/10 backdrop-blur border-white/20",children:e.jsx(re,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Me,{className:"h-5 w-5 fill-yellow-400 text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90 mb-2",children:'"تجربة رائعة! التسجيل سهل والمنصة احترافية جداً"'}),e.jsx("p",{className:"text-xs opacity-75",children:"- أحمد محمد، تاجر شريك"})]})]})})})]})]}),e.jsx("div",{className:`flex items-center justify-center p-6 lg:p-12 bg-background overflow-y-auto ${D?"lg:order-1":"lg:order-2"}`,children:e.jsxs("div",{className:"w-full max-w-md space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"إنشاء حساب جديد"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:"املأ البيانات للبدء"}),e.jsxs("p",{className:"mt-2 text-sm",children:["لديك حساب بالفعل؟"," ",e.jsx(w,{to:"/login",className:"font-medium text-primary hover:text-primary/80 transition-colors",children:"تسجيل الدخول"})]})]}),d&&e.jsx("div",{className:"bg-red-50 dark:bg-red-950/20 border-2 border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg text-center text-sm font-medium",children:d}),e.jsx(U,{className:"shadow-lg",children:e.jsxs(re,{className:"pt-6",children:[e.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"name",children:"الاسم الكامل"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(jt,{className:"h-5 w-5 text-gray-400"})}),e.jsx(me,{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,placeholder:"أدخل اسمك الكامل",value:n.name,onChange:R("name"),className:"pr-10"})]})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"email",children:"البريد الإلكتروني"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(Xe,{className:"h-5 w-5 text-gray-400"})}),e.jsx(me,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"أدخل بريدك الإلكتروني",value:n.email,onChange:R("email"),className:"pr-10"})]})]}),e.jsxs("div",{children:[e.jsxs(Q,{htmlFor:"phone",children:["رقم الهاتف ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx(me,{id:"phone",name:"phone",type:"tel",autoComplete:"tel",required:!0,placeholder:"مثال: 01012345678",value:n.phone,onChange:R("phone"),className:"pr-10"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"سيتم استخدام هذا الرقم للتواصل معك"})]}),e.jsxs("div",{children:[e.jsxs(Q,{htmlFor:"governorate",children:["المحافظة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(Es,{value:n.governorate,onValueChange:oe,required:!0,children:[e.jsx(Bt,{className:"mt-1",children:e.jsx(_s,{placeholder:"اختر المحافظة"})}),e.jsx(Gt,{children:Xr.map($=>e.jsx(Wt,{value:$.nameAr,children:$.nameAr},$.name))})]})]}),e.jsxs("div",{children:[e.jsxs(Q,{htmlFor:"city",children:["المركز/المدينة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(Es,{value:n.city,onValueChange:ce,disabled:!n.governorate,required:!0,children:[e.jsx(Bt,{className:"mt-1",children:e.jsx(_s,{placeholder:n.governorate?"اختر المركز/المدينة":"اختر المحافظة أولاً"})}),e.jsx(Gt,{children:u.map($=>e.jsx(Wt,{value:$,children:$},$))})]})]}),e.jsxs("div",{className:"flex items-start space-x-2 rtl:space-x-reverse",children:[e.jsx(ut,{id:"whatsapp-available",checked:c,onCheckedChange:$=>y(!!$)}),e.jsxs("div",{className:"grid gap-1.5 leading-none",children:[e.jsxs(Q,{htmlFor:"whatsapp-available",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:["هذا الرقم متاح على WhatsApp أو للاتصال ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"تأكد من إمكانية التواصل معك عبر هذا الرقم"})]})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"alternativePhone",children:"رقم هاتف بديل (اختياري)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx(me,{id:"alternativePhone",name:"alternativePhone",type:"tel",autoComplete:"tel",placeholder:"رقم إضافي للتواصل (اختياري)",value:n.alternativePhone,onChange:R("alternativePhone"),className:"pr-10"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"يمكنك إضافة رقم آخر للتواصل معك"})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"password",children:"كلمة المرور"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(ct,{className:"h-5 w-5 text-gray-400"})}),e.jsx(me,{id:"password",name:"password",type:s?"text":"password",autoComplete:"new-password",required:!0,placeholder:"أدخل كلمة المرور (6 أحرف على الأقل)",value:n.password,onChange:R("password"),className:"pr-10 pl-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 left-0 pl-3 flex items-center",onClick:()=>t(!s),children:s?e.jsx(Mt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(dt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"confirmPassword",children:"تأكيد كلمة المرور"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(ct,{className:"h-5 w-5 text-gray-400"})}),e.jsx(me,{id:"confirmPassword",name:"confirmPassword",type:r?"text":"password",autoComplete:"new-password",required:!0,placeholder:"أعد إدخال كلمة المرور",value:n.confirmPassword,onChange:R("confirmPassword"),className:"pr-10 pl-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 left-0 pl-3 flex items-center",onClick:()=>a(!r),children:r?e.jsx(Mt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(dt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{children:[e.jsx(Q,{htmlFor:"referralCode",children:"كود الإحالة (اختياري)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(Ee,{className:"h-5 w-5 text-gray-400"})}),e.jsx(me,{id:"referralCode",name:"referralCode",type:"text",placeholder:"أدخل كود الإحالة إن وجد",value:n.referralCode,onChange:$=>{R("referralCode")($),ee($.target.value)},className:"pr-10"})]}),P&&e.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:["✓ تمت الإحالة من: ",P.name]}),n.referralCode&&!P&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"كود الإحالة غير صحيح"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"إذا كان لديك كود إحالة من أحد المسوقين، أدخله هنا"})]}),e.jsxs("div",{children:[e.jsx(Q,{children:"نوع الحساب"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-2",children:[e.jsxs("div",{className:`flex items-center space-x-3 rtl:space-x-reverse p-4 rounded-lg border-2 cursor-pointer transition-all ${x==="customer"?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>A("customer"),children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${x==="customer"?"border-primary":"border-gray-300"}`,children:x==="customer"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"🛒 عميل"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"تسوق واشتري المنتجات"})]})]}),e.jsxs("div",{className:`flex items-center space-x-3 rtl:space-x-reverse p-4 rounded-lg border-2 cursor-pointer transition-all ${x==="affiliate"?"border-brand-orange bg-brand-orange/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>A("affiliate"),children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${x==="affiliate"?"border-brand-orange":"border-gray-300"}`,children:x==="affiliate"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-brand-orange"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-brand-orange",children:"💰 مسوق بالعمولة"}),e.jsx("p",{className:"text-xs text-brand-orange/80 mt-0.5",children:"اكسب عمولة على كل عملية بيع"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1 font-medium",children:"⏳ يتطلب موافقة الإدارة"})]})]}),e.jsxs("div",{className:`flex items-center space-x-3 rtl:space-x-reverse p-4 rounded-lg border-2 cursor-pointer transition-all ${x==="merchant"?"border-brand-purple bg-brand-purple/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>A("merchant"),children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${x==="merchant"?"border-brand-purple":"border-gray-300"}`,children:x==="merchant"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-brand-purple"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-brand-purple",children:"🏪 تاجر"}),e.jsx("p",{className:"text-xs text-brand-purple/80 mt-0.5",children:"اعرض وبع منتجاتك على المنصة"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1 font-medium",children:"⏳ يتطلب موافقة الإدارة"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(ut,{id:"accept-terms",checked:m,onCheckedChange:$=>o(!!$),required:!0}),e.jsxs(Q,{htmlFor:"accept-terms",className:"text-sm cursor-pointer",children:["أوافق على"," ",e.jsx(w,{to:"/terms",className:"text-primary hover:text-primary/80 underline",children:"شروط الخدمة"})," ","و"," ",e.jsx(w,{to:"/privacy",className:"text-primary hover:text-primary/80 underline",children:"سياسة الخصوصية"})]})]}),e.jsx(N,{type:"submit",size:"lg",className:"w-full h-14 bg-gradient-to-r from-primary via-purple-600 to-secondary text-white font-bold text-lg rounded-lg shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-200",disabled:E||!m,children:E?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري إنشاء الحساب..."]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(je,{className:"h-5 w-5"}),e.jsx("span",{children:"إنشاء الحساب"}),e.jsx(Le,{className:"h-5 w-5 rtl:rotate-180"})]})}),e.jsx(Wr,{className:"mt-2"}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-2 text-xs text-center",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1 p-2 rounded-lg bg-green-50 dark:bg-green-950/20",children:[e.jsx(xe,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-green-700 dark:text-green-400 font-semibold",children:"آمن"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1 p-2 rounded-lg bg-blue-50 dark:bg-blue-950/20",children:[e.jsx(Me,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-blue-700 dark:text-blue-400 font-semibold",children:"موثوق"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1 p-2 rounded-lg bg-purple-50 dark:bg-purple-950/20",children:[e.jsx(mt,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-purple-700 dark:text-purple-400 font-semibold",children:"سريع"})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(vt,{})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-background text-muted-foreground",children:"أو يمكنك التسجيل عبر"})})]})}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs(N,{type:"button",variant:"outline",className:"w-full border-gray-300 hover:border-primary",onClick:()=>{console.log("التسجيل بـ Google")},children:[e.jsxs("svg",{className:"w-5 h-5 ml-2 rtl:ml-0 rtl:mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"التسجيل بحساب Google"]}),e.jsxs(N,{type:"button",variant:"outline",className:"w-full border-gray-300 hover:border-primary",onClick:()=>{console.log("التسجيل بـ Facebook")},children:[e.jsx("svg",{className:"w-5 h-5 ml-2 rtl:ml-0 rtl:mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"التسجيل بحساب Facebook"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center mt-6",children:["جميع بياناتك محمية وفق ",e.jsx(w,{to:"/privacy",className:"underline text-primary",children:"سياسة الخصوصية"})," الخاصة بنا."]})]})})]})})]})}const eo=()=>{const s=Qt();return i.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},to=()=>e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-purple-50 to-orange-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ue,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})});function b(s,t=e.jsx(to,{})){const r=i.lazy(s);return a=>e.jsx(i.Suspense,{fallback:t,children:e.jsx(r,{...a})})}const Is=b(()=>v(()=>import("./Products-Cwr0LLN-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),so=b(()=>v(()=>import("./ProductDetail-BOO05SUN.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,8,14,15,16,17,12,11]))),ro=b(()=>v(()=>import("./Cart-9B_RxNVu.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,19,11]))),ao=b(()=>v(()=>import("./Checkout-FBkJWBnK.js"),__vite__mapDeps([20,1,2,3,4,5,6,7,8,21,16,11]))),no=b(()=>v(()=>import("./Wishlist-Csm-oMZ9.js"),__vite__mapDeps([22,1,2,3,4,5,6,7,8,23,17,11]))),io=b(()=>v(()=>import("./MyOrders-BVfskfEi.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,8,17,11]))),oo=b(()=>v(()=>import("./OrderTracking-cwCOhs5j.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,23,11])));b(()=>v(()=>import("./OrderSuccess-DVinv4BU.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,11])));const lo=b(()=>v(()=>import("./CustomerAccount-D_YZh2-a.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,14,28,11]))),co=b(()=>v(()=>import("./Affiliate-Dk38fFt5.js"),__vite__mapDeps([29,1,2,3,4,5,6,7,8,11]))),mo=b(()=>v(()=>import("./AffiliateDashboard-B0jV5Hvp.js"),__vite__mapDeps([30,1,2,3,4,5,6,7,8,31,9,10,14,11,16])));b(()=>v(()=>import("./NewAffiliateDashboard-Dq4eLWNE.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,31,11])));b(()=>v(()=>import("./EnhancedAffiliateDashboard-DK_xvijr.js"),__vite__mapDeps([33,1,2,3,4,5,6,7,8,34,35,11,16,14])));const uo=b(()=>v(()=>import("./AffiliateLandingPages-DQSBduqW.js"),__vite__mapDeps([36,1,2,3,4,5,6,7,8,14,11]))),It=b(()=>v(()=>import("./AffiliateAnalytics-B5WdhVoe.js"),__vite__mapDeps([37,1,2,3,4,5,6,7,8,11,14]))),Ps=b(()=>v(()=>import("./AffiliateLinkManager-DF-j79rh.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,8,11,39,14]))),Rs=b(()=>v(()=>import("./AffiliateCreatives-w2Iwyh9k.js"),__vite__mapDeps([40,1,2,3,4,5,6,7,8,11,14]))),ho=b(()=>v(()=>import("./AffiliateCoupons-DaaGm9L1.js"),__vite__mapDeps([41,1,2,3,4,5,6,7,8,11]))),xo=b(()=>v(()=>import("./AffiliateBanners-BWXURyJM.js"),__vite__mapDeps([42,1,2,3,4,5,6,7,8,11]))),po=b(()=>v(()=>import("./AffiliateMarketingTips-BxPfACjR.js"),__vite__mapDeps([43,1,2,3,4,5,6,7,8,11]))),fo=b(()=>v(()=>import("./AffiliateCourses-BkQ9BlTx.js"),__vite__mapDeps([44,1,2,3,4,5,6,7,8,16,11]))),Ds=b(()=>v(()=>import("./AffiliateWithdrawPage-BdC7e-DN.js"),__vite__mapDeps([45,1,2,3,4,5,6,7,8,35,11]))),go=b(()=>v(()=>import("./AffiliateResourcesPage-BB027oa0.js"),__vite__mapDeps([46,1,2,3,4,5,6,7,8,11]))),jo=b(()=>v(()=>import("./AffiliateSupportPage-B1NGKEdO.js"),__vite__mapDeps([47,1,2,3,4,5,6,7,8,11]))),Pt=b(()=>v(()=>import("./AffiliateReferralSystem-kADVdy9N.js"),__vite__mapDeps([48,1,2,3,4,5,6,7,8,14,11]))),yo=b(()=>v(()=>import("./AffiliateEarningsHistory-MczPY2Vm.js"),__vite__mapDeps([49,1,2,3,4,5,6,7,8,14,39,11]))),wo=b(()=>v(()=>import("./Merchant-CjR52pPc.js"),__vite__mapDeps([50,1,2,3,4,5,6,7,8,11]))),vo=b(()=>v(()=>import("./MerchantDashboard-BJZgQtIs.js"),__vite__mapDeps([51,1,2,3,4,5,6,7,8,16,52,15,11,28,17,34,39]))),Ts=b(()=>v(()=>import("./MerchantProducts-DcqP6YKK.js"),__vite__mapDeps([53,54,1,2,3,4,5,6,7,8,52,15,11,28,39,16,17,55]))),bo=b(()=>v(()=>import("./MerchantProductsStatus-BMCUgd1j.js"),__vite__mapDeps([56,1,2,3,4,5,6,7,8,28,11,14,52,15]))),No=b(()=>v(()=>import("./MerchantOrders-DYltJkag.js"),__vite__mapDeps([57,58,1,2,3,4,5,6,7,8,52,15,11,28,39,55]))),Ao=b(()=>v(()=>import("./MerchantAnalytics-BrOns-2f.js"),__vite__mapDeps([59,60,1,2,3,4,5,6,7,8,9,10,11]))),ko=b(()=>v(()=>import("./MerchantAdvertising-haoy3ICR.js"),__vite__mapDeps([61,1,2,3,4,5,6,7,8,11,52,15,28]))),Eo=b(()=>v(()=>import("./MerchantFinancialHistory-C3Jh6TdC.js"),__vite__mapDeps([62,1,2,3,4,5,6,7,8,14,39,11]))),Os=b(()=>v(()=>import("./AdminDashboard-CDqnFAbR.js"),__vite__mapDeps([63,1,2,3,4,5,6,7,8,52,15,11,28,55])));b(()=>v(()=>import("./EnhancedAdminDashboard-A8J4xUk6.js"),__vite__mapDeps([64,1,2,3,4,5,6,7,8,16,14,9,10,52,15,11,28,55])));const _o=b(()=>v(()=>import("./AdminUsers-BelWJS-t.js"),__vite__mapDeps([65,1,2,3,4,5,6,7,8,52,15,11,28]))),So=b(()=>v(()=>import("./AdminCouponsManager-Gsi4SSik.js"),__vite__mapDeps([66,1,2,3,4,5,6,7,8,39,19,11,52,15,28]))),Co=b(()=>v(()=>import("./AdminOffersManager-B0Vci40a.js"),__vite__mapDeps([67,1,2,3,4,5,6,7,8,11,39]))),Io=b(()=>v(()=>import("./AdminProductApproval-Cj_oXJXS.js"),__vite__mapDeps([68,1,2,3,4,5,6,7,8,11,39]))),Po=b(()=>v(()=>import("./AdminProducts-7JmU1mv0.js"),__vite__mapDeps([54,1,2,3,4,5,6,7,8,52,15,11,28,39,16,17,55]))),Ro=b(()=>v(()=>import("./AdminOrders-DirRQBTh.js"),__vite__mapDeps([58,1,2,3,4,5,6,7,8,52,15,11,28,39,55]))),Do=b(()=>v(()=>import("./AdminAnalytics-BC5Q_cp0.js"),__vite__mapDeps([60,1,2,3,4,5,6,7,8,9,10,11]))),To=b(()=>v(()=>import("./AdminCategories-qBVZSmnS.js"),__vite__mapDeps([69,1,2,3,4,5,6,7,8,52,15,11,28,39,55]))),Oo=b(()=>v(()=>import("./AdminCommissions-BdGs6epx.js"),__vite__mapDeps([70,1,2,3,4,5,6,7,8,52,15,11,28,39,55]))),Lo=b(()=>v(()=>import("./AdminPendingAccounts-Cup4a44N.js"),__vite__mapDeps([71,1,2,3,4,5,6,7,8,9,10,11,39]))),$o=b(()=>v(()=>import("./AdminUserManagement-B5dORfU8.js"),__vite__mapDeps([72,1,2,3,4,5,6,7,8,9,10,11,39]))),Mo=b(()=>v(()=>import("./AdminUserManagementFixed-CeYJbKwi.js"),__vite__mapDeps([73,1,2,3,4,5,6,7,8,11]))),Fo=b(()=>v(()=>import("./AdminProductsAdvanced-CUy0Wc0r.js"),__vite__mapDeps([74,1,2,3,4,5,6,7,8,10,16,39,11]))),qo=b(()=>v(()=>import("./AdminSettingsPage-CHV0vifL.js"),__vite__mapDeps([75,1,2,3,4,5,6,7,8,14,11]))),Vo=b(()=>v(()=>import("./AdminShipping--A2PUWeV.js"),__vite__mapDeps([76,1,2,3,4,5,6,7,8,39,16,11]))),zo=b(()=>v(()=>import("./AdminAdvancedSettings-DFT-zI7e.js"),__vite__mapDeps([77,1,2,3,4,5,6,7,8,14,11]))),Uo=b(()=>v(()=>import("./AdminNotifications-CXeP6dNb.js"),__vite__mapDeps([78,1,2,3,4,5,6,7,8,52,15,11,28,14,21,39])));b(()=>v(()=>import("./AdminCoupons-CtzPd5DS.js"),__vite__mapDeps([79,1,2,3,4,5,6,7,8,39,11])));const Bo=b(()=>v(()=>import("./AdminAIDashboard-BZPR1BaM.js"),__vite__mapDeps([80,1,2,3,4,5,6,7,8,16,14,81,11]))),Go=b(()=>v(()=>import("./AdminFinancialDashboard-V13JrI0l.js"),__vite__mapDeps([82,1,2,3,4,5,6,7,8,52,15,11,28,14,39]))),Wo=b(()=>v(()=>import("./ProductAIDemo-CMS_OTrb.js"),__vite__mapDeps([83,1,2,3,4,5,6,7,8,14,81,84,11]))),Ho=b(()=>v(()=>import("./TestAI-Bu2yOIDj.js"),__vite__mapDeps([85,1,2,3,4,5,6,7,8,81,11]))),Ko=b(()=>v(()=>import("./AboutPage-D29MabBQ.js"),__vite__mapDeps([86,1,2,3,4,5,6,7,8,11]))),Qo=b(()=>v(()=>import("./ContactPage-DKyiA_-p.js"),__vite__mapDeps([87,1,2,3,4,5,6,7,8,11]))),Jo=b(()=>v(()=>import("./FAQPage-CTIM8C5P.js"),__vite__mapDeps([88,1,2,3,4,5,6,7,8,84,11]))),Yo=b(()=>v(()=>import("./PrivacyPolicy-Csdd6qXb.js"),__vite__mapDeps([89,1,2,3,4,5,6,7,8,11]))),Zo=b(()=>v(()=>import("./TermsOfService-fQ1Iwvxa.js"),__vite__mapDeps([90,1,2,3,4,5,6,7,8,11]))),Xo=b(()=>v(()=>import("./ReturnPolicy-CYI_HPGP.js"),__vite__mapDeps([91,1,2,3,4,5,6,7,8,11]))),el=b(()=>v(()=>import("./ShippingPage-BnGy8Stf.js"),__vite__mapDeps([92,1,2,3,4,5,6,7,8,11]))),Ls=b(()=>v(()=>import("./Categories-DL57Q_fx.js"),__vite__mapDeps([93,1,2,3,4,5,6,7,8,9,10,11])));b(()=>v(()=>import("./CategoryPage-KSqs9KfT.js"),__vite__mapDeps([94,1,2,3,4,5,6,7,8,17,11])));const tl=b(()=>v(()=>import("./DealsPage-Bt_4MnCU.js"),__vite__mapDeps([95,1,2,3,4,5,6,7,8,11]))),sl=b(()=>v(()=>import("./ProductLanding-CIQFxgjJ.js"),__vite__mapDeps([96,1,2,3,4,5,6,7,8,11,9,10,23]))),rl=b(()=>v(()=>import("./ForgotPassword-2UtbX6H1.js"),__vite__mapDeps([97,1,2,3,4,5,6,7,8,11]))),al=b(()=>v(()=>import("./SettingsPage-DE9LV4On.js"),__vite__mapDeps([98,1,2,3,4,5,6,7,8,21,11]))),$s=b(()=>v(()=>import("./UpdateAffiliatePrefs-BadOI_Yf.js"),__vite__mapDeps([99,1,2,3,4,5,6,7,8,11]))),Ms=b(()=>v(()=>import("./VendoorImport--Fxk47OH.js"),__vite__mapDeps([100,1,2,3,4,5,6,7,8,14,11]))),nl=b(()=>v(()=>import("./IntermediaryDashboard-BVJIlZvx.js"),__vite__mapDeps([101,1,2,3,4,5,6,7,8,11,39,14])));function il(){const{logout:s}=ye(),t=De();return i.useEffect(()=>{(async()=>{try{await new Promise(a=>setTimeout(a,1e3)),await s(),localStorage.clear(),sessionStorage.clear(),t("/login",{replace:!0,state:{message:"تم تسجيل الخروج بنجاح. يرجى تسجيل الدخول مرة أخرى."}})}catch(a){console.error("Logout error:",a),t("/login",{replace:!0})}})()},[s,t]),e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-24 h-24 bg-primary/20 rounded-full animate-ping"})}),e.jsx("div",{className:"relative flex items-center justify-center",children:e.jsx($t,{className:"w-16 h-16 text-primary animate-pulse"})})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"جاري تسجيل الخروج..."}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"يرجى الانتظار لحظة"}),e.jsx(Ue,{className:"w-8 h-8 mx-auto text-primary animate-spin"})]})})}const Rt=void 0;function ol(){const s=De(),[t,r]=i.useState("loading"),[a,n]=i.useState("جاري معالجة تسجيل الدخول...");i.useEffect(()=>{l()},[]);const l=async()=>{try{const u=await we.get();console.log("✅ User logged in:",u);const h=await k.listDocuments(Rt,"userPreferences",[I.equal("userId",u.$id)]);if(h.documents.length===0){await k.createDocument(Rt,"userPreferences",Ne.unique(),{userId:u.$id,name:u.name||"مستخدم Facebook",email:u.email||"",phone:u.phone||"",role:"customer",isAffiliate:!1,isMerchant:!1,isIntermediary:!1,isAdmin:!1,isPending:!1,isApproved:!0,createdAt:new Date().toISOString()}),console.log("✅ User preferences created");try{await k.createDocument(Rt,"notifications",Ne.unique(),{userId:u.$id,title:"🎉 مرحباً بك في EgyGo!",message:`أهلاً ${u.name}! تم تسجيل دخولك بنجاح عبر Facebook.`,type:"success",read:!1,relatedId:u.$id,metadata:JSON.stringify({source:"facebook_login",userName:u.name})})}catch(x){console.error("Error creating notification:",x)}}r("success"),n("تم تسجيل الدخول بنجاح! جاري التحويل..."),setTimeout(()=>{const x=h.documents[0];(x==null?void 0:x.role)==="admin"?s("/admin/dashboard"):(x==null?void 0:x.role)==="merchant"?s("/merchant/dashboard"):(x==null?void 0:x.role)==="affiliate"?s("/affiliate/dashboard"):s("/")},1500)}catch(u){console.error("Callback error:",u),r("error"),n("حدث خطأ في تسجيل الدخول. جاري التحويل..."),setTimeout(()=>{s("/login?error=callback_failed")},2e3)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center",children:[t==="loading"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"جاري المعالجة..."}),e.jsx("p",{className:"text-gray-600",children:a})]}),t==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-green-600 mb-2",children:"نجح! ✅"}),e.jsx("p",{className:"text-gray-600",children:a})]}),t==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-2",children:"خطأ ❌"}),e.jsx("p",{className:"text-gray-600",children:a})]})]})})}const ea=i.forwardRef(({className:s,...t},r)=>e.jsx("textarea",{className:_("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...t}));ea.displayName="Textarea";function Fs(){const[s,t]=i.useState(""),[r,a]=i.useState(""),[n,l]=i.useState(!1),[u,h]=i.useState(!1),[x,A]=i.useState(""),m=async o=>{o.preventDefault(),l(!0),A("");try{if((await fetch("/api/data-deletion",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,reason:r,timestamp:new Date().toISOString()})})).ok)h(!0),t(""),a("");else throw new Error("Failed to submit request")}catch{A("حدث خطأ في إرسال الطلب. يرجى المحاولة مرة أخرى أو التواصل معنا مباشرة.")}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4",children:e.jsx(cs,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"طلب حذف البيانات"}),e.jsx("p",{className:"text-gray-600",children:"Data Deletion Request"})]}),u&&e.jsxs(Fe,{className:"mb-6 bg-green-50 border-green-200",children:[e.jsx(Ft,{className:"h-4 w-4 text-green-600"}),e.jsxs(qe,{className:"text-green-800",children:[e.jsx("strong",{children:"تم إرسال طلبك بنجاح!"}),e.jsx("br",{}),"سنقوم بمعالجة طلب حذف بياناتك خلال 30 يوماً. ستصلك رسالة تأكيد على بريدك الإلكتروني."]})]}),x&&e.jsxs(Fe,{className:"mb-6 bg-red-50 border-red-200",children:[e.jsx(qt,{className:"h-4 w-4 text-red-600"}),e.jsx(qe,{className:"text-red-800",children:x})]}),e.jsxs(U,{className:"shadow-xl",children:[e.jsxs(Ve,{children:[e.jsx(ze,{className:"text-2xl",children:"حذف بيانات المستخدم"}),e.jsx(Gr,{children:"إذا كنت ترغب في حذف بياناتك من EgyGo، يرجى ملء النموذج أدناه. سنقوم بحذف جميع بياناتك الشخصية خلال 30 يوماً."})]}),e.jsxs(re,{children:[e.jsxs(Fe,{className:"mb-6 bg-blue-50 border-blue-200",children:[e.jsx(qt,{className:"h-4 w-4 text-blue-600"}),e.jsxs(qe,{className:"text-blue-800",children:[e.jsx("strong",{children:"ما الذي سيتم حذفه:"}),e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"معلومات الحساب (الاسم، البريد الإلكتروني، رقم الهاتف)"}),e.jsx("li",{children:"سجل الطلبات والمشتريات"}),e.jsx("li",{children:"العناوين المحفوظة"}),e.jsx("li",{children:"قائمة المفضلة"}),e.jsx("li",{children:"بيانات تسجيل الدخول عبر Facebook"}),e.jsx("li",{children:"جميع البيانات الشخصية الأخرى"})]})]})]}),e.jsxs("form",{onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Q,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),"البريد الإلكتروني"]}),e.jsx(me,{id:"email",type:"email",placeholder:"your.email@example.com",value:s,onChange:o=>t(o.target.value),required:!0,className:"text-left",dir:"ltr"}),e.jsx("p",{className:"text-sm text-gray-500",children:"البريد الإلكتروني المرتبط بحسابك على EgyGo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Q,{htmlFor:"reason",className:"flex items-center gap-2",children:[e.jsx(jt,{className:"w-4 h-4"}),"سبب الحذف (اختياري)"]}),e.jsx(ea,{id:"reason",placeholder:"يمكنك إخبارنا بسبب رغبتك في حذف بياناتك (اختياري)",value:r,onChange:o=>a(o.target.value),rows:4})]}),e.jsx(N,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700",disabled:n,children:n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري الإرسال..."]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4"}),"إرسال طلب الحذف"]})})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"طرق بديلة للتواصل:"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("p",{children:["📧 البريد الإلكتروني:"," ",e.jsx("a",{href:"mailto:privacy@egygo.com",className:"text-blue-600 hover:underline",children:"privacy@egygo.com"})]}),e.jsxs("p",{children:["📱 واتساب:"," ",e.jsx("a",{href:"https://wa.me/201234567890",className:"text-blue-600 hover:underline",target:"_blank",rel:"noopener noreferrer",children:"+20 123 456 7890"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"* سيتم حذف بياناتك بشكل نهائي خلال 30 يوماً من تاريخ الطلب"})]})]})]})]}),e.jsxs(U,{className:"mt-6 bg-gray-50",children:[e.jsx(Ve,{children:e.jsx(ze,{className:"text-lg",children:"معلومات إضافية"})}),e.jsxs(re,{className:"text-sm text-gray-600 space-y-2",children:[e.jsx("p",{children:"• سيتم حذف جميع بياناتك الشخصية بشكل نهائي ولا يمكن استرجاعها."}),e.jsx("p",{children:"• قد نحتفظ ببعض البيانات لأغراض قانونية أو محاسبية لمدة محدودة."}),e.jsx("p",{children:"• إذا كان لديك طلبات نشطة، سيتم إلغاؤها تلقائياً."}),e.jsx("p",{children:"• لن تتمكن من تسجيل الدخول بنفس الحساب بعد الحذف."})]})]})]})})}class ll extends i.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){var a,n;console.error("Error caught by boundary:",t,r),(n=(a=this.props).onError)==null||n.call(a,t,r);try{fetch("/api/log-error",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({error:t.toString(),stack:t.stack,componentStack:r.componentStack,timestamp:new Date().toISOString()})})}catch(l){console.error("Failed to log error:",l)}this.setState({errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(qt,{className:"h-16 w-16 text-destructive"})}),e.jsx("h1",{className:"text-2xl font-bold text-center mb-2",children:"حدث خطأ ما"}),e.jsx("p",{className:"text-muted-foreground text-center mb-6",children:"نعتذر عن الإزعاج. حدث خطأ غير متوقع أثناء تحميل هذه الصفحة."}),!1,e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(N,{onClick:()=>window.location.reload(),className:"flex-1",children:[e.jsx(ar,{className:"h-4 w-4 mr-2"}),"إعادة المحاولة"]}),e.jsxs(N,{onClick:()=>window.location.href="/",variant:"outline",className:"flex-1",children:[e.jsx(za,{className:"h-4 w-4 mr-2"}),"الصفحة الرئيسية"]})]})]})}):this.props.children}}const Se=C.databaseId;async function cl(s){try{const t=await k.getDocument(Se,C.collections.users,s),r=await k.listDocuments(Se,C.collections.orders,[I.equal("userId",s),I.limit(10),I.orderDesc("$createdAt")]);let a=`معلومات المستخدم:
`;if(a+=`- الاسم: ${t.name}
`,a+=`- عدد الطلبات: ${r.total}
`,t.isAffiliate){const n=await k.listDocuments(Se,"commissions",[I.equal("affiliateId",s),I.limit(100)]),l=n.documents.reduce((h,x)=>h+(x.amount||0),0),u=n.documents.filter(h=>h.status==="pending").reduce((h,x)=>h+(x.amount||0),0);a+=`- مسوق بالعمولة: نعم
`,a+=`- إجمالي العمولات: ${l} جنيه
`,a+=`- العمولات المعلقة: ${u} جنيه
`,a+=`- عدد الإحالات: ${n.total}
`}return r.total>0&&(a+=`
آخر الطلبات:
`,r.documents.slice(0,3).forEach((n,l)=>{a+=`${l+1}. طلب ${n.orderNumber} - ${n.status} - ${n.totalAmount} جنيه
`})),a}catch(t){return console.error("Error building user context:",t),"لا توجد بيانات كافية حالياً."}}async function dl(){try{const[s,t,r,a]=await Promise.all([k.listDocuments(Se,C.collections.users,[I.limit(1e3)]),k.listDocuments(Se,C.collections.orders,[I.limit(1e3)]),k.listDocuments(Se,C.collections.products,[I.limit(1e3)]),k.listDocuments(Se,"commissions",[I.limit(1e3)])]),n=t.documents.reduce((j,O)=>O.status==="delivered"?j+(O.totalAmount||0):j,0),l=t.documents.filter(j=>j.status==="pending"||j.status==="processing").length,u=s.documents.filter(j=>j.isAffiliate),h=a.documents.filter(j=>j.status==="paid").reduce((j,O)=>j+(O.amount||0),0),x=new Map;t.documents.forEach(j=>{var O;(O=j.items)==null||O.forEach(W=>{const z=x.get(W.productId)||{count:0,revenue:0,name:W.name};z.count+=W.quantity||1,z.revenue+=(W.price||0)*(W.quantity||1),x.set(W.productId,z)})});const A=Array.from(x.entries()).sort((j,O)=>O[1].revenue-j[1].revenue).slice(0,5),m=new Map;a.documents.forEach(j=>{const O=m.get(j.affiliateId)||0;m.set(j.affiliateId,O+(j.amount||0))});const o=Array.from(m.entries()).sort((j,O)=>O[1]-j[1]).slice(0,5);let c=`📊 تقرير شامل عن الموقع:

`;c+=`📈 إحصائيات عامة:
`,c+=`- إجمالي المستخدمين: ${s.total}
`,c+=`- المسوقين بالعمولة: ${u.length}
`,c+=`- إجمالي الطلبات: ${t.total}
`,c+=`- الطلبات المعلقة: ${l}
`,c+=`- إجمالي الإيرادات: ${n.toFixed(2)} جنيه
`,c+=`- إجمالي العمولات المدفوعة: ${h.toFixed(2)} جنيه

`,c+=`🏆 أفضل المنتجات:
`,A.forEach(([j,O],W)=>{c+=`${W+1}. ${O.name} - ${O.count} مبيعة - ${O.revenue.toFixed(2)} جنيه
`}),c+=`
💼 أفضل المسوقين:
`;for(let j=0;j<Math.min(o.length,5);j++){const[O,W]=o[j],z=s.documents.find(ee=>ee.$id===O);c+=`${j+1}. ${(z==null?void 0:z.name)||"مستخدم"} - ${W.toFixed(2)} جنيه عمولات
`}c+=`
📦 حالة المخزون:
`;const y=r.documents.filter(j=>(j.stock||0)<10);c+=`- منتجات منخفضة المخزون: ${y.length}
`,y.length>0&&(c+=`المنتجات:
`,y.slice(0,5).forEach(j=>{c+=`  • ${j.name} - ${j.stock||0} قطعة
`}));const E=new Date,p=new Date(E.getTime()-30*24*60*60*1e3),d=new Date(E.getTime()-60*24*60*60*1e3),f=t.documents.filter(j=>new Date(j.$createdAt)>p),P=t.documents.filter(j=>{const O=new Date(j.$createdAt);return O>d&&O<=p}),T=f.reduce((j,O)=>j+(O.totalAmount||0),0),D=P.reduce((j,O)=>j+(O.totalAmount||0),0),L=D>0?((T-D)/D*100).toFixed(1):"∞";return c+=`
📊 النمو (آخر 30 يوم):
`,c+=`- الطلبات: ${f.length} (السابق: ${P.length})
`,c+=`- الإيرادات: ${T.toFixed(2)} جنيه (السابق: ${D.toFixed(2)} جنيه)
`,c+=`- معدل النمو: ${L}%
`,c}catch(s){return console.error("Error building admin context:",s),"حدث خطأ في جمع بيانات الموقع."}}function ml(){var ee;const[s,t]=i.useState(!1),[r,a]=i.useState([]),[n,l]=i.useState(""),[u,h]=i.useState(!1),[x,A]=i.useState(!1),[m,o]=i.useState(null),[c,y]=i.useState(!1),E=i.useRef(null),{user:p}=ye(),d=i.useRef([]),[f,P]=i.useState(null);i.useEffect(()=>{s&&p&&!f&&T()},[s,p]);const T=async()=>{var R;if(p){y(!0);try{const oe=((R=p.labels)==null?void 0:R.includes("admin"))||p.email==="admin@egygo.com";let ce;oe?ce=await dl():ce=await cl(p.$id),P(ce),console.log("✅ Context loaded:",ce.substring(0,100)+"...")}catch(oe){console.error("Error loading context:",oe)}finally{y(!1)}}};i.useEffect(()=>{if(console.log("🔍 useEffect triggered - initializing chat..."),typeof window>"u"){console.log("⚠️ Server-side render detected, skipping");return}if(d.current.length>0){console.log("✅ Chat already initialized, skipping");return}console.log("� Initializing chat history with system prompt...");try{const R=`أنت مساعد ذكي لموقع إيجي جو للتسوق الإلكتروني في مصر. 

معلومات عن الموقع:
- موقع تسوق إلكتروني مصري
- يبيع منتجات متنوعة بأسعار تنافسية
- شحن لجميع أنحاء مصر (مجاني فوق 500 جنيه)
- دفع عند الاستلام متاح
- برنامج تسويق بالعمولة (لحد 25%)
- برنامج للتجار لبيع منتجاتهم
- ضمان على المنتجات
- إرجاع مجاني خلال 14 يوم

قدراتك الخاصة:
✅ يمكنك رؤية بيانات المستخدم الكاملة (طلبات، عمولات، إحصائيات)
✅ يمكنك عمل تقارير شاملة للأدمن عن أداء الموقع
✅ يمكنك تحليل البيانات وإعطاء نصائح مخصصة
✅ يمكنك اقتراح خطط تطوير بناءً على نشاط المستخدم

الأوامر الخاصة:
• "راجع حسابي" → أعرض تحليل شامل لحساب المستخدم
• "اعمل تقرير" → أنشئ تقرير مفصل للأدمن عن الموقع
• "نصائح" → أعطي نصائح ذكية بناءً على البيانات
• "جدول تطوير" → أقترح خطة عمل مخصصة

تعليمات مهمة:
1. تحدث باللهجة المصرية الطبيعية (مثل: "ازيك"، "دلوقتي"، "عشان"، "لحد")
2. استخدم البيانات المتاحة لك لتقديم إجابات مخصصة ودقيقة
3. عند كتابة تقارير، نظمها بعناوين واضحة وأرقام محددة
4. أعطي توصيات قابلة للتنفيذ (actionable recommendations)
5. استخدم emojis مصرية (🇪🇬 ❤️ 🛍️ 💰 📊 📈 🏆)
6. عند رؤية بيانات المستخدم في [بيانات المستخدم]، حللها واستخدمها في إجابتك`;d.current=[{role:"system",content:R}],console.log("💬 Chat history initialized, length:",d.current.length),A(!0),o(null),console.log("✅ Chat initialization complete!")}catch(R){console.error("❌ Failed to initialize chat:",R),o("init-failed")}},[]),i.useEffect(()=>{E.current&&(E.current.scrollTop=E.current.scrollHeight)},[r]);const D=[{label:"📊 راجع حسابي",value:"راجع حسابي وقولي إيه الإحصائيات بتاعتي"},{label:"💡 نصائح ذكية",value:"اديني نصائح ذكية بناءً على نشاطي"},{label:"📈 جدول تطوير",value:"اعمل لي جدول تطوير مخصص"},{label:"🎯 اقتراحات",value:"اقترح علي حاجات تساعدني أحسن أدائي"}],L=[{label:"📊 تقرير شامل",value:"اعمل تقرير شامل عن أداء الموقع"},{label:"🏆 أفضل المسوقين",value:"اعرض أفضل 10 مسوقين بالعمولة"},{label:"📦 حالة المخزون",value:"راجع حالة المخزون والمنتجات المنخفضة"},{label:"💰 تحليل الإيرادات",value:"حلل الإيرادات وقولي فين المشاكل"}],j=R=>{l(R),setTimeout(()=>{const oe=document.querySelector("[data-send-button]");oe==null||oe.click()},100)},O=()=>{if(!p)return[{icon:e.jsx(jt,{className:"h-5 w-5"}),title:"سجل دخولك الآن",message:"سجل دخول عشان تقدر تتابع طلباتك وتستفيد من كل المميزات",action:{label:"تسجيل الدخول",link:"/login"}}];const R=[];return p.isAffiliate&&R.push({icon:e.jsx(ue,{className:"h-5 w-5 text-orange-600"}),title:"زود أرباحك من التسويق",message:"ركز على المنتجات اللي فيها عمولة أعلى وشاركها على السوشيال ميديا بشكل منتظم",action:{label:"شوف أفضل المنتجات",link:"/affiliate/dashboard"}},{icon:e.jsx(ue,{className:"h-5 w-5 text-orange-600"}),title:"استخدم الأدوات التسويقية",message:"عندنا بنرات وصور جاهزة تقدر تستخدمها في حملاتك التسويقية",action:{label:"شوف الأدوات",link:"/affiliate/creatives"}}),p.role==="merchant"&&R.push({icon:e.jsx(be,{className:"h-5 w-5 text-purple-600"}),title:"حسن صور منتجاتك",message:"المنتجات اللي فيها صور واضحة بتبيع أكتر بنسبة 70%. حط صور احترافية لمنتجاتك",action:{label:"إدارة المنتجات",link:"/admin/products"}},{icon:e.jsx(be,{className:"h-5 w-5 text-purple-600"}),title:"تابع أداء مبيعاتك",message:"راجع تقارير المبيعات بتاعتك واعرف أكتر المنتجات مبيعاً",action:{label:"شوف التقارير",link:"/merchant/dashboard"}}),p.role==="admin"&&R.push({icon:e.jsx(xe,{className:"h-5 w-5 text-primary"}),title:"راجع الطلبات الجديدة",message:"فيه طلبات محتاجة مراجعة. اتأكد من معالجتها بسرعة عشان رضا العملاء",action:{label:"الطلبات",link:"/admin/orders"}},{icon:e.jsx(xe,{className:"h-5 w-5 text-primary"}),title:"تحليل أداء الموقع",message:"راجع إحصائيات الموقع واعرف المنتجات الأكتر مبيعاً والأقسام الأكتر زيارة",action:{label:"لوحة التحكم",link:"/admin"}}),R.push({icon:e.jsx(ds,{className:"h-5 w-5 text-blue-600"}),title:"محتاج مساعدة؟",message:"أنا هنا عشان أساعدك! اسألني أي حاجة عن الموقع أو منتجاتنا"}),R};i.useEffect(()=>{if(s&&r.length===0){const R=p?`أهلاً ${p.name}! 👋

أنا مساعدك الذكي في إيجي جو. ازيك النهاردة؟ محتاج مساعدة في حاجة معينة؟`:`أهلاً بيك في إيجي جو! 👋

أنا المساعد الذكي بتاعنا. ممكن أساعدك في إيه النهاردة؟`;a([{id:"1",type:"bot",content:R,timestamp:new Date}]),setTimeout(()=>{const ce=O().slice(0,2).map(Y=>`💡 ${Y.title}
${Y.message}`).join(`

`);a(Y=>[...Y,{id:String(Y.length+1),type:"bot",content:ce,timestamp:new Date}])},1e3)}},[s,p]);const W=async()=>{var ce,Y,$,B,te,pe,F,q,G,J;if(console.log("📤 handleSendMessage called"),!n.trim()){console.log("⚠️ Empty input, aborting");return}const R=n;console.log("📝 User input:",R);const oe={id:String(r.length+1),type:"user",content:R,timestamp:new Date};a(V=>[...V,oe]),l(""),h(!0);try{console.log("✅ Calling OpenAI API directly...");const V=void 0;if(!V)throw new Error("API key not configured");const Z=["راجع","شوف بياناتي","تقرير","نصائح","نصيحة","جدول تطوير","حسابي"].some(Te=>R.includes(Te));let fe=R;Z&&f?fe=`${R}

[بيانات المستخدم]:
${f}`:Z&&!f&&(await T(),f&&(fe=`${R}

[بيانات المستخدم]:
${f}`)),d.current.push({role:"user",content:fe}),console.log("📡 Sending request to OpenAI...");const Be=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:d.current,temperature:.7,max_tokens:500})});if(!Be.ok){const Te=await Be.json().catch(()=>({}));throw console.error("❌ OpenAI API Error:",Be.status,Te),new Error(((ce=Te.error)==null?void 0:ce.message)||`HTTP ${Be.status}`)}const es=await Be.json();console.log("✅ OpenAI Response:",es);const ts=((B=($=(Y=es.choices)==null?void 0:Y[0])==null?void 0:$.message)==null?void 0:B.content)||"عذراً، ما قدرتش أفهم. جرب تاني 🙏";d.current.push({role:"assistant",content:ts});const ra={id:String(r.length+2),type:"bot",content:ts,timestamp:new Date};a(Te=>[...Te,ra])}catch(V){console.error("OpenAI API Error:",V);let he="عذراً، حصل خطأ في الاتصال. جرب تاني بعد شوية 🙏";(te=V==null?void 0:V.message)!=null&&te.includes("API key")||(pe=V==null?void 0:V.message)!=null&&pe.includes("401")?he="في مشكلة في إعدادات الـ API. يرجى التواصل مع الدعم 🔑":(F=V==null?void 0:V.message)!=null&&F.includes("quota")||(q=V==null?void 0:V.message)!=null&&q.includes("429")?he="وصلنا للحد الأقصى من الطلبات. جرب تاني بعد دقيقة ⏱️":((G=V==null?void 0:V.message)!=null&&G.includes("network")||(J=V==null?void 0:V.message)!=null&&J.includes("fetch"))&&(he="في مشكلة في الاتصال بالإنترنت. تأكد من اتصالك وجرب تاني 🌐");const Z={id:String(r.length+2),type:"bot",content:he,timestamp:new Date};a(fe=>[...fe,Z])}finally{h(!1)}},z=()=>p?p.role==="admin"?e.jsxs(X,{variant:"default",className:"bg-primary",children:[e.jsx(xe,{className:"h-3 w-3 mr-1"}),"مدير"]}):p.role==="merchant"?e.jsxs(X,{className:"bg-purple-600",children:[e.jsx(be,{className:"h-3 w-3 mr-1"}),"تاجر"]}):p.isAffiliate?e.jsxs(X,{className:"bg-orange-600",children:[e.jsx(ue,{className:"h-3 w-3 mr-1"}),"مسوق"]}):null:null;return e.jsxs(e.Fragment,{children:[!s&&e.jsx(N,{onClick:()=>t(!0),className:"fixed bottom-6 left-6 h-14 w-14 rounded-full shadow-2xl z-50 hover:scale-110 transition-transform",size:"icon",children:e.jsx(Ua,{className:"h-6 w-6"})}),s&&e.jsxs(U,{className:"fixed bottom-6 left-6 w-96 h-[600px] shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-primary text-primary-foreground rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-foreground/20 flex items-center justify-center",children:e.jsx(ds,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"مساعد إيجي جو الذكي"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs opacity-90",children:"متاح دلوقتي • OpenAI"}),z()]})]})]}),e.jsx(N,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"hover:bg-primary-foreground/20 text-primary-foreground",children:e.jsx(Re,{className:"h-5 w-5"})})]}),e.jsx(Yt,{className:"flex-1 p-4",ref:E,children:e.jsxs("div",{className:"space-y-4",children:[r.map(R=>e.jsx("div",{className:`flex ${R.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${R.type==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:R.content}),e.jsx("span",{className:"text-xs opacity-70 mt-1 block",children:R.timestamp.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})})]})},R.id)),u&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(Ue,{className:"h-4 w-4 animate-spin text-primary"}),e.jsx("span",{className:"text-xs text-muted-foreground mr-2",children:"جاري الكتابة..."})]})})})]})}),e.jsxs("div",{className:"p-4 border-t space-y-3",children:[r.length===0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:"إجراءات سريعة:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(p&&((ee=p.labels)!=null&&ee.includes("admin"))?L:D).map(R=>e.jsx(N,{variant:"outline",size:"sm",onClick:()=>j(R.value),disabled:u||c,className:"text-xs h-auto py-2 px-2 justify-start",children:R.label},R.label))})]}),c&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Ue,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"جاري تحميل بياناتك..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(me,{placeholder:"اكتب رسالتك هنا...",value:n,onChange:R=>l(R.target.value),onKeyPress:R=>R.key==="Enter"&&!u&&W(),disabled:u,className:"flex-1"}),e.jsx(N,{onClick:W,size:"icon",disabled:u||!n.trim(),"data-send-button":!0,children:e.jsx(Ba,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:["مدعوم بـ OpenAI 🤖 ",f&&"• بيانات محدثة"]})]})]})]})}class ht{static startTiming(t){this.metrics[t]=performance.now()}static endTiming(t){const r=this.metrics[t];if(!r)return 0;const a=performance.now()-r;return delete this.metrics[t],a>100&&console.warn(`Slow operation: ${t} took ${a.toFixed(2)}ms`),a}static async measureAsync(t,r){this.startTiming(t);try{const a=await r();return this.endTiming(t),a}catch(a){throw this.endTiming(t),a}}static measure(t,r){this.startTiming(t);try{const a=r();return this.endTiming(t),a}catch(a){throw this.endTiming(t),a}}static initWebVitals(){if(typeof window>"u")return;const t=new PerformanceObserver(n=>{const l=n.getEntries(),u=l[l.length-1];console.log("LCP:",u.startTime)});t.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(t);const r=new PerformanceObserver(n=>{n.getEntries().forEach(u=>{console.log("FID:",u.processingStart-u.startTime)})});r.observe({entryTypes:["first-input"]}),this.observers.push(r);const a=new PerformanceObserver(n=>{let l=0;n.getEntries().forEach(h=>{h.hadRecentInput||(l+=h.value)}),console.log("CLS:",l)});a.observe({entryTypes:["layout-shift"]}),this.observers.push(a)}static cleanup(){this.observers.forEach(t=>t.disconnect()),this.observers=[]}}ve(ht,"metrics",{}),ve(ht,"observers",[]);class Dt{static dnsPrefetch(t){const r=document.createElement("link");r.rel="dns-prefetch",r.href=`//${t}`,document.head.appendChild(r)}static preconnect(t){const r=document.createElement("link");r.rel="preconnect",r.href=t,document.head.appendChild(r)}static prefetch(t){const r=document.createElement("link");r.rel="prefetch",r.href=t,document.head.appendChild(r)}static modulePreload(t){const r=document.createElement("link");r.rel="modulepreload",r.href=t,document.head.appendChild(r)}}class ta{static trackChunk(t,r){this.chunks[t]=r}static getStats(){const t=Object.values(this.chunks).reduce((n,l)=>n+l,0),r=Object.keys(this.chunks).length,a=Object.entries(this.chunks).reduce((n,[l,u])=>u>n.size?{name:l,size:u}:n,{name:"",size:0});return{totalSize:t,chunkCount:r,largestChunk:a,chunks:{...this.chunks}}}static logAnalysis(){const t=this.getStats();console.group("Bundle Analysis"),console.log(`Total Size: ${(t.totalSize/1024).toFixed(2)} KB`),console.log(`Chunk Count: ${t.chunkCount}`),console.log(`Largest Chunk: ${t.largestChunk.name} (${(t.largestChunk.size/1024).toFixed(2)} KB)`),console.table(t.chunks),console.groupEnd()}}ve(ta,"chunks",{});class sa{static async register(t="/sw.js"){if(!("serviceWorker"in navigator))return console.warn("Service Worker not supported"),null;try{return this.swRegistration=await navigator.serviceWorker.register(t),console.log("Service Worker registered:",this.swRegistration),this.swRegistration}catch(r){return console.error("Service Worker registration failed:",r),null}}static async update(){if(this.swRegistration)try{await this.swRegistration.update(),console.log("Service Worker updated")}catch(t){console.error("Service Worker update failed:",t)}}static async unregister(){if(this.swRegistration)try{await this.swRegistration.unregister(),console.log("Service Worker unregistered")}catch(t){console.error("Service Worker unregistration failed:",t)}}}ve(sa,"swRegistration",null);function ul(){ht.initWebVitals(),Dt.dnsPrefetch("fonts.googleapis.com"),Dt.dnsPrefetch("cdn.egygo.com"),Dt.preconnect("https://api.egygo.com"),sa.register(),window.addEventListener("beforeunload",()=>{ht.cleanup(),ta.logAnalysis()})}const Je=i.forwardRef(({className:s,...t},r)=>e.jsx(gr,{className:_("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:r,children:e.jsx(Ga,{className:_("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Je.displayName=gr.displayName;function hl(){const[s,t]=i.useState(!1),[r,a]=i.useState(!1),[n,l]=i.useState({necessary:!0,analytics:!1,marketing:!1,preferences:!1});i.useEffect(()=>{if(!localStorage.getItem("cookieConsent"))setTimeout(()=>{t(!0)},1e3);else{const o=localStorage.getItem("cookiePreferences");o&&l(JSON.parse(o))}},[]);const u=()=>{A({necessary:!0,analytics:!0,marketing:!0,preferences:!0}),t(!1)},h=()=>{A({necessary:!0,analytics:!1,marketing:!1,preferences:!1}),t(!1)},x=()=>{A(n),a(!1),t(!1)},A=m=>{localStorage.setItem("cookieConsent","true"),localStorage.setItem("cookiePreferences",JSON.stringify(m)),localStorage.setItem("cookieConsentDate",new Date().toISOString()),m.analytics&&console.log("Analytics enabled"),m.marketing&&console.log("Marketing cookies enabled"),m.preferences&&console.log("Preference cookies enabled")};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[100] p-4 md:p-6 animate-in slide-in-from-bottom duration-500",children:e.jsx(U,{className:"max-w-6xl mx-auto border-2 shadow-2xl bg-background/95 backdrop-blur-xl",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-full bg-gradient-to-br from-orange-500 to-yellow-500 flex items-center justify-center shadow-lg",children:e.jsx(ms,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold flex items-center gap-2",children:"🍪 نستخدم الكوكيز لتحسين تجربتك"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:'نستخدم ملفات تعريف الارتباط (الكوكيز) لتحسين تجربتك على موقعنا، وتحليل حركة المرور، وتخصيص المحتوى والإعلانات. من خلال النقر على "قبول الكل"، فإنك توافق على استخدامنا لجميع ملفات تعريف الارتباط.'})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsxs(N,{onClick:u,size:"sm",className:"bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",children:[e.jsx(Ft,{className:"h-4 w-4 ml-2"}),"قبول الكل"]}),e.jsx(N,{onClick:h,variant:"outline",size:"sm",children:"الضرورية فقط"}),e.jsxs(N,{onClick:()=>a(!0),variant:"ghost",size:"sm",children:[e.jsx(Wa,{className:"h-4 w-4 ml-2"}),"إعدادات الكوكيز"]}),e.jsx(N,{variant:"ghost",size:"sm",className:"text-xs",asChild:!0,children:e.jsxs("a",{href:"/privacy",target:"_blank",children:[e.jsx(xe,{className:"h-3 w-3 ml-1"}),"سياسة الخصوصية"]})}),e.jsx(N,{variant:"ghost",size:"icon",className:"mr-auto",onClick:()=>t(!1),children:e.jsx(Re,{className:"h-4 w-4"})})]})]})]})})})}),e.jsx(jr,{open:r,onOpenChange:a,children:e.jsxs(Jt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(wr,{children:[e.jsxs(vr,{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-5 w-5"}),"إعدادات الكوكيز"]}),e.jsx(br,{children:"اختر أنواع ملفات تعريف الارتباط التي تريد السماح بها. يمكنك تغيير هذه الإعدادات في أي وقت."})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(Q,{className:"text-base font-semibold flex items-center gap-2",children:["الكوكيز الضرورية",e.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-0.5 rounded",children:"مطلوبة"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"ضرورية لتشغيل الموقع بشكل صحيح. لا يمكن تعطيلها."})]}),e.jsx(Je,{checked:!0,disabled:!0})]}),e.jsx("div",{className:"text-xs text-muted-foreground bg-muted p-2 rounded",children:"مثال: تسجيل الدخول، السلة، اللغة، الأمان"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Q,{htmlFor:"analytics",className:"text-base font-semibold",children:"كوكيز التحليلات"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"تساعدنا في فهم كيفية تفاعل الزوار مع الموقع من خلال جمع معلومات مجهولة المصدر."})]}),e.jsx(Je,{id:"analytics",checked:n.analytics,onCheckedChange:m=>l({...n,analytics:m})})]}),e.jsx("div",{className:"text-xs text-muted-foreground bg-muted p-2 rounded",children:"مثال: Google Analytics، عدد الزوار، الصفحات الأكثر زيارة"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Q,{htmlFor:"marketing",className:"text-base font-semibold",children:"كوكيز التسويق"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"تُستخدم لتتبع الزوار عبر المواقع وعرض إعلانات ملائمة وجذابة للمستخدم الفردي."})]}),e.jsx(Je,{id:"marketing",checked:n.marketing,onCheckedChange:m=>l({...n,marketing:m})})]}),e.jsx("div",{className:"text-xs text-muted-foreground bg-muted p-2 rounded",children:"مثال: Facebook Pixel، Google Ads، إعلانات مخصصة"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Q,{htmlFor:"preferences",className:"text-base font-semibold",children:"كوكيز التفضيلات"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"تمكن الموقع من تذكر المعلومات التي تغير طريقة تصرف أو مظهر الموقع."})]}),e.jsx(Je,{id:"preferences",checked:n.preferences,onCheckedChange:m=>l({...n,preferences:m})})]}),e.jsx("div",{className:"text-xs text-muted-foreground bg-muted p-2 rounded",children:"مثال: اللغة المفضلة، الثيم (فاتح/داكن)، المنطقة الزمنية"})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end border-t pt-4",children:[e.jsx(N,{variant:"outline",onClick:()=>a(!1),children:"إلغاء"}),e.jsxs(N,{onClick:x,className:"bg-gradient-to-r from-primary to-purple-600",children:[e.jsx(Ft,{className:"h-4 w-4 ml-2"}),"حفظ التفضيلات"]})]})]})})]}):null}function xl(){const[s,t]=i.useState(!1),[r,a]=i.useState("default"),{toast:n}=Or();i.useEffect(()=>{if(!("Notification"in window))return;const h=Notification.permission;a(h);const x=localStorage.getItem("notificationPermissionAsked"),A=localStorage.getItem("notificationPermissionDismissed");if(h==="default"&&!x)setTimeout(()=>{t(!0)},3e3);else if(h==="default"&&A){const m=new Date(A);Math.floor((Date.now()-m.getTime())/(1e3*60*60*24))>=7&&setTimeout(()=>{t(!0)},5e3)}},[]);const l=async()=>{try{const h=await Notification.requestPermission();a(h),localStorage.setItem("notificationPermissionAsked","true"),h==="granted"?(n({title:"✅ تم تفعيل الإشعارات",description:"سنرسل لك إشعارات بأحدث العروض والخصومات"}),setTimeout(()=>{new Notification("مرحباً بك في إيجي جو! 🎉",{body:"ستصلك إشعارات بأفضل العروض والخصومات الحصرية",icon:"/logo.png",badge:"/badge.png",tag:"welcome"})},1e3),t(!1)):h==="denied"&&(n({title:"تم رفض الإشعارات",description:"يمكنك تفعيل الإشعارات لاحقاً من إعدادات المتصفح",variant:"destructive"}),t(!1))}catch(h){console.error("Error requesting notification permission:",h),n({title:"حدث خطأ",description:"لم نتمكن من طلب إذن الإشعارات",variant:"destructive"})}},u=()=>{localStorage.setItem("notificationPermissionDismissed",new Date().toISOString()),t(!1)};return!s||r!=="default"?null:e.jsx("div",{className:"fixed top-20 left-4 right-4 md:left-auto md:right-6 z-[99] animate-in slide-in-from-top duration-500",children:e.jsxs(U,{className:"max-w-md ml-auto border-2 shadow-2xl bg-background/95 backdrop-blur-xl overflow-hidden",children:[e.jsx("div",{className:"h-1 bg-gradient-to-r from-orange-500 via-yellow-500 to-orange-500"}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-full bg-gradient-to-br from-orange-500 to-yellow-500 flex items-center justify-center shadow-lg animate-pulse",children:e.jsx(lt,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold flex items-center gap-2",children:"🔔 فعّل الإشعارات"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"احصل على إشعارات فورية بـ:"})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"h-6 w-6 rounded-full bg-green-500/10 flex items-center justify-center flex-shrink-0",children:e.jsx(Ha,{className:"h-3 w-3 text-green-600"})}),e.jsx("span",{children:"أحدث العروض والخصومات الحصرية"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"h-6 w-6 rounded-full bg-blue-500/10 flex items-center justify-center flex-shrink-0",children:e.jsx(Ka,{className:"h-3 w-3 text-blue-600"})}),e.jsx("span",{children:"عروض البرق والتخفيضات السريعة"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"h-6 w-6 rounded-full bg-purple-500/10 flex items-center justify-center flex-shrink-0",children:e.jsx(Qa,{className:"h-3 w-3 text-purple-600"})}),e.jsx("span",{children:"كوبونات خصم خاصة لك فقط"})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(N,{onClick:l,size:"sm",className:"flex-1 bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white",children:[e.jsx(lt,{className:"h-4 w-4 ml-2"}),"تفعيل الإشعارات"]}),e.jsxs(N,{onClick:u,variant:"ghost",size:"sm",className:"px-3",children:[e.jsx(Ja,{className:"h-4 w-4 ml-1"}),"ليس الآن"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"💡 يمكنك إلغاء الإشعارات في أي وقت من إعدادات المتصفح"})]}),e.jsx(N,{variant:"ghost",size:"icon",className:"flex-shrink-0 h-8 w-8",onClick:u,children:e.jsx(Re,{className:"h-4 w-4"})})]})})]})})}function pl(){const[s,t]=i.useState(null),[r,a]=i.useState(!1),[n,l]=i.useState(!1);i.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){l(!0);return}const x=m=>{m.preventDefault(),t(m),setTimeout(()=>{localStorage.getItem("pwa-install-dismissed")||a(!0)},3e4)},A=()=>{l(!0),a(!1),console.log("PWA installed successfully")};return window.addEventListener("beforeinstallprompt",x),window.addEventListener("appinstalled",A),()=>{window.removeEventListener("beforeinstallprompt",x),window.removeEventListener("appinstalled",A)}},[]);const u=async()=>{if(!s)return;s.prompt();const{outcome:x}=await s.userChoice;console.log(`User ${x} the install prompt`),x==="accepted"&&a(!1),t(null)},h=()=>{a(!1),localStorage.setItem("pwa-install-dismissed","true")};return n||!r?null:e.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50 animate-slide-up",children:e.jsx(U,{className:"shadow-lg border-2 border-primary",children:e.jsx(re,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(Ya,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"ثبّت التطبيق"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"احصل على تجربة أسرع وأفضل! ثبّت تطبيق EgyGo على جهازك."}),e.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 mb-3",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-3 w-3 text-green-600"}),"يعمل بدون إنترنت"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-3 w-3 text-green-600"}),"تحديثات فورية"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-3 w-3 text-green-600"}),"وصول سريع"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{onClick:u,size:"sm",className:"flex-1",children:[e.jsx(st,{className:"h-4 w-4 ml-2"}),"تثبيت الآن"]}),e.jsx(N,{onClick:h,size:"sm",variant:"outline",children:e.jsx(Re,{className:"h-4 w-4"})})]})]})]})})})})}const qs={enabled:!0};function fl(){{console.log("📊 GA4 disabled (dev mode or no measurement ID)");return}}function gl(){{console.log("📊 Facebook Pixel disabled (dev mode or no pixel ID)");return}}function jl(s,t){window.gtag&&qs.enabled&&window.gtag("event","page_view",{page_path:s,page_title:t||document.title}),window.fbq&&qs.enabled&&window.fbq("track","PageView"),console.log("📊 Page view tracked:",s)}function yl(){fl(),gl(),console.log("✅ Analytics initialized")}class wl{constructor(){ve(this,"queue",[]);ve(this,"flushInterval",5e3);setInterval(()=>this.flush(),this.flushInterval)}track(t){this.queue.push({...t,timestamp:Date.now()}),typeof window<"u"&&window.gtag&&window.gtag("event",t.action,{event_category:t.category,event_label:t.label,value:t.value})}async flush(){if(this.queue.length===0)return;const t=[...this.queue];this.queue=[];try{await fetch("/api/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:t})})}catch(r){console.error("Failed to send analytics:",r),this.queue.push(...t)}}trackPageView(t){this.track({category:"Page",action:"view",label:t})}trackProductView(t,r){this.track({category:"Product",action:"view",label:`${t}:${r}`})}trackAddToCart(t,r){this.track({category:"Ecommerce",action:"add_to_cart",label:t,value:r})}trackPurchase(t,r){this.track({category:"Ecommerce",action:"purchase",label:t,value:r})}trackSearch(t,r){this.track({category:"Search",action:"search",label:t,value:r})}trackClick(t,r){this.track({category:"Interaction",action:"click",label:`${t}:${r}`})}}const vl=new wl,bl=new un;ul();const Nl=({children:s})=>{const t=Qt();return i.useEffect(()=>{Ci(),Hr().catch(r=>{console.error("Failed to load reCAPTCHA:",r)}),yl()},[]),i.useEffect(()=>{jl(t.pathname),vl.trackPageView(t.pathname)},[t]),e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(Ti,{}),e.jsx(Si,{cartItemCount:0}),e.jsx("main",{className:"flex-1",children:s}),e.jsx(Di,{}),e.jsx(Oi,{}),e.jsx(ml,{}),e.jsx(hl,{}),e.jsx(xl,{}),e.jsx(pl,{})]})},Al=()=>e.jsx(ll,{children:e.jsx(Xa,{children:e.jsx(en,{children:e.jsx(Ai,{children:e.jsx(wi,{defaultLocale:"ar",children:e.jsx(tn,{client:bl,children:e.jsx(ci,{children:e.jsx(pi,{children:e.jsx(gi,{children:e.jsxs(Vn,{children:[e.jsx(qn,{position:"top-center",richColors:!0,closeButton:!0}),e.jsx(sn,{children:e.jsx(Nl,{children:e.jsxs(rn,{children:[e.jsx(g,{path:"/",element:e.jsx(Ui,{})}),e.jsx(g,{path:"/products",element:e.jsx(Is,{})}),e.jsx(g,{path:"/product/:id",element:e.jsx(so,{})}),e.jsx(g,{path:"/login",element:e.jsx(Qi,{})}),e.jsx(g,{path:"/register",element:e.jsx(Xi,{})}),e.jsx(g,{path:"/logout",element:e.jsx(il,{})}),e.jsx(g,{path:"/auth/callback",element:e.jsx(ol,{})}),e.jsx(g,{path:"/categories",element:e.jsx(Ls,{})}),e.jsx(g,{path:"/category",element:e.jsx(Ls,{})}),e.jsx(g,{path:"/category/:slug",element:e.jsx(Is,{})}),e.jsx(g,{path:"/affiliate",element:e.jsx(co,{})}),e.jsx(g,{path:"/merchant",element:e.jsx(wo,{})}),e.jsx(g,{path:"/deals",element:e.jsx(tl,{})}),e.jsx(g,{path:"/cart",element:e.jsx(ro,{})}),e.jsx(g,{path:"/checkout",element:e.jsx(ao,{})}),e.jsx(g,{path:"/wishlist",element:e.jsx(no,{})}),e.jsx(g,{path:"/forgot-password",element:e.jsx(rl,{})}),e.jsx(g,{path:"/account",element:e.jsx(lo,{})}),e.jsx(g,{path:"/settings",element:e.jsx(al,{})}),e.jsx(g,{path:"/orders",element:e.jsx(io,{})}),e.jsx(g,{path:"/orders/:orderId/track",element:e.jsx(oo,{})}),e.jsx(g,{path:"/l/:linkCode",element:e.jsx(sl,{})}),e.jsx(g,{path:"/affiliate/dashboard",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(mo,{})})}),e.jsx(g,{path:"/affiliate/earnings",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(yo,{})})}),e.jsx(g,{path:"/affiliate/landing-pages",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(uo,{})})}),e.jsx(g,{path:"/affiliate/links",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(Ps,{})})}),e.jsx(g,{path:"/affiliate/analytics",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(It,{})})}),e.jsx(g,{path:"/affiliate/creatives",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(Rs,{})})}),e.jsx(g,{path:"/affiliate/coupons",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(ho,{})})}),e.jsx(g,{path:"/affiliate/banners",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(xo,{})})}),e.jsx(g,{path:"/affiliate/marketing-tips",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(po,{})})}),e.jsx(g,{path:"/affiliate/courses",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(fo,{})})}),e.jsx(g,{path:"/affiliate/withdraw",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(Ds,{})})}),e.jsx(g,{path:"/affiliate/withdrawals",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(Ds,{})})}),e.jsx(g,{path:"/affiliate/earnings",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(It,{})})}),e.jsx(g,{path:"/affiliate/leaderboard",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(Pt,{})})}),e.jsx(g,{path:"/affiliate/campaigns",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(Rs,{})})}),e.jsx(g,{path:"/affiliate/rewards",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(Pt,{})})}),e.jsx(g,{path:"/affiliate/reports",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(It,{})})}),e.jsx(g,{path:"/affiliate/settings",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx($s,{})})}),e.jsx(g,{path:"/affiliate/resources",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(go,{})})}),e.jsx(g,{path:"/affiliate/support",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(jo,{})})}),e.jsx(g,{path:"/affiliate/referrals",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx(Pt,{})})}),e.jsx(g,{path:"/update-affiliate-prefs",element:e.jsx(S,{requiredRole:"affiliate",children:e.jsx($s,{})})}),e.jsx(g,{path:"/admin",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Os,{})})}),e.jsx(g,{path:"/admin/dashboard",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Os,{})})}),e.jsx(g,{path:"/admin/pending-accounts",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Lo,{})})}),e.jsx(g,{path:"/admin/analytics",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Do,{})})}),e.jsx(g,{path:"/admin/products",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Po,{})})}),e.jsx(g,{path:"/admin/products-advanced",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Fo,{})})}),e.jsx(g,{path:"/admin/product-approval",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Io,{})})}),e.jsx(g,{path:"/admin/categories",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(To,{})})}),e.jsx(g,{path:"/admin/users",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(_o,{})})}),e.jsx(g,{path:"/admin/user-management",element:e.jsx(S,{requiredRole:"admin",children:e.jsx($o,{})})}),e.jsx(g,{path:"/admin/users-fixed",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Mo,{})})}),e.jsx(g,{path:"/admin/orders",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Ro,{})})}),e.jsx(g,{path:"/admin/commissions",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Oo,{})})}),e.jsx(g,{path:"/admin/financial",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Go,{})})}),e.jsx(g,{path:"/admin/settings",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(qo,{})})}),e.jsx(g,{path:"/admin/coupons",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(So,{})})}),e.jsx(g,{path:"/admin/offers",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Co,{})})}),e.jsx(g,{path:"/admin/shipping",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Vo,{})})}),e.jsx(g,{path:"/admin/advanced-settings",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(zo,{})})}),e.jsx(g,{path:"/admin/notifications",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Uo,{})})}),e.jsx(g,{path:"/admin/ai-dashboard",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Bo,{})})}),e.jsx(g,{path:"/admin/ai-tools",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Wo,{})})}),e.jsx(g,{path:"/test-ai",element:e.jsx(Ho,{})}),e.jsx(g,{path:"/merchant/dashboard",element:e.jsx(S,{requiredRole:"merchant",children:e.jsx(vo,{})})}),e.jsx(g,{path:"/merchant/products",element:e.jsx(S,{requiredRole:"merchant",children:e.jsx(Ts,{})})}),e.jsx(g,{path:"/merchant/products-status",element:e.jsx(S,{requiredRole:"merchant",children:e.jsx(bo,{})})}),e.jsx(g,{path:"/merchant/orders",element:e.jsx(S,{requiredRole:"merchant",children:e.jsx(No,{})})}),e.jsx(g,{path:"/merchant/analytics",element:e.jsx(S,{requiredRole:"merchant",children:e.jsx(Ao,{})})}),e.jsx(g,{path:"/merchant/advertising",element:e.jsx(S,{requiredRole:"merchant",children:e.jsx(ko,{})})}),e.jsx(g,{path:"/merchant/financial",element:e.jsx(S,{requiredRole:"merchant",children:e.jsx(Eo,{})})}),e.jsx(g,{path:"/intermediary/dashboard",element:e.jsx(S,{requiredRole:"intermediary",children:e.jsx(nl,{})})}),e.jsx(g,{path:"/intermediary/import",element:e.jsx(S,{requiredRole:"intermediary",children:e.jsx(Ms,{})})}),e.jsx(g,{path:"/intermediary/products",element:e.jsx(S,{requiredRole:"intermediary",children:e.jsx(Ts,{})})}),e.jsx(g,{path:"/intermediary/links",element:e.jsx(S,{requiredRole:"intermediary",children:e.jsx(Ps,{})})}),e.jsx(g,{path:"/admin/vendoor-import",element:e.jsx(S,{requiredRole:"admin",children:e.jsx(Ms,{})})}),e.jsx(g,{path:"/about",element:e.jsx(Ko,{})}),e.jsx(g,{path:"/contact",element:e.jsx(Qo,{})}),e.jsx(g,{path:"/shipping",element:e.jsx(el,{})}),e.jsx(g,{path:"/returns",element:e.jsx(Xo,{})}),e.jsx(g,{path:"/faq",element:e.jsx(Jo,{})}),e.jsx(g,{path:"/privacy",element:e.jsx(Yo,{})}),e.jsx(g,{path:"/terms",element:e.jsx(Zo,{})}),e.jsx(g,{path:"/data-deletion",element:e.jsx(Fs,{})}),e.jsx(g,{path:"/data-deletion-status",element:e.jsx(Fs,{})}),e.jsx(g,{path:"*",element:e.jsx(eo,{})})]})})})]})})})})})})})})})});Za(document.getElementById("root")).render(e.jsx(Al,{}));export{Je as $,wr as A,X as B,U as C,jr as D,vr as E,br as F,Gn as G,Tl as H,me as I,at as J,vl as K,Q as L,Ol as M,Rl as N,Dl as O,Gr as P,Fe as Q,qe as R,Es as S,ea as T,Ie as U,Pe as V,ke as W,Ir as X,ie as Y,M as Z,_,fi as a,_e as a0,Ll as a1,Ke as a2,we as a3,Un as a4,Yt as a5,Ur as a6,ji as b,ye as c,k as d,C as e,N as f,$e as g,re as h,Bt as i,_s as j,Gt as k,Wt as l,ws as m,vs as n,Vt as o,Rr as p,Dr as q,vt as r,ut as s,Cr as t,Or as u,nt as v,et as w,Ve as x,ze as y,Jt as z};
