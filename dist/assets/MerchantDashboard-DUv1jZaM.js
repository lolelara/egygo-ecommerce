import{r as j,j as e,ae as ie,n as U,aK as se,bE as Z,aC as ee,bi as oe,bF as de,a_ as B,k as me,au as ce,bG as ne,a$ as xe,af as ue,a6 as T,o as Q,_ as he,p as je,av as W,bc as ge,a0 as fe}from"./vendor-react-BMq-IxHG.js";import{d as b,c as K,A as J,N as pe,o as le,C as g,r as f,s as p,f as N,H as q,e as h,I as te,B as L}from"./index-DuObFWLq.js";import{P as Ne}from"./progress-DNFeGbm3.js";import{A as X}from"./AdminLayout-VNX_PWeW.js";import{P as we}from"./loading-screen-D0KcphAN.js";import{P as ve}from"./PendingApprovalScreen-Ca3IcXyF.js";import{Q as i}from"./vendor-appwrite-BGb_FC-V.js";import{T as ye,a as be,b as Y,c as _,d as Se,e as O}from"./table--PfvcEZL.js";import{S as ke,a as Ie,b as Ce,c as De,d as V}from"./select-MBjfD9dX.js";import{am as F}from"./vendor-other-C5r3s8Py.js";import"./vendor-ui-BA32w1ww.js";import"./vendor-query-GexG3wnZ.js";import"./vendor-animations-W1Z2cmit.js";import"./avatar-CmuBIAxY.js";const S=K.databaseId,k=K.collections,Pe=K.storageId;function $e(n){if(!n)return J.product();if(typeof n=="object"&&n.url)return n.url;if(typeof n=="string"){if(n.startsWith("http://")||n.startsWith("https://"))return n;try{return pe.getFileView(Pe,n).toString()}catch(s){return console.error("Error getting image URL:",s),J.product()}}return J.product()}async function Oe(n){try{console.log("Fetching merchant stats for user:",n);let s;try{s=await b.listDocuments(S,k.products,[i.equal("merchantId",n),i.limit(1e3)]),console.log("Fetched products with merchantId filter:",s.documents.length)}catch(v){console.warn("merchantId attribute not found, fetching all products:",v.message),s=await b.listDocuments(S,k.products,[i.limit(1e3)])}const r=s.documents,a=r.length,t=r.filter(v=>v.stock>0).length,o=r.filter(v=>v.stock===0).length,u=r.map(v=>v.$id);let w=0,y=0,I=0,C=0;if(u.length>0){const v=await b.listDocuments(S,k.orderItems,[i.equal("productId",u),i.limit(1e3)]);for(const E of v.documents){w+=E.quantity||0,y+=(E.price||0)*(E.quantity||0);try{const c=await b.getDocument(S,k.orders,E.orderId);c.status==="pending"||c.status==="processing"?I++:c.status==="delivered"&&C++}catch(c){console.error("Error fetching order:",c)}}}const l=new Date,m=new Date(l.getTime()-30*24*60*60*1e3),D=new Date(l.getTime()-60*24*60*60*1e3);let R=0,P=0;u.length>0&&(R=(await b.listDocuments(S,k.orderItems,[i.equal("productId",u),i.greaterThan("$createdAt",m.toISOString()),i.limit(1e3)])).documents.reduce((c,x)=>c+(x.price||0)*(x.quantity||0),0),P=(await b.listDocuments(S,k.orderItems,[i.equal("productId",u),i.greaterThan("$createdAt",D.toISOString()),i.lessThan("$createdAt",m.toISOString()),i.limit(1e3)])).documents.reduce((c,x)=>c+(x.price||0)*(x.quantity||0),0));const H=P>0?(R-P)/P*100:0;let M=0,A=0;if(u.length>0){const v=await b.listDocuments(S,k.reviews,[i.equal("productId",u),i.limit(1e3)]);A=v.documents.length,A>0&&(M=v.documents.reduce((c,x)=>c+(x.rating||0),0)/A)}return{totalProducts:a,activeProducts:t,outOfStock:o,totalSales:w,totalRevenue:y,revenueChange:H,pendingOrders:I,completedOrders:C,avgRating:parseFloat(M.toFixed(1)),totalReviews:A}}catch(s){throw console.error("Error fetching merchant stats:",s),s}}async function Ee(n){var s;try{console.log("Fetching merchant products for user:",n);let r;try{r=await b.listDocuments(S,k.products,[i.equal("merchantId",n),i.orderDesc("$createdAt"),i.limit(100)]),console.log("Fetched products with merchantId filter:",r.documents.length)}catch{console.warn("merchantId attribute not found, fetching all products"),r=await b.listDocuments(S,k.products,[i.orderDesc("$createdAt"),i.limit(100)])}const a=[];for(const t of r.documents){const o=await b.listDocuments(S,k.orderItems,[i.equal("productId",t.$id),i.limit(1e3)]),u=o.documents.reduce((l,m)=>l+(m.quantity||0),0),w=o.documents.reduce((l,m)=>l+(m.price||0)*(m.quantity||0),0),y=await b.listDocuments(S,k.reviews,[i.equal("productId",t.$id),i.limit(1e3)]),I=y.documents.length>0?y.documents.reduce((l,m)=>l+(m.rating||0),0)/y.documents.length:0;let C="active";t.stock===0?C="out_of_stock":t.isActive===!1&&(C="draft"),a.push({id:t.$id,name:t.name||"",image:$e((s=t.images)==null?void 0:s[0]),price:t.price||0,stock:t.stock||0,sales:u,revenue:w,views:0,rating:parseFloat(I.toFixed(1)),status:C,categoryId:t.categoryId,description:t.description,merchantId:n})}return a}catch(r){throw console.error("Error fetching merchant products:",r),r}}async function Te(n){try{console.log("Fetching merchant orders for user:",n);const s=await b.listDocuments(S,k.orders,[i.orderDesc("$createdAt"),i.limit(100)]),r=[];for(const a of s.documents){const t=a.items||[],o=t.reduce((u,w)=>u+(w.price||0)*(w.quantity||0),0);r.push({id:a.$id,orderId:a.$id,product:t.length>0?t[0].name:"منتج",customer:a.customerName||a.customerEmail||"عميل",amount:o,status:a.status||"pending",date:new Date(a.$createdAt).toISOString().split("T")[0]})}return r}catch(s){throw console.error("Error fetching merchant orders:",s),s}}const re=K.databaseId,ae="products";class _e{async getMerchantProducts(s){try{return(await b.listDocuments(re,ae,[i.equal("merchantId",s),i.orderDesc("$updatedAt")])).documents.map(a=>this.mapToInventoryProduct(a))}catch(r){return console.error("Error fetching merchant products:",r),[]}}async updateStock(s,r){try{const a=this.getStockStatus(r);return await b.updateDocument(re,ae,s,{stock:r,status:a,lastUpdated:new Date().toISOString()}),!0}catch(a){return console.error("Error updating stock:",a),!1}}async getInventoryStats(s){try{const r=await this.getMerchantProducts(s);return{total:r.length,inStock:r.filter(t=>t.status==="in_stock").length,lowStock:r.filter(t=>t.status==="low_stock").length,outOfStock:r.filter(t=>t.status==="out_of_stock").length,totalValue:r.reduce((t,o)=>t+o.stock*o.price,0)}}catch(r){return console.error("Error fetching inventory stats:",r),{total:0,inStock:0,lowStock:0,outOfStock:0,totalValue:0}}}async searchProducts(s,r){try{const a=await this.getMerchantProducts(s);if(!r)return a;const t=r.toLowerCase();return a.filter(o=>o.name.toLowerCase().includes(t)||o.sku.toLowerCase().includes(t))}catch(a){return console.error("Error searching products:",a),[]}}async filterByStatus(s,r){try{const a=await this.getMerchantProducts(s);return r==="all"?a:a.filter(t=>t.status===r)}catch(a){return console.error("Error filtering products:",a),[]}}async getLowStockProducts(s){try{return(await this.getMerchantProducts(s)).filter(a=>a.status==="low_stock")}catch(r){return console.error("Error fetching low stock products:",r),[]}}exportToCSV(s){const r=["الاسم","SKU","المخزون","السعر","الفئة","الحالة"],a=s.map(t=>[t.name,t.sku,t.stock.toString(),t.price.toString(),t.category,this.getStatusLabel(t.status)]);return[r,...a].map(t=>t.join(",")).join(`
`)}async bulkUpdateFromCSV(s,r){try{const a=r.split(`
`).slice(1);let t=0,o=0;for(const u of a){const[w,y,I]=u.split(",");if(!y||!I){o++;continue}const l=(await this.getMerchantProducts(s)).find(m=>m.sku===y.trim());l&&await this.updateStock(l.$id,parseInt(I))?t++:o++}return{success:t,failed:o}}catch(a){return console.error("Error bulk updating from CSV:",a),{success:0,failed:0}}}mapToInventoryProduct(s){var t;const r=s.stock||0,a=this.getStockStatus(r);return{$id:s.$id,name:s.name||"منتج بدون اسم",sku:s.sku||s.$id.substring(0,8).toUpperCase(),stock:r,price:s.price||0,category:s.category||"غير مصنف",status:a,lastUpdated:s.$updatedAt||s.$createdAt,merchantId:s.merchantId||"",image:((t=s.images)==null?void 0:t[0])||s.image||""}}getStockStatus(s){return s===0?"out_of_stock":s<10?"low_stock":"in_stock"}getStatusLabel(s){switch(s){case"in_stock":return"متوفر";case"low_stock":return"مخزون منخفض";case"out_of_stock":return"نفذ المخزون";default:return"غير معروف"}}}const z=new _e;function Re(){const{user:n}=le(),[s,r]=j.useState([]),[a,t]=j.useState([]),[o,u]=j.useState(""),[w,y]=j.useState("all"),[I,C]=j.useState(null),[l,m]=j.useState(!1),[D,R]=j.useState(!0),[P,H]=j.useState({total:0,inStock:0,lowStock:0,outOfStock:0,totalValue:0});j.useEffect(()=>{M()},[n]);const M=async()=>{if(n!=null&&n.$id){R(!0);try{const c=await z.getMerchantProducts(n.$id);r(c.map(d=>({id:d.$id,name:d.name,sku:d.sku,stock:d.stock,price:d.price,category:d.category,status:d.status,lastUpdated:d.lastUpdated,merchantId:d.merchantId}))),t(c.map(d=>({id:d.$id,name:d.name,sku:d.sku,stock:d.stock,price:d.price,category:d.category,status:d.status,lastUpdated:d.lastUpdated,merchantId:d.merchantId})));const x=await z.getInventoryStats(n.$id);H(x)}catch(c){console.error("Error loading inventory:",c),F.error("فشل تحميل المخزون")}finally{R(!1)}}};j.useEffect(()=>{let c=s;o&&(c=c.filter(x=>x.name.toLowerCase().includes(o.toLowerCase())||x.sku.toLowerCase().includes(o.toLowerCase()))),w!=="all"&&(c=c.filter(x=>x.status===w)),t(c)},[o,w,s]);const A=c=>{switch(c){case"in_stock":return e.jsx(L,{className:"bg-green-500",children:"متوفر"});case"low_stock":return e.jsx(L,{className:"bg-yellow-500",children:"مخزون منخفض"});case"out_of_stock":return e.jsx(L,{className:"bg-red-500",children:"نفذ المخزون"});default:return e.jsx(L,{children:"غير معروف"})}},v=async(c,x)=>{try{await z.updateStock(c,x)?(await M(),F.success("تم تحديث المخزون بنجاح")):F.error("فشل تحديث المخزون")}catch(d){console.error("Error updating stock:",d),F.error("فشل تحديث المخزون")}},E=()=>{const c=z.exportToCSV(a.map($=>({$id:$.id,name:$.name,sku:$.sku,stock:$.stock,price:$.price,category:$.category,status:$.status,lastUpdated:$.lastUpdated,merchantId:$.merchantId}))),x=new Blob([c],{type:"text/csv;charset=utf-8;"}),d=window.URL.createObjectURL(x),G=document.createElement("a");G.href=d,G.download=`inventory-${new Date().toISOString().split("T")[0]}.csv`,G.click(),window.URL.revokeObjectURL(d),F.success("تم تصدير البيانات بنجاح")};return D?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ie,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsxs(g,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"إجمالي المنتجات"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold",children:P.total})})]}),e.jsxs(g,{className:"bg-green-50 border-green-200",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-green-900",children:"متوفر"}),e.jsx(U,{className:"h-4 w-4 text-green-600"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold text-green-900",children:P.inStock})})]}),e.jsxs(g,{className:"bg-yellow-50 border-yellow-200",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-yellow-900",children:"مخزون منخفض"}),e.jsx(se,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-900",children:P.lowStock})})]}),e.jsxs(g,{className:"bg-red-50 border-red-200",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-red-900",children:"نفذ المخزون"}),e.jsx(Z,{className:"h-4 w-4 text-red-600"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold text-red-900",children:P.outOfStock})})]}),e.jsxs(g,{className:"bg-purple-50 border-purple-200",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(p,{className:"text-sm font-medium text-purple-900",children:"قيمة المخزون"}),e.jsx(ee,{className:"h-4 w-4 text-purple-600"})]}),e.jsx(N,{children:e.jsxs("div",{className:"text-2xl font-bold text-purple-900",children:["$",P.totalValue.toLocaleString()]})})]})]}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{children:"إدارة المخزون"}),e.jsx(q,{children:"تتبع وإدارة مخزون منتجاتك"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",onClick:E,children:[e.jsx(oe,{className:"w-4 h-4 ml-2"}),"تصدير"]}),e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(de,{className:"w-4 h-4 ml-2"}),"استيراد"]}),e.jsxs(h,{size:"sm",className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(B,{className:"w-4 h-4 ml-2"}),"منتج جديد"]})]})]})}),e.jsxs(N,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(me,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(te,{placeholder:"ابحث عن منتج أو SKU...",value:o,onChange:c=>u(c.target.value),className:"pr-10"})]}),e.jsxs(ke,{value:w,onValueChange:y,children:[e.jsx(Ie,{className:"w-full md:w-[200px]",children:e.jsx(Ce,{placeholder:"حالة المخزون"})}),e.jsxs(De,{children:[e.jsx(V,{value:"all",children:"جميع الحالات"}),e.jsx(V,{value:"in_stock",children:"متوفر"}),e.jsx(V,{value:"low_stock",children:"مخزون منخفض"}),e.jsx(V,{value:"out_of_stock",children:"نفذ المخزون"})]})]})]}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(ye,{children:[e.jsx(be,{children:e.jsxs(Y,{children:[e.jsx(_,{children:"المنتج"}),e.jsx(_,{children:"SKU"}),e.jsx(_,{children:"المخزون"}),e.jsx(_,{children:"السعر"}),e.jsx(_,{children:"الفئة"}),e.jsx(_,{children:"الحالة"}),e.jsx(_,{children:"آخر تحديث"}),e.jsx(_,{className:"text-left",children:"الإجراءات"})]})}),e.jsx(Se,{children:a.length===0?e.jsx(Y,{children:e.jsx(O,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"لا توجد منتجات"})}):a.map(c=>e.jsxs(Y,{children:[e.jsx(O,{className:"font-medium",children:c.name}),e.jsx(O,{children:e.jsx(L,{variant:"outline",children:c.sku})}),e.jsx(O,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(te,{type:"number",value:c.stock,onChange:x=>v(c.id,parseInt(x.target.value)||0),className:"w-20",min:"0"})})}),e.jsxs(O,{children:["$",c.price]}),e.jsx(O,{children:c.category}),e.jsx(O,{children:A(c.status)}),e.jsx(O,{className:"text-muted-foreground text-sm",children:c.lastUpdated}),e.jsx(O,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(h,{variant:"ghost",size:"icon",children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx(h,{variant:"ghost",size:"icon",children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx(h,{variant:"ghost",size:"icon",className:"text-red-600 hover:text-red-700",children:e.jsx(xe,{className:"w-4 h-4"})})]})})]},c.id))})]})})]})]}),P.lowStock>0&&e.jsxs(g,{className:"border-yellow-200 bg-yellow-50",children:[e.jsx(f,{children:e.jsxs(p,{className:"flex items-center gap-2 text-yellow-900",children:[e.jsx(se,{className:"w-5 h-5"}),"تنبيهات المخزون المنخفض"]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:s.filter(c=>c.status==="low_stock").map(c=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["المخزون المتبقي: ",c.stock]})]}),e.jsx(h,{size:"sm",variant:"outline",children:"إعادة الطلب"})]},c.id))})})]})]})}function Je(){const{user:n}=le();if(n!=null&&n.isMerchant&&(n==null?void 0:n.accountStatus)==="pending")return e.jsx(ve,{});if(!(n!=null&&n.isMerchant))return e.jsx(ue,{to:"/",replace:!0});const[s,r]=j.useState(null),[a,t]=j.useState([]),[o,u]=j.useState([]),[w,y]=j.useState(!0),[I,C]=j.useState(null);return j.useEffect(()=>{if(!n)return;(async()=>{try{y(!0),C(null);const[m,D,R]=await Promise.all([Oe(n.$id),Ee(n.$id),Te(n.$id)]);r(m),t(D.slice(0,3)),u(R.slice(0,3))}catch(m){console.error("Error fetching merchant data:",m),C("حدث خطأ أثناء تحميل البيانات")}finally{y(!1)}})()},[n]),w?e.jsx(X,{children:e.jsx(we,{message:"جاري تحميل لوحة التحكم..."})}):I||!s?e.jsx(X,{children:e.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:e.jsxs(g,{className:"w-full max-w-md",children:[e.jsxs(f,{children:[e.jsx(p,{className:"text-destructive",children:"خطأ"}),e.jsx(q,{children:I||"فشل تحميل البيانات"})]}),e.jsx(N,{children:e.jsx(h,{onClick:()=>window.location.reload(),children:"إعادة المحاولة"})})]})})}):e.jsx(X,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"لوحة تحكم التاجر"}),e.jsxs("p",{className:"text-muted-foreground",children:["مرحباً ",n==null?void 0:n.name,"، إليك ملخص منتجاتك ومبيعاتك"]})]}),e.jsx(T,{to:"/admin/products",children:e.jsxs(h,{children:[e.jsx(B,{className:"h-4 w-4 ml-2"}),"إضافة منتج جديد"]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(g,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"إجمالي المنتجات"}),e.jsx(U,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.totalProducts}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.activeProducts," نشط، ",s.outOfStock," ","نفذت من المخزون"]})]})]}),e.jsxs(g,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"إجمالي المبيعات"}),e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.totalSales}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.pendingOrders," قيد التنفيذ"]})]})]}),e.jsxs(g,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"الإيرادات"}),e.jsx(he,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",s.totalRevenue.toLocaleString()]}),e.jsxs("div",{className:"flex items-center text-xs mt-1",children:[(s.revenueChange||0)>=0?e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-3 w-3 text-green-500 ml-1"}),e.jsxs("span",{className:"text-green-500",children:["+",(s.revenueChange||0).toFixed(1),"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-3 w-3 text-red-500 ml-1"}),e.jsxs("span",{className:"text-red-500",children:[(s.revenueChange||0).toFixed(1),"%"]})]}),e.jsx("span",{className:"text-muted-foreground mr-1",children:"عن الشهر الماضي"})]})]})]}),e.jsxs(g,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"التقييم"}),e.jsx(W,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.avgRating,"/5.0"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.totalReviews," تقييم"]})]})]})]}),e.jsx(Re,{}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(p,{children:"أداء المنتجات"}),e.jsx(q,{children:"أفضل منتجاتك أداءً هذا الشهر"})]}),e.jsx(T,{to:"/admin/products",children:e.jsxs(h,{variant:"outline",size:"sm",children:["عرض الكل ",e.jsx(ge,{className:"h-4 w-4 mr-1"})]})})]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(U,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"لا توجد منتجات بعد"}),e.jsx(T,{to:"/admin/products",children:e.jsxs(h,{className:"mt-4",size:"sm",children:[e.jsx(B,{className:"h-4 w-4 ml-1"}),"إضافة منتج"]})})]}):a.map(l=>{const m={active:{label:"نشط",variant:"default"},out_of_stock:{label:"نفذ من المخزون",variant:"destructive"},draft:{label:"مسودة",variant:"secondary"}},D=m[l.status]||m.active;return e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg border",children:[e.jsx("img",{src:l.image,alt:l.name,className:"h-16 w-16 rounded object-cover"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold",children:l.name}),e.jsx(L,{variant:D.variant,children:D.label})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"السعر"}),e.jsxs("p",{className:"font-medium",children:["$",l.price]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"المبيعات"}),e.jsx("p",{className:"font-medium",children:l.sales})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"الإيرادات"}),e.jsxs("p",{className:"font-medium",children:["$",l.revenue.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"المشاهدات"}),e.jsx("p",{className:"font-medium",children:l.views})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{value:l.stock>0?Math.min(l.stock/100*100,100):0,className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[l.stock," في المخزون"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(T,{to:`/admin/products/${l.id}`,children:e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(ne,{className:"h-4 w-4 ml-1"}),"تعديل"]})}),e.jsx(T,{to:`/products/${l.id}`,children:e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(ce,{className:"h-4 w-4 ml-1"}),"معاينة"]})})]})]},l.id)})})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(g,{children:[e.jsxs(f,{children:[e.jsx(p,{children:"الطلبات الأخيرة"}),e.jsx(q,{children:"آخر طلبات منتجاتك"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:o.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Q,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"لا توجد طلبات بعد"})]}):o.map(l=>{const m={pending:{label:"قيد الانتظار",variant:"secondary"},processing:{label:"قيد المعالجة",variant:"secondary"},shipped:{label:"تم الشحن",variant:"default"},delivered:{label:"تم التسليم",variant:"default"},cancelled:{label:"ملغي",variant:"destructive"}},D=m[l.status]||m.pending;return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-medium",children:["#",l.orderId.slice(0,8)]}),e.jsx(L,{variant:D.variant,children:D.label})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.product," - ",l.customer]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l.date})]}),e.jsxs("div",{className:"text-lg font-bold",children:["$",l.amount.toLocaleString()]})]},l.id)})})})]}),e.jsxs(g,{children:[e.jsxs(f,{children:[e.jsx(p,{children:"تنبيهات ونصائح"}),e.jsx(q,{children:"تحسينات مقترحة"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[s.outOfStock>0&&e.jsxs("div",{className:"flex gap-3 p-3 rounded-lg border border-yellow-200 bg-yellow-50",children:[e.jsx(fe,{className:"h-5 w-5 text-yellow-600 shrink-0"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-sm",children:"منتجات نفذت من المخزون"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["لديك ",s.outOfStock," منتجات نفذت من المخزون. قم بتحديث الكميات."]})]})]}),s.revenueChange>0&&e.jsxs("div",{className:"flex gap-3 p-3 rounded-lg border border-blue-200 bg-blue-50",children:[e.jsx(ee,{className:"h-5 w-5 text-blue-600 shrink-0"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-sm",children:"أداء ممتاز"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["مبيعاتك زادت بنسبة ",(s.revenueChange||0).toFixed(1),"% هذا الشهر!"]})]})]}),s.revenueChange<0&&e.jsxs("div",{className:"flex gap-3 p-3 rounded-lg border border-red-200 bg-red-50",children:[e.jsx(Z,{className:"h-5 w-5 text-red-600 shrink-0"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-sm",children:"انخفاض في المبيعات"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["مبيعاتك انخفضت بنسبة ",Math.abs(s.revenueChange||0).toFixed(1),"% هذا الشهر."]})]})]}),s.totalReviews>0&&e.jsxs("div",{className:"flex gap-3 p-3 rounded-lg border border-green-200 bg-green-50",children:[e.jsx(W,{className:"h-5 w-5 text-green-600 shrink-0"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-sm",children:"تقييمات رائعة"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["لديك ",s.totalReviews," تقييم بمتوسط ",s.avgRating,"/5"]})]})]}),s.pendingOrders>0&&e.jsxs("div",{className:"flex gap-3 p-3 rounded-lg border border-orange-200 bg-orange-50",children:[e.jsx(Q,{className:"h-5 w-5 text-orange-600 shrink-0"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-sm",children:"طلبات قيد المعالجة"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["لديك ",s.pendingOrders," طلب يحتاج إلى معالجة"]})]})]}),s.totalProducts===0&&e.jsxs("div",{className:"flex gap-3 p-3 rounded-lg border border-gray-200 bg-gray-50",children:[e.jsx(U,{className:"h-5 w-5 text-gray-600 shrink-0"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-sm",children:"ابدأ بإضافة منتجات"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"لم تضف أي منتجات بعد. ابدأ بإضافة منتجك الأول!"})]})]})]})})]})]}),e.jsxs(g,{children:[e.jsx(f,{children:e.jsx(p,{children:"إجراءات سريعة"})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(T,{to:"/admin/products",children:e.jsx(h,{variant:"outline",className:"w-full h-auto py-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(B,{className:"h-6 w-6"}),e.jsx("span",{children:"إضافة منتج"})]})})}),e.jsx(T,{to:"/admin/products",children:e.jsx(h,{variant:"outline",className:"w-full h-auto py-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(U,{className:"h-6 w-6"}),e.jsx("span",{children:"إدارة المنتجات"})]})})}),e.jsx(T,{to:"/admin/categories",children:e.jsx(h,{variant:"outline",className:"w-full h-auto py-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ee,{className:"h-6 w-6"}),e.jsx("span",{children:"إدارة الفئات"})]})})}),e.jsx(h,{variant:"outline",className:"w-full h-auto py-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(W,{className:"h-6 w-6"}),e.jsx("span",{children:"عرض التقييمات"})]})})]})})]})]})})}export{Je as default};
