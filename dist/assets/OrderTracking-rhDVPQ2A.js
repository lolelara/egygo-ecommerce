import{Q as v,w as C,y as E,j as s,C as a,g as l,d as p,B as g,A as N,e as d,f as c,o as w,n as A,a as u,O as I,z as S}from"./index-Ce-RwxJS.js";import{S as D}from"./SEO-CvYl5atu.js";import{C as b}from"./circle-x-Dru5y_zv.js";import{C as P}from"./clock-D_TAAEO_.js";import{C as O}from"./circle-check-big-DrIPWHSB.js";const L=[{status:"PENDING",label:"قيد الانتظار",icon:P,description:"تم استلام طلبك وجاري المراجعة"},{status:"PROCESSING",label:"قيد التجهيز",icon:w,description:"جاري تجهيز طلبك للشحن"},{status:"SHIPPED",label:"تم الشحن",icon:A,description:"طلبك في الطريق إليك"},{status:"DELIVERED",label:"تم التسليم",icon:O,description:"تم تسليم طلبك بنجاح"}],$=["PENDING","PROCESSING","SHIPPED","DELIVERED"];function q(){const{orderId:n}=v(),{user:x}=C(),{data:e,isLoading:y}=E({queryKey:S.order(n||""),queryFn:()=>I.getOrderById(n||"",x?.$id||""),enabled:!!n&&!!x?.$id});if(y)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx("p",{className:"text-gray-500",children:"جاري التحميل..."})})});if(!e)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(a,{children:s.jsxs(l,{className:"py-16 text-center",children:[s.jsx(b,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"الطلب غير موجود"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"لم نتمكن من العثور على هذا الطلب"}),s.jsx(p,{to:"/orders",children:s.jsxs(g,{children:[s.jsx(N,{className:"h-4 w-4 ml-2"}),"العودة إلى طلباتي"]})})]})})});const o=e.status,m=$.indexOf(o),h=o==="CANCELLED";return s.jsxs(s.Fragment,{children:[s.jsx(D,{title:`تتبع الطلب #${e.orderNumber}`,description:"تتبع حالة طلبك وموعد التسليم المتوقع"}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx(p,{to:"/orders",children:s.jsxs(g,{variant:"ghost",className:"mb-6",children:[s.jsx(N,{className:"h-4 w-4 ml-2"}),"العودة إلى طلباتي"]})}),s.jsx(a,{className:"mb-6",children:s.jsx(d,{children:s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{children:[s.jsxs(c,{className:"text-2xl mb-2",children:["تتبع الطلب #",e.orderNumber]}),s.jsxs("p",{className:"text-gray-500",children:["تاريخ الطلب: ",new Date(e.createdAt).toLocaleDateString("ar-EG")]})]}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"إجمالي الطلب"}),s.jsxs("p",{className:"text-2xl font-bold text-primary",children:[e.total.toFixed(2)," جنيه"]})]})]})})}),h&&s.jsx(a,{className:"mb-6 border-red-200 bg-red-50",children:s.jsx(l,{className:"py-8",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(b,{className:"h-12 w-12 text-red-500"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-1",children:"تم إلغاء الطلب"}),s.jsx("p",{className:"text-red-600",children:"لقد تم إلغاء هذا الطلب. إذا كان لديك أي استفسار، يرجى التواصل مع خدمة العملاء."})]})]})})}),!h&&s.jsxs(a,{className:"mb-6",children:[s.jsx(d,{children:s.jsx(c,{children:"حالة الطلب"})}),s.jsx(l,{children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute right-6 top-0 h-full w-0.5 bg-gray-200 md:right-auto md:left-1/2 md:transform md:-translate-x-1/2"}),s.jsx("div",{className:"space-y-8",children:L.map((r,j)=>{const t=j<m,i=j===m,f=r.icon;return s.jsxs("div",{className:"relative flex items-start gap-4",children:[s.jsx("div",{className:`relative z-10 flex h-12 w-12 items-center justify-center rounded-full border-2 ${t?"bg-green-500 border-green-500":i?"bg-primary border-primary":"bg-gray-100 border-gray-300"}`,children:s.jsx(f,{className:`h-6 w-6 ${t||i?"text-white":"text-gray-400"}`})}),s.jsxs("div",{className:"flex-1 pt-1",children:[s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[s.jsx("h4",{className:`text-lg font-semibold ${t||i?"text-gray-900":"text-gray-400"}`,children:r.label}),i&&s.jsx(u,{variant:"default",children:"الحالة الحالية"}),t&&s.jsx(u,{variant:"outline",className:"bg-green-50 border-green-500 text-green-700",children:"✓ مكتمل"})]}),s.jsx("p",{className:`mt-1 text-sm ${t||i?"text-gray-600":"text-gray-400"}`,children:r.description})]})]},r.status)})})]})})]}),s.jsxs(a,{className:"mb-6",children:[s.jsx(d,{children:s.jsx(c,{children:"المنتجات المطلوبة"})}),s.jsx(l,{children:s.jsx("div",{className:"space-y-4",children:e.items?.map(r=>s.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b last:border-b-0",children:[s.jsx("img",{src:r.product?.images?.[0]?.url||"/placeholder.png",alt:r.product?.name||"منتج",className:"w-20 h-20 object-cover rounded-lg"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold",children:r.product?.name||"منتج"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["الكمية: ",r.quantity," × ",r.price.toFixed(2)," جنيه"]})]}),s.jsxs("p",{className:"font-bold text-primary",children:[r.total.toFixed(2)," جنيه"]})]},r.id))})})]}),s.jsxs(a,{children:[s.jsx(d,{children:s.jsx(c,{children:"عنوان التسليم"})}),s.jsx(l,{children:s.jsxs("div",{className:"space-y-2 text-gray-700",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"الاسم:"})," ",e.shippingAddress?.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"الهاتف:"})," ",e.shippingAddress?.phone]}),s.jsxs("p",{children:[s.jsx("strong",{children:"العنوان:"})," ",e.shippingAddress?.address]}),e.shippingAddress?.city&&s.jsxs("p",{children:[s.jsx("strong",{children:"المدينة:"})," ",e.shippingAddress.city]}),e.shippingAddress?.zipCode&&s.jsxs("p",{children:[s.jsx("strong",{children:"الرمز البريدي:"})," ",e.shippingAddress.zipCode]})]})})]})]})]})}export{q as default};
