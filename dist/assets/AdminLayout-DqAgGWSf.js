import{r as l,j as e,a1 as g,am as p,u as j,cm as v,g as N,cn as b,U as w,bT as y,h as S,a$ as C,M as A,az as I,aw as E,aE as O,K as B,co as T,a2 as k,a8 as z}from"./vendor-react-BTCGZZAN.js";import{d as D,c as d,S as L,h as U,e as x,i as F,o as M,B as P}from"./index-DAwEpow4.js";import{A as Q,b as $,a as q}from"./avatar-Bz0dpiLw.js";import{Q as m}from"./vendor-appwrite-BQhTxLk4.js";function K(){const[s,t]=l.useState(0),[i,a]=l.useState(!0);return l.useEffect(()=>{const r=async()=>{try{const c=await D.listDocuments(d.databaseId,d.collections.users,[m.equal("accountStatus","pending"),m.limit(1)]);t(c.total)}catch(c){console.error("Error fetching pending accounts count:",c),t(0)}finally{a(!1)}};r();const o=setInterval(r,6e4);return()=>clearInterval(o)},[]),{count:s,loading:i}}const R=[{title:"لوحة التحكم",href:"/admin",icon:v,roles:["admin"]},{title:"إدارة المنتجات",href:"/admin/products",icon:N,roles:["admin","merchant"]},{title:"إدارة الفئات",href:"/admin/categories",icon:b,roles:["admin","merchant"]},{title:"إدارة المستخدمين والشركاء",href:"/admin/users",icon:w,roles:["admin"]},{title:"الحسابات المعلقة",href:"/admin/pending-accounts",icon:y,roles:["admin"]},{title:"إدارة الطلبات",href:"/admin/orders",icon:S,roles:["admin"]},{title:"إدارة الكوبونات",href:"/admin/coupons",icon:C,roles:["admin"]},{title:"إدارة العمولات",href:"/admin/commissions",icon:A,roles:["admin"]},{title:"التحليلات المتقدمة",href:"/admin/analytics",icon:I,roles:["admin"]},{title:"إدارة الشحن",href:"/admin/shipping",icon:E,roles:["admin"]},{title:"الإعدادات المتقدمة",href:"/admin/advanced-settings",icon:O,roles:["admin"]},{title:"الإشعارات",href:"/admin/notifications",icon:B,roles:["admin"]},{title:"الإعدادات",href:"/admin/settings",icon:T,roles:["admin"]}],h=({onLinkClick:s})=>{const t=p(),i=j(),{user:a}=M(),{count:r}=K(),o=()=>{i("/login"),s==null||s()},c=R.filter(n=>n.roles.includes((a==null?void 0:a.role)||"customer"));return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-xl font-bold text-primary",children:(a==null?void 0:a.role)==="merchant"?"لوحة تحكم التاجر":"لوحة تحكم الإدارة"})}),e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:c.map(n=>{const u=n.icon,f=t.pathname===n.href;return e.jsxs(k,{to:n.href,onClick:s,className:`flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors hover:bg-accent ${f?"bg-accent text-accent-foreground":"text-muted-foreground hover:text-foreground"}`,children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx("span",{className:"flex-1",children:n.title}),n.href==="/admin/pending-accounts"&&r>0&&e.jsx(P,{variant:"destructive",className:"h-5 min-w-5 flex items-center justify-center px-1.5",children:r})]},n.href)})}),e.jsxs("div",{className:"p-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs(Q,{className:"h-8 w-8",children:[e.jsx($,{src:""}),e.jsx(q,{children:"أدمن"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",children:"المدير العام"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"admin@example.com"})]})]}),e.jsxs(x,{variant:"outline",size:"sm",className:"w-full justify-start gap-2",onClick:o,children:[e.jsx(z,{className:"h-4 w-4"}),"تسجيل الخروج"]})]})]})},W=({children:s})=>{const[t,i]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs(L,{open:t,onOpenChange:i,children:[e.jsx("div",{className:"lg:hidden",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h1",{className:"text-lg font-semibold",children:"لوحة التحكم"}),e.jsx(U,{asChild:!0,children:e.jsx(x,{variant:"outline",size:"icon",children:e.jsx(g,{className:"h-4 w-4"})})})]})}),e.jsx(F,{side:"right",className:"w-[280px] p-0",children:e.jsx(h,{onLinkClick:()=>i(!1)})})]}),e.jsxs("div",{className:"lg:flex",children:[e.jsx("div",{className:"hidden lg:block lg:w-[280px] lg:border-r lg:bg-muted/30",children:e.jsx("div",{className:"sticky top-0 h-screen",children:e.jsx(h,{})})}),e.jsx("div",{className:"flex-1 lg:max-w-[calc(100vw-280px)]",children:e.jsx("main",{className:"p-4 lg:p-6",children:s})})]})]})};export{W as A};
