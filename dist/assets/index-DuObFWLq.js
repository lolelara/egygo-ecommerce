const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Products-BFU7GvNd.js","assets/vendor-react-BMq-IxHG.js","assets/vendor-ui-BA32w1ww.js","assets/vendor-query-GexG3wnZ.js","assets/vendor-other-C5r3s8Py.js","assets/vendor-other-FVOTwPhI.css","assets/vendor-animations-W1Z2cmit.js","assets/vendor-animations-BpgSqZrL.css","assets/vendor-react-DFW2o1-N.css","assets/select-MBjfD9dX.js","assets/LoadingSkeletons-DAs8Sw-3.js","assets/skeleton-DMaUp_11.js","assets/vendor-appwrite-BGb_FC-V.js","assets/ProductDetail-BtviPnxn.js","assets/tabs-BjR-Yo_C.js","assets/textarea-D45AJvw_.js","assets/avatar-CmuBIAxY.js","assets/progress-DNFeGbm3.js","assets/loading-screen-D0KcphAN.js","assets/Cart-C8ntDxw_.js","assets/coupons-api-C7e5y4tw.js","assets/Checkout-CCTY23Mt.js","assets/radio-group-Bpro1bEg.js","assets/Wishlist-R4Zp2SS8.js","assets/SEO-CoadIhO0.js","assets/MyOrders-D8kSrbzu.js","assets/OrderTracking-Kk2UXq7R.js","assets/OrderSuccess-ME5Y9L1a.js","assets/CustomerAccount-B19VKDzg.js","assets/Affiliate-BlBkS-m7.js","assets/AffiliateDashboard-BjrJx9nv.js","assets/table--PfvcEZL.js","assets/EnhancedAffiliateDashboard-iTacoE0f.js","assets/PendingApprovalScreen-Ca3IcXyF.js","assets/affiliate-api-BiD0HBi_.js","assets/AffiliateAnalytics-DG2se114.js","assets/AffiliateLinkManager-IsuDYuTS.js","assets/AffiliateCreatives-C9b104xE.js","assets/AffiliateCoupons-BfIkUfg4.js","assets/AffiliateBanners-6W-ngIyI.js","assets/AffiliateMarketingTips-qHjLpSGo.js","assets/AffiliateCourses-Bp1jq0Gu.js","assets/AffiliateWithdrawPage-F6yOfGdW.js","assets/AffiliateResourcesPage-C9vjE_yg.js","assets/AffiliateSupportPage-C3h5F_mJ.js","assets/AffiliateReferralSystem-CUqP94Ry.js","assets/Merchant-xlJ9ZWAT.js","assets/MerchantDashboard-DUv1jZaM.js","assets/AdminLayout-VNX_PWeW.js","assets/MerchantProducts-kiHNfGKu.js","assets/AdminProducts-CNAJE4Q5.js","assets/admin-api-DrN4VzEz.js","assets/MerchantOrders-CzxfiTvf.js","assets/AdminOrders-CjpwsgDi.js","assets/MerchantAnalytics-BfiIEzG6.js","assets/AdminAnalytics-CzWs8GIP.js","assets/AdminDashboard-CrlT6wOW.js","assets/EnhancedAdminDashboard-CtUKFpk9.js","assets/AdminUsers-CUc6Iu4g.js","assets/AdminCouponsManager-BDtOYXMK.js","assets/AdminCategories-DIgnD2xY.js","assets/AdminCommissions-D_iZAmoH.js","assets/AdminPendingAccounts-CFe_K3ZV.js","assets/AdminUserManagement-GFDQ1JGp.js","assets/AdminUserManagementFixed-CHkCO5_d.js","assets/AdminProductsAdvanced-Cb9J-8rb.js","assets/AdminSettingsPage-Bpvpx1rY.js","assets/switch-DnI2xrk4.js","assets/AdminShipping-CPMTbFFB.js","assets/AdminAdvancedSettings-CO5n8LRn.js","assets/AdminNotifications-Bx2ZWLOA.js","assets/AdminCoupons-CEUU6-8G.js","assets/AdminAIDashboard-fsYTIHAG.js","assets/env-B8jD6Wsc.js","assets/ProductAIDemo-g1Z6PTcA.js","assets/accordion-BrD8GKzl.js","assets/TestAI-vQLO7mIg.js","assets/AboutPage-BfyhYwfx.js","assets/ContactPage-BpKrEtPJ.js","assets/FAQPage-vQwUzGD0.js","assets/PrivacyPolicy-CZI_wQy-.js","assets/TermsOfService-B_YN1Upo.js","assets/ReturnPolicy-OBU8nV1m.js","assets/ShippingPage-oNpue0SK.js","assets/Categories-BKr0aSj4.js","assets/CategoryPage-78iEB4H0.js","assets/DealsPage-BZL1K0pX.js","assets/ProductLanding-DpQIXOb4.js","assets/ForgotPassword-6j55jDtJ.js","assets/SettingsPage-D4d2GpGU.js","assets/UpdateAffiliatePrefs-CxGnX1e1.js","assets/VendoorImport-DUYh3-ai.js","assets/IntermediaryDashboard-BaY1cDq7.js"])))=>i.map(i=>d[i]);
var ur=Object.defineProperty;var hr=(s,t,r)=>t in s?ur(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var he=(s,t,r)=>hr(s,typeof t!="symbol"?t+"":t,r);import{j as e,r as l,f as ps,g as pr,S as xs,O as at,c as fs,C as it,h as gs,X as It,T as nt,D as ot,b as js,i as ys,k as Rt,l as lt,m as $e,n as yt,o as qe,p as ue,U as me,F as xr,q as ws,s as vs,t as bs,v as fr,w as Ns,I as _s,x as Es,y as As,z as ze,B as Cs,E as gr,L as ks,G as Ss,H as jr,J as yr,K as Is,V as wr,M as vr,N as Rs,Q as br,W as Nr,Y as Vt,Z as qt,_ as wt,$ as _r,a0 as Er,a1 as zt,a2 as Ut,a3 as Ar,a4 as Cr,a5 as kr,a6 as f,a7 as ge,a8 as je,a9 as Bt,aa as Sr,ab as vt,ac as Wt,ad as Pt,ae as Fe,af as Te,ag as Ir,ah as Ze,ai as Tt,aj as Ps,ak as Rr,al as Pr,am as Tr,an as Dr,ao as Dt,ap as Or,aq as ct,ar as $r,as as Gt,at as Ht,au as et,av as Ts,aw as Ee,ax as Kt,ay as Lr,az as Mr,aA as Fr,aB as Vr,aC as qr,aD as Ds,aE as Os,aF as zr,aG as Ur,aH as bt,aI as Nt,aJ as Br,aK as $s,aL as Wr,aM as Gr,aN as Qt,aO as Hr,aP as Kr,aQ as Qr,aR as Jr,aS as Yr,aT as Xr,aU as Zr,aV as y}from"./vendor-react-BMq-IxHG.js";import{ae as ea,af as ta,ag as sa,ah as ra,ai as Ue,aj as ae,ak as aa,al as He,am as ut}from"./vendor-other-C5r3s8Py.js";import{b as ia}from"./vendor-query-GexG3wnZ.js";import{C as na,D as oa,S as la,A as ca,O as Jt,F as da,I as tt,Q as I}from"./vendor-appwrite-BGb_FC-V.js";import{i as ma,P as ua,W as ha,A as pa,D as Yt,j as xa,G as fa,F as ga,T as ja,M as Xt,k as ht,l as ya,B as wa,o as va,p as Zt,q as pt,L as ba,r as Na,C as _a,s as Ea,t as Aa,v as Ca,O as ka,h as de,x as Sa,y as es,N as ts,z as ss,E as Ia,H as Ra,I as Pa,J as Ls,K as Ta}from"./vendor-animations-W1Z2cmit.js";import"./vendor-ui-BA32w1ww.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function r(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(i){if(i.ep)return;i.ep=!0;const c=r(i);fetch(i.href,c)}})();const Da=({...s})=>{const{theme:t="system"}=ea();return e.jsx(ta,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})};function k(...s){return sa(ra(s))}const Oa=pr,$a=l.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(ps,{ref:a,sideOffset:t,className:k("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r}));$a.displayName=ps.displayName;const La=Ue("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),R=l.forwardRef(({className:s,variant:t,size:r,asChild:a=!1,...i},c)=>{const m=a?xs:"button";return e.jsx(m,{className:k(La({variant:t,size:r,className:s})),ref:c,...i})});R.displayName="Button";const Ma=js,no=ys,Fa=fs,Ms=l.forwardRef(({className:s,...t},r)=>e.jsx(at,{ref:r,className:k("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));Ms.displayName=at.displayName;const Fs=l.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(Fa,{children:[e.jsx(Ms,{}),e.jsxs(it,{ref:a,className:k("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r,children:[t,e.jsxs(gs,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(It,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Fs.displayName=it.displayName;const Va=({className:s,...t})=>e.jsx("div",{className:k("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});Va.displayName="DialogHeader";const qa=({className:s,...t})=>e.jsx("div",{className:k("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});qa.displayName="DialogFooter";const za=l.forwardRef(({className:s,...t},r)=>e.jsx(nt,{ref:r,className:k("text-lg font-semibold leading-none tracking-tight",s),...t}));za.displayName=nt.displayName;const Ua=l.forwardRef(({className:s,...t},r)=>e.jsx(ot,{ref:r,className:k("text-sm text-muted-foreground",s),...t}));Ua.displayName=ot.displayName;const Vs=l.forwardRef(({className:s,...t},r)=>e.jsx(ae,{ref:r,className:k("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...t}));Vs.displayName=ae.displayName;const Ba=({children:s,...t})=>e.jsx(Ma,{...t,children:e.jsx(Fs,{className:"overflow-hidden p-0 shadow-lg",children:e.jsx(Vs,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:s})})}),qs=l.forwardRef(({className:s,...t},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Rt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(ae.Input,{ref:r,className:k("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...t})]}));qs.displayName=ae.Input.displayName;const zs=l.forwardRef(({className:s,...t},r)=>e.jsx(ae.List,{ref:r,className:k("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...t}));zs.displayName=ae.List.displayName;const Us=l.forwardRef((s,t)=>e.jsx(ae.Empty,{ref:t,className:"py-6 text-center text-sm",...s}));Us.displayName=ae.Empty.displayName;const Bs=l.forwardRef(({className:s,...t},r)=>e.jsx(ae.Group,{ref:r,className:k("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...t}));Bs.displayName=ae.Group.displayName;const Wa=l.forwardRef(({className:s,...t},r)=>e.jsx(ae.Separator,{ref:r,className:k("-mx-1 h-px bg-border",s),...t}));Wa.displayName=ae.Separator.displayName;const Ws=l.forwardRef(({className:s,...t},r)=>e.jsx(ae.Item,{ref:r,className:k("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",s),...t}));Ws.displayName=ae.Item.displayName;const Ga="modulepreload",Ha=function(s){return"/"+s},rs={},w=function(t,r,a){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),u=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));i=Promise.allSettled(r.map(N=>{if(N=Ha(N),N in rs)return;rs[N]=!0;const h=N.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${N}"]${p}`))return;const o=document.createElement("link");if(o.rel=h?"stylesheet":Ga,h||(o.as="script"),o.crossOrigin="",o.href=N,u&&o.setAttribute("nonce",u),document.head.appendChild(o),h)return new Promise((n,b)=>{o.addEventListener("load",n),o.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${N}`)))})}))}function c(m){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=m,window.dispatchEvent(u),!u.defaultPrevented)throw m}return i.then(m=>{for(const u of m||[])u.status==="rejected"&&c(u.reason);return t().catch(c)})},C={endpoint:"https://cloud.appwrite.io/v1",projectId:"",databaseId:"68de037e003bd03c4d45",storageId:"product-images",collections:{users:"users",products:"products",categories:"categories",orders:"orders",orderItems:"order_items",reviews:"reviews",affiliates:"affiliates",notifications:"notifications",favorites:"favorites",productViews:"product_views",affiliateActivities:"affiliate_activities",affiliateClicks:"affiliate_clicks",affiliateStats:"affiliate_stats",withdrawalRequests:"withdrawal_requests",userPreferences:"user_preferences",referrals:"referrals",referral_earnings:"referral_earnings"}},Be=new na().setEndpoint(C.endpoint).setProject(C.projectId),pe=new ca(Be),A=new oa(Be),fe=new la(Be),oo=new da(Be);class Q{static isConfigured(){return!1}static async getCurrentUser(){try{return await pe.get()}catch(t){return console.log("No active session",t),null}}static async login(t,r){try{return await pe.createEmailPasswordSession(t,r)}catch(a){throw console.error("Login error:",a),a}}static async register(t,r,a){try{const i=await pe.create("unique()",t,r,a);return i&&await this.login(t,r)}catch(i){throw console.error("Registration error:",i),i}}static async loginWithGoogle(){try{const t=window.location.origin,r=`${t}/#/`,a=`${t}/#/login`;return await pe.createOAuth2Session(Jt.Google,r,a)}catch(t){throw console.error("Google login error:",t),t}}static async loginWithFacebook(){try{const t=window.location.origin,r=`${t}/#/`,a=`${t}/#/login`;return await pe.createOAuth2Session(Jt.Facebook,r,a)}catch(t){throw console.error("Facebook login error:",t),t}}static async logout(){try{return await pe.deleteSession("current")}catch(t){throw console.error("Logout error:",t),t}}static async getProducts(t){try{const r=[];return t!=null&&t.categoryId&&r.push(`categoryId="${t.categoryId}"`),t!=null&&t.search&&r.push(`name~"${t.search}"`),await A.listDocuments(C.databaseId,C.collections.products,r)}catch(r){throw console.error("Error fetching products:",r),r}}static async getProduct(t){try{return await A.getDocument(C.databaseId,C.collections.products,t)}catch(r){throw console.error("Error fetching product:",r),r}}static async getCategories(){try{return await A.listDocuments(C.databaseId,C.collections.categories)}catch(t){throw console.error("Error fetching categories:",t),t}}static async updateUserPreferences(t){try{return await pe.updatePrefs(t)}catch(r){throw console.error("Error updating user preferences:",r),r}}static async getUserDocument(t){try{return await A.getDocument(C.databaseId,C.collections.users,t)}catch(r){throw console.error("Error fetching user document:",r),r}}static async createUserDocument(t){try{return await A.createDocument(C.databaseId,C.collections.users,t.userId,t)}catch(r){throw console.error("Error creating user document:",r),r}}static async updateUserDocument(t,r){try{return await A.updateDocument(C.databaseId,C.collections.users,t,r)}catch(a){throw console.error("Error updating user document:",a),a}}static async createOrder(t){try{const r=await A.createDocument(C.databaseId,C.collections.orders,"unique()",t);try{const{default:a}=await w(async()=>{const{default:i}=await Promise.resolve().then(()=>wi);return{default:i}},void 0);await a.notifyOrderStatus(t.userId,r.$id,"confirmed")}catch(a){console.error("Error sending notification:",a)}return r}catch(r){throw console.error("Error creating order:",r),r}}static async getUserOrders(t){try{return await A.listDocuments(C.databaseId,C.collections.orders,[])}catch(r){throw console.error("Error fetching user orders:",r),r}}static async uploadFile(t){try{return await fe.createFile(C.storageId,"unique()",t)}catch(r){throw console.error("Error uploading file:",r),r}}static getFilePreview(t){try{return fe.getFilePreview(C.storageId,t,400,400,"center",100)}catch(r){throw console.error("Error getting file preview:",r),r}}}function dt(s){const{width:t=600,height:r=600,text:a="لا توجد صورة",bgColor:i="f3f4f6",textColor:c="6b7280"}=s,m=`
    <svg width="${t}" height="${r}" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" fill="#${i}"/>
      <text 
        x="50%" 
        y="50%" 
        font-family="Cairo, Arial, sans-serif" 
        font-size="${Math.min(t,r)/10}"
        fill="#${c}" 
        text-anchor="middle" 
        dominant-baseline="middle"
        direction="rtl"
      >
        ${a}
      </text>
    </svg>
  `.trim();return`data:image/svg+xml,${encodeURIComponent(m).replace(/'/g,"%27").replace(/"/g,"%22")}`}function Ka(s){return dt({width:600,height:600,text:s||"منتج",bgColor:"f3f4f6",textColor:"9ca3af"})}function Qa(s){return dt({width:1200,height:300,text:s||"فئة",bgColor:"e5e7eb",textColor:"6b7280"})}function Ja(s,t=300){return dt({width:t,height:t,text:s||"صورة",bgColor:"f9fafb",textColor:"9ca3af"})}function Ya(s){const{width:t=600,height:r=600,text:a="EgyGo",gradient:i="purple"}=s,c={purple:["#8b5cf6","#ec4899"],blue:["#2563eb","#06b6d4"],pink:["#db2777","#f43f5e"],green:["#059669","#10b981"]},[m,u]=c[i],N=`
    <svg width="${t}" height="${r}" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:${m};stop-opacity:1" />
          <stop offset="100%" style="stop-color:${u};stop-opacity:1" />
        </linearGradient>
      </defs>
      <rect width="100%" height="100%" fill="url(#grad)"/>
      <text 
        x="50%" 
        y="50%" 
        font-family="Cairo, Arial, sans-serif" 
        font-size="${Math.min(t,r)/8}"
        font-weight="bold"
        fill="#ffffff" 
        text-anchor="middle" 
        dominant-baseline="middle"
      >
        ${a}
      </text>
    </svg>
  `.trim();return`data:image/svg+xml,${encodeURIComponent(N).replace(/'/g,"%27").replace(/"/g,"%22")}`}function Xa(s){const{width:t=600,height:r=600,icon:a="🖼️",bgColor:i="f3f4f6"}=s,c=`
    <svg width="${t}" height="${r}" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" fill="#${i}"/>
      <text 
        x="50%" 
        y="50%" 
        font-size="${Math.min(t,r)/3}"
        text-anchor="middle" 
        dominant-baseline="middle"
      >
        ${a}
      </text>
    </svg>
  `.trim();return`data:image/svg+xml,${encodeURIComponent(c).replace(/'/g,"%27").replace(/"/g,"%22")}`}const Ke={product:Ka,category:Qa,square:Ja,gradient:Ya,icon:Xa,custom:dt},De="product-images",Oe={uploadFile:async s=>{try{const t=tt.unique(),r=await fe.createFile(De,t,s),a=fe.getFileView(De,r.$id);return{fileId:r.$id,url:a.toString(),name:r.name,size:r.sizeOriginal}}catch(t){throw console.error("Error uploading file:",t),new Error(t.message||"فشل رفع الملف")}},uploadFiles:async s=>{try{const t=s.map(r=>Oe.uploadFile(r));return await Promise.all(t)}catch(t){throw console.error("Error uploading files:",t),new Error(t.message||"فشل رفع الملفات")}},deleteFile:async s=>{try{await fe.deleteFile(De,s)}catch(t){throw console.error("Error deleting file:",t),new Error(t.message||"فشل حذف الملف")}},deleteFiles:async s=>{try{const t=s.map(r=>Oe.deleteFile(r));await Promise.all(t)}catch(t){throw console.error("Error deleting files:",t),new Error(t.message||"فشل حذف الملفات")}},getFileUrl:s=>fe.getFileView(De,s).toString(),getImageUrl:s=>s?typeof s=="object"&&"url"in s?s.url:typeof s=="string"?s.startsWith("http://")||s.startsWith("https://")?s:fe.getFileView(De,s).toString():Ke.product():Ke.product(),getImageUrls:s=>!s||!Array.isArray(s)||s.length===0?[Ke.product()]:s.map(t=>Oe.getImageUrl(t)),extractFileId:s=>{try{const t=s.match(/files\/([^\/]+)\/view/);return t?t[1]:null}catch{return null}},validateFile:s=>s.size>5242880?{valid:!1,error:"حجم الملف يجب أن يكون أقل من 5 ميجابايت"}:["image/jpeg","image/jpg","image/png","image/webp"].includes(s.type)?{valid:!0}:{valid:!1,error:"نوع الملف غير مدعوم. يرجى رفع صورة (JPG, PNG, WEBP)"},validateFiles:s=>{const t=[];return s.forEach((r,a)=>{const i=Oe.validateFile(r);!i.valid&&i.error&&t.push(`ملف ${a+1}: ${i.error}`)}),{valid:t.length===0,errors:t}}},Ae=Oe.getImageUrl,U="68de037e003bd03c4d45",B={PRODUCTS:"products",CATEGORIES:"categories",ORDERS:"orders",REVIEWS:"reviews",WISHLIST:"wishlist",USERS:"users"},Y=()=>{try{return!!U}catch{return!1}},Ve={getAll:async s=>{try{if(!Y())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const t=[];s!=null&&s.categoryId&&t.push(I.equal("categoryId",s.categoryId)),(s==null?void 0:s.inStock)!==void 0&&t.push(I.equal("inStock",s.inStock)),(s==null?void 0:s.minPrice)!==void 0&&t.push(I.greaterThanEqual("price",s.minPrice)),(s==null?void 0:s.maxPrice)!==void 0&&t.push(I.lessThanEqual("price",s.maxPrice)),s!=null&&s.searchQuery&&t.push(I.search("name",s.searchQuery));const r=(s==null?void 0:s.limit)||20,a=(s==null?void 0:s.page)||1,i=(a-1)*r;t.push(I.limit(r)),t.push(I.offset(i)),t.push(I.orderDesc("$createdAt"));const c=await A.listDocuments(U,B.PRODUCTS,t);return{products:c.documents.map(u=>({id:u.$id,name:u.name,description:u.description,price:u.price,originalPrice:u.originalPrice,sku:u.sku||`SKU-${u.$id.slice(0,8)}`,inStock:u.inStock,stockQuantity:u.stockQuantity||0,rating:u.rating||0,reviewCount:u.reviewCount||0,affiliateCommission:u.affiliateCommission||0,images:Array.isArray(u.images)?u.images.map(N=>typeof N=="string"?{url:Ae(N)}:N):[],tags:u.tags||[],reviews:u.reviews||[],categoryId:u.categoryId,category:u.category,createdAt:new Date(u.$createdAt),updatedAt:new Date(u.$updatedAt)})),total:c.total,page:a,limit:r}}catch(t){console.error("Error fetching products from Appwrite:",t)}},getById:async s=>{try{if(!Y())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const t=await A.getDocument(U,B.PRODUCTS,s);let r=null;if(t.categoryId)try{const a=await A.getDocument(U,B.CATEGORIES,t.categoryId);r={id:a.$id,name:a.name,slug:a.slug}}catch(a){console.log("Category not found:",a)}return{id:t.$id,name:t.name,description:t.description,price:t.price,originalPrice:t.originalPrice,sku:t.sku||`SKU-${t.$id.slice(0,8)}`,inStock:t.inStock,stockQuantity:t.stockQuantity||0,rating:t.rating||0,reviewCount:t.reviewCount||0,affiliateCommission:t.affiliateCommission||0,images:Array.isArray(t.images)?t.images.map(a=>typeof a=="string"?{url:Ae(a)}:a):[],tags:t.tags||[],reviews:t.reviews||[],categoryId:t.categoryId,category:r,createdAt:new Date(t.$createdAt),updatedAt:new Date(t.$updatedAt)}}catch(t){console.error("Error fetching product from Appwrite:",t)}},getByCategory:async(s,t)=>{try{if(!Y())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const r=await A.listDocuments(U,B.CATEGORIES,[I.equal("slug",s),I.limit(1)]);if(r.documents.length===0)throw new Error("الفئة غير موجودة");const a=r.documents[0];return Ve.getAll({...t,categoryId:a.$id})}catch(r){console.error("Error fetching products by category from Appwrite:",r)}}},Gs={getAll:async()=>{try{if(!Y())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");return{categories:(await A.listDocuments(U,B.CATEGORIES,[I.orderAsc("name")])).documents.map(r=>({id:r.$id,name:r.name,slug:r.slug,description:r.description,image:r.image,productCount:r.productCount||0,createdAt:new Date(r.$createdAt),updatedAt:new Date(r.$updatedAt)}))}}catch(s){console.error("Error fetching categories from Appwrite:",s)}},getBySlug:async s=>{try{if(!Y())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const t=await A.listDocuments(U,B.CATEGORIES,[I.equal("slug",s),I.limit(1)]);if(t.documents.length===0)return null;const r=t.documents[0];return{id:r.$id,name:r.name,slug:r.slug,description:r.description,image:r.image,productCount:r.productCount||0,createdAt:new Date(r.$createdAt),updatedAt:new Date(r.$updatedAt)}}catch(t){console.error("Error fetching category from Appwrite:",t)}},getProductsByCategory:async(s,t)=>{try{if(!Y())throw new Error("خدمة Appwrite غير مفعلة. لا تتوفر بيانات افتراضية في الإنتاج.");const r=await A.listDocuments(U,B.CATEGORIES,[I.equal("slug",s),I.limit(1)]);if(r.documents.length===0)return{products:[],total:0,page:1,limit:20};const a=r.documents[0].$id;return Ve.getAll({...t,categoryId:a})}catch(r){return console.error("Error fetching products by category from Appwrite:",r),{products:[],total:0,page:1,limit:(t==null?void 0:t.limit)||20}}}},Qe={products:["products"],product:s=>["products",s],categories:["categories"],category:s=>["categories",s],categoryProducts:s=>["categories",s,"products"],orders:s=>["orders",s],order:s=>["orders",s],reviews:s=>["reviews",s],wishlist:s=>["wishlist",s],wishlistCheck:(s,t)=>["wishlist-check",s,t]},lo={getUserOrders:async s=>{try{return Y()?(await A.listDocuments(U,B.ORDERS,[I.equal("userId",s),I.orderDesc("$createdAt")])).documents.map(r=>({id:r.$id,orderNumber:r.orderNumber,status:r.status,total:r.total,subtotal:r.subtotal,shipping:r.shipping||0,discount:r.discount||0,items:r.items||[],shippingAddress:r.shippingAddress,paymentMethod:r.paymentMethod,paymentStatus:r.paymentStatus,createdAt:r.$createdAt,updatedAt:r.$updatedAt})):(console.log("Appwrite not configured for orders"),[])}catch(t){return console.error("Error fetching orders from Appwrite:",t),[]}},getOrderById:async(s,t)=>{try{if(!Y())return null;const r=await A.getDocument(U,B.ORDERS,s);if(r.userId!==t)throw new Error("Unauthorized");return{id:r.$id,orderNumber:r.orderNumber,status:r.status,total:r.total,subtotal:r.subtotal,shipping:r.shipping||0,discount:r.discount||0,items:r.items||[],shippingAddress:r.shippingAddress,billingAddress:r.billingAddress,paymentMethod:r.paymentMethod,paymentStatus:r.paymentStatus,createdAt:r.$createdAt,updatedAt:r.$updatedAt}}catch(r){return console.error("Error fetching order details from Appwrite:",r),null}}},co={getProductReviews:async s=>{try{if(!Y())return{reviews:[],stats:{totalReviews:0,averageRating:0,ratingDistribution:[]}};const r=(await A.listDocuments(U,B.REVIEWS,[I.equal("productId",s),I.orderDesc("$createdAt")])).documents.map(m=>({id:m.$id,userId:m.userId,userName:m.userName||"مستخدم",userAvatar:m.userAvatar,rating:m.rating,comment:m.comment,createdAt:m.$createdAt})),a=r.length,i=a>0?r.reduce((m,u)=>m+u.rating,0)/a:0,c=[5,4,3,2,1].map(m=>({rating:m,count:r.filter(u=>u.rating===m).length}));return{reviews:r,stats:{totalReviews:a,averageRating:i,ratingDistribution:c}}}catch(t){return(t==null?void 0:t.code)===404||(t==null?void 0:t.type)==="collection_not_found"?console.log("Reviews collection not found - feature disabled"):console.error("Error fetching reviews from Appwrite:",t),{reviews:[],stats:{totalReviews:0,averageRating:0,ratingDistribution:[]}}}},createReview:async s=>{try{if(!Y())throw new Error("Appwrite not configured");if((await A.listDocuments(U,B.REVIEWS,[I.equal("productId",s.productId),I.equal("userId",s.userId)])).documents.length>0)throw new Error("لقد قمت بتقييم هذا المنتج بالفعل");const r=await A.createDocument(U,B.REVIEWS,"unique()",s);return{id:r.$id,...s,createdAt:r.$createdAt}}catch(t){throw new Error(t.message||"فشل في إضافة المراجعة")}},updateReview:async(s,t)=>{try{if(!Y())throw new Error("Appwrite not configured");if((await A.getDocument(U,B.REVIEWS,s)).userId!==t.userId)throw new Error("غير مصرح لك بتعديل هذه المراجعة");const a={};t.rating!==void 0&&(a.rating=t.rating),t.comment!==void 0&&(a.comment=t.comment);const i=await A.updateDocument(U,B.REVIEWS,s,a);return{id:i.$id,rating:i.rating,comment:i.comment,updatedAt:i.$updatedAt}}catch(r){throw new Error(r.message||"فشل في تحديث المراجعة")}},deleteReview:async(s,t)=>{try{if(!Y())throw new Error("Appwrite not configured");if((await A.getDocument(U,B.REVIEWS,s)).userId!==t)throw new Error("غير مصرح لك بحذف هذه المراجعة");await A.deleteDocument(U,B.REVIEWS,s)}catch(r){throw new Error(r.message||"فشل في حذف المراجعة")}}},mo={getUserWishlist:async s=>{try{if(!Y())return[];const t=await A.listDocuments(U,B.WISHLIST,[I.equal("userId",s),I.orderDesc("$createdAt")]);return(await Promise.all(t.documents.map(async a=>{try{const i=await A.getDocument(U,B.PRODUCTS,a.productId);return{id:a.$id,productId:a.productId,addedAt:a.$createdAt,product:{id:i.$id,name:i.name,description:i.description,price:i.price,originalPrice:i.originalPrice,inStock:i.inStock,stockQuantity:i.stockQuantity||0,rating:i.rating||0,reviewCount:i.reviewCount||0,images:i.images||[],category:i.category}}}catch(i){return console.error(`Product ${a.productId} not found:`,i),null}}))).filter(a=>a!==null)}catch(t){return console.error("Error fetching wishlist from Appwrite:",t),[]}},addToWishlist:async(s,t)=>{try{if(!Y())throw new Error("Appwrite not configured");if((await A.listDocuments(U,B.WISHLIST,[I.equal("userId",s),I.equal("productId",t)])).documents.length>0)throw new Error("المنتج موجود بالفعل في قائمة المفضلة");const a=await A.createDocument(U,B.WISHLIST,"unique()",{userId:s,productId:t});return{id:a.$id,productId:a.productId,addedAt:a.$createdAt}}catch(r){throw new Error(r.message||"فشل في إضافة المنتج للمفضلة")}},removeFromWishlist:async(s,t)=>{try{if(!Y())throw new Error("Appwrite not configured");if((await A.getDocument(U,B.WISHLIST,s)).userId!==t)throw new Error("غير مصرح لك بحذف هذا العنصر");await A.deleteDocument(U,B.WISHLIST,s)}catch(r){throw new Error(r.message||"فشل في حذف المنتج من المفضلة")}},isInWishlist:async(s,t)=>{try{if(!Y())return{inWishlist:!1,wishlistItemId:null};const r=await A.listDocuments(U,B.WISHLIST,[I.equal("userId",s),I.equal("productId",t)]),a=r.documents.length>0,i=a?r.documents[0].$id:null;return{inWishlist:a,wishlistItemId:i}}catch(r){return console.error("Error checking wishlist:",r),{inWishlist:!1,wishlistItemId:null}}}};function Za(){const[s,t]=l.useState(!1),[r,a]=l.useState(""),i=lt();l.useEffect(()=>{const o=n=>{n.key==="k"&&(n.metaKey||n.ctrlKey)&&(n.preventDefault(),t(b=>!b))};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[]);const{data:c}=$e({queryKey:[...Qe.products,"search",r],queryFn:()=>Ve.getAll({limit:5}),enabled:r.length>2}),u=[...[{id:"products-page",title:"المنتجات",subtitle:"عرض جميع المنتجات",category:"pages",url:"/products",icon:e.jsx(yt,{className:"h-4 w-4"})},{id:"orders-page",title:"طلباتي",subtitle:"تتبع الطلبات",category:"pages",url:"/orders",icon:e.jsx(qe,{className:"h-4 w-4"})},{id:"affiliate-dashboard",title:"لوحة المسوق",subtitle:"إحصائيات وروابط",category:"pages",url:"/affiliate/dashboard",icon:e.jsx(ue,{className:"h-4 w-4"})},{id:"admin-dashboard",title:"لوحة الإدارة",subtitle:"إدارة الموقع",category:"pages",url:"/admin/dashboard",icon:e.jsx(me,{className:"h-4 w-4"})},{id:"docs",title:"المساعدة والدعم",subtitle:"مركز المساعدة",category:"pages",url:"/faq",icon:e.jsx(xr,{className:"h-4 w-4"})}].filter(o=>{var n;return o.title.toLowerCase().includes(r.toLowerCase())||((n=o.subtitle)==null?void 0:n.toLowerCase().includes(r.toLowerCase()))}),...((c==null?void 0:c.products)||[]).map(o=>({id:o.id,title:o.name,subtitle:`${o.price} جنيه`,category:"products",url:`/product/${o.id}`,icon:e.jsx(yt,{className:"h-4 w-4"})}))],N=l.useCallback(o=>{t(!1),a(""),i(o.url)},[i]),h=o=>({products:"المنتجات",orders:"الطلبات",users:"المستخدمين",pages:"الصفحات",analytics:"التحليلات"})[o]||o,p=u.reduce((o,n)=>(o[n.category]||(o[n.category]=[]),o[n.category].push(n),o),{});return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>t(!0),className:k("inline-flex items-center gap-2 rounded-lg border border-input bg-background px-3 py-2","text-sm text-muted-foreground transition-colors","hover:bg-accent hover:text-accent-foreground","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"),children:[e.jsx(Rt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"بحث سريع..."}),e.jsxs("kbd",{className:"pointer-events-none hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex",children:[e.jsx("span",{className:"text-xs",children:"⌘"}),"K"]})]}),e.jsxs(Ba,{open:s,onOpenChange:t,children:[e.jsx(qs,{placeholder:"ابحث عن منتجات، طلبات، صفحات...",value:r,onValueChange:a}),e.jsxs(zs,{children:[e.jsx(Us,{children:"لا توجد نتائج"}),Object.entries(p).map(([o,n])=>e.jsx(Bs,{heading:h(o),children:n.map(b=>e.jsx(Ws,{value:b.title,onSelect:()=>N(b),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[b.icon,e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:b.title}),b.subtitle&&e.jsx("span",{className:"text-xs text-muted-foreground",children:b.subtitle})]})]})},b.id))},o))]})]})]})}const ke=jr,Se=yr,ei=l.forwardRef(({className:s,inset:t,children:r,...a},i)=>e.jsxs(ws,{ref:i,className:k("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...a,children:[r,e.jsx(vs,{className:"ml-auto h-4 w-4"})]}));ei.displayName=ws.displayName;const ti=l.forwardRef(({className:s,...t},r)=>e.jsx(bs,{ref:r,className:k("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));ti.displayName=bs.displayName;const we=l.forwardRef(({className:s,sideOffset:t=4,...r},a)=>e.jsx(fr,{children:e.jsx(Ns,{ref:a,sideOffset:t,className:k("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}));we.displayName=Ns.displayName;const O=l.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(_s,{ref:a,className:k("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...r}));O.displayName=_s.displayName;const si=l.forwardRef(({className:s,children:t,checked:r,...a},i)=>e.jsxs(Es,{ref:i,className:k("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(As,{children:e.jsx(ze,{className:"h-4 w-4"})})}),t]}));si.displayName=Es.displayName;const ri=l.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(Cs,{ref:a,className:k("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(As,{children:e.jsx(gr,{className:"h-2 w-2 fill-current"})})}),t]}));ri.displayName=Cs.displayName;const Hs=l.forwardRef(({className:s,inset:t,...r},a)=>e.jsx(ks,{ref:a,className:k("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...r}));Hs.displayName=ks.displayName;const X=l.forwardRef(({className:s,...t},r)=>e.jsx(Ss,{ref:r,className:k("-mx-1 my-1 h-px bg-muted",s),...t}));X.displayName=Ss.displayName;const ai=js,ii=ys,ni=fs,Ks=l.forwardRef(({className:s,...t},r)=>e.jsx(at,{className:k("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:r}));Ks.displayName=at.displayName;const oi=Ue("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Qs=l.forwardRef(({side:s="right",className:t,children:r,...a},i)=>e.jsxs(ni,{children:[e.jsx(Ks,{}),e.jsxs(it,{ref:i,className:k(oi({side:s}),t),...a,children:[r,e.jsxs(gs,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(It,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Qs.displayName=it.displayName;const Js=({className:s,...t})=>e.jsx("div",{className:k("flex flex-col space-y-2 text-center sm:text-left",s),...t});Js.displayName="SheetHeader";const Ys=l.forwardRef(({className:s,...t},r)=>e.jsx(nt,{ref:r,className:k("text-lg font-semibold text-foreground",s),...t}));Ys.displayName=nt.displayName;const li=l.forwardRef(({className:s,...t},r)=>e.jsx(ot,{ref:r,className:k("text-sm text-muted-foreground",s),...t}));li.displayName=ot.displayName;const ci=Ue("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function re({className:s,variant:t,...r}){return e.jsx("div",{className:k(ci({variant:t}),s),...r})}const Xs=l.createContext(void 0),Ne=()=>{const s=l.useContext(Xs);return s===void 0?{user:null,loading:!0,login:async()=>{},loginWithGoogle:async()=>{},loginWithFacebook:async()=>{},register:async()=>{},logout:async()=>{},updateUser:async()=>{},refreshUser:async()=>{}}:s},di=({children:s})=>{const[t,r]=l.useState(null),[a,i]=l.useState(!0);l.useEffect(()=>{c()},[]);const c=async()=>{try{if(i(!0),!Q.isConfigured()){console.log("Appwrite not configured, using fallback auth"),r(null);return}const g=await Q.getCurrentUser();if(g){let d={};try{const L=await A.listDocuments(C.databaseId,"userPreferences",[I.equal("userId",g.$id)]);L.documents.length>0?(d=L.documents[0],console.log("✅ Loaded user data from userPreferences:",d)):console.log("⚠️ No userPreferences found for user")}catch(L){console.log("Error loading userPreferences:",L)}const x=g.prefs||{},_=["lolelarap@gmail.com","admin@egygo.me"];let S=d.role||x.role||"customer";if(x.role){if(_.includes(g.email.toLowerCase())&&x.role!=="admin"){S="admin";try{await Q.updateUserPreferences({role:"admin",isAdmin:!0,isSuperAdmin:!0}),console.log(`✅ تم تحديث دور المستخدم إلى Admin: ${g.email}`)}catch(L){console.log("Could not update user role:",L)}}}else{_.includes(g.email.toLowerCase())?(S="admin",console.log(`✅ تم تحديد المستخدم كـ Admin: ${g.email}`)):g.email.includes("admin")?S="admin":g.email.includes("merchant")||g.email.includes("vendor")?S="merchant":x.isAffiliate?S="affiliate":S="customer";try{await Q.updateUserPreferences({role:S,isAdmin:S==="admin",isSuperAdmin:_.includes(g.email.toLowerCase())})}catch(L){console.log("Could not save user role:",L)}}r({$id:g.$id,name:d.name||g.name,email:d.email||g.email,role:S,phone:d.phone||x.phone||"",address:d.address||x.address||"",isAffiliate:d.isAffiliate||x.isAffiliate||S==="affiliate",isMerchant:d.isMerchant||x.isMerchant||S==="merchant",isIntermediary:d.isIntermediary||x.isIntermediary||S==="intermediary",affiliateCode:d.affiliateCode||x.affiliateCode||"",intermediaryCode:d.intermediaryCode||x.intermediaryCode||"",commissionRate:d.commissionRate||x.commissionRate||.15,defaultMarkupPercentage:d.defaultMarkupPercentage||x.defaultMarkupPercentage||20,accountStatus:d.accountStatus||x.accountStatus||"approved",approvedAt:d.approvedAt||x.approvedAt,approvedBy:d.approvedBy||x.approvedBy,rejectionReason:d.rejectionReason||x.rejectionReason})}else r(null)}catch(g){console.error("Error checking auth user:",g),r(null)}finally{i(!1)}},b={user:t,loading:a,login:async(g,d)=>{try{if(i(!0),!Q.isConfigured())throw new Error("Appwrite غير مُعد. يرجى التحقق من إعدادات المشروع.");await Q.login(g,d),await c()}catch(x){throw console.error("Login error:",x),x}finally{i(!1)}},loginWithGoogle:async()=>{try{if(!Q.isConfigured())throw new Error("Appwrite غير مُعد. يرجى التحقق من إعدادات المشروع.");await Q.loginWithGoogle()}catch(g){throw console.error("Google login error:",g),g}},loginWithFacebook:async()=>{try{if(!Q.isConfigured())throw new Error("Appwrite غير مُعد. يرجى التحقق من إعدادات المشروع.");await Q.loginWithFacebook()}catch(g){throw console.error("Facebook login error:",g),g}},register:async(g,d,x,_="customer",S,L)=>{var G;try{if(i(!0),!Q.isConfigured())throw new Error("Appwrite غير مُعد. يرجى التحقق من إعدادات المشروع.");await Q.register(g,d,x);const q=await Q.getCurrentUser(),j=_==="affiliate"||_==="merchant",P=j?"pending":"approved",F={role:_,isAffiliate:_==="affiliate",isMerchant:_==="merchant",isIntermediary:_==="intermediary",phone:S||"",alternativePhone:L||"",accountStatus:P,approvedAt:j?null:new Date().toISOString()};if(_==="affiliate"){const T=Math.random().toString(36).substring(2,9).toUpperCase();F.affiliateCode=`AF${T}`.substring(0,10),F.commissionRate=.15}if(_==="intermediary"){const T=Math.random().toString(36).substring(2,9).toUpperCase();F.intermediaryCode=`IN${T}`.substring(0,10),F.defaultMarkupPercentage=.2}await Q.updateUserPreferences(F);try{await A.createDocument(C.databaseId,C.collections.users,q.$id,{email:g,name:x,phone:S||"",alternativePhone:L||"",address:"",isAffiliate:_==="affiliate",isMerchant:_==="merchant",isIntermediary:_==="intermediary",affiliateCode:F.affiliateCode||null,commissionRate:F.commissionRate||.15,totalEarnings:0,pendingEarnings:0,referralCount:0,accountStatus:P,approvedAt:F.approvedAt,approvedBy:null,rejectionReason:null,isActive:!j})}catch(T){console.error("Failed to create user document:",T)}return await c(),{$id:q.$id,email:q.email,name:q.name}}catch(q){throw console.error("Registration error:",q),(q==null?void 0:q.code)===409||(G=q==null?void 0:q.message)!=null&&G.includes("already exists")?new Error("هذا البريد الإلكتروني أو رقم الهاتف مستخدم بالفعل. يرجى تسجيل الدخول أو استخدام بريد آخر."):q}finally{i(!1)}},logout:async()=>{try{if(i(!0),!Q.isConfigured()){r(null);return}await Q.logout(),r(null)}catch(g){throw console.error("Logout error:",g),g}finally{i(!1)}},updateUser:async g=>{try{if(!t)return;i(!0),await Q.updateUserPreferences(g),r(d=>d?{...d,...g}:null)}catch(d){throw console.error("Update user error:",d),d}finally{i(!1)}},refreshUser:async()=>{try{await c()}catch(g){console.error("Refresh user error:",g)}}};return e.jsx(Xs.Provider,{value:b,children:s})},mi=1,ui=1e6;let xt=0;function hi(){return xt=(xt+1)%Number.MAX_SAFE_INTEGER,xt.toString()}const ft=new Map,as=s=>{if(ft.has(s))return;const t=setTimeout(()=>{ft.delete(s),Le({type:"REMOVE_TOAST",toastId:s})},ui);ft.set(s,t)},pi=(s,t)=>{switch(t.type){case"ADD_TOAST":return{...s,toasts:[t.toast,...s.toasts].slice(0,mi)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?as(r):s.toasts.forEach(a=>{as(a.id)}),{...s,toasts:s.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(r=>r.id!==t.toastId)}}},Je=[];let Ye={toasts:[]};function Le(s){Ye=pi(Ye,s),Je.forEach(t=>{t(Ye)})}function xi({...s}){const t=hi(),r=i=>Le({type:"UPDATE_TOAST",toast:{...i,id:t}}),a=()=>Le({type:"DISMISS_TOAST",toastId:t});return Le({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:i=>{i||a()}}}),{id:t,dismiss:a,update:r}}function fi(){const[s,t]=l.useState(Ye);return l.useEffect(()=>(Je.push(t),()=>{const r=Je.indexOf(t);r>-1&&Je.splice(r,1)}),[s]),{...s,toast:xi,dismiss:r=>Le({type:"DISMISS_TOAST",toastId:r})}}const Zs=l.createContext(void 0),is="shopko_cart";function gi({children:s}){const{toast:t}=fi(),[r,a]=l.useState([]);l.useEffect(()=>{try{const n=localStorage.getItem(is);n&&a(JSON.parse(n))}catch(n){console.error("Error loading cart:",n)}},[]),l.useEffect(()=>{try{localStorage.setItem(is,JSON.stringify(r))}catch(n){console.error("Error saving cart:",n)}},[r]);const i=n=>{a(b=>{const g=b.find(x=>x.productId===n.productId);if(g){const x=g.quantity+n.quantity;return x>n.stockQuantity?(t({title:"الكمية غير متوفرة",description:`الكمية المتوفرة فقط ${n.stockQuantity}`,variant:"destructive"}),b):b.map(_=>_.productId===n.productId?{..._,quantity:x}:_)}const d={...n,id:`cart-${Date.now()}-${Math.random()}`};return t({title:"تمت الإضافة لسلة التسوق",description:`تم إضافة ${n.name} إلى سلة التسوق`}),[...b,d]})},c=n=>{a(b=>b.filter(g=>g.id!==n)),t({title:"تمت الإزالة",description:"تم إزالة المنتج من السلة"})},m=(n,b)=>{b<1||a(g=>{const d=g.find(x=>x.id===n);return d?b>d.stockQuantity?(t({title:"الكمية غير متوفرة",description:`الكمية المتوفرة فقط ${d.stockQuantity}`,variant:"destructive"}),g):g.map(x=>x.id===n?{...x,quantity:b}:x):g})},u=()=>{a([]),t({title:"تم إفراغ السلة",description:"تم إزالة جميع المنتجات من السلة"})},N=n=>r.some(b=>b.productId===n),h=r.reduce((n,b)=>n+b.quantity,0),p=r.reduce((n,b)=>n+b.price*b.quantity,0),o={items:r,itemCount:h,subtotal:p,addItem:i,removeItem:c,updateQuantity:m,clearCart:u,isInCart:N};return e.jsx(Zs.Provider,{value:o,children:s})}function ji(){const s=l.useContext(Zs);if(!s)throw new Error("useCart must be used within CartProvider");return s}const Ot=l.forwardRef(({className:s,children:t,...r},a)=>e.jsxs(Is,{ref:a,className:k("relative overflow-hidden",s),...r,children:[e.jsx(wr,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(er,{}),e.jsx(vr,{})]}));Ot.displayName=Is.displayName;const er=l.forwardRef(({className:s,orientation:t="vertical",...r},a)=>e.jsx(Rs,{ref:a,orientation:t,className:k("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...r,children:e.jsx(br,{className:"relative flex-1 rounded-full bg-border"})}));er.displayName=Rs.displayName;const xe="notifications";class yi{async getUserNotifications(t,r=50){try{return(await A.listDocuments(C.databaseId,xe,[I.equal("userId",t),I.orderDesc("$createdAt"),I.limit(r)])).documents}catch(a){return console.error("Error fetching notifications:",a),[]}}async getUnreadCount(t){try{return(await A.listDocuments(C.databaseId,xe,[I.equal("userId",t),I.equal("read",!1)])).total}catch(r){return console.error("Error fetching unread count:",r),0}}async createNotification(t){try{return await A.createDocument(C.databaseId,xe,"unique()",{...t,read:!1})}catch(r){return console.error("Error creating notification:",r),null}}async markAsRead(t){try{return await A.updateDocument(C.databaseId,xe,t,{read:!0}),!0}catch(r){return console.error("Error marking notification as read:",r),!1}}async markAllAsRead(t){try{const a=(await this.getUserNotifications(t)).filter(i=>!i.read);return await Promise.all(a.map(i=>this.markAsRead(i.$id))),!0}catch(r){return console.error("Error marking all as read:",r),!1}}async deleteNotification(t){try{return await A.deleteDocument(C.databaseId,xe,t),!0}catch(r){return console.error("Error deleting notification:",r),!1}}async deleteAllNotifications(t){try{const r=await this.getUserNotifications(t);return await Promise.all(r.map(a=>this.deleteNotification(a.$id))),!0}catch(r){return console.error("Error deleting all notifications:",r),!1}}subscribeToNotifications(t,r){try{const a=Be.subscribe(`databases.${C.databaseId}.collections.${xe}.documents`,i=>{const c=i.payload;c.userId===t&&r(c)});return()=>{var i;try{typeof a=="function"&&a()}catch(c){(i=c==null?void 0:c.message)!=null&&i.includes("CLOSING or CLOSED")||console.error("Error unsubscribing from notifications:",c)}}}catch(a){return console.error("Error subscribing to notifications:",a),()=>{}}}async notifyOrderStatus(t,r,a){const c={confirmed:{title:"تم تأكيد طلبك",message:`تم تأكيد طلبك #${r} وجاري التجهيز للشحن`,type:"order"},shipped:{title:"تم شحن طلبك",message:`طلبك #${r} في الطريق إليك`,type:"shipping"},delivered:{title:"تم تسليم طلبك",message:`تم تسليم طلبك #${r} بنجاح`,type:"delivery"},cancelled:{title:"تم إلغاء طلبك",message:`تم إلغاء طلبك #${r}`,type:"alert"}}[a];return this.createNotification({userId:t,...c,relatedId:r})}async notifyAffiliateCommission(t,r,a){return this.createNotification({userId:t,type:"commission",title:"عمولة جديدة",message:`حصلت على عمولة ${r} ج.م من الطلب #${a}`,relatedId:a,metadata:{amount:r}})}}const Ce=new yi,wi=Object.freeze(Object.defineProperty({__proto__:null,NOTIFICATIONS_COLLECTION_ID:xe,default:Ce,notificationService:Ce},Symbol.toStringTag,{value:"Module"})),vi={order:yt,shipping:qe,delivery:ze,alert:Er,info:_r,commission:wt,affiliate:wt};function bi(s){const t=new Date(s),a=Math.floor((new Date().getTime()-t.getTime())/1e3);return a<60?"الآن":a<3600?`منذ ${Math.floor(a/60)} دقيقة`:a<86400?`منذ ${Math.floor(a/3600)} ساعة`:a<604800?`منذ ${Math.floor(a/86400)} يوم`:t.toLocaleDateString("ar-EG")}function Ni(){const{user:s}=Ne(),t=lt(),[r,a]=l.useState(!1),i=Nr(),{data:c=[],isLoading:m}=$e({queryKey:["notifications",s==null?void 0:s.$id],queryFn:()=>Ce.getUserNotifications(s.$id),enabled:!!(s!=null&&s.$id),refetchInterval:3e4});l.useEffect(()=>{if(!(s!=null&&s.$id))return;const o=Ce.subscribeToNotifications(s.$id,n=>{i.setQueryData(["notifications",s.$id],(b=[])=>[n,...b])});return()=>{o()}},[s==null?void 0:s.$id,i]);const u=Vt({mutationFn:o=>Ce.markAsRead(o),onSuccess:()=>{i.invalidateQueries({queryKey:["notifications",s==null?void 0:s.$id]})}}),N=Vt({mutationFn:()=>Ce.markAllAsRead(s.$id),onSuccess:()=>{i.invalidateQueries({queryKey:["notifications",s==null?void 0:s.$id]})}}),h=c.filter(o=>!o.read).length,p=o=>{o.read||u.mutate(o.$id),a(!1),o.relatedId&&o.type==="order"&&t(`/my-orders/${o.relatedId}`)};return s?e.jsxs(ke,{open:r,onOpenChange:a,children:[e.jsx(Se,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(qt,{className:"h-5 w-5"}),h>0&&e.jsx(re,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:h>9?"9+":h})]})}),e.jsxs(we,{align:"end",className:"w-80",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[e.jsx("h3",{className:"font-semibold",children:"الإشعارات"}),h>0&&e.jsxs(R,{variant:"ghost",size:"sm",onClick:()=>N.mutate(),disabled:N.isPending,className:"text-xs",children:[e.jsx(ze,{className:"h-3 w-3 mr-1"}),"تحديد الكل كمقروء"]})]}),e.jsx(X,{}),m?e.jsx("div",{className:"px-4 py-8 text-center text-muted-foreground",children:"جاري التحميل..."}):c.length===0?e.jsxs("div",{className:"px-4 py-8 text-center text-muted-foreground",children:[e.jsx(qt,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"لا توجد إشعارات"})]}):e.jsx(Ot,{className:"h-[400px]",children:e.jsx("div",{className:"space-y-1",children:c.map(o=>{const n=vi[o.type];return e.jsxs(O,{className:`flex items-start gap-3 px-4 py-3 cursor-pointer ${o.read?"":"bg-accent/50"}`,onClick:()=>p(o),children:[e.jsx("div",{className:`mt-1 p-2 rounded-full ${o.read?"bg-muted text-muted-foreground":"bg-primary text-primary-foreground"}`,children:e.jsx(n,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:"font-medium text-sm leading-tight",children:o.title}),!o.read&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary flex-shrink-0 mt-1"})]}),e.jsx("p",{className:"text-sm text-muted-foreground leading-tight",children:o.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:bi(o.$createdAt)})]})]},o.$id)})})})]})]}):null}const tr={"purple-orange":{name:"Purple & Orange",nameAr:"بنفسجي وبرتقالي",primary:"270 95% 60%",primaryStart:"260 100% 65%",primaryEnd:"280 90% 55%",secondary:"25 95% 58%",secondaryStart:"20 100% 60%",secondaryEnd:"35 95% 55%",accent:"190 95% 55%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"222.2 84% 4.9%",darkModeForeground:"210 40% 98%",description:"Vibrant and energetic",descriptionAr:"نابض بالحياة والطاقة",icon:"🟣"},"blue-cyan":{name:"Blue & Cyan",nameAr:"أزرق وسماوي",primary:"210 100% 50%",primaryStart:"200 100% 55%",primaryEnd:"220 95% 45%",secondary:"185 100% 40%",secondaryStart:"175 100% 45%",secondaryEnd:"195 95% 35%",accent:"160 90% 45%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"210 100% 15%",darkModeForeground:"210 40% 98%",description:"Cool and professional",descriptionAr:"بارد واحترافي",icon:"🔵"},"green-teal":{name:"Green & Teal",nameAr:"أخضر وفيروزي",primary:"145 85% 40%",primaryStart:"135 90% 45%",primaryEnd:"155 80% 35%",secondary:"170 100% 35%",secondaryStart:"160 100% 40%",secondaryEnd:"180 95% 30%",accent:"195 85% 45%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"145 85% 15%",darkModeForeground:"145 40% 95%",description:"Fresh and natural",descriptionAr:"منعش وطبيعي",icon:"🟢"},"pink-purple":{name:"Pink & Purple",nameAr:"وردي وبنفسجي",primary:"330 85% 50%",primaryStart:"320 90% 55%",primaryEnd:"340 80% 45%",secondary:"280 85% 50%",secondaryStart:"270 90% 55%",secondaryEnd:"290 80% 45%",accent:"200 90% 55%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"330 60% 20%",darkModeForeground:"330 40% 95%",description:"Sweet and playful",descriptionAr:"حلو ومرح",icon:"🩷"},"red-orange":{name:"Red & Orange",nameAr:"أحمر وبرتقالي",primary:"0 85% 50%",primaryStart:"350 90% 55%",primaryEnd:"10 80% 45%",secondary:"30 100% 45%",secondaryStart:"20 100% 50%",secondaryEnd:"40 95% 40%",accent:"45 100% 50%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"0 60% 20%",darkModeForeground:"0 40% 98%",description:"Bold and passionate",descriptionAr:"جريء وعاطفي",icon:"🔴"},"indigo-blue":{name:"Indigo & Blue",nameAr:"نيلي وأزرق",primary:"240 85% 45%",primaryStart:"230 90% 50%",primaryEnd:"250 80% 40%",secondary:"210 90% 50%",secondaryStart:"200 95% 55%",secondaryEnd:"220 85% 45%",accent:"180 85% 50%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"240 60% 15%",darkModeForeground:"240 40% 98%",description:"Deep and trustworthy",descriptionAr:"عميق وموثوق",icon:"🔷"},"emerald-lime":{name:"Emerald & Lime",nameAr:"زمردي وليموني",primary:"150 90% 35%",primaryStart:"140 95% 40%",primaryEnd:"160 85% 30%",secondary:"80 90% 40%",secondaryStart:"70 95% 45%",secondaryEnd:"90 85% 35%",accent:"50 100% 50%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"150 60% 15%",darkModeForeground:"150 40% 95%",description:"Bright and lively",descriptionAr:"مشرق وحيوي",icon:"💚"},"rose-pink":{name:"Rose & Pink",nameAr:"وردي فاتح",primary:"340 90% 55%",primaryStart:"330 95% 60%",primaryEnd:"350 85% 50%",secondary:"0 85% 60%",secondaryStart:"350 90% 65%",secondaryEnd:"10 80% 55%",accent:"30 90% 55%",textOnPrimary:"0 0% 100%",textOnSecondary:"0 0% 100%",lightModeForeground:"340 60% 20%",darkModeForeground:"340 40% 98%",description:"Romantic and elegant",descriptionAr:"رومانسي وأنيق",icon:"🌸"}},sr=l.createContext(void 0);function _i({children:s}){const[t,r]=l.useState(()=>localStorage.getItem("egygo-theme")||"system"),[a,i]=l.useState(()=>localStorage.getItem("egygo-color-theme")||"purple-orange"),[c,m]=l.useState("light");l.useEffect(()=>{const p=window.document.documentElement,o=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",n=()=>{const d=t==="system"?o():t;p.classList.remove("light","dark"),p.classList.add(d),m(d)};n();const b=window.matchMedia("(prefers-color-scheme: dark)"),g=()=>{t==="system"&&n()};return b.addEventListener("change",g),()=>b.removeEventListener("change",g)},[t]),l.useEffect(()=>{const p=tr[a],o=document.documentElement;o.style.setProperty("--primary",p.primary),o.style.setProperty("--primary-start",p.primaryStart),o.style.setProperty("--primary-end",p.primaryEnd),o.style.setProperty("--primary-light",p.primary),o.style.setProperty("--primary-dark",p.primaryEnd),o.style.setProperty("--primary-foreground",p.textOnPrimary),o.style.setProperty("--secondary",p.secondary),o.style.setProperty("--secondary-start",p.secondaryStart),o.style.setProperty("--secondary-end",p.secondaryEnd),o.style.setProperty("--secondary-light",p.secondary),o.style.setProperty("--secondary-foreground",p.textOnSecondary),o.style.setProperty("--accent-cyan",p.accent),c==="light"?(o.style.setProperty("--foreground",p.lightModeForeground),o.style.setProperty("--card-foreground",p.lightModeForeground),o.style.setProperty("--popover-foreground",p.lightModeForeground)):(o.style.setProperty("--foreground",p.darkModeForeground),o.style.setProperty("--card-foreground",p.darkModeForeground),o.style.setProperty("--popover-foreground",p.darkModeForeground)),localStorage.setItem("egygo-color-theme",a)},[a,c]);const u=p=>{r(p),localStorage.setItem("egygo-theme",p)},N=p=>{i(p)},h=()=>{u(c==="light"?"dark":"light")};return e.jsx(sr.Provider,{value:{theme:t,actualTheme:c,colorTheme:a,setTheme:u,setColorTheme:N,toggleTheme:h},children:s})}function rr(){const s=l.useContext(sr);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s}function Ei(){const{theme:s,setTheme:t}=rr();return e.jsxs(ke,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(zt,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(Ut,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(we,{align:"end",children:[e.jsxs(O,{onClick:()=>t("light"),className:"cursor-pointer",children:[e.jsx(zt,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"فاتح"}),s==="light"&&e.jsx("span",{className:"mr-auto",children:"✓"})]}),e.jsxs(O,{onClick:()=>t("dark"),className:"cursor-pointer",children:[e.jsx(Ut,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"داكن"}),s==="dark"&&e.jsx("span",{className:"mr-auto",children:"✓"})]}),e.jsxs(O,{onClick:()=>t("system"),className:"cursor-pointer",children:[e.jsx(Ar,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"تلقائي"}),s==="system"&&e.jsx("span",{className:"mr-auto",children:"✓"})]})]})]})}function Ai(){const{colorTheme:s,setColorTheme:t}=rr(),r=["purple-orange","blue-cyan","green-teal","pink-purple","red-orange","indigo-blue","emerald-lime","rose-pink"];return e.jsxs(ke,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(R,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(Cr,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"اختر الثيم"})]})}),e.jsxs(we,{align:"end",className:"w-72",children:[e.jsx(Hs,{className:"text-center text-base font-semibold",dir:"rtl",children:"اختر ثيم الألوان 🎨"}),e.jsx(X,{}),e.jsx("div",{className:"grid grid-cols-2 gap-2 p-2",dir:"rtl",children:r.map(a=>{const i=tr[a],c=s===a;return e.jsxs(O,{onClick:()=>t(a),className:`
                  flex flex-col items-start gap-2 p-3 cursor-pointer
                  rounded-lg border-2 transition-all
                  ${c?"border-primary bg-primary/10":"border-transparent hover:border-primary/30 hover:bg-accent"}
                `,children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:i.icon}),e.jsx("span",{className:"font-semibold text-sm",children:i.nameAr})]}),c&&e.jsx(ze,{className:"h-4 w-4 text-primary"})]}),e.jsxs("div",{className:"flex gap-1 w-full",children:[e.jsx("div",{className:"h-6 flex-1 rounded",style:{background:`hsl(${i.primary})`}}),e.jsx("div",{className:"h-6 flex-1 rounded",style:{background:`hsl(${i.secondary})`}}),e.jsx("div",{className:"h-6 flex-1 rounded",style:{background:`hsl(${i.accent})`}})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i.descriptionAr})]},a)})}),e.jsx(X,{}),e.jsx("div",{className:"p-2 text-xs text-center text-muted-foreground",children:"اختر الثيم المفضل لديك من بين 8 تصاميم مختلفة"})]})]})}function Ci({cartItemCount:s}){const[t,r]=l.useState([]),{user:a,logout:i}=Ne(),{items:c}=ji(),m=s??c.reduce((u,N)=>u+N.quantity,0);return l.useEffect(()=>{Gs.getAll().then(u=>{r(u.categories)}).catch(()=>{r([])})},[]),e.jsx("header",{className:"sticky top-0 z-50 w-full border-b border-purple-100 dark:border-purple-900 bg-gradient-to-r from-background via-purple-50/30 to-background dark:from-background dark:via-purple-950/20 dark:to-background backdrop-blur-xl supports-[backdrop-filter]:bg-background/60 shadow-sm",children:e.jsxs("div",{className:"container mx-auto flex h-16 items-center justify-between px-4",children:[e.jsxs(ai,{children:[e.jsx(ii,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",className:"md:hidden",children:e.jsx(kr,{className:"h-5 w-5"})})}),e.jsxs(Qs,{side:"right",className:"w-80",children:[e.jsx(Js,{children:e.jsx(Ys,{children:e.jsx(f,{to:"/",className:"text-2xl font-bold text-primary",children:"إيجي جو"})})}),e.jsxs("nav",{className:"mt-6 space-y-4",children:[(a==null?void 0:a.role)==="admin"&&e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs(f,{to:"/admin",className:"flex items-center gap-2 py-2 px-3 bg-gradient-to-r from-purple-100 to-purple-50 dark:from-purple-900 dark:to-purple-800 text-primary rounded-lg font-semibold hover:shadow-md transition-all",children:[e.jsx(ge,{className:"h-5 w-5"}),"لوحة تحكم الإدارة"]})}),(a==null?void 0:a.isAffiliate)&&e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs(f,{to:"/affiliate/dashboard",className:"flex items-center gap-2 py-2 px-3 bg-gradient-to-r from-orange-100 to-yellow-50 dark:from-orange-900 dark:to-yellow-800 text-orange-600 dark:text-orange-300 rounded-lg font-semibold hover:shadow-md transition-all",children:[e.jsx(ue,{className:"h-5 w-5"}),"لوحة تحكم المسوق"]})}),(a==null?void 0:a.isMerchant)&&e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs(f,{to:"/merchant/dashboard",className:"flex items-center gap-2 py-2 px-3 bg-gradient-to-r from-purple-100 to-pink-50 dark:from-purple-900 dark:to-pink-800 text-purple-600 dark:text-purple-300 rounded-lg font-semibold hover:shadow-md transition-all",children:[e.jsx(je,{className:"h-5 w-5"}),"لوحة تحكم التاجر"]})}),(a==null?void 0:a.isIntermediary)&&e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs(f,{to:"/intermediary/dashboard",className:"flex items-center gap-2 py-2 px-3 bg-gradient-to-r from-indigo-100 to-blue-50 dark:from-indigo-900 dark:to-blue-800 text-indigo-600 dark:text-indigo-300 rounded-lg font-semibold hover:shadow-md transition-all",children:[e.jsx(me,{className:"h-5 w-5"}),"لوحة تحكم الوسيط"]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Bt,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground",children:"الفئات"})]}),t.filter(u=>u.slug).map(u=>e.jsxs(f,{to:`/category/${u.slug}`,className:"flex items-center justify-between py-2 px-3 text-sm hover:bg-muted rounded-md hover:text-primary transition-all",children:[e.jsx("span",{children:u.name}),e.jsx(re,{variant:"secondary",className:"text-xs",children:u.productCount})]},u.id)),e.jsx(f,{to:"/categories",className:"flex items-center justify-center py-2 px-3 mt-2 text-sm font-semibold text-primary bg-primary/10 rounded-md hover:bg-primary/20 transition-all",children:"عرض جميع الفئات"})]}),e.jsxs("div",{className:"pt-4 border-t space-y-2",children:[e.jsxs(f,{to:"/affiliate",className:"flex items-center gap-2 py-2 text-sm hover:text-primary transition-colors",children:[e.jsx(me,{className:"h-4 w-4"}),"برنامج الشراكة"]}),e.jsx(f,{to:"/deals",className:"block py-2 text-sm hover:text-primary transition-colors",children:"العروض الخاصة"})]})]})]})]}),e.jsx(f,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-primary via-purple-600 to-secondary bg-clip-text text-transparent hover:scale-105 transition-transform",children:"إيجي جو"}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-6 rtl:space-x-reverse",children:[e.jsxs(ke,{children:[e.jsxs(Se,{className:"flex items-center gap-1 text-sm font-medium hover:text-primary transition-colors group",children:[e.jsx(Bt,{className:"h-4 w-4 group-hover:scale-110 transition-transform"}),"الفئات",e.jsx(Sr,{className:"h-3 w-3 group-data-[state=open]:rotate-180 transition-transform"})]}),e.jsxs(we,{className:"w-56",align:"start",children:[e.jsx("div",{className:"px-2 py-1.5 text-sm font-semibold text-muted-foreground",children:"تصفح حسب الفئة"}),e.jsx(X,{}),t.filter(u=>u.slug).map(u=>e.jsx(O,{asChild:!0,children:e.jsxs(f,{to:`/category/${u.slug}`,className:"flex items-center justify-between w-full cursor-pointer",children:[e.jsx("span",{children:u.name}),e.jsx(re,{variant:"secondary",className:"ml-2 text-xs",children:u.productCount})]})},u.id)),e.jsx(X,{}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/categories",className:"flex items-center justify-center w-full font-semibold text-primary cursor-pointer",children:"عرض جميع الفئات"})})]})]}),e.jsx(f,{to:"/deals",className:"text-sm font-medium hover:text-primary transition-colors",children:"العروض"}),e.jsxs(f,{to:"/affiliate",className:"flex items-center gap-1 text-sm font-medium bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent hover:from-orange-600 hover:to-yellow-600 transition-all",children:[e.jsx(me,{className:"h-4 w-4 text-orange-500"}),"برنامج الشراكة"]})]}),e.jsx("div",{className:"hidden lg:flex items-center max-w-sm flex-1 mx-6",children:e.jsx(Za,{})}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(R,{variant:"ghost",size:"icon",className:"lg:hidden",children:e.jsx(Rt,{className:"h-5 w-5"})}),a&&(a.role==="admin"||a.isAffiliate||a.role==="merchant"||a.isIntermediary)&&e.jsxs(ke,{children:[e.jsx(Se,{asChild:!0,children:e.jsxs(R,{variant:"outline",size:"sm",className:"hidden md:flex items-center gap-2 font-semibold border-2",children:[a.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsx("span",{children:"لوحة التحكم"})]}),a.role==="merchant"&&e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:"لوحة التاجر"})]}),a.isAffiliate&&a.role!=="admin"&&a.role!=="merchant"&&a.role!=="intermediary"&&e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{children:"لوحة المسوق"})]}),a.isIntermediary&&a.role!=="admin"&&a.role!=="merchant"&&e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-4 w-4"}),e.jsx("span",{children:"لوحة الوسيط"})]})]})}),e.jsxs(we,{align:"end",className:"w-56",children:[a.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(f,{to:"/admin",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(ge,{className:"h-4 w-4"}),"لوحة الإدارة"]})}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/admin/products",className:"flex items-center gap-2 cursor-pointer",children:"إدارة المنتجات"})}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/admin/orders",className:"flex items-center gap-2 cursor-pointer",children:"إدارة الطلبات"})})]}),a.role==="merchant"&&e.jsxs(e.Fragment,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(f,{to:"/merchant/dashboard",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(je,{className:"h-4 w-4"}),"لوحة التاجر"]})}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/admin/products",className:"flex items-center gap-2 cursor-pointer",children:"منتجاتي"})})]}),a.isAffiliate&&e.jsxs(e.Fragment,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(f,{to:"/affiliate/dashboard",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(ue,{className:"h-4 w-4"}),"لوحة المسوق"]})}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/affiliate/analytics",className:"flex items-center gap-2 cursor-pointer",children:"التحليلات"})}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/affiliate/withdraw",className:"flex items-center gap-2 cursor-pointer",children:"سحب الأرباح"})})]}),a.isIntermediary&&e.jsxs(e.Fragment,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(f,{to:"/intermediary/dashboard",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(me,{className:"h-4 w-4"}),"لوحة الوسيط"]})}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/intermediary/products",className:"flex items-center gap-2 cursor-pointer",children:"منتجاتي"})}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/intermediary/links",className:"flex items-center gap-2 cursor-pointer",children:"روابطي"})})]}),e.jsx(X,{}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/orders",className:"flex items-center gap-2 cursor-pointer",children:"طلباتي"})}),e.jsx(O,{asChild:!0,children:e.jsxs(f,{to:"/wishlist",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(vt,{className:"h-4 w-4"}),"المفضلة"]})}),e.jsx(X,{}),e.jsxs(O,{onClick:i,className:"flex items-center gap-2 cursor-pointer text-red-600",children:[e.jsx(Wt,{className:"h-4 w-4"}),"تسجيل الخروج"]})]})]}),a&&e.jsx(Ni,{}),e.jsx(Ai,{}),e.jsx(Ei,{}),e.jsx(R,{variant:"ghost",size:"icon",asChild:!0,children:e.jsx(f,{to:"/wishlist",children:e.jsx(vt,{className:"h-5 w-5"})})}),e.jsx(R,{variant:"ghost",size:"icon",className:"relative",asChild:!0,children:e.jsxs(f,{to:"/cart",children:[e.jsx(qe,{className:"h-5 w-5"}),m>0&&e.jsx(re,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:m})]})}),e.jsxs(ke,{children:[e.jsx(Se,{asChild:!0,children:e.jsx(R,{variant:"ghost",size:"icon",children:e.jsx(Pt,{className:"h-5 w-5"})})}),e.jsx(we,{align:"end",className:"w-48",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"px-2 py-1.5 text-sm font-medium",children:["مرحباً، ",a.name]}),e.jsx(X,{}),a.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(f,{to:"/admin",className:"text-primary font-semibold",children:[e.jsx(ge,{className:"ml-2 h-4 w-4"}),"لوحة تحكم الإدارة"]})}),e.jsx(X,{})]}),a.isAffiliate&&e.jsxs(e.Fragment,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(f,{to:"/affiliate/dashboard",className:"text-orange-600 font-semibold",children:[e.jsx(ue,{className:"ml-2 h-4 w-4"}),"لوحة تحكم المسوق"]})}),e.jsx(X,{})]}),a.isMerchant&&e.jsxs(e.Fragment,{children:[e.jsx(O,{asChild:!0,children:e.jsxs(f,{to:"/merchant/dashboard",className:"text-purple-600 font-semibold",children:[e.jsx(je,{className:"ml-2 h-4 w-4"}),"لوحة تحكم التاجر"]})}),e.jsx(X,{})]}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/my-orders",children:"طلباتي"})}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/account",children:"حسابي"})}),a.isAffiliate&&e.jsxs(e.Fragment,{children:[e.jsx(X,{}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/affiliate/dashboard",className:"text-brand-orange",children:"لوحة تحكم الشراكة"})})]}),e.jsx(X,{}),e.jsxs(O,{onClick:()=>i(),children:[e.jsx(Wt,{className:"ml-2 h-4 w-4"}),"تسجيل الخروج"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/login",children:"تسجيل الدخول"})}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/register",children:"إنشاء حساب"})}),e.jsx(X,{}),e.jsx(O,{asChild:!0,children:e.jsx(f,{to:"/affiliate",className:"text-brand-orange",children:"برنامج الشراكة"})})]})})]})]})]})})}function ki(){aa.init({duration:1e3,easing:"ease-in-out",once:!0,mirror:!1,offset:100})}var _t=(s=>(s.CUSTOMER="customer",s.AFFILIATE="affiliate",s.MERCHANT="merchant",s.INTERMEDIARY="intermediary",s.ADMIN="admin",s.SUPER_ADMIN="super_admin",s))(_t||{}),ar=(s=>(s.VIEW_PRODUCTS="view_products",s.CREATE_PRODUCT="create_product",s.EDIT_OWN_PRODUCT="edit_own_product",s.EDIT_ANY_PRODUCT="edit_any_product",s.DELETE_OWN_PRODUCT="delete_own_product",s.DELETE_ANY_PRODUCT="delete_any_product",s.VIEW_OWN_ORDERS="view_own_orders",s.VIEW_ALL_ORDERS="view_all_orders",s.MANAGE_OWN_ORDERS="manage_own_orders",s.MANAGE_ALL_ORDERS="manage_all_orders",s.VIEW_AFFILIATE_STATS="view_affiliate_stats",s.GENERATE_AFFILIATE_LINKS="generate_affiliate_links",s.WITHDRAW_EARNINGS="withdraw_earnings",s.VIEW_CREATIVES="view_creatives",s.VIEW_MERCHANT_DASHBOARD="view_merchant_dashboard",s.MANAGE_INVENTORY="manage_inventory",s.VIEW_SALES_REPORTS="view_sales_reports",s.MANAGE_SHIPPING="manage_shipping",s.VIEW_INTERMEDIARY_DASHBOARD="view_intermediary_dashboard",s.IMPORT_PRODUCTS="import_products",s.SCRAPE_PRODUCTS="scrape_products",s.MANAGE_MARKUP="manage_markup",s.GENERATE_INTERMEDIARY_LINKS="generate_intermediary_links",s.VIEW_INTERMEDIARY_STATS="view_intermediary_stats",s.VIEW_ADMIN_DASHBOARD="view_admin_dashboard",s.MANAGE_USERS="manage_users",s.MANAGE_CATEGORIES="manage_categories",s.MANAGE_COUPONS="manage_coupons",s.MANAGE_COMMISSIONS="manage_commissions",s.VIEW_ANALYTICS="view_analytics",s.MANAGE_SETTINGS="manage_settings",s.APPROVE_ACCOUNTS="approve_accounts",s.PLACE_ORDER="place_order",s.VIEW_WISHLIST="view_wishlist",s.WRITE_REVIEW="write_review",s))(ar||{});const Si={customer:["view_products","view_own_orders","place_order","view_wishlist","write_review"],affiliate:["view_products","view_own_orders","place_order","view_wishlist","view_affiliate_stats","generate_affiliate_links","withdraw_earnings","view_creatives"],merchant:["view_products","create_product","edit_own_product","delete_own_product","view_own_orders","manage_own_orders","view_merchant_dashboard","manage_inventory","view_sales_reports","manage_shipping"],intermediary:["view_products","create_product","edit_own_product","delete_own_product","view_own_orders","manage_own_orders","view_intermediary_dashboard","import_products","scrape_products","manage_markup","generate_intermediary_links","view_intermediary_stats","place_order","view_wishlist"],admin:["view_products","create_product","edit_any_product","delete_any_product","view_all_orders","manage_all_orders","view_admin_dashboard","manage_users","manage_categories","manage_coupons","manage_commissions","view_analytics","approve_accounts"],super_admin:[...Object.values(ar)]};function Ii(s,t){return(Si[s]||[]).includes(t)}function gt(s){switch(s){case"admin":case"super_admin":return"/admin/dashboard";case"merchant":return"/merchant/dashboard";case"intermediary":return"/intermediary/dashboard";case"affiliate":return"/affiliate/dashboard";case"customer":default:return"/account"}}const Ri=Ue("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Et=l.forwardRef(({className:s,variant:t,...r},a)=>e.jsx("div",{ref:a,role:"alert",className:k(Ri({variant:t}),s),...r}));Et.displayName="Alert";const At=l.forwardRef(({className:s,...t},r)=>e.jsx("h5",{ref:r,className:k("mb-1 font-medium leading-none tracking-tight",s),...t}));At.displayName="AlertTitle";const Ct=l.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:k("text-sm [&_p]:leading-relaxed",s),...t}));Ct.displayName="AlertDescription";function D({children:s,requiredRole:t,requiredPermission:r,requireAuth:a=!0,fallbackPath:i}){const{user:c,loading:m,refreshUser:u}=Ne(),[N,h]=l.useState(!1);if(l.useEffect(()=>{if(c&&c.accountStatus==="pending"&&(t==="merchant"||t==="affiliate")){const p=setInterval(async()=>{await u()},3e4);return()=>clearInterval(p)}},[c,t,u]),m)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-purple-50 to-orange-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fe,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})});if(a&&!c){const p=window.location.pathname+window.location.search;return sessionStorage.setItem("redirectAfterLogin",p),e.jsx(Te,{to:"/login",state:{from:p},replace:!0})}if(r&&c){const p=c.role;if(!Ii(p,r))return e.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gradient-to-br from-red-50 to-orange-50",children:e.jsxs(Et,{variant:"destructive",className:"max-w-md",children:[e.jsx(Ir,{className:"h-5 w-5"}),e.jsx(At,{className:"text-xl font-bold",children:"🚫 غير مصرح"}),e.jsxs(Ct,{className:"mt-2",children:[e.jsx("p",{className:"mb-2 font-semibold",children:"ليس لديك صلاحية للوصول إلى هذه الصفحة."}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["الصفحة المطلوبة تحتاج صلاحية: ",e.jsx("strong",{children:r})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(R,{onClick:()=>window.location.href=gt(p),className:"btn-hover-lift",children:"العودة للوحة التحكم"}),e.jsx(R,{onClick:()=>window.location.href="/",variant:"outline",children:"الصفحة الرئيسية"})]})]})]})})}if(t&&c){const p=c.role;if(p===_t.ADMIN||p===_t.SUPER_ADMIN)return e.jsx(e.Fragment,{children:s});if(t==="intermediary"){if(!c.isIntermediary){const o=gt(p);return e.jsx(Te,{to:o,replace:!0})}}else if(t==="affiliate"){if(!c.isAffiliate)return e.jsx(Te,{to:"/affiliate",replace:!0})}else if(t==="merchant"){if(!c.isMerchant)return e.jsx(Te,{to:"/merchant",replace:!0})}else if(c.role!==t){const o=i||gt(p);return e.jsx(Te,{to:o,replace:!0})}if((t==="merchant"||t==="affiliate"||t==="intermediary")&&c.accountStatus!=="approved")return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-br from-yellow-50 to-orange-50",children:e.jsxs(Et,{className:"max-w-md border-yellow-500 bg-yellow-50",children:[e.jsx(Ze,{className:"h-5 w-5 text-yellow-600"}),e.jsx(At,{className:"text-xl font-bold text-yellow-900",children:"حسابك قيد المراجعة"}),e.jsxs(Ct,{className:"mt-2 text-yellow-800",children:[e.jsx("p",{className:"mb-4",children:c.accountStatus==="pending"?"حسابك قيد المراجعة من قبل الإدارة. سيتم إشعارك عند الموافقة عبر البريد الإلكتروني.":c.accountStatus==="rejected"?`تم رفض حسابك. السبب: ${c.rejectionReason||"غير محدد"}. يمكنك التواصل مع الدعم الفني.`:"حالة حسابك غير معروفة. يرجى التواصل مع الدعم الفني."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(R,{onClick:async()=>{h(!0),await u(),h(!1)},variant:"default",className:"flex items-center gap-2",disabled:N,children:[e.jsx(Tt,{className:`h-4 w-4 ${N?"animate-spin":""}`}),N?"جاري التحديث...":"تحديث الحالة"]}),e.jsx(R,{onClick:()=>window.location.href="/",variant:"outline",children:"الصفحة الرئيسية"}),e.jsx(R,{onClick:()=>window.location.href="/contact",variant:"outline",children:"تواصل معنا"})]}),e.jsx("p",{className:"text-xs text-yellow-700 mt-3",children:"💡 يتم التحديث التلقائي كل 30 ثانية"})]})]})})}return e.jsx(e.Fragment,{children:s})}const oe=l.forwardRef(({className:s,type:t,...r},a)=>e.jsx("input",{type:t,className:k("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r}));oe.displayName="Input";const mt=l.forwardRef(({className:s,orientation:t="horizontal",decorative:r=!0,...a},i)=>e.jsx(Ps,{ref:i,decorative:r,orientation:t,className:k("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...a}));mt.displayName=Ps.displayName;function Pi(){return e.jsx("footer",{className:"bg-gradient-to-br from-purple-50 via-white to-orange-50 dark:from-neutral-900 dark:via-neutral-900 dark:to-neutral-900 border-t border-purple-100 dark:border-purple-900",children:e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(f,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-primary via-purple-600 to-secondary bg-clip-text text-transparent",children:"EgyGo"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"وجهتك الوحيدة للمنتجات عالية الجودة مع أفضل برنامج شراكة في الصناعة."}),e.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse",children:[e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-blue-100 hover:text-blue-600 dark:hover:bg-blue-900 transition-colors",children:e.jsx(Rr,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-sky-100 hover:text-sky-600 dark:hover:bg-sky-900 transition-colors",children:e.jsx(Pr,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-pink-100 hover:text-pink-600 dark:hover:bg-pink-900 transition-colors",children:e.jsx(Tr,{className:"h-4 w-4"})}),e.jsx(R,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-red-100 hover:text-red-600 dark:hover:bg-red-900 transition-colors",children:e.jsx(Dr,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"روابط سريعة"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(f,{to:"/about",className:"text-muted-foreground hover:text-primary transition-colors",children:"معلومات عنا"})}),e.jsx("li",{children:e.jsx(f,{to:"/contact",className:"text-muted-foreground hover:text-primary transition-colors",children:"اتصل بنا"})}),e.jsx("li",{children:e.jsx(f,{to:"/shipping",className:"text-muted-foreground hover:text-primary transition-colors",children:"معلومات الشحن"})}),e.jsx("li",{children:e.jsx(f,{to:"/returns",className:"text-muted-foreground hover:text-primary transition-colors",children:"الإرجاع والاستبدال"})}),e.jsx("li",{children:e.jsx(f,{to:"/faq",className:"text-muted-foreground hover:text-primary transition-colors",children:"الأسئلة الشائعة"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold bg-gradient-to-r from-orange-500 to-yellow-500 bg-clip-text text-transparent",children:"برنامج الشراكة"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(f,{to:"/affiliate",className:"text-muted-foreground hover:text-secondary transition-colors",children:"انضم كشريك"})}),e.jsx("li",{children:e.jsx(f,{to:"/affiliate/dashboard",className:"text-muted-foreground hover:text-secondary transition-colors",children:"لوحة تحكم الشراكة"})}),e.jsx("li",{children:e.jsx(f,{to:"/affiliate/resources",className:"text-muted-foreground hover:text-secondary transition-colors",children:"مصادر التسويق"})}),e.jsx("li",{children:e.jsx(f,{to:"/affiliate/commission",className:"text-muted-foreground hover:text-secondary transition-colors",children:"هيكل العمولة"})}),e.jsx("li",{children:e.jsx(f,{to:"/affiliate/support",className:"text-muted-foreground hover:text-secondary transition-colors",children:"دعم الشركاء"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"ابق على اطلاع"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"اشترك للحصول على عروض خاصة وهدايا مجانية وفرص شراكة."}),e.jsxs("div",{className:"flex space-x-2 rtl:space-x-reverse",children:[e.jsx(oe,{placeholder:"أدخل بريدك الإلكتروني",type:"email",className:"flex-1"}),e.jsxs(R,{size:"sm",className:"bg-gradient-to-r from-primary to-secondary hover:from-purple-700 hover:to-orange-600",children:[e.jsx(Dt,{className:"h-4 w-4 ml-2 rtl:ml-0 rtl:mr-2"}),"اشترك"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"بالاشتراك، فإنك توافق على سياسة الخصوصية وشروط الخدمة."})]})]}),e.jsx(mt,{className:"my-8"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center text-sm text-muted-foreground",children:[e.jsx("p",{children:"© 2024 EgyGo. جميع الحقوق محفوظة."}),e.jsxs("div",{className:"flex space-x-4 rtl:space-x-reverse mt-4 sm:mt-0",children:[e.jsx(f,{to:"/privacy",className:"hover:text-primary transition-colors",children:"سياسة الخصوصية"}),e.jsx(f,{to:"/terms",className:"hover:text-primary transition-colors",children:"شروط الخدمة"}),e.jsx(f,{to:"/cookies",className:"hover:text-primary transition-colors",children:"سياسة ملفات تعريف الارتباط"})]})]})]})})}function Ti({className:s}){return null}function Di({className:s}){const[t,r]=l.useState(!1);l.useEffect(()=>{const i=()=>{r(window.scrollY>320)};return i(),window.addEventListener("scroll",i,{passive:!0}),()=>{window.removeEventListener("scroll",i)}},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsx("button",{type:"button",onClick:a,"aria-label":"العودة لأعلى الصفحة",className:k("fixed bottom-6 end-6 z-40 inline-flex h-11 w-11 items-center justify-center rounded-full","bg-primary text-primary-foreground shadow-lg transition-all","hover:shadow-xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","focus-visible:ring-primary",t?"opacity-100 scale-100":"pointer-events-none opacity-0 scale-95",s),children:e.jsx(Or,{className:"h-5 w-5"})})}const ir=l.createContext(void 0);function Oi({children:s}){const{user:t}=Ne(),[r,a]=l.useState([]),[i,c]=l.useState(!0);l.useEffect(()=>{m()},[t]);const m=async()=>{try{if(c(!0),t)try{const o=(await A.listDocuments(C.databaseId,C.collections.favorites,[I.equal("userId",t.$id),I.limit(100)])).documents.map(n=>n.productId);a(o)}catch(p){console.error("Error loading favorites from Appwrite:",p);const o=localStorage.getItem("favorites");o&&a(JSON.parse(o))}else{const p=localStorage.getItem("favorites");p&&a(JSON.parse(p))}}catch(p){console.error("Error loading favorites:",p)}finally{c(!1)}},u=async p=>{console.log("🔵 addFavorite called for:",p,"User:",t==null?void 0:t.$id);try{if(t)try{await A.createDocument(C.databaseId,C.collections.favorites,tt.unique(),{userId:t.$id,productId:p,createdAt:new Date().toISOString()})}catch(n){console.error("Error saving to Appwrite:",n)}const o=[...r,p];a(o),localStorage.setItem("favorites",JSON.stringify(o)),console.log("✅ Favorite added successfully. New favorites:",o)}catch(o){throw console.error("Error adding favorite:",o),o}},N=async p=>{console.log("🔴 removeFavorite called for:",p);try{if(t)try{const n=await A.listDocuments(C.databaseId,C.collections.favorites,[I.equal("userId",t.$id),I.equal("productId",p)]);n.documents.length>0&&await A.deleteDocument(C.databaseId,C.collections.favorites,n.documents[0].$id)}catch(n){console.error("Error removing from Appwrite:",n)}const o=r.filter(n=>n!==p);a(o),localStorage.setItem("favorites",JSON.stringify(o)),console.log("✅ Favorite removed successfully. New favorites:",o)}catch(o){throw console.error("Error removing favorite:",o),o}},h=p=>r.includes(p);return e.jsx(ir.Provider,{value:{favorites:r,addFavorite:u,removeFavorite:N,isFavorite:h,loading:i},children:s})}function uo(){const s=l.useContext(ir);if(s===void 0)throw new Error("useFavorites must be used within a FavoritesProvider");return s}const Z=l.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:k("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));Z.displayName="Card";const ve=l.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:k("flex flex-col space-y-1.5 p-6",s),...t}));ve.displayName="CardHeader";const be=l.forwardRef(({className:s,...t},r)=>e.jsx("h3",{ref:r,className:k("text-2xl font-semibold leading-none tracking-tight",s),...t}));be.displayName="CardTitle";const $t=l.forwardRef(({className:s,...t},r)=>e.jsx("p",{ref:r,className:k("text-sm text-muted-foreground",s),...t}));$t.displayName="CardDescription";const se=l.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:k("p-6 pt-0",s),...t}));se.displayName="CardContent";const $i=l.forwardRef(({className:s,...t},r)=>e.jsx("div",{ref:r,className:k("flex items-center p-6 pt-0",s),...t}));$i.displayName="CardFooter";const J={title:"إيجي جو - تسوق أونلاين في مصر | منتجات أصلية بأفضل الأسعار",description:"تسوق الآن من إيجي جو واحصل على أفضل المنتجات بأسعار تنافسية. شحن سريع لجميع أنحاء مصر، دفع عند الاستلام، وضمان على جميع المنتجات. انضم لبرنامج التسويق بالعمولة واكسب حتى 25%",keywords:"تسوق أونلاين, تسوق في مصر, شراء اونلاين, منتجات مصرية, التسوق الالكتروني, دفع عند الاستلام, شحن مجاني, تسويق بالعمولة, افلييت مصر, egygo, ايجي جو",image:"https://egygo.me/og-image.jpg",siteUrl:"https://egygo.me",siteName:"إيجي جو"};function Li({title:s,description:t,keywords:r,image:a,type:i="website",price:c,currency:m="EGP",availability:u,brand:N,sku:h,rating:p,reviewCount:o,category:n}){const b=ct(),g=`${J.siteUrl}${b.pathname}`,d=s?`${s} | ${J.siteName}`:J.title,x=t||J.description,_=r||J.keywords,S=a||J.image,L=i==="product"&&c?{"@context":"https://schema.org","@type":"Product",name:s,description:x,brand:N?{"@type":"Brand",name:N}:void 0,sku:h,category:n,image:S,offers:{"@type":"Offer",price:c,priceCurrency:m,availability:u==="in stock"?"https://schema.org/InStock":"https://schema.org/OutOfStock"}}:null,G={"@context":"https://schema.org","@type":"Organization",name:J.siteName,url:J.siteUrl,logo:`${J.siteUrl}/logo.png`,description:J.description,sameAs:["https://www.facebook.com/egygo","https://www.instagram.com/egygo","https://twitter.com/egygo"],contactPoint:{"@type":"ContactPoint",contactType:"Customer Service",telephone:"+20-123-456-7890",email:"support@egygo.com",availableLanguage:["ar","en"]}},q={"@context":"https://schema.org","@type":"WebSite",name:J.siteName,url:J.siteUrl,potentialAction:{"@type":"SearchAction",target:{"@type":"EntryPoint",urlTemplate:`${window.location.origin}/#/products?search={search_term_string}`},"query-input":"required name=search_term_string"}},j=b.pathname.split("/").filter(Boolean),P=j.length>0?{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"الرئيسية",item:J.siteUrl},...j.map((F,T)=>({"@type":"ListItem",position:T+2,name:F,item:`${J.siteUrl}/${j.slice(0,T+1).join("/")}`}))]}:null;return e.jsxs($r,{children:[e.jsx("html",{lang:"ar",dir:"rtl"}),e.jsx("title",{children:d}),e.jsx("meta",{name:"description",content:x}),e.jsx("meta",{name:"keywords",content:_}),e.jsx("meta",{property:"og:type",content:i}),e.jsx("meta",{property:"og:url",content:g}),e.jsx("meta",{property:"og:title",content:d}),e.jsx("meta",{property:"og:description",content:x}),e.jsx("meta",{property:"og:image",content:S}),e.jsx("meta",{property:"og:site_name",content:J.siteName}),e.jsx("meta",{property:"og:locale",content:"ar_EG"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:url",content:g}),e.jsx("meta",{name:"twitter:title",content:d}),e.jsx("meta",{name:"twitter:description",content:x}),e.jsx("meta",{name:"twitter:image",content:S}),e.jsx("meta",{name:"robots",content:"index, follow"}),e.jsx("meta",{name:"googlebot",content:"index, follow"}),e.jsx("meta",{name:"language",content:"Arabic"}),e.jsx("meta",{name:"author",content:J.siteName}),e.jsx("link",{rel:"canonical",href:g}),e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=5"}),e.jsx("meta",{name:"mobile-web-app-capable",content:"yes"}),e.jsx("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),e.jsx("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(G)}),e.jsx("script",{type:"application/ld+json",children:JSON.stringify(q)}),P&&e.jsx("script",{type:"application/ld+json",children:JSON.stringify(P)}),L&&e.jsx("script",{type:"application/ld+json",children:JSON.stringify(L)})]})}const Mi={home:()=>({title:"إيجي جو - تسوق أونلاين في مصر",description:"أفضل موقع تسوق أونلاين في مصر. منتجات أصلية، أسعار تنافسية، شحن سريع، دفع عند الاستلام. انضم لبرنامج التسويق بالعمولة واكسب حتى 25%",keywords:"تسوق أونلاين مصر, شراء اونلاين, افضل موقع تسوق, egygo"}),products:s=>({title:s?`تسوق ${s}`:"تسوق جميع المنتجات",description:`اكتشف مجموعة واسعة من ${s||"المنتجات"} بأفضل الأسعار. شحن سريع لجميع أنحاء مصر ودفع عند الاستلام`,keywords:`${s||"منتجات"}, تسوق ${s||"اونلاين"}, شراء ${s||"منتجات"} مصر`}),affiliate:()=>({title:"برنامج التسويق بالعمولة - اكسب حتى 25%",description:"انضم لبرنامج التسويق بالعمولة من إيجي جو واكسب عمولة تصل إلى 25% على كل عملية بيع. أدوات تسويقية احترافية، دعم مستمر، وسحب أرباح سريع",keywords:"تسويق بالعمولة, افلييت مصر, اكسب من الانترنت, عمولة تسويق, affiliate egypt"}),merchant:()=>({title:"انضم كتاجر - بيع منتجاتك على إيجي جو",description:"ابدأ البيع على إيجي جو واصل لآلاف العملاء في مصر. لوحة تحكم احترافية، تقارير مفصلة، ودعم تقني متواصل",keywords:"بيع منتجات اونلاين, تجارة الكترونية مصر, merchant egypt, بائع اونلاين"}),login:()=>({title:"تسجيل الدخول - إيجي جو",description:"سجل دخولك لحسابك في إيجي جو وابدأ التسوق الآن",keywords:"تسجيل دخول, login egygo"}),register:()=>({title:"إنشاء حساب جديد - إيجي جو",description:"أنشئ حسابك المجاني في إيجي جو وابدأ التسوق أو التسويق بالعمولة",keywords:"انشاء حساب, تسجيل جديد, register egygo"}),cart:()=>({title:"عربة التسوق",description:"راجع منتجاتك وأكمل عملية الشراء بسهولة",keywords:"عربة التسوق, سلة المشتريات, cart"}),checkout:()=>({title:"إتمام الطلب",description:"أكمل طلبك الآن. دفع عند الاستلام متاح لجميع أنحاء مصر",keywords:"اتمام الطلب, checkout, دفع عند الاستلام"})};function Lt({size:s="medium",interactive:t=!0,autoRotate:r=!0,showParticles:a=!0,colorScheme:i="gradient"}){const c=l.useRef(null),m=l.useRef(),u=l.useRef(),N=l.useRef(),h=l.useRef(),p=l.useRef(),[o,n]=l.useState(!1),b=()=>{switch(s){case"small":return{width:200,height:100,fontSize:30};case"large":return{width:600,height:300,fontSize:90};default:return{width:400,height:200,fontSize:60}}};return l.useEffect(()=>{if(!c.current)return;const g=b(),d=new ma;d.background=null,m.current=d;const x=new ua(75,g.width/g.height,.1,1e3);x.position.z=5,N.current=x;const _=new ha({antialias:!0,alpha:!0});_.setSize(g.width,g.height),_.setPixelRatio(window.devicePixelRatio),c.current.appendChild(_.domElement),u.current=_;const S=new pa(16777215,.4);d.add(S);const L=new Yt(9133302,.8);L.position.set(5,5,5),d.add(L);const G=new Yt(15485081,.6);G.position.set(-5,-5,5),d.add(G);const q=new xa(3900150,1,100);q.position.set(0,0,10),d.add(q);const j=new fa;h.current=j,d.add(j),new ga().load("https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",M=>{const z=new ja("EgyGo",{font:M,size:.8,height:.3,curveSegments:12,bevelEnabled:!0,bevelThickness:.05,bevelSize:.02,bevelOffset:0});z.computeBoundingBox();const H=-.5*(z.boundingBox.max.x-z.boundingBox.min.x);z.translate(H,0,0);const ee=new Xt({color:i==="gradient"?9133302:i==="neon"?65280:3900150,emissive:i==="neon"?65280:9133302,emissiveIntensity:i==="neon"?.5:.2,shininess:100,specular:16777215}),$=new ht(z,ee);j.add($);const ne=new ya({color:16766720,side:wa}),W=new ht(z,ne);W.scale.multiplyScalar(1.05),j.add(W)},void 0,M=>{console.error("Error loading font:",M),F()});const F=()=>{[{text:"E",x:-2,color:9133302},{text:"g",x:-1,color:15485081},{text:"y",x:0,color:3900150},{text:"G",x:1,color:16096779},{text:"o",x:2,color:16766720}].forEach(({text:z,x:H,color:ee})=>{const $=new va(.6,1.2,.3),ne=new Xt({color:ee,emissive:ee,emissiveIntensity:.2,shininess:100,specular:16777215}),W=new ht($,ne);W.position.set(H*.7,0,0),j.add(W)})},T=new Zt,V=20,E=new Float32Array(V*6);for(let M=0;M<V;M++){const z=M/V*Math.PI*2,H=.4;E[M*6]=1.2+Math.cos(z)*H,E[M*6+1]=Math.sin(z)*H,E[M*6+2]=.2,E[M*6+3]=1.2+Math.cos(z)*(H+.5),E[M*6+4]=Math.sin(z)*H,E[M*6+5]=.2-.3}T.setAttribute("position",new pt(E,3));const ie=new ba({color:16766720,opacity:.6,transparent:!0,linewidth:2}),le=new Na(T,ie);if(j.add(le),a){const M=new Zt,z=500,H=new Float32Array(z*3),ee=new Float32Array(z*3);for(let W=0;W<z*3;W+=3){H[W]=(Math.random()-.5)*10,H[W+1]=(Math.random()-.5)*10,H[W+2]=(Math.random()-.5)*10;const ce=new _a;ce.setHSL(Math.random()*.3+.5,1,.5),ee[W]=ce.r,ee[W+1]=ce.g,ee[W+2]=ce.b}M.setAttribute("position",new pt(H,3)),M.setAttribute("color",new pt(ee,3));const $=new Ea({size:.05,vertexColors:!0,transparent:!0,opacity:.8,blending:Aa}),ne=new Ca(M,$);p.current=ne,d.add(ne)}let K=null;t&&(K=new ka(x,_.domElement),K.enableDamping=!0,K.dampingFactor=.05,K.enableZoom=!1,K.autoRotate=r,K.autoRotateSpeed=2);const We=()=>{r&&j&&de.to(j.rotation,{y:Math.PI*2,duration:10,repeat:-1,ease:"none"}),de.to(j.scale,{x:1.05,y:1.05,z:1.05,duration:2,repeat:-1,yoyo:!0,ease:"power2.inOut"})};setTimeout(()=>{We()},500);const Ie=M=>{if(!t)return;const z=_.domElement.getBoundingClientRect(),H=(M.clientX-z.left)/z.width*2-1,ee=-((M.clientY-z.top)/z.height)*2+1;j&&de.to(j.rotation,{y:H*.5,x:ee*.3,duration:.5,ease:"power2.out"})};_.domElement.addEventListener("mousemove",Ie),_.domElement.addEventListener("mouseenter",()=>n(!0)),_.domElement.addEventListener("mouseleave",()=>{n(!1),j&&de.to(j.rotation,{x:0,y:0,duration:.5,ease:"power2.out"})});const Ge=new Sa,Re=()=>{requestAnimationFrame(Re);const M=Ge.getElapsedTime();!t&&r&&j&&(j.rotation.y=M*.5),p.current&&(p.current.rotation.y=M*.1,p.current.rotation.x=M*.05),j&&(j.position.y=Math.sin(M*2)*.1),K&&K.update(),_.render(d,x)};return Re(),()=>{_.domElement.removeEventListener("mousemove",Ie),c.current&&_.domElement&&c.current.removeChild(_.domElement),_.dispose()}},[s,t,r,a,i]),e.jsxs(He.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"relative inline-block",children:[e.jsx("div",{ref:c,className:`
          ${o?"cursor-grab":"cursor-pointer"}
          transition-all duration-300
          ${o?"drop-shadow-2xl":"drop-shadow-lg"}
        `,style:{filter:o?"drop-shadow(0 0 30px rgba(139, 92, 246, 0.5))":"drop-shadow(0 0 15px rgba(139, 92, 246, 0.3))"}}),e.jsx("div",{className:"absolute inset-0 -z-10 blur-3xl opacity-30",style:{background:"radial-gradient(circle, #8b5cf6 0%, #ec4899 50%, transparent 70%)"}})]})}function ho({size:s="medium",animated:t=!0}){const r={small:"text-2xl",medium:"text-4xl",large:"text-6xl"};return e.jsxs(He.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:`font-bold ${r[s]} relative inline-block`,children:[e.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Egy"}),e.jsx("span",{className:"bg-gradient-to-r from-pink-600 to-red-600 bg-clip-text text-transparent",children:"G"}),e.jsx(He.span,{animate:t?{rotate:[0,360],scale:[1,1.2,1]}:{},transition:{duration:2,repeat:1/0,ease:"linear"},className:"inline-block bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent",children:"o"}),t&&e.jsx(He.div,{className:"absolute -right-8 top-1/2 -translate-y-1/2",animate:{opacity:[0,1,0],x:[0,20,40]},transition:{duration:1.5,repeat:1/0,ease:"easeOut"},children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-0.5 w-8 bg-gradient-to-r from-yellow-400 to-transparent"}),e.jsx("div",{className:"h-0.5 w-6 bg-gradient-to-r from-orange-400 to-transparent"}),e.jsx("div",{className:"h-0.5 w-4 bg-gradient-to-r from-red-400 to-transparent"})]})})]})}function Fi({products:s,title:t,subtitle:r,variant:a="default",autoplay:i=!0,slidesPerView:c=4}){var o;const m=l.useRef(null),u=()=>{const n={modules:[ts,Ia,Ra,Pa,ss,es],spaceBetween:20,navigation:!0,pagination:{clickable:!0,dynamicBullets:!0},autoplay:i?{delay:3e3,disableOnInteraction:!1,pauseOnMouseEnter:!0}:!1,breakpoints:{320:{slidesPerView:1},640:{slidesPerView:2},768:{slidesPerView:3},1024:{slidesPerView:c}}};switch(a){case"coverflow":return{...n,effect:"coverflow",grabCursor:!0,centeredSlides:!0,slidesPerView:"auto",coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0}};case"cards":return{...n,effect:"cards",grabCursor:!0,cardsEffect:{slideShadows:!0}};case"thumbs":return{...n,thumbs:{swiper:m.current}};default:return n}},N=n=>{ut.success(`تمت إضافة ${n.name} إلى السلة`)},h=n=>{ut.success(`تمت إضافة ${n.name} إلى المفضلة`)},p=n=>{ut.info(`عرض سريع لـ ${n.name}`)};return e.jsxs("div",{className:"swiper-product-slider py-8",children:[(t||r)&&e.jsxs("div",{className:"text-center mb-8",children:[t&&e.jsx("h2",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-primary to-purple-600 bg-clip-text text-transparent",children:t}),r&&e.jsx("p",{className:"text-muted-foreground",children:r})]}),a==="thumbs"&&((o=s[0])==null?void 0:o.images)&&e.jsx("div",{className:"mb-4",children:e.jsx(Gt,{onSwiper:n=>{m.current=n},spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0,modules:[es,ts,ss],className:"thumbs-swiper h-24",children:s[0].images.map((n,b)=>e.jsx(Ht,{children:e.jsx("img",{src:n,alt:`Thumb ${b}`,className:"w-full h-full object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity"})},b))})}),e.jsx(Gt,{...u(),className:"product-swiper",children:s.map(n=>e.jsx(Ht,{children:e.jsxs(Z,{className:"group relative overflow-hidden hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2",children:[n.badge&&e.jsx(re,{className:"absolute top-2 right-2 z-10 animate-pulse",children:n.badge}),n.discount&&e.jsxs(re,{variant:"destructive",className:"absolute top-2 left-2 z-10",children:["-",n.discount,"%"]}),e.jsxs("div",{className:"relative h-64 overflow-hidden",children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center gap-2",children:[e.jsx(R,{size:"icon",variant:"secondary",className:"transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300",onClick:()=>p(n),children:e.jsx(et,{className:"h-4 w-4"})}),e.jsx(R,{size:"icon",variant:"secondary",className:"transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300 delay-75",onClick:()=>h(n),children:e.jsx(vt,{className:"h-4 w-4"})}),e.jsx(R,{size:"icon",className:"transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300 delay-150",onClick:()=>N(n),children:e.jsx(qe,{className:"h-4 w-4"})})]})]}),e.jsxs(se,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-2 group-hover:text-primary transition-colors",children:n.name}),e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((b,g)=>e.jsx(Ts,{className:`h-4 w-4 ${g<Math.floor(n.rating)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},g))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",n.reviews,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[n.price," ج.م"]}),n.originalPrice&&e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:[n.originalPrice," ج.م"]})]}),n.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:n.description})]})]})},n.id))}),e.jsx("style",{children:`
        .product-swiper .swiper-button-next,
        .product-swiper .swiper-button-prev {
          background: rgba(255, 255, 255, 0.9);
          width: 40px;
          height: 40px;
          border-radius: 50%;
          box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .product-swiper .swiper-button-next:after,
        .product-swiper .swiper-button-prev:after {
          font-size: 20px;
          color: #333;
        }
        
        .product-swiper .swiper-pagination-bullet {
          background: #8b5cf6;
        }
        
        .product-swiper .swiper-pagination-bullet-active {
          background: #7c3aed;
          width: 24px;
          border-radius: 4px;
        }

        .thumbs-swiper .swiper-slide-thumb-active {
          border: 2px solid #8b5cf6;
          border-radius: 8px;
        }
      `})]})}de.registerPlugin(Ls);function Vi(){l.useEffect(()=>{document.querySelector(".hero-content")&&de.from(".hero-content",{opacity:0,y:50,duration:1,ease:"power3.out"});const p=document.querySelectorAll(".feature-card"),o=document.querySelector(".features-section");p.length>0&&o&&de.from(".feature-card",{opacity:0,y:30,duration:.8,stagger:.2,scrollTrigger:{trigger:".features-section",start:"top 80%"}});const n=document.querySelectorAll(".product-card"),b=document.querySelector(".products-section");n.length>0&&b&&de.from(".product-card",{opacity:0,scale:.9,y:30,duration:.6,stagger:.1,scrollTrigger:{trigger:".products-section",start:"top 80%"}})},[]);const{data:s,isLoading:t}=$e({queryKey:Qe.categories,queryFn:Gs.getAll}),{data:r,isLoading:a}=$e({queryKey:[...Qe.products,"featured"],queryFn:()=>Ve.getAll({sortBy:"featured",limit:4})}),{data:i,isLoading:c}=$e({queryKey:[...Qe.products,"bestsellers"],queryFn:()=>Ve.getAll({sortBy:"rating",limit:4})}),m=(s==null?void 0:s.categories)||[],u=(r==null?void 0:r.products)||[],N=(i==null?void 0:i.products.filter(h=>h.reviewCount>50))||[];return t||a?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(Fe,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-16 pb-16",children:[e.jsx(Li,{...Mi.home()}),e.jsxs("section",{className:"relative bg-gradient-to-br from-primary via-purple-600 to-secondary text-white overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-black/10"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-25 scale-[2] blur-[1px]",children:e.jsx("div",{className:"w-full h-full flex items-center justify-center animate-[spin_60s_linear_infinite]",children:e.jsx(Lt,{size:"large",interactive:!1,autoRotate:!0,showParticles:!1,colorScheme:"gradient"})})}),e.jsx("div",{className:"relative container mx-auto px-4 py-24 lg:py-32 z-10",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"space-y-8 hero-content",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(re,{variant:"secondary",className:"text-primary bg-gradient-to-r from-white to-yellow-50 shadow-lg",children:"✨ منتجات مميزة"}),e.jsxs("h1",{className:"text-4xl lg:text-6xl font-bold leading-tight",children:["تسوق بذكاء،",e.jsx("span",{className:"bg-gradient-to-r from-yellow-300 to-orange-300 bg-clip-text text-transparent",children:" اربح أكثر"})]}),e.jsx("p",{className:"text-xl text-white/90 max-w-lg",children:"اكتشف مجموعة متنوعة من المنتجات عالية الجودة وانضم لبرنامج الشراكة لتحقيق دخل إضافي مميز."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(R,{size:"lg",variant:"secondary",className:"text-primary font-semibold btn-hover-lift",asChild:!0,children:e.jsxs(f,{to:"/products",children:["تسوق الآن",e.jsx(Ee,{className:"mr-2 h-5 w-5 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})}),e.jsx(R,{size:"lg",variant:"outline",className:"bg-white/10 border-white/30 text-white hover:bg-white/20 btn-hover-lift",asChild:!0,children:e.jsxs(f,{to:"/affiliate",children:[e.jsx(me,{className:"ml-2 h-5 w-5 rtl:ml-0 rtl:mr-2"}),"انضم لبرنامج الشراكة"]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-8",children:[e.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20 hover:bg-white/20 transition-all",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-300",children:"+10K"}),e.jsx("div",{className:"text-sm text-white/80",children:"عميل راضي"})]}),e.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20 hover:bg-white/20 transition-all",children:[e.jsx("div",{className:"text-2xl font-bold text-green-300",children:"+500"}),e.jsx("div",{className:"text-sm text-white/80",children:"منتج"})]}),e.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20 hover:bg-white/20 transition-all",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-300",children:"+1K"}),e.jsx("div",{className:"text-sm text-white/80",children:"مسوق"})]})]})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center",children:[e.jsx("div",{className:"space-y-4",children:u.slice(0,2).map((h,p)=>{var o;return e.jsx(f,{to:`/product/${h.id}`,children:e.jsx(Z,{className:"bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 hover:scale-105 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-xl",children:e.jsxs(se,{className:"p-4",children:[e.jsx("img",{src:Ae((o=h.images)==null?void 0:o[0]),alt:h.name,className:"w-full h-32 object-cover rounded-lg mb-3"}),e.jsx("h3",{className:"font-semibold text-white text-sm",children:h.name}),e.jsxs("p",{className:"text-brand-yellow font-bold",children:["$",h.price]})]})})},h.id)})}),e.jsx("div",{className:"space-y-4 mt-8",children:u.slice(2,4).map((h,p)=>{var o;return e.jsx(f,{to:`/product/${h.id}`,children:e.jsx(Z,{className:"bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 hover:scale-105 transition-all duration-300 cursor-pointer shadow-lg hover:shadow-xl",children:e.jsxs(se,{className:"p-4",children:[e.jsx("img",{src:Ae((o=h.images)==null?void 0:o[0]),alt:h.name,className:"w-full h-32 object-cover rounded-lg mb-3"}),e.jsx("h3",{className:"font-semibold text-white text-sm",children:h.name}),e.jsxs("p",{className:"text-brand-yellow font-bold",children:["$",h.price]})]})})},h.id)})})]})})]})})]}),e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12 space-y-2",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"تسوق حسب الفئة"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"اكتشف مجموعتنا الواسعة من المنتجات عبر فئات مختلفة"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:m.filter(h=>h.slug).map(h=>e.jsx(f,{to:`/products?category=${h.slug}`,className:"group",children:e.jsxs(Z,{className:"overflow-hidden card-hover group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:h.image||Ke.category(h.name),alt:h.name,className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-colors"})]}),e.jsxs(se,{className:"p-4 text-center",children:[e.jsx("h3",{className:"font-semibold mb-1",children:h.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[h.productCount," منتج"]})]})]})},h.id))})]}),e.jsxs("section",{className:"container mx-auto px-4 products-section",children:[e.jsxs("div",{className:"flex justify-between items-center mb-12",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"المنتجات المميزة"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"منتجات مختارة بعناية خصيصًا لك"})]}),e.jsx(R,{variant:"outline",asChild:!0,children:e.jsxs(f,{to:"/products",children:["عرض الكل",e.jsx(Ee,{className:"mr-2 h-4 w-4 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})})]}),u.length>0&&e.jsx(Fi,{products:u.map(h=>{var p;return{id:h.id,name:h.name,price:h.price,originalPrice:h.originalPrice,image:Ae((p=h.images)==null?void 0:p[0]),rating:h.rating,reviews:h.reviewCount,badge:h.originalPrice&&h.originalPrice>h.price?`وفر $${(h.originalPrice-h.price).toFixed(0)}`:void 0,description:h.description||""}}),variant:"cards",autoplay:!0})]}),e.jsx("section",{className:"bg-gradient-to-r from-brand-orange to-brand-purple text-white",children:e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(re,{variant:"secondary",className:"text-brand-orange bg-white/90",children:"💰 برنامج الشراكة"}),e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold",children:"ابدأ تكسب دلوقتي مع برنامج الشراكة"}),e.jsx("p",{className:"text-xl text-white/90",children:"انضم لآلاف المسوقين الناجحين واكسب عمولة لحد 25% على كل عملية بيع تيجي منك. الانضمام مجاني وعندنا كل الأدوات اللي تحتاجها عشان تنجح."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[e.jsx(ue,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("div",{className:"font-bold text-lg",children:"لحد 25%"}),e.jsx("div",{className:"text-sm text-white/80",children:"عمولة"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[e.jsx(me,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("div",{className:"font-bold text-lg",children:"+1000"}),e.jsx("div",{className:"text-sm text-white/80",children:"مسوق نشط"})]}),e.jsxs("div",{className:"text-center p-4 bg-white/10 rounded-lg backdrop-blur-sm",children:[e.jsx(Kt,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("div",{className:"font-bold text-lg",children:"+10 مليون جنيه"}),e.jsx("div",{className:"text-sm text-white/80",children:"اتدفع عمولات"})]})]}),e.jsx(R,{size:"lg",variant:"secondary",className:"text-primary font-semibold",asChild:!0,children:e.jsxs(f,{to:"/affiliate",children:["انضم لبرنامج الشراكة",e.jsx(Ee,{className:"mr-2 h-5 w-5 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})})]}),e.jsx("div",{className:"relative",children:e.jsxs(Z,{className:"bg-white/10 backdrop-blur-sm border-white/20 p-6",children:[e.jsx(ve,{children:e.jsx(be,{className:"text-white",children:"لماذا تختار برنامجنا؟"})}),e.jsxs(se,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-yellow flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-bold text-primary",children:"✓"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"معدلات عمولة عالية"}),e.jsx("p",{className:"text-white/80 text-sm",children:"اكسب 8-25% عمولة على جميع المبيعات"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-yellow flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-bold text-primary",children:"✓"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"تتبع فوري"}),e.jsx("p",{className:"text-white/80 text-sm",children:"راقب أداءك وأرباحك مباشرة"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-yellow flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-bold text-primary",children:"✓"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"دعم تسويقي"}),e.jsx("p",{className:"text-white/80 text-sm",children:"احصل على بانرات وروابط ومواد ترويجية"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-brand-yellow flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-xs font-bold text-primary",children:"✓"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"دفعات سريعة"}),e.jsx("p",{className:"text-white/80 text-sm",children:"دفعات أسبوعية عبر PayPal أو التحويل البنكي"})]})]})]})]})})]})})}),N.length>0&&e.jsxs("section",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:"الأكثر مبيعًا"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"منتجاتنا الأكثر شعبية المحبوبة من العملاء حول العالم"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:N.slice(0,4).map(h=>{var p;return e.jsx(f,{to:`/product/${h.id}`,children:e.jsxs(Z,{className:"group overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:Ae((p=h.images)==null?void 0:p[0]),alt:h.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx(re,{className:"absolute top-2 left-2 bg-success text-success-foreground",children:"الأكثر مبيعًا"}),e.jsxs("div",{className:"absolute top-2 right-2 bg-brand-orange text-white text-xs px-2 py-1 rounded",children:[h.affiliateCommission,"% عمولة"]})]}),e.jsxs(se,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((o,n)=>e.jsx(Ts,{className:`h-4 w-4 ${n<Math.floor(h.rating)?"text-yellow-400 fill-current":"text-gray-300"}`},n))}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",h.reviewCount,")"]})]}),e.jsx("h3",{className:"font-semibold mb-2 line-clamp-2",children:h.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold",children:["$",h.price]}),h.originalPrice&&h.originalPrice>h.price&&e.jsxs("span",{className:"text-sm text-muted-foreground line-through",children:["$",h.originalPrice]})]})}),e.jsx(R,{size:"sm",children:e.jsx(qe,{className:"h-4 w-4"})})]})]})]})},h.id)})})]}),e.jsx("section",{className:"bg-muted/40",children:e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"grid gap-12 lg:grid-cols-[1.1fr_0.9fr] items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx(re,{className:"bg-primary/10 text-primary",children:"لماذا إيجي جو؟"}),e.jsx("h2",{className:"text-3xl lg:text-4xl font-bold leading-tight",children:"ثقة كاملة، دعم حقيقي، وتجربة تسوق ولا أسهل"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"بنقدم لك أقوى تجربة تسوق إلكتروني في مصر: منتجات أصلية مضمونة، دعم عربي 24/7، وسياسة إرجاع سهلة. هدفنا إنك تشتري وتكسب وأنت مطمن."}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:[{icon:Lr,title:"ضمان استرجاع 30 يوم",description:"في حالة المنتج مش مطابق للتوقعات، نرجعلك فلوسك بالكامل بدون أسئلة."},{icon:Mr,title:"شحن سريع داخل مصر",description:"شراكتنا مع أفضل شركات الشحن تضمن توصيل الطلب في 2-4 أيام عمل."},{icon:Fr,title:"خدمة عملاء ودعم تسويقي",description:"فريق عربي جاهز يساعدك بالهاتف، الواتساب، أو الإيميل طول اليوم."},{icon:Vr,title:"تتبع لحظي للطلبات",description:"تابع حالة الطلب لحظة بلحظة من حسابك أو عبر صفحة تتبع الطلبات."}].map(h=>e.jsx(Z,{className:"h-full",children:e.jsxs(se,{className:"flex h-full flex-col gap-3 p-5",children:[e.jsx("div",{className:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary",children:e.jsx(h.icon,{className:"h-5 w-5"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-lg font-semibold",children:h.title}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:h.description})]})]})},h.title))})]}),e.jsxs(Z,{className:"shadow-lg",children:[e.jsx(ve,{children:e.jsx(be,{className:"text-2xl",children:"آراء عملائنا"})}),e.jsxs(se,{className:"space-y-6",children:[[{name:"محمود السيد",role:"مسوق شريك",quote:"أرباحي زادت 3 أضعاف من أول شهر مع إيجي جو. لوحة التحكم واضحة، والعمولات بتتصرف في مواعيدها."},{name:"إسراء أحمد",role:"عميلة",quote:"تجربة الشراء كانت ممتازة، خدمة العملاء ساعدوني أختار الهدية المناسبة ووصلت في يومين."}].map(h=>e.jsxs("div",{className:"rounded-xl bg-muted/80 p-5",children:[e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["“",h.quote,"”"]}),e.jsxs("div",{className:"mt-4 text-sm font-semibold",children:[h.name,e.jsxs("span",{className:"ms-2 text-xs text-muted-foreground",children:["• ",h.role]})]})]},h.name)),e.jsxs("div",{className:"rounded-xl border border-dashed border-primary/50 p-5 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-1",children:"عايز تتأكد بنفسك؟"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"تواصل مع فريق الدعم أو اطلب مكالمة مجانية دلوقتي وهنرد عليك خلال دقائق."}),e.jsx(R,{asChild:!0,variant:"outline",children:e.jsx(f,{to:"/contact",children:"تواصل معنا الآن"})})]})]})]})]})})}),e.jsx("section",{className:"bg-gradient-to-r from-brand-purple via-primary to-brand-orange text-white",children:e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"inline-block",children:e.jsx(re,{variant:"secondary",className:"text-primary bg-white/90 text-lg px-4 py-2",children:"🏪 للتجار والبائعين"})}),e.jsxs("h2",{className:"text-3xl lg:text-5xl font-bold leading-tight",children:["هل لديك منتجات للبيع؟",e.jsx("br",{}),e.jsx("span",{className:"text-brand-yellow",children:"ابدأ البيع معنا!"})]}),e.jsx("p",{className:"text-xl text-white/90",children:"انضم إلى أكثر من 500 تاجر ناجح على إيجي جو. عمولات منخفضة (5-10%)، دفعات أسبوعية، ووصول لملايين العملاء المحتملين."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-6",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:"5-10%"}),e.jsx("div",{className:"text-sm text-white/80",children:"عمولة فقط"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:"+500"}),e.jsx("div",{className:"text-sm text-white/80",children:"تاجر نشط"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:"أسبوعي"}),e.jsx("div",{className:"text-sm text-white/80",children:"دفع الأرباح"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold mb-1",children:"مجاني"}),e.jsx("div",{className:"text-sm text-white/80",children:"بدون رسوم"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(R,{size:"lg",variant:"secondary",className:"text-primary font-semibold",asChild:!0,children:e.jsxs(f,{to:"/register?type=merchant",children:["ابدأ البيع الآن",e.jsx(Ee,{className:"mr-2 h-5 w-5 rtl:mr-0 rtl:ml-2 rtl:rotate-180"})]})}),e.jsx(R,{size:"lg",variant:"outline",className:"bg-white/10 border-white/30 text-white hover:bg-white/20",asChild:!0,children:e.jsx(f,{to:"/merchant",children:"اعرف المزيد"})})]})]}),e.jsx("div",{className:"relative",children:e.jsxs(Z,{className:"bg-white/10 backdrop-blur-sm border-white/20 p-6",children:[e.jsx(ve,{children:e.jsx(be,{className:"text-white text-2xl mb-4",children:"لماذا تبيع على إيجي جو؟"})}),e.jsxs(se,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(wt,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"عمولات منخفضة"}),e.jsx("p",{className:"text-sm text-white/80",children:"ادفع 5-10% فقط - أقل من المنافسين"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(qr,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"تحليلات متقدمة"}),e.jsx("p",{className:"text-sm text-white/80",children:"تتبع مبيعاتك وأدائك لحظياً"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(me,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"ملايين العملاء"}),e.jsx("p",{className:"text-sm text-white/80",children:"وصول لقاعدة عملاء ضخمة جاهزة للشراء"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-white/20 rounded-full p-2",children:e.jsx(Kt,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:"دعم مخصص"}),e.jsx("p",{className:"text-sm text-white/80",children:"فريق دعم متخصص لمساعدتك 24/7"})]})]})]})]})})]})})})]})}const qi=Ue("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),te=l.forwardRef(({className:s,...t},r)=>e.jsx(Ds,{ref:r,className:k(qi(),s),...t}));te.displayName=Ds.displayName;const st=l.forwardRef(({className:s,...t},r)=>e.jsx(Os,{ref:r,className:k("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(zr,{className:k("flex items-center justify-center text-current"),children:e.jsx(ze,{className:"h-4 w-4"})})}));st.displayName=Os.displayName;de.registerPlugin(Ls,Ta);function Me({children:s,animation:t="fadeIn",duration:r=1,delay:a=0,ease:i="power2.out",trigger:c=!1,triggerStart:m="top 80%",triggerEnd:u="bottom 20%",scrub:N=!1,pin:h=!1,markers:p=!1,staggerAmount:o=.1,customAnimation:n}){const b=l.useRef(null),g=l.useRef();return Ur(()=>{if(!b.current)return;const d=b.current,x=de.timeline({defaults:{duration:r,ease:i},scrollTrigger:c?{trigger:d,start:m,end:u,scrub:N,pin:h,markers:p,toggleActions:"play pause resume reverse"}:void 0});switch(t){case"fadeIn":x.fromTo(d,{opacity:0,y:20},{opacity:1,y:0,delay:a});break;case"slideUp":x.fromTo(d,{y:100,opacity:0},{y:0,opacity:1,delay:a});break;case"slideDown":x.fromTo(d,{y:-100,opacity:0},{y:0,opacity:1,delay:a});break;case"slideLeft":x.fromTo(d,{x:100,opacity:0},{x:0,opacity:1,delay:a});break;case"slideRight":x.fromTo(d,{x:-100,opacity:0},{x:0,opacity:1,delay:a});break;case"zoomIn":x.fromTo(d,{scale:0,opacity:0},{scale:1,opacity:1,delay:a});break;case"rotate":x.fromTo(d,{rotation:360,opacity:0},{rotation:0,opacity:1,delay:a});break;case"bounce":x.fromTo(d,{y:-100,opacity:0},{y:0,opacity:1,delay:a,ease:"bounce.out"});break;case"flip":x.fromTo(d,{rotationY:180,opacity:0},{rotationY:0,opacity:1,delay:a});break;case"stagger":const _=d.children;x.fromTo(_,{y:50,opacity:0},{y:0,opacity:1,delay:a,stagger:o});break;case"parallax":x.fromTo(d,{y:100},{y:-100,scrollTrigger:{trigger:d,start:"top bottom",end:"bottom top",scrub:1}});break;case"typewriter":const S=d.textContent||"";d.textContent="",x.to(d,{text:S,duration:S.length*.05,ease:"none",delay:a});break;case"morphText":x.fromTo(d,{filter:"blur(10px)",opacity:0,letterSpacing:"20px"},{filter:"blur(0px)",opacity:1,letterSpacing:"0px",delay:a});break;case"custom":n&&n(d);break}return g.current=x,()=>{x.kill()}},{dependencies:[t,r,a,c]}),e.jsx("div",{ref:b,className:"gsap-animation",children:s})}function zi(){const[s,t]=l.useState(!1),[r,a]=l.useState(""),[i,c]=l.useState(""),[m,u]=l.useState(!1),[N,h]=l.useState(!1),[p,o]=l.useState(""),{login:n,loginWithGoogle:b,loginWithFacebook:g,user:d}=Ne(),x=lt(),_=async S=>{S.preventDefault(),o(""),h(!0);try{await n(r,i)}catch(L){o((L==null?void 0:L.message)||"حدث خطأ أثناء تسجيل الدخول"),h(!1)}};return l.useEffect(()=>{if(d&&!N){const S=sessionStorage.getItem("redirectAfterLogin");if(S&&!S.includes("/login")&&!S.includes("/register")){sessionStorage.removeItem("redirectAfterLogin"),x(S);return}d.role==="admin"?x("/admin"):d.isMerchant?x("/merchant/dashboard"):d.isAffiliate?x("/affiliate/dashboard"):d.isIntermediary?x("/intermediary/dashboard"):x("/")}},[d,N,x]),d?null:e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 via-white to-orange-50 dark:from-neutral-900 dark:via-neutral-900 dark:to-neutral-900 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-10 scale-150",children:e.jsx("div",{className:"w-[600px] h-[600px]",children:e.jsx(Lt,{size:"large",interactive:!1,autoRotate:!0,showParticles:!1})})}),e.jsxs("div",{className:"max-w-md w-full space-y-8 relative z-10",children:[e.jsx(Me,{animation:"fadeIn",duration:1,children:e.jsxs("div",{className:"text-center",children:[e.jsxs(f,{to:"/",className:"inline-flex items-center gap-2 text-3xl font-bold bg-gradient-to-r from-primary via-purple-600 to-secondary bg-clip-text text-transparent",children:[e.jsx(bt,{className:"w-8 h-8 text-purple-600"}),"إيجي جو"]}),e.jsx("h2",{className:"mt-6 text-3xl font-bold bg-gradient-to-r from-purple-600 to-orange-500 bg-clip-text text-transparent",children:"تسجيل الدخول"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["أو"," ",e.jsx(f,{to:"/register",className:"font-medium text-primary hover:text-primary/80 transition-colors",children:"إنشاء حساب جديد"})]})]})}),e.jsx(Me,{animation:"slideUp",delay:.2,children:e.jsxs(Z,{className:"shadow-xl border-purple-100 dark:border-purple-900 backdrop-blur-sm bg-white/90 dark:bg-neutral-900/90",children:[e.jsxs(ve,{className:"bg-gradient-to-r from-purple-50 to-orange-50 dark:from-neutral-800 dark:to-neutral-800",children:[e.jsx(be,{className:"text-2xl",children:"أهلاً بك مرة أخرى"}),e.jsx($t,{children:"قم بتسجيل الدخول للوصول إلى حسابك ومتابعة التسوق"})]}),e.jsxs(se,{children:[e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[p&&e.jsx("div",{className:"p-3 text-sm text-red-600 bg-gradient-to-r from-red-50 to-red-100 border border-red-300 rounded-md shadow-sm",children:p}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"email",children:"البريد الإلكتروني"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(Dt,{className:"h-5 w-5 text-gray-400"})}),e.jsx(oe,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"أدخل بريدك الإلكتروني",value:r,onChange:S=>a(S.target.value),className:"pr-10"})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"password",children:"كلمة المرور"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(Ze,{className:"h-5 w-5 text-gray-400"})}),e.jsx(oe,{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",required:!0,placeholder:"أدخل كلمة المرور",value:i,onChange:S=>c(S.target.value),className:"pr-10 pl-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 left-0 pl-3 flex items-center",onClick:()=>t(!s),children:s?e.jsx(Nt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(et,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(st,{id:"remember-me",checked:m,onCheckedChange:S=>u(!!S)}),e.jsx(te,{htmlFor:"remember-me",className:"text-sm cursor-pointer",children:"تذكرني"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(f,{to:"/forgot-password",className:"font-medium text-primary hover:text-primary/80 transition-colors",children:"نسيت كلمة المرور؟"})})]}),e.jsx(R,{type:"submit",className:"w-full",disabled:N,children:N?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري تسجيل الدخول..."]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:["تسجيل الدخول",e.jsx(Ee,{className:"h-4 w-4 rtl:rotate-180"})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(mt,{})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-background text-muted-foreground",children:"أو"})})]})}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs(R,{type:"button",variant:"outline",className:"w-full",onClick:()=>{b().catch(S=>{o("حدث خطأ أثناء تسجيل الدخول بـ Google"),console.error(S)})},children:[e.jsxs("svg",{className:"w-5 h-5 ml-2 rtl:ml-0 rtl:mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"متابعة بحساب Google"]}),e.jsxs(R,{type:"button",variant:"outline",className:"w-full",onClick:()=>{g().catch(S=>{o("حدث خطأ أثناء تسجيل الدخول بـ Facebook"),console.error(S)})},children:[e.jsx("svg",{className:"w-5 h-5 ml-2 rtl:ml-0 rtl:mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"متابعة بحساب Facebook"]})]}),e.jsx("div",{className:"mt-6 p-4 bg-brand-orange/10 rounded-lg border border-brand-orange/20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-brand-orange font-medium mb-2",children:"💰 هل تريد الانضمام لبرنامج الشراكة؟"}),e.jsx(f,{to:"/affiliate",className:"text-sm text-brand-orange hover:text-brand-orange/80 font-medium underline",children:"اكسب عمولة تصل إلى 25% من كل عملية بيع تحيلها"})]})})]})]})}),e.jsx(Me,{animation:"fadeIn",delay:.4,children:e.jsx("div",{className:"text-center text-sm text-gray-600",children:e.jsxs("p",{children:["بتسجيل الدخول، فإنك توافق على"," ",e.jsx(f,{to:"/terms",className:"text-primary hover:text-primary/80",children:"شروط الخدمة"})," ","و"," ",e.jsx(f,{to:"/privacy",className:"text-primary hover:text-primary/80",children:"سياسة الخصوصية"})]})})})]})]})}function Ui(){const[s,t]=l.useState(!1),[r,a]=l.useState(!1),[i,c]=l.useState({name:"",email:"",phone:"",alternativePhone:"",password:"",confirmPassword:"",referralCode:""}),[m,u]=l.useState("customer"),[N,h]=l.useState(!1),[p,o]=l.useState(!1),[n,b]=l.useState(!1),[g,d]=l.useState(""),[x,_]=l.useState(null),{register:S,user:L}=Ne(),G=lt(),[q]=Br();l.useEffect(()=>{const T=q.get("type");(T==="affiliate"||T==="merchant")&&u(T);const V=q.get("ref");V&&(c(E=>({...E,referralCode:V})),j(V))},[q]);const j=async T=>{if(!T){_(null);return}try{const V=await A.listDocuments(C.databaseId,C.collections.userPreferences,[I.equal("affiliateCode",T),I.limit(1)]);V.documents.length>0?_(V.documents[0]):_(null)}catch(V){console.error("Error validating referral code:",V),_(null)}},P=T=>V=>{c(E=>({...E,[T]:V.target.value}))};if(L)return G("/"),null;const F=async T=>{if(T.preventDefault(),d(""),!N){d("يجب الموافقة على شروط الخدمة للمتابعة");return}if(!i.phone){d("رقم الهاتف مطلوب");return}if(!p){d("يجب تأكيد توفر رقم الهاتف على WhatsApp أو للاتصال");return}if(i.password!==i.confirmPassword){d("كلمات المرور غير متطابقة");return}if(i.password.length<6){d("كلمة المرور يجب أن تكون 6 أحرف على الأقل");return}b(!0);try{const V=await S(i.email,i.password,i.name,m,i.phone,i.alternativePhone);if(V){try{if(await A.createDocument(C.databaseId,"userPreferences",tt.unique(),{userId:V.$id,email:i.email,name:i.name,phone:i.phone||"",role:m==="merchant"?"merchant":m==="affiliate"?"affiliate":"customer",accountStatus:m==="customer"?"approved":"pending",isAdmin:!1,isAffiliate:m==="affiliate",isMerchant:m==="merchant",isIntermediary:!1,affiliateCode:m==="affiliate"?`AFF${Date.now()}`:"",intermediaryCode:"",defaultMarkupPercentage:0,commissionRate:m==="affiliate"?10:0,businessName:"",businessAddress:"",taxId:""}),console.log("✅ User preferences created for admin panel"),i.referralCode&&x)try{await A.createDocument(C.databaseId,"referrals",tt.unique(),{referrerId:x.userId,referredUserId:V.$id,referralCode:i.referralCode,status:"pending",createdAt:new Date().toISOString()}),console.log("✅ Referral record created"),await A.createDocument(C.databaseId,C.collections.notifications,"unique()",{userId:x.userId,title:"🎉 إحالة جديدة!",message:`قام ${i.name} بالتسجيل باستخدام كود الإحالة الخاص بك`,type:"affiliate",isRead:!1,link:"/affiliate/referrals"})}catch(E){console.error("Error creating referral record:",E)}}catch(E){console.error("Error creating user preferences:",E)}try{await A.createDocument(C.databaseId,C.collections.notifications,"unique()",{userId:V.$id,title:"👋 مرحباً بك في إيجي جو",message:m==="customer"?"نتمنى لك تجربة تسوق ممتعة! ابدأ باستكشاف منتجاتنا الآن":"⏳ تم استلام طلبك وجاري المراجعة. سنخطرك فوراً عند الموافقة على حسابك",type:"info",isRead:!1,link:m==="customer"?"/products":void 0})}catch(E){console.error("Error creating welcome notification:",E)}}m==="affiliate"||m==="merchant"?(alert(`تم إنشاء حسابك كـ${m==="affiliate"?"مسوق":"تاجر"} بنجاح!

⏳ حسابك قيد المراجعة من قبل الإدارة
📧 سيتم إخطارك عبر البريد الإلكتروني فور الموافقة
⚠️ لن تتمكن من الوصول لكامل المميزات حتى تتم الموافقة على حسابك`),G("/login")):G("/")}catch(V){d(V instanceof Error?V.message:"حدث خطأ أثناء إنشاء الحساب"),alert("حدث خطأ في إنشاء الحساب")}finally{b(!1)}};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-100 via-pink-50 to-orange-100 dark:from-neutral-900 dark:via-purple-950 dark:to-neutral-900 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-10 scale-150",children:e.jsx("div",{className:"w-[600px] h-[600px]",children:e.jsx(Lt,{size:"large",interactive:!1,autoRotate:!0,showParticles:!1})})}),e.jsxs("div",{className:"max-w-md w-full space-y-8 relative z-10",children:[e.jsx(Me,{animation:"fadeIn",duration:1,children:e.jsxs("div",{className:"text-center mb-2",children:[e.jsxs(f,{to:"/",className:"inline-flex items-center gap-2 text-4xl font-extrabold bg-gradient-to-r from-primary via-purple-600 to-secondary bg-clip-text text-transparent drop-shadow-lg",children:[e.jsx(bt,{className:"w-10 h-10 text-purple-600"}),"إيجي جو"]}),e.jsx("h2",{className:"mt-4 text-2xl font-bold bg-gradient-to-r from-purple-600 via-pink-500 to-orange-500 bg-clip-text text-transparent",children:"أهلاً بك في عالم التسوق الذكي"}),e.jsx("p",{className:"mt-2 text-base text-gray-700 dark:text-gray-200",children:"أنشئ حسابك الجديد وابدأ رحلتك معنا الآن"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["أو",e.jsx(f,{to:"/login",className:"font-medium text-primary hover:text-primary/80 transition-colors mx-1",children:"تسجيل الدخول لحساب موجود"})]})]})}),g&&e.jsx("div",{className:"bg-gradient-to-r from-red-100 to-red-200 border-2 border-red-400 text-red-700 px-4 py-3 rounded-lg text-center text-sm font-medium shadow-lg animate-pulse",children:g}),e.jsx(Me,{animation:"slideUp",delay:.2,children:e.jsxs(Z,{className:"shadow-2xl border-2 border-purple-200 dark:border-purple-800 backdrop-blur-sm bg-white/90 dark:bg-neutral-900/90",children:[e.jsxs(ve,{className:"bg-gradient-to-r from-purple-50 via-pink-50 to-orange-50 dark:from-neutral-800 dark:to-neutral-800",children:[e.jsx(be,{className:"text-2xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:"انضم إلى إيجي جو"}),e.jsx($t,{className:"text-gray-700 dark:text-gray-200",children:"استمتع بتجربة تسوق احترافية وميزات حصرية"})]}),e.jsxs(se,{children:[e.jsxs("form",{onSubmit:F,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(te,{htmlFor:"name",children:"الاسم الكامل"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(Pt,{className:"h-5 w-5 text-gray-400"})}),e.jsx(oe,{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,placeholder:"أدخل اسمك الكامل",value:i.name,onChange:P("name"),className:"pr-10"})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"email",children:"البريد الإلكتروني"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(Dt,{className:"h-5 w-5 text-gray-400"})}),e.jsx(oe,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,placeholder:"أدخل بريدك الإلكتروني",value:i.email,onChange:P("email"),className:"pr-10"})]})]}),e.jsxs("div",{children:[e.jsxs(te,{htmlFor:"phone",children:["رقم الهاتف ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx(oe,{id:"phone",name:"phone",type:"tel",autoComplete:"tel",required:!0,placeholder:"مثال: 01012345678",value:i.phone,onChange:P("phone"),className:"pr-10"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"سيتم استخدام هذا الرقم للتواصل معك"})]}),e.jsxs("div",{className:"flex items-start space-x-2 rtl:space-x-reverse",children:[e.jsx(st,{id:"whatsapp-available",checked:p,onCheckedChange:T=>o(!!T)}),e.jsxs("div",{className:"grid gap-1.5 leading-none",children:[e.jsxs(te,{htmlFor:"whatsapp-available",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:["هذا الرقم متاح على WhatsApp أو للاتصال ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"تأكد من إمكانية التواصل معك عبر هذا الرقم"})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"alternativePhone",children:"رقم هاتف بديل (اختياري)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),e.jsx(oe,{id:"alternativePhone",name:"alternativePhone",type:"tel",autoComplete:"tel",placeholder:"رقم إضافي للتواصل (اختياري)",value:i.alternativePhone,onChange:P("alternativePhone"),className:"pr-10"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"يمكنك إضافة رقم آخر للتواصل معك"})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"password",children:"كلمة المرور"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(Ze,{className:"h-5 w-5 text-gray-400"})}),e.jsx(oe,{id:"password",name:"password",type:s?"text":"password",autoComplete:"new-password",required:!0,placeholder:"أدخل كلمة المرور (6 أحرف على الأقل)",value:i.password,onChange:P("password"),className:"pr-10 pl-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 left-0 pl-3 flex items-center",onClick:()=>t(!s),children:s?e.jsx(Nt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(et,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"confirmPassword",children:"تأكيد كلمة المرور"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(Ze,{className:"h-5 w-5 text-gray-400"})}),e.jsx(oe,{id:"confirmPassword",name:"confirmPassword",type:r?"text":"password",autoComplete:"new-password",required:!0,placeholder:"أعد إدخال كلمة المرور",value:i.confirmPassword,onChange:P("confirmPassword"),className:"pr-10 pl-10"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 left-0 pl-3 flex items-center",onClick:()=>a(!r),children:r?e.jsx(Nt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):e.jsx(et,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsxs("div",{children:[e.jsx(te,{htmlFor:"referralCode",children:"كود الإحالة (اختياري)"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx(bt,{className:"h-5 w-5 text-gray-400"})}),e.jsx(oe,{id:"referralCode",name:"referralCode",type:"text",placeholder:"أدخل كود الإحالة إن وجد",value:i.referralCode,onChange:T=>{P("referralCode")(T),j(T.target.value)},className:"pr-10"})]}),x&&e.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:["✓ تمت الإحالة من: ",x.name]}),i.referralCode&&!x&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"كود الإحالة غير صحيح"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"إذا كان لديك كود إحالة من أحد المسوقين، أدخله هنا"})]}),e.jsxs("div",{children:[e.jsx(te,{children:"نوع الحساب"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 mt-2",children:[e.jsxs("div",{className:`flex items-center space-x-3 rtl:space-x-reverse p-4 rounded-lg border-2 cursor-pointer transition-all ${m==="customer"?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>u("customer"),children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${m==="customer"?"border-primary":"border-gray-300"}`,children:m==="customer"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"🛒 عميل"}),e.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"تسوق واشتري المنتجات"})]})]}),e.jsxs("div",{className:`flex items-center space-x-3 rtl:space-x-reverse p-4 rounded-lg border-2 cursor-pointer transition-all ${m==="affiliate"?"border-brand-orange bg-brand-orange/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>u("affiliate"),children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${m==="affiliate"?"border-brand-orange":"border-gray-300"}`,children:m==="affiliate"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-brand-orange"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-brand-orange",children:"💰 مسوق بالعمولة"}),e.jsx("p",{className:"text-xs text-brand-orange/80 mt-0.5",children:"اكسب عمولة على كل عملية بيع"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1 font-medium",children:"⏳ يتطلب موافقة الإدارة"})]})]}),e.jsxs("div",{className:`flex items-center space-x-3 rtl:space-x-reverse p-4 rounded-lg border-2 cursor-pointer transition-all ${m==="merchant"?"border-brand-purple bg-brand-purple/5":"border-gray-200 hover:border-gray-300"}`,onClick:()=>u("merchant"),children:[e.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center ${m==="merchant"?"border-brand-purple":"border-gray-300"}`,children:m==="merchant"&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-brand-purple"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-brand-purple",children:"🏪 تاجر"}),e.jsx("p",{className:"text-xs text-brand-purple/80 mt-0.5",children:"اعرض وبع منتجاتك على المنصة"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1 font-medium",children:"⏳ يتطلب موافقة الإدارة"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[e.jsx(st,{id:"accept-terms",checked:N,onCheckedChange:T=>h(!!T),required:!0}),e.jsxs(te,{htmlFor:"accept-terms",className:"text-sm cursor-pointer",children:["أوافق على"," ",e.jsx(f,{to:"/terms",className:"text-primary hover:text-primary/80 underline",children:"شروط الخدمة"})," ","و"," ",e.jsx(f,{to:"/privacy",className:"text-primary hover:text-primary/80 underline",children:"سياسة الخصوصية"})]})]}),e.jsx(R,{type:"submit",className:"w-full bg-gradient-to-r from-brand-orange to-brand-purple text-white font-bold py-3 text-lg rounded-lg shadow-md hover:from-brand-purple hover:to-brand-orange transition-all duration-200",disabled:n||!N,children:n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري إنشاء الحساب..."]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-base font-bold",children:"إنشاء الحساب"}),e.jsx(Ee,{className:"h-5 w-5 rtl:rotate-180"})]})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(mt,{})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"px-2 bg-background text-muted-foreground",children:"أو يمكنك التسجيل عبر"})})]})}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs(R,{type:"button",variant:"outline",className:"w-full border-gray-300 hover:border-primary",onClick:()=>{console.log("التسجيل بـ Google")},children:[e.jsxs("svg",{className:"w-5 h-5 ml-2 rtl:ml-0 rtl:mr-2",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"التسجيل بحساب Google"]}),e.jsxs(R,{type:"button",variant:"outline",className:"w-full border-gray-300 hover:border-primary",onClick:()=>{console.log("التسجيل بـ Facebook")},children:[e.jsx("svg",{className:"w-5 h-5 ml-2 rtl:ml-0 rtl:mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"التسجيل بحساب Facebook"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-6",children:["جميع بياناتك محمية وفق ",e.jsx(f,{to:"/privacy",className:"underline text-primary",children:"سياسة الخصوصية"})," الخاصة بنا."]})]})]})})]})]})}const Bi=()=>{const s=ct();return l.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",s.pathname)},[s.pathname]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),e.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Wi=()=>e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-purple-50 to-orange-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Fe,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})});function v(s,t=e.jsx(Wi,{})){const r=l.lazy(s);return a=>e.jsx(l.Suspense,{fallback:t,children:e.jsx(r,{...a})})}const ns=v(()=>w(()=>import("./Products-BFU7GvNd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),Gi=v(()=>w(()=>import("./ProductDetail-BtviPnxn.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,8,14,15,16,17,18,12]))),Hi=v(()=>w(()=>import("./Cart-C8ntDxw_.js"),__vite__mapDeps([19,1,2,3,4,5,6,7,8,20,12]))),Ki=v(()=>w(()=>import("./Checkout-CCTY23Mt.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,8,22,15,17,12]))),Qi=v(()=>w(()=>import("./Wishlist-R4Zp2SS8.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,24,18,12]))),os=v(()=>w(()=>import("./MyOrders-D8kSrbzu.js"),__vite__mapDeps([25,1,2,3,4,5,6,7,8,18,12]))),Ji=v(()=>w(()=>import("./OrderTracking-Kk2UXq7R.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,24,12])));v(()=>w(()=>import("./OrderSuccess-ME5Y9L1a.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,12])));const ls=v(()=>w(()=>import("./CustomerAccount-B19VKDzg.js"),__vite__mapDeps([28,1,2,3,4,5,6,7,8,14,12]))),Yi=v(()=>w(()=>import("./Affiliate-BlBkS-m7.js"),__vite__mapDeps([29,1,2,3,4,5,6,7,8,12]))),Xi=v(()=>w(()=>import("./AffiliateDashboard-BjrJx9nv.js"),__vite__mapDeps([30,1,2,3,4,5,6,7,8,10,11,14,12,17,31,9])));v(()=>w(()=>import("./EnhancedAffiliateDashboard-iTacoE0f.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,33,34,12,17,14])));const Zi=v(()=>w(()=>import("./AffiliateAnalytics-DG2se114.js"),__vite__mapDeps([35,1,2,3,4,5,6,7,8,12,14]))),cs=v(()=>w(()=>import("./AffiliateLinkManager-IsuDYuTS.js"),__vite__mapDeps([36,1,2,3,4,5,6,7,8,12,9,31,14]))),en=v(()=>w(()=>import("./AffiliateCreatives-C9b104xE.js"),__vite__mapDeps([37,1,2,3,4,5,6,7,8,12,9,14,15]))),tn=v(()=>w(()=>import("./AffiliateCoupons-BfIkUfg4.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,8,12,9]))),sn=v(()=>w(()=>import("./AffiliateBanners-6W-ngIyI.js"),__vite__mapDeps([39,1,2,3,4,5,6,7,8,12]))),rn=v(()=>w(()=>import("./AffiliateMarketingTips-qHjLpSGo.js"),__vite__mapDeps([40,1,2,3,4,5,6,7,8,12]))),an=v(()=>w(()=>import("./AffiliateCourses-Bp1jq0Gu.js"),__vite__mapDeps([41,1,2,3,4,5,6,7,8,17,12]))),nn=v(()=>w(()=>import("./AffiliateWithdrawPage-F6yOfGdW.js"),__vite__mapDeps([42,1,2,3,4,5,6,7,8,34,12]))),on=v(()=>w(()=>import("./AffiliateResourcesPage-C9vjE_yg.js"),__vite__mapDeps([43,1,2,3,4,5,6,7,8,12]))),ln=v(()=>w(()=>import("./AffiliateSupportPage-C3h5F_mJ.js"),__vite__mapDeps([44,1,2,3,4,5,6,7,8,15,12]))),cn=v(()=>w(()=>import("./AffiliateReferralSystem-CUqP94Ry.js"),__vite__mapDeps([45,1,2,3,4,5,6,7,8,14,12]))),dn=v(()=>w(()=>import("./Merchant-xlJ9ZWAT.js"),__vite__mapDeps([46,1,2,3,4,5,6,7,8,12]))),mn=v(()=>w(()=>import("./MerchantDashboard-DUv1jZaM.js"),__vite__mapDeps([47,1,2,3,4,5,6,7,8,17,48,16,12,18,33,31,9]))),un=v(()=>w(()=>import("./MerchantProducts-kiHNfGKu.js"),__vite__mapDeps([49,50,1,2,3,4,5,6,7,8,48,16,12,15,31,9,18,51])));v(()=>w(()=>import("./MerchantOrders-CzxfiTvf.js"),__vite__mapDeps([52,53,1,2,3,4,5,6,7,8,48,16,12,31,9,51])));v(()=>w(()=>import("./MerchantAnalytics-BfiIEzG6.js"),__vite__mapDeps([54,55,1,2,3,4,5,6,7,8,10,11,12])));const ds=v(()=>w(()=>import("./AdminDashboard-CrlT6wOW.js"),__vite__mapDeps([56,1,2,3,4,5,6,7,8,48,16,12,51])));v(()=>w(()=>import("./EnhancedAdminDashboard-CtUKFpk9.js"),__vite__mapDeps([57,1,2,3,4,5,6,7,8,17,14,10,11,48,16,12,51])));const ms=v(()=>w(()=>import("./AdminUsers-CUc6Iu4g.js"),__vite__mapDeps([58,1,2,3,4,5,6,7,8,48,16,12,9]))),hn=v(()=>w(()=>import("./AdminCouponsManager-BDtOYXMK.js"),__vite__mapDeps([59,1,2,3,4,5,6,7,8,31,9,20,12,48,16]))),pn=v(()=>w(()=>import("./AdminProducts-CNAJE4Q5.js"),__vite__mapDeps([50,1,2,3,4,5,6,7,8,48,16,12,15,31,9,18,51]))),xn=v(()=>w(()=>import("./AdminOrders-CjpwsgDi.js"),__vite__mapDeps([53,1,2,3,4,5,6,7,8,48,16,12,31,9,51]))),fn=v(()=>w(()=>import("./AdminAnalytics-CzWs8GIP.js"),__vite__mapDeps([55,1,2,3,4,5,6,7,8,10,11,12]))),gn=v(()=>w(()=>import("./AdminCategories-DIgnD2xY.js"),__vite__mapDeps([60,1,2,3,4,5,6,7,8,48,16,12,15,31,51]))),jn=v(()=>w(()=>import("./AdminCommissions-D_iZAmoH.js"),__vite__mapDeps([61,1,2,3,4,5,6,7,8,48,16,12,31,9,51]))),yn=v(()=>w(()=>import("./AdminPendingAccounts-CFe_K3ZV.js"),__vite__mapDeps([62,1,2,3,4,5,6,7,8,10,11,12,15,9,31]))),wn=v(()=>w(()=>import("./AdminUserManagement-GFDQ1JGp.js"),__vite__mapDeps([63,1,2,3,4,5,6,7,8,10,11,12,31,9]))),vn=v(()=>w(()=>import("./AdminUserManagementFixed-CHkCO5_d.js"),__vite__mapDeps([64,1,2,3,4,5,6,7,8,12]))),bn=v(()=>w(()=>import("./AdminProductsAdvanced-Cb9J-8rb.js"),__vite__mapDeps([65,1,2,3,4,5,6,7,8,11,17,31,9,12]))),Nn=v(()=>w(()=>import("./AdminSettingsPage-Bpvpx1rY.js"),__vite__mapDeps([66,1,2,3,4,5,6,7,8,67,14,12]))),_n=v(()=>w(()=>import("./AdminShipping-CPMTbFFB.js"),__vite__mapDeps([68,1,2,3,4,5,6,7,8,9,31,17,12]))),En=v(()=>w(()=>import("./AdminAdvancedSettings-CO5n8LRn.js"),__vite__mapDeps([69,1,2,3,4,5,6,7,8,9,67,14,12]))),An=v(()=>w(()=>import("./AdminNotifications-Bx2ZWLOA.js"),__vite__mapDeps([70,1,2,3,4,5,6,7,8,48,16,12,15,14,22,9,31])));v(()=>w(()=>import("./AdminCoupons-CEUU6-8G.js"),__vite__mapDeps([71,1,2,3,4,5,6,7,8,9,31,12])));const Cn=v(()=>w(()=>import("./AdminAIDashboard-fsYTIHAG.js"),__vite__mapDeps([72,1,2,3,4,5,6,7,8,17,14,73,12]))),kn=v(()=>w(()=>import("./ProductAIDemo-g1Z6PTcA.js"),__vite__mapDeps([74,1,2,3,4,5,6,7,8,15,14,73,75,9,12]))),Sn=v(()=>w(()=>import("./TestAI-vQLO7mIg.js"),__vite__mapDeps([76,1,2,3,4,5,6,7,8,73,12]))),In=v(()=>w(()=>import("./AboutPage-BfyhYwfx.js"),__vite__mapDeps([77,1,2,3,4,5,6,7,8,12]))),Rn=v(()=>w(()=>import("./ContactPage-BpKrEtPJ.js"),__vite__mapDeps([78,1,2,3,4,5,6,7,8,15,12]))),Pn=v(()=>w(()=>import("./FAQPage-vQwUzGD0.js"),__vite__mapDeps([79,1,2,3,4,5,6,7,8,75,12]))),Tn=v(()=>w(()=>import("./PrivacyPolicy-CZI_wQy-.js"),__vite__mapDeps([80,1,2,3,4,5,6,7,8,12]))),Dn=v(()=>w(()=>import("./TermsOfService-B_YN1Upo.js"),__vite__mapDeps([81,1,2,3,4,5,6,7,8,12]))),On=v(()=>w(()=>import("./ReturnPolicy-OBU8nV1m.js"),__vite__mapDeps([82,1,2,3,4,5,6,7,8,12]))),$n=v(()=>w(()=>import("./ShippingPage-oNpue0SK.js"),__vite__mapDeps([83,1,2,3,4,5,6,7,8,12]))),us=v(()=>w(()=>import("./Categories-BKr0aSj4.js"),__vite__mapDeps([84,1,2,3,4,5,6,7,8,10,11,12])));v(()=>w(()=>import("./CategoryPage-78iEB4H0.js"),__vite__mapDeps([85,1,2,3,4,5,6,7,8,18,12])));const Ln=v(()=>w(()=>import("./DealsPage-BZL1K0pX.js"),__vite__mapDeps([86,1,2,3,4,5,6,7,8,12]))),Mn=v(()=>w(()=>import("./ProductLanding-DpQIXOb4.js"),__vite__mapDeps([87,1,2,3,4,5,6,7,8,12,10,11,24]))),Fn=v(()=>w(()=>import("./ForgotPassword-6j55jDtJ.js"),__vite__mapDeps([88,1,2,3,4,5,6,7,8,12]))),Vn=v(()=>w(()=>import("./SettingsPage-D4d2GpGU.js"),__vite__mapDeps([89,1,2,3,4,5,6,7,8,22,12]))),qn=v(()=>w(()=>import("./UpdateAffiliatePrefs-CxGnX1e1.js"),__vite__mapDeps([90,1,2,3,4,5,6,7,8,12]))),hs=v(()=>w(()=>import("./VendoorImport-DUYh3-ai.js"),__vite__mapDeps([91,1,2,3,4,5,6,7,8,14,12]))),zn=v(()=>w(()=>import("./IntermediaryDashboard-BaY1cDq7.js"),__vite__mapDeps([92,1,2,3,4,5,6,7,8,12,31,9,15,14])));class Un extends l.Component{constructor(r){super(r);he(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});he(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,a){console.error("Error caught by ErrorBoundary:",r,a),this.setState({error:r,errorInfo:a})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-muted",children:e.jsxs(Z,{className:"max-w-2xl w-full",children:[e.jsx(ve,{children:e.jsxs("div",{className:"flex items-center gap-3 text-destructive",children:[e.jsx($s,{className:"h-8 w-8"}),e.jsx(be,{className:"text-2xl",children:"حدث خطأ غير متوقع"})]})}),e.jsxs(se,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-muted-foreground",children:"نعتذر عن المشكلة. حدث خطأ أثناء تحميل هذه الصفحة."}),!1]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(R,{onClick:this.handleReset,className:"flex-1",variant:"outline",children:[e.jsx(Tt,{className:"ml-2 h-4 w-4"}),"إعادة المحاولة"]}),e.jsxs(R,{onClick:this.handleGoHome,className:"flex-1",children:[e.jsx(Wr,{className:"ml-2 h-4 w-4"}),"العودة للرئيسية"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground text-center pt-4 border-t",children:["إذا استمرت المشكلة، يرجى"," ",e.jsx("a",{href:"/contact",className:"text-primary hover:underline",children:"التواصل مع الدعم الفني"})]})]})]})}):this.props.children}}function po({error:s,onRetry:t,title:r="حدث خطأ"}){const a=typeof s=="string"?s:s.message;return e.jsx(Z,{className:"border-destructive",children:e.jsx(se,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($s,{className:"h-5 w-5 text-destructive mt-0.5"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("h3",{className:"font-semibold text-destructive",children:r}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a}),t&&e.jsxs(R,{onClick:t,size:"sm",variant:"outline",className:"mt-3",children:[e.jsx(Tt,{className:"ml-2 h-3 w-3"}),"إعادة المحاولة"]})]})]})})})}const ye=C.databaseId;async function Bn(s){try{const t=await A.getDocument(ye,C.collections.users,s),r=await A.listDocuments(ye,C.collections.orders,[I.equal("userId",s),I.limit(10),I.orderDesc("$createdAt")]);let a=`معلومات المستخدم:
`;if(a+=`- الاسم: ${t.name}
`,a+=`- عدد الطلبات: ${r.total}
`,t.isAffiliate){const i=await A.listDocuments(ye,"commissions",[I.equal("affiliateId",s),I.limit(100)]),c=i.documents.reduce((u,N)=>u+(N.amount||0),0),m=i.documents.filter(u=>u.status==="pending").reduce((u,N)=>u+(N.amount||0),0);a+=`- مسوق بالعمولة: نعم
`,a+=`- إجمالي العمولات: ${c} جنيه
`,a+=`- العمولات المعلقة: ${m} جنيه
`,a+=`- عدد الإحالات: ${i.total}
`}return r.total>0&&(a+=`
آخر الطلبات:
`,r.documents.slice(0,3).forEach((i,c)=>{a+=`${c+1}. طلب ${i.orderNumber} - ${i.status} - ${i.totalAmount} جنيه
`})),a}catch(t){return console.error("Error building user context:",t),"لا توجد بيانات كافية حالياً."}}async function Wn(){try{const[s,t,r,a]=await Promise.all([A.listDocuments(ye,C.collections.users,[I.limit(1e3)]),A.listDocuments(ye,C.collections.orders,[I.limit(1e3)]),A.listDocuments(ye,C.collections.products,[I.limit(1e3)]),A.listDocuments(ye,"commissions",[I.limit(1e3)])]),i=t.documents.reduce((j,P)=>P.status==="delivered"?j+(P.totalAmount||0):j,0),c=t.documents.filter(j=>j.status==="pending"||j.status==="processing").length,m=s.documents.filter(j=>j.isAffiliate),u=a.documents.filter(j=>j.status==="paid").reduce((j,P)=>j+(P.amount||0),0),N=new Map;t.documents.forEach(j=>{var P;(P=j.items)==null||P.forEach(F=>{const T=N.get(F.productId)||{count:0,revenue:0,name:F.name};T.count+=F.quantity||1,T.revenue+=(F.price||0)*(F.quantity||1),N.set(F.productId,T)})});const h=Array.from(N.entries()).sort((j,P)=>P[1].revenue-j[1].revenue).slice(0,5),p=new Map;a.documents.forEach(j=>{const P=p.get(j.affiliateId)||0;p.set(j.affiliateId,P+(j.amount||0))});const o=Array.from(p.entries()).sort((j,P)=>P[1]-j[1]).slice(0,5);let n=`📊 تقرير شامل عن الموقع:

`;n+=`📈 إحصائيات عامة:
`,n+=`- إجمالي المستخدمين: ${s.total}
`,n+=`- المسوقين بالعمولة: ${m.length}
`,n+=`- إجمالي الطلبات: ${t.total}
`,n+=`- الطلبات المعلقة: ${c}
`,n+=`- إجمالي الإيرادات: ${i.toFixed(2)} جنيه
`,n+=`- إجمالي العمولات المدفوعة: ${u.toFixed(2)} جنيه

`,n+=`🏆 أفضل المنتجات:
`,h.forEach(([j,P],F)=>{n+=`${F+1}. ${P.name} - ${P.count} مبيعة - ${P.revenue.toFixed(2)} جنيه
`}),n+=`
💼 أفضل المسوقين:
`;for(let j=0;j<Math.min(o.length,5);j++){const[P,F]=o[j],T=s.documents.find(V=>V.$id===P);n+=`${j+1}. ${(T==null?void 0:T.name)||"مستخدم"} - ${F.toFixed(2)} جنيه عمولات
`}n+=`
📦 حالة المخزون:
`;const b=r.documents.filter(j=>(j.stock||0)<10);n+=`- منتجات منخفضة المخزون: ${b.length}
`,b.length>0&&(n+=`المنتجات:
`,b.slice(0,5).forEach(j=>{n+=`  • ${j.name} - ${j.stock||0} قطعة
`}));const g=new Date,d=new Date(g.getTime()-30*24*60*60*1e3),x=new Date(g.getTime()-60*24*60*60*1e3),_=t.documents.filter(j=>new Date(j.$createdAt)>d),S=t.documents.filter(j=>{const P=new Date(j.$createdAt);return P>x&&P<=d}),L=_.reduce((j,P)=>j+(P.totalAmount||0),0),G=S.reduce((j,P)=>j+(P.totalAmount||0),0),q=G>0?((L-G)/G*100).toFixed(1):"∞";return n+=`
📊 النمو (آخر 30 يوم):
`,n+=`- الطلبات: ${_.length} (السابق: ${S.length})
`,n+=`- الإيرادات: ${L.toFixed(2)} جنيه (السابق: ${G.toFixed(2)} جنيه)
`,n+=`- معدل النمو: ${q}%
`,n}catch(s){return console.error("Error building admin context:",s),"حدث خطأ في جمع بيانات الموقع."}}function Gn(){var V;const[s,t]=l.useState(!1),[r,a]=l.useState([]),[i,c]=l.useState(""),[m,u]=l.useState(!1),[N,h]=l.useState(!1),[p,o]=l.useState(null),[n,b]=l.useState(!1),g=l.useRef(null),{user:d}=Ne(),x=l.useRef([]),[_,S]=l.useState(null);l.useEffect(()=>{s&&d&&!_&&L()},[s,d]);const L=async()=>{var E;if(d){b(!0);try{const ie=((E=d.labels)==null?void 0:E.includes("admin"))||d.email==="admin@egygo.com";let le;ie?le=await Wn():le=await Bn(d.$id),S(le),console.log("✅ Context loaded:",le.substring(0,100)+"...")}catch(ie){console.error("Error loading context:",ie)}finally{b(!1)}}};l.useEffect(()=>{if(console.log("🔍 useEffect triggered - initializing chat..."),typeof window>"u"){console.log("⚠️ Server-side render detected, skipping");return}if(x.current.length>0){console.log("✅ Chat already initialized, skipping");return}console.log("� Initializing chat history with system prompt...");try{const E=`أنت مساعد ذكي لموقع إيجي جو للتسوق الإلكتروني في مصر. 

معلومات عن الموقع:
- موقع تسوق إلكتروني مصري
- يبيع منتجات متنوعة بأسعار تنافسية
- شحن لجميع أنحاء مصر (مجاني فوق 500 جنيه)
- دفع عند الاستلام متاح
- برنامج تسويق بالعمولة (لحد 25%)
- برنامج للتجار لبيع منتجاتهم
- ضمان على المنتجات
- إرجاع مجاني خلال 14 يوم

قدراتك الخاصة:
✅ يمكنك رؤية بيانات المستخدم الكاملة (طلبات، عمولات، إحصائيات)
✅ يمكنك عمل تقارير شاملة للأدمن عن أداء الموقع
✅ يمكنك تحليل البيانات وإعطاء نصائح مخصصة
✅ يمكنك اقتراح خطط تطوير بناءً على نشاط المستخدم

الأوامر الخاصة:
• "راجع حسابي" → أعرض تحليل شامل لحساب المستخدم
• "اعمل تقرير" → أنشئ تقرير مفصل للأدمن عن الموقع
• "نصائح" → أعطي نصائح ذكية بناءً على البيانات
• "جدول تطوير" → أقترح خطة عمل مخصصة

تعليمات مهمة:
1. تحدث باللهجة المصرية الطبيعية (مثل: "ازيك"، "دلوقتي"، "عشان"، "لحد")
2. استخدم البيانات المتاحة لك لتقديم إجابات مخصصة ودقيقة
3. عند كتابة تقارير، نظمها بعناوين واضحة وأرقام محددة
4. أعطي توصيات قابلة للتنفيذ (actionable recommendations)
5. استخدم emojis مصرية (🇪🇬 ❤️ 🛍️ 💰 📊 📈 🏆)
6. عند رؤية بيانات المستخدم في [بيانات المستخدم]، حللها واستخدمها في إجابتك`;x.current=[{role:"system",content:E}],console.log("💬 Chat history initialized, length:",x.current.length),h(!0),o(null),console.log("✅ Chat initialization complete!")}catch(E){console.error("❌ Failed to initialize chat:",E),o("init-failed")}},[]),l.useEffect(()=>{g.current&&(g.current.scrollTop=g.current.scrollHeight)},[r]);const G=[{label:"📊 راجع حسابي",value:"راجع حسابي وقولي إيه الإحصائيات بتاعتي"},{label:"💡 نصائح ذكية",value:"اديني نصائح ذكية بناءً على نشاطي"},{label:"📈 جدول تطوير",value:"اعمل لي جدول تطوير مخصص"},{label:"🎯 اقتراحات",value:"اقترح علي حاجات تساعدني أحسن أدائي"}],q=[{label:"📊 تقرير شامل",value:"اعمل تقرير شامل عن أداء الموقع"},{label:"🏆 أفضل المسوقين",value:"اعرض أفضل 10 مسوقين بالعمولة"},{label:"📦 حالة المخزون",value:"راجع حالة المخزون والمنتجات المنخفضة"},{label:"💰 تحليل الإيرادات",value:"حلل الإيرادات وقولي فين المشاكل"}],j=E=>{c(E),setTimeout(()=>{const ie=document.querySelector("[data-send-button]");ie==null||ie.click()},100)},P=()=>{if(!d)return[{icon:e.jsx(Pt,{className:"h-5 w-5"}),title:"سجل دخولك الآن",message:"سجل دخول عشان تقدر تتابع طلباتك وتستفيد من كل المميزات",action:{label:"تسجيل الدخول",link:"/login"}}];const E=[];return d.isAffiliate&&E.push({icon:e.jsx(ue,{className:"h-5 w-5 text-orange-600"}),title:"زود أرباحك من التسويق",message:"ركز على المنتجات اللي فيها عمولة أعلى وشاركها على السوشيال ميديا بشكل منتظم",action:{label:"شوف أفضل المنتجات",link:"/affiliate/dashboard"}},{icon:e.jsx(ue,{className:"h-5 w-5 text-orange-600"}),title:"استخدم الأدوات التسويقية",message:"عندنا بنرات وصور جاهزة تقدر تستخدمها في حملاتك التسويقية",action:{label:"شوف الأدوات",link:"/affiliate/creatives"}}),d.role==="merchant"&&E.push({icon:e.jsx(je,{className:"h-5 w-5 text-purple-600"}),title:"حسن صور منتجاتك",message:"المنتجات اللي فيها صور واضحة بتبيع أكتر بنسبة 70%. حط صور احترافية لمنتجاتك",action:{label:"إدارة المنتجات",link:"/admin/products"}},{icon:e.jsx(je,{className:"h-5 w-5 text-purple-600"}),title:"تابع أداء مبيعاتك",message:"راجع تقارير المبيعات بتاعتك واعرف أكتر المنتجات مبيعاً",action:{label:"شوف التقارير",link:"/merchant/dashboard"}}),d.role==="admin"&&E.push({icon:e.jsx(ge,{className:"h-5 w-5 text-primary"}),title:"راجع الطلبات الجديدة",message:"فيه طلبات محتاجة مراجعة. اتأكد من معالجتها بسرعة عشان رضا العملاء",action:{label:"الطلبات",link:"/admin/orders"}},{icon:e.jsx(ge,{className:"h-5 w-5 text-primary"}),title:"تحليل أداء الموقع",message:"راجع إحصائيات الموقع واعرف المنتجات الأكتر مبيعاً والأقسام الأكتر زيارة",action:{label:"لوحة التحكم",link:"/admin"}}),E.push({icon:e.jsx(Qt,{className:"h-5 w-5 text-blue-600"}),title:"محتاج مساعدة؟",message:"أنا هنا عشان أساعدك! اسألني أي حاجة عن الموقع أو منتجاتنا"}),E};l.useEffect(()=>{if(s&&r.length===0){const E=d?`أهلاً ${d.name}! 👋

أنا مساعدك الذكي في إيجي جو. ازيك النهاردة؟ محتاج مساعدة في حاجة معينة؟`:`أهلاً بيك في إيجي جو! 👋

أنا المساعد الذكي بتاعنا. ممكن أساعدك في إيه النهاردة؟`;a([{id:"1",type:"bot",content:E,timestamp:new Date}]),setTimeout(()=>{const le=P().slice(0,2).map(K=>`💡 ${K.title}
${K.message}`).join(`

`);a(K=>[...K,{id:String(K.length+1),type:"bot",content:le,timestamp:new Date}])},1e3)}},[s,d]);const F=async()=>{var le,K,We,Ie,Ge,Re,M,z,H,ee;if(console.log("📤 handleSendMessage called"),!i.trim()){console.log("⚠️ Empty input, aborting");return}const E=i;console.log("📝 User input:",E);const ie={id:String(r.length+1),type:"user",content:E,timestamp:new Date};a($=>[...$,ie]),c(""),u(!0);try{console.log("✅ Calling OpenAI API directly...");const $=void 0;if(!$)throw new Error("API key not configured");const W=["راجع","شوف بياناتي","تقرير","نصائح","نصيحة","جدول تطوير","حسابي"].some(_e=>E.includes(_e));let ce=E;W&&_?ce=`${E}

[بيانات المستخدم]:
${_}`:W&&!_&&(await L(),_&&(ce=`${E}

[بيانات المستخدم]:
${_}`)),x.current.push({role:"user",content:ce}),console.log("📡 Sending request to OpenAI...");const Pe=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${$}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:x.current,temperature:.7,max_tokens:500})});if(!Pe.ok){const _e=await Pe.json().catch(()=>({}));throw console.error("❌ OpenAI API Error:",Pe.status,_e),new Error(((le=_e.error)==null?void 0:le.message)||`HTTP ${Pe.status}`)}const Mt=await Pe.json();console.log("✅ OpenAI Response:",Mt);const Ft=((Ie=(We=(K=Mt.choices)==null?void 0:K[0])==null?void 0:We.message)==null?void 0:Ie.content)||"عذراً، ما قدرتش أفهم. جرب تاني 🙏";x.current.push({role:"assistant",content:Ft});const mr={id:String(r.length+2),type:"bot",content:Ft,timestamp:new Date};a(_e=>[..._e,mr])}catch($){console.error("OpenAI API Error:",$);let ne="عذراً، حصل خطأ في الاتصال. جرب تاني بعد شوية 🙏";(Ge=$==null?void 0:$.message)!=null&&Ge.includes("API key")||(Re=$==null?void 0:$.message)!=null&&Re.includes("401")?ne="في مشكلة في إعدادات الـ API. يرجى التواصل مع الدعم 🔑":(M=$==null?void 0:$.message)!=null&&M.includes("quota")||(z=$==null?void 0:$.message)!=null&&z.includes("429")?ne="وصلنا للحد الأقصى من الطلبات. جرب تاني بعد دقيقة ⏱️":((H=$==null?void 0:$.message)!=null&&H.includes("network")||(ee=$==null?void 0:$.message)!=null&&ee.includes("fetch"))&&(ne="في مشكلة في الاتصال بالإنترنت. تأكد من اتصالك وجرب تاني 🌐");const W={id:String(r.length+2),type:"bot",content:ne,timestamp:new Date};a(ce=>[...ce,W])}finally{u(!1)}},T=()=>d?d.role==="admin"?e.jsxs(re,{variant:"default",className:"bg-primary",children:[e.jsx(ge,{className:"h-3 w-3 mr-1"}),"مدير"]}):d.role==="merchant"?e.jsxs(re,{className:"bg-purple-600",children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"تاجر"]}):d.isAffiliate?e.jsxs(re,{className:"bg-orange-600",children:[e.jsx(ue,{className:"h-3 w-3 mr-1"}),"مسوق"]}):null:null;return e.jsxs(e.Fragment,{children:[!s&&e.jsx(R,{onClick:()=>t(!0),className:"fixed bottom-6 left-6 h-14 w-14 rounded-full shadow-2xl z-50 hover:scale-110 transition-transform",size:"icon",children:e.jsx(Gr,{className:"h-6 w-6"})}),s&&e.jsxs(Z,{className:"fixed bottom-6 left-6 w-96 h-[600px] shadow-2xl z-50 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-primary text-primary-foreground rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary-foreground/20 flex items-center justify-center",children:e.jsx(Qt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"مساعد إيجي جو الذكي"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs opacity-90",children:"متاح دلوقتي • OpenAI"}),T()]})]})]}),e.jsx(R,{variant:"ghost",size:"icon",onClick:()=>t(!1),className:"hover:bg-primary-foreground/20 text-primary-foreground",children:e.jsx(It,{className:"h-5 w-5"})})]}),e.jsx(Ot,{className:"flex-1 p-4",ref:g,children:e.jsxs("div",{className:"space-y-4",children:[r.map(E=>e.jsx("div",{className:`flex ${E.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${E.type==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:E.content}),e.jsx("span",{className:"text-xs opacity-70 mt-1 block",children:E.timestamp.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"})})]})},E.id)),m&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-lg p-3",children:e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(Fe,{className:"h-4 w-4 animate-spin text-primary"}),e.jsx("span",{className:"text-xs text-muted-foreground mr-2",children:"جاري الكتابة..."})]})})})]})}),e.jsxs("div",{className:"p-4 border-t space-y-3",children:[r.length===0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-muted-foreground",children:"إجراءات سريعة:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(d&&((V=d.labels)!=null&&V.includes("admin"))?q:G).map(E=>e.jsx(R,{variant:"outline",size:"sm",onClick:()=>j(E.value),disabled:m||n,className:"text-xs h-auto py-2 px-2 justify-start",children:E.label},E.label))})]}),n&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Fe,{className:"h-3 w-3 animate-spin"}),e.jsx("span",{children:"جاري تحميل بياناتك..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(oe,{placeholder:"اكتب رسالتك هنا...",value:i,onChange:E=>c(E.target.value),onKeyPress:E=>E.key==="Enter"&&!m&&F(),disabled:m,className:"flex-1"}),e.jsx(R,{onClick:F,size:"icon",disabled:m||!i.trim(),"data-send-button":!0,children:e.jsx(Hr,{className:"h-4 w-4"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 text-center",children:["مدعوم بـ OpenAI 🤖 ",_&&"• بيانات محدثة"]})]})]})]})}const nr=l.forwardRef(({...s},t)=>e.jsx("nav",{ref:t,"aria-label":"breadcrumb",...s}));nr.displayName="Breadcrumb";const or=l.forwardRef(({className:s,...t},r)=>e.jsx("ol",{ref:r,className:k("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",s),...t}));or.displayName="BreadcrumbList";const Xe=l.forwardRef(({className:s,...t},r)=>e.jsx("li",{ref:r,className:k("inline-flex items-center gap-1.5",s),...t}));Xe.displayName="BreadcrumbItem";const kt=l.forwardRef(({asChild:s,className:t,...r},a)=>{const i=s?xs:"a";return e.jsx(i,{ref:a,className:k("transition-colors hover:text-foreground",t),...r})});kt.displayName="BreadcrumbLink";const lr=l.forwardRef(({className:s,...t},r)=>e.jsx("span",{ref:r,role:"link","aria-disabled":"true","aria-current":"page",className:k("font-normal text-foreground",s),...t}));lr.displayName="BreadcrumbPage";const St=({children:s,className:t,...r})=>e.jsx("li",{role:"presentation","aria-hidden":"true",className:k("[&>svg]:size-3.5",t),...r,children:s??e.jsx(vs,{})});St.displayName="BreadcrumbSeparator";const Hn={"":"الرئيسية",products:"المنتجات",categories:"الفئات",cart:"سلة التسوق",checkout:"إتمام الطلب",orders:"طلباتي",wishlist:"المفضلة",affiliate:"الشراكة",merchant:"التاجر",admin:"الإدارة",account:"حسابي",login:"تسجيل الدخول",register:"إنشاء حساب"};function Kn(){const t=ct().pathname.split("/").filter(Boolean);let r="";const a=t.map((i,c)=>{r+=`/${i}`;const m=c===t.length-1,u=Hn[i]||decodeURIComponent(i);return m?e.jsx(Xe,{children:e.jsx(lr,{children:u})},r):e.jsxs(Xe,{children:[e.jsx(kt,{asChild:!0,children:e.jsx(f,{to:r,children:u})}),e.jsx(St,{})]},r)});return e.jsx(nr,{className:"py-2 px-2 md:px-0",children:e.jsxs(or,{children:[e.jsxs(Xe,{children:[e.jsx(kt,{asChild:!0,children:e.jsx(f,{to:"/",children:"الرئيسية"})}),t.length>0&&e.jsx(St,{})]}),a]})})}class rt{static startTiming(t){this.metrics[t]=performance.now()}static endTiming(t){const r=this.metrics[t];if(!r)return 0;const a=performance.now()-r;return delete this.metrics[t],a>100&&console.warn(`Slow operation: ${t} took ${a.toFixed(2)}ms`),a}static async measureAsync(t,r){this.startTiming(t);try{const a=await r();return this.endTiming(t),a}catch(a){throw this.endTiming(t),a}}static measure(t,r){this.startTiming(t);try{const a=r();return this.endTiming(t),a}catch(a){throw this.endTiming(t),a}}static initWebVitals(){if(typeof window>"u")return;const t=new PerformanceObserver(i=>{const c=i.getEntries(),m=c[c.length-1];console.log("LCP:",m.startTime)});t.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(t);const r=new PerformanceObserver(i=>{i.getEntries().forEach(m=>{console.log("FID:",m.processingStart-m.startTime)})});r.observe({entryTypes:["first-input"]}),this.observers.push(r);const a=new PerformanceObserver(i=>{let c=0;i.getEntries().forEach(u=>{u.hadRecentInput||(c+=u.value)}),console.log("CLS:",c)});a.observe({entryTypes:["layout-shift"]}),this.observers.push(a)}static cleanup(){this.observers.forEach(t=>t.disconnect()),this.observers=[]}}he(rt,"metrics",{}),he(rt,"observers",[]);class jt{static dnsPrefetch(t){const r=document.createElement("link");r.rel="dns-prefetch",r.href=`//${t}`,document.head.appendChild(r)}static preconnect(t){const r=document.createElement("link");r.rel="preconnect",r.href=t,document.head.appendChild(r)}static prefetch(t){const r=document.createElement("link");r.rel="prefetch",r.href=t,document.head.appendChild(r)}static modulePreload(t){const r=document.createElement("link");r.rel="modulepreload",r.href=t,document.head.appendChild(r)}}class cr{static trackChunk(t,r){this.chunks[t]=r}static getStats(){const t=Object.values(this.chunks).reduce((i,c)=>i+c,0),r=Object.keys(this.chunks).length,a=Object.entries(this.chunks).reduce((i,[c,m])=>m>i.size?{name:c,size:m}:i,{name:"",size:0});return{totalSize:t,chunkCount:r,largestChunk:a,chunks:{...this.chunks}}}static logAnalysis(){const t=this.getStats();console.group("Bundle Analysis"),console.log(`Total Size: ${(t.totalSize/1024).toFixed(2)} KB`),console.log(`Chunk Count: ${t.chunkCount}`),console.log(`Largest Chunk: ${t.largestChunk.name} (${(t.largestChunk.size/1024).toFixed(2)} KB)`),console.table(t.chunks),console.groupEnd()}}he(cr,"chunks",{});class dr{static async register(t="/sw.js"){if(!("serviceWorker"in navigator))return console.warn("Service Worker not supported"),null;try{return this.swRegistration=await navigator.serviceWorker.register(t),console.log("Service Worker registered:",this.swRegistration),this.swRegistration}catch(r){return console.error("Service Worker registration failed:",r),null}}static async update(){if(this.swRegistration)try{await this.swRegistration.update(),console.log("Service Worker updated")}catch(t){console.error("Service Worker update failed:",t)}}static async unregister(){if(this.swRegistration)try{await this.swRegistration.unregister(),console.log("Service Worker unregistered")}catch(t){console.error("Service Worker unregistration failed:",t)}}}he(dr,"swRegistration",null);function Qn(){rt.initWebVitals(),jt.dnsPrefetch("fonts.googleapis.com"),jt.dnsPrefetch("cdn.egygo.com"),jt.preconnect("https://api.egygo.com"),dr.register(),window.addEventListener("beforeunload",()=>{rt.cleanup(),cr.logAnalysis()})}const Jn=new ia;Qn();const Yn=({children:s})=>{const t=ct();return l.useEffect(()=>{ki()},[]),e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(Ti,{}),e.jsx(Ci,{cartItemCount:0}),t.pathname!=="/"&&e.jsx(Kn,{}),e.jsx("main",{className:"flex-1",children:s}),e.jsx(Pi,{}),e.jsx(Di,{}),e.jsx(Gn,{})]})},Xn=()=>e.jsx(Un,{children:e.jsx(Qr,{children:e.jsx(Jr,{children:e.jsx(_i,{children:e.jsx(Yr,{client:Jn,children:e.jsx(di,{children:e.jsx(gi,{children:e.jsx(Oi,{children:e.jsxs(Oa,{children:[e.jsx(Da,{position:"top-center",richColors:!0,closeButton:!0}),e.jsx(Xr,{children:e.jsx(Yn,{children:e.jsxs(Zr,{children:[e.jsx(y,{path:"/",element:e.jsx(Vi,{})}),e.jsx(y,{path:"/products",element:e.jsx(ns,{})}),e.jsx(y,{path:"/product/:id",element:e.jsx(Gi,{})}),e.jsx(y,{path:"/login",element:e.jsx(zi,{})}),e.jsx(y,{path:"/register",element:e.jsx(Ui,{})}),e.jsx(y,{path:"/categories",element:e.jsx(us,{})}),e.jsx(y,{path:"/category",element:e.jsx(us,{})}),e.jsx(y,{path:"/category/:slug",element:e.jsx(ns,{})}),e.jsx(y,{path:"/affiliate",element:e.jsx(Yi,{})}),e.jsx(y,{path:"/merchant",element:e.jsx(dn,{})}),e.jsx(y,{path:"/deals",element:e.jsx(Ln,{})}),e.jsx(y,{path:"/cart",element:e.jsx(Hi,{})}),e.jsx(y,{path:"/checkout",element:e.jsx(Ki,{})}),e.jsx(y,{path:"/wishlist",element:e.jsx(Qi,{})}),e.jsx(y,{path:"/forgot-password",element:e.jsx(Fn,{})}),e.jsx(y,{path:"/account",element:e.jsx(ls,{})}),e.jsx(y,{path:"/my-account",element:e.jsx(ls,{})}),e.jsx(y,{path:"/settings",element:e.jsx(Vn,{})}),e.jsx(y,{path:"/orders",element:e.jsx(os,{})}),e.jsx(y,{path:"/my-orders",element:e.jsx(os,{})}),e.jsx(y,{path:"/orders/:orderId/track",element:e.jsx(Ji,{})}),e.jsx(y,{path:"/l/:linkCode",element:e.jsx(Mn,{})}),e.jsx(y,{path:"/affiliate/links",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(cs,{})})}),e.jsx(y,{path:"/affiliate/analytics",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(Zi,{})})}),e.jsx(y,{path:"/affiliate/creatives",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(en,{})})}),e.jsx(y,{path:"/affiliate/coupons",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(tn,{})})}),e.jsx(y,{path:"/affiliate/dashboard",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(Xi,{})})}),e.jsx(y,{path:"/affiliate/banners",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(sn,{})})}),e.jsx(y,{path:"/affiliate/marketing-tips",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(rn,{})})}),e.jsx(y,{path:"/affiliate/courses",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(an,{})})}),e.jsx(y,{path:"/affiliate/withdraw",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(nn,{})})}),e.jsx(y,{path:"/affiliate/resources",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(on,{})})}),e.jsx(y,{path:"/affiliate/support",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(ln,{})})}),e.jsx(y,{path:"/affiliate/referrals",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(cn,{})})}),e.jsx(y,{path:"/update-affiliate-prefs",element:e.jsx(D,{requiredRole:"affiliate",children:e.jsx(qn,{})})}),e.jsx(y,{path:"/admin",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(ds,{})})}),e.jsx(y,{path:"/admin/dashboard",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(ds,{})})}),e.jsx(y,{path:"/admin/pending-accounts",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(yn,{})})}),e.jsx(y,{path:"/admin/analytics",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(fn,{})})}),e.jsx(y,{path:"/admin/products",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(pn,{})})}),e.jsx(y,{path:"/admin/products-advanced",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(bn,{})})}),e.jsx(y,{path:"/admin/categories",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(gn,{})})}),e.jsx(y,{path:"/admin/users",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(ms,{})})}),e.jsx(y,{path:"/admin/user-management",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(wn,{})})}),e.jsx(y,{path:"/admin/users-fixed",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(vn,{})})}),e.jsx(y,{path:"/admin/orders",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(xn,{})})}),e.jsx(y,{path:"/admin/affiliates",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(ms,{})})}),e.jsx(y,{path:"/admin/commissions",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(jn,{})})}),e.jsx(y,{path:"/admin/settings",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(Nn,{})})}),e.jsx(y,{path:"/admin/coupons",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(hn,{})})}),e.jsx(y,{path:"/admin/shipping",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(_n,{})})}),e.jsx(y,{path:"/admin/advanced-settings",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(En,{})})}),e.jsx(y,{path:"/admin/notifications",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(An,{})})}),e.jsx(y,{path:"/admin/ai-dashboard",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(Cn,{})})}),e.jsx(y,{path:"/admin/ai-tools",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(kn,{})})}),e.jsx(y,{path:"/test-ai",element:e.jsx(Sn,{})}),e.jsx(y,{path:"/merchant/dashboard",element:e.jsx(D,{requiredRole:"merchant",children:e.jsx(mn,{})})}),e.jsx(y,{path:"/intermediary/dashboard",element:e.jsx(D,{requiredRole:"intermediary",children:e.jsx(zn,{})})}),e.jsx(y,{path:"/intermediary/import",element:e.jsx(D,{requiredRole:"intermediary",children:e.jsx(hs,{})})}),e.jsx(y,{path:"/intermediary/products",element:e.jsx(D,{requiredRole:"intermediary",children:e.jsx(un,{})})}),e.jsx(y,{path:"/intermediary/links",element:e.jsx(D,{requiredRole:"intermediary",children:e.jsx(cs,{})})}),e.jsx(y,{path:"/admin/vendoor-import",element:e.jsx(D,{requiredRole:"admin",children:e.jsx(hs,{})})}),e.jsx(y,{path:"/about",element:e.jsx(In,{})}),e.jsx(y,{path:"/contact",element:e.jsx(Rn,{})}),e.jsx(y,{path:"/shipping",element:e.jsx($n,{})}),e.jsx(y,{path:"/returns",element:e.jsx(On,{})}),e.jsx(y,{path:"/faq",element:e.jsx(Pn,{})}),e.jsx(y,{path:"/privacy",element:e.jsx(Tn,{})}),e.jsx(y,{path:"/terms",element:e.jsx(Dn,{})}),e.jsx(y,{path:"*",element:e.jsx(Bi,{})})]})})})]})})})})})})})})});Kr(document.getElementById("root")).render(e.jsx(Xn,{}));export{Ke as A,re as B,Z as C,Ma as D,mo as E,no as F,lo as G,$t as H,oe as I,Et as J,Ct as K,te as L,oo as M,fe as N,k as O,ho as P,Oe as Q,pe as R,ai as S,La as T,Ot as U,po as V,rr as W,ji as a,uo as b,C as c,A as d,R as e,se as f,Ae as g,ii as h,Qs as i,Js as j,Ys as k,mt as l,st as m,Gs as n,Ne as o,Ve as p,Qe as q,ve as r,be as s,Fs as t,fi as u,Va as v,za as w,Ua as x,qa as y,co as z};
