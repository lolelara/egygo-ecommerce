import{aX as D,m as P,j as s,b9 as C,a6 as E,aw as w,b7 as L,n as O,az as $,b8 as k}from"./vendor-react-BMq-IxHG.js";import{o as G,C as l,f as c,e as A,r as x,s as o,B as I,G as R,q}from"./index-DuObFWLq.js";import{S as B}from"./SEO-CoadIhO0.js";import"./vendor-ui-BA32w1ww.js";import"./vendor-query-GexG3wnZ.js";import"./vendor-other-C5r3s8Py.js";import"./vendor-animations-W1Z2cmit.js";import"./vendor-appwrite-BGb_FC-V.js";const F=[{status:"PENDING",label:"قيد الانتظار",icon:L,description:"تم استلام طلبك وجاري المراجعة"},{status:"PROCESSING",label:"قيد التجهيز",icon:O,description:"جاري تجهيز طلبك للشحن"},{status:"SHIPPED",label:"تم الشحن",icon:$,description:"طلبك في الطريق إليك"},{status:"DELIVERED",label:"تم التسليم",icon:k,description:"تم تسليم طلبك بنجاح"}],z=["PENDING","PROCESSING","SHIPPED","DELIVERED"];function U(){var g,N,b,u,y,f;const{orderId:m}=D(),{user:i}=G(),{data:e,isLoading:S}=P({queryKey:q.order(m||""),queryFn:()=>R.getOrderById(m||"",(i==null?void 0:i.$id)||""),enabled:!!m&&!!(i!=null&&i.$id)});if(S)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx("p",{className:"text-gray-500",children:"جاري التحميل..."})})});if(!e)return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx(l,{children:s.jsxs(c,{className:"py-16 text-center",children:[s.jsx(C,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"الطلب غير موجود"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"لم نتمكن من العثور على هذا الطلب"}),s.jsx(E,{to:"/orders",children:s.jsxs(A,{children:[s.jsx(w,{className:"h-4 w-4 ml-2"}),"العودة إلى طلباتي"]})})]})})});const h=e.status,j=z.indexOf(h),p=h==="CANCELLED";return s.jsxs(s.Fragment,{children:[s.jsx(B,{title:`تتبع الطلب #${e.orderNumber}`,description:"تتبع حالة طلبك وموعد التسليم المتوقع"}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx(E,{to:"/orders",children:s.jsxs(A,{variant:"ghost",className:"mb-6",children:[s.jsx(w,{className:"h-4 w-4 ml-2"}),"العودة إلى طلباتي"]})}),s.jsx(l,{className:"mb-6",children:s.jsx(x,{children:s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{children:[s.jsxs(o,{className:"text-2xl mb-2",children:["تتبع الطلب #",e.orderNumber]}),s.jsxs("p",{className:"text-gray-500",children:["تاريخ الطلب: ",new Date(e.createdAt).toLocaleDateString("ar-EG")]})]}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"إجمالي الطلب"}),s.jsxs("p",{className:"text-2xl font-bold text-primary",children:[e.total.toFixed(2)," جنيه"]})]})]})})}),p&&s.jsx(l,{className:"mb-6 border-red-200 bg-red-50",children:s.jsx(c,{className:"py-8",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(C,{className:"h-12 w-12 text-red-500"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-1",children:"تم إلغاء الطلب"}),s.jsx("p",{className:"text-red-600",children:"لقد تم إلغاء هذا الطلب. إذا كان لديك أي استفسار، يرجى التواصل مع خدمة العملاء."})]})]})})}),!p&&s.jsxs(l,{className:"mb-6",children:[s.jsx(x,{children:s.jsx(o,{children:"حالة الطلب"})}),s.jsx(c,{children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute right-6 top-0 h-full w-0.5 bg-gray-200 md:right-auto md:left-1/2 md:transform md:-translate-x-1/2"}),s.jsx("div",{className:"space-y-8",children:F.map((r,d)=>{const a=d<j,t=d===j,n=r.icon;return s.jsxs("div",{className:"relative flex items-start gap-4",children:[s.jsx("div",{className:`relative z-10 flex h-12 w-12 items-center justify-center rounded-full border-2 ${a?"bg-green-500 border-green-500":t?"bg-primary border-primary":"bg-gray-100 border-gray-300"}`,children:s.jsx(n,{className:`h-6 w-6 ${a||t?"text-white":"text-gray-400"}`})}),s.jsxs("div",{className:"flex-1 pt-1",children:[s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[s.jsx("h4",{className:`text-lg font-semibold ${a||t?"text-gray-900":"text-gray-400"}`,children:r.label}),t&&s.jsx(I,{variant:"default",children:"الحالة الحالية"}),a&&s.jsx(I,{variant:"outline",className:"bg-green-50 border-green-500 text-green-700",children:"✓ مكتمل"})]}),s.jsx("p",{className:`mt-1 text-sm ${a||t?"text-gray-600":"text-gray-400"}`,children:r.description})]})]},r.status)})})]})})]}),s.jsxs(l,{className:"mb-6",children:[s.jsx(x,{children:s.jsx(o,{children:"المنتجات المطلوبة"})}),s.jsx(c,{children:s.jsx("div",{className:"space-y-4",children:(g=e.items)==null?void 0:g.map(r=>{var d,a,t,n,v;return s.jsxs("div",{className:"flex items-center gap-4 pb-4 border-b last:border-b-0",children:[s.jsx("img",{src:((t=(a=(d=r.product)==null?void 0:d.images)==null?void 0:a[0])==null?void 0:t.url)||"/placeholder.png",alt:((n=r.product)==null?void 0:n.name)||"منتج",className:"w-20 h-20 object-cover rounded-lg"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold",children:((v=r.product)==null?void 0:v.name)||"منتج"}),s.jsxs("p",{className:"text-sm text-gray-500",children:["الكمية: ",r.quantity," × ",r.price.toFixed(2)," جنيه"]})]}),s.jsxs("p",{className:"font-bold text-primary",children:[r.total.toFixed(2)," جنيه"]})]},r.id)})})})]}),s.jsxs(l,{children:[s.jsx(x,{children:s.jsx(o,{children:"عنوان التسليم"})}),s.jsx(c,{children:s.jsxs("div",{className:"space-y-2 text-gray-700",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"الاسم:"})," ",(N=e.shippingAddress)==null?void 0:N.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"الهاتف:"})," ",(b=e.shippingAddress)==null?void 0:b.phone]}),s.jsxs("p",{children:[s.jsx("strong",{children:"العنوان:"})," ",(u=e.shippingAddress)==null?void 0:u.address]}),((y=e.shippingAddress)==null?void 0:y.city)&&s.jsxs("p",{children:[s.jsx("strong",{children:"المدينة:"})," ",e.shippingAddress.city]}),((f=e.shippingAddress)==null?void 0:f.zipCode)&&s.jsxs("p",{children:[s.jsx("strong",{children:"الرمز البريدي:"})," ",e.shippingAddress.zipCode]})]})})]})]})]})}export{U as default};
