import{r as j,b4 as B,b as ae,j as e,B as z,L as re,C as k,a as U,X as te,w as ie,D as M,h as H,P as le,i as J,k as G,l as Q,b5 as V,e as D,f as T,o as ne,g as q,aa as X,aE as ce,I as N,ap as Y,aq as Z,ar as ee,as as se,at as $,G as oe,T as de,aA as me,b6 as xe,s as f,v as he,m as ue}from"./index-Ce-RwxJS.js";import{A as _}from"./AdminLayout-DRAN_nM7.js";import{T as ge,a as je,b as W,c as S,d as pe,e as I}from"./table-DhT4s9qg.js";import{U as fe}from"./upload-BkldABOD.js";import{I as ve}from"./image-C8mqpI6f.js";import{b as O}from"./admin-api-DJKkOHRe.js";import{T as ye}from"./trending-down-SSQIHDEp.js";import{S as Ne}from"./square-pen-BvEjHzCI.js";import"./tag-BB9opunb.js";import"./settings-DdUeHZqS.js";function be({value:l=[],onChange:g,maxFiles:h=5,disabled:y=!1}){const[t,m]=j.useState(!1),[d,b]=j.useState(l.map(r=>({url:r,fileId:B.extractFileId(r)||void 0}))),w=j.useRef(null),{toast:p}=ae(),F=async r=>{const n=Array.from(r.target.files||[]);if(n.length===0)return;if(d.length+n.length>h){p({title:"ØªØ­Ø°ÙŠØ±",description:`ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ ${h} ØµÙˆØ± ÙƒØ­Ø¯ Ø£Ù‚ØµÙ‰`,variant:"destructive"});return}const o=B.validateFiles(n);if(!o.valid){p({title:"Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ù„ÙØ§Øª",description:o.errors.join(`
`),variant:"destructive"});return}m(!0);try{const c=await B.uploadFiles(n),v=c.map(C=>({url:C.url,fileId:C.fileId})),x=[...d,...v];b(x),g(x.map(C=>C.url)),p({title:"ØªÙ… Ø§Ù„Ø±ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­",description:`ØªÙ… Ø±ÙØ¹ ${c.length} ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­`})}catch(c){p({title:"ÙØ´Ù„ Ø§Ù„Ø±ÙØ¹",description:c.message||"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±",variant:"destructive"})}finally{m(!1),w.current&&(w.current.value="")}},a=async r=>{const n=d[r];if(n.fileId)try{await B.deleteFile(n.fileId)}catch(c){console.error("Failed to delete file:",c)}const o=d.filter((c,v)=>v!==r);b(o),g(o.map(c=>c.url)),p({title:"ØªÙ… Ø§Ù„Ø­Ø°Ù",description:"ØªÙ… Ø­Ø°Ù Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­"})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{ref:w,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",multiple:!0,onChange:F,disabled:y||t||d.length>=h,className:"hidden"}),e.jsx(z,{type:"button",variant:"outline",onClick:()=>w.current?.click(),disabled:y||t||d.length>=h,className:"w-full",children:t?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"ml-2 h-4 w-4 animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"ml-2 h-4 w-4"}),"Ø±ÙØ¹ ØµÙˆØ± (",d.length,"/",h,")"]})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: ",h," ØµÙˆØ±ØŒ 5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª Ù„ÙƒÙ„ ØµÙˆØ±Ø© (JPG, PNG, WEBP)"]})]}),d.length>0&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:d.map((r,n)=>e.jsx(k,{className:"relative group",children:e.jsxs("div",{className:"aspect-square",children:[e.jsx("img",{src:r.url,alt:`ØµÙˆØ±Ø© ${n+1}`,className:"w-full h-full object-cover rounded-lg",onError:o=>{o.currentTarget.src="/placeholder.svg"}}),n===0&&e.jsx(U,{className:"absolute top-2 left-2 bg-primary",children:"Ø±Ø¦ÙŠØ³ÙŠØ©"}),e.jsx(z,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>a(n),disabled:y||t,children:e.jsx(te,{className:"h-4 w-4"})})]})},n))}),d.length===0&&!t&&e.jsx(k,{className:"border-dashed",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(ve,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ù„Ù… ÙŠØªÙ… Ø±ÙØ¹ ØµÙˆØ± Ø¨Ø¹Ø¯"})]})})]})}const K=({product:l,categories:g,onSubmit:h,onCancel:y})=>{const[t,m]=j.useState({name:l?.name||"",description:l?.description||"",price:l?.price||0,originalPrice:l?.originalPrice||0,basePrice:l?.basePrice||l?.price||0,minCommissionPrice:l?.minCommissionPrice||l?.price||0,categoryId:l?.category||"",images:l?.images||[],tags:l?.tags?.join(", ")||"",stockQuantity:100,affiliateCommission:l?.affiliateCommission||8,colors:l?.colors?.join(", ")||"",sizes:l?.sizes?.join(", ")||""}),[d,b]=j.useState(()=>{try{const a=l?.colorSizeInventory;return a?JSON.parse(a):[]}catch{return[]}}),w=a=>{a.preventDefault();const r=t.colors.split(",").map(x=>x.trim()).filter(Boolean),n=t.sizes.split(",").map(x=>x.trim()).filter(Boolean),o=[];r.length>0&&n.length>0&&o.push(...d);const c=o.reduce((x,C)=>x+C.quantity,0);console.log("ğŸ“¦ Inventory data being saved:",o),console.log("ğŸ“Š Total stock calculated:",c);const v={...t,images:t.images,tags:t.tags.split(",").map(x=>x.trim()).filter(Boolean),colors:r,sizes:n,colorSizeInventory:JSON.stringify(o),stock:c||t.stockQuantity||0};console.log("ğŸ’¾ Submit data:",v),h(l?{...v,id:l.id}:v)},p=()=>{const a=t.colors.split(",").map(n=>n.trim()).filter(Boolean),r=t.sizes.split(",").map(n=>n.trim()).filter(Boolean);if(a.length>0&&r.length>0){const n=[];a.forEach(o=>{r.forEach(c=>{const v=d.find(x=>x.color===o&&x.size===c);n.push({color:o,size:c,quantity:v?.quantity||0})})}),b(n)}},F=(a,r,n)=>{b(o=>o.map(c=>c.color===a&&c.size===r?{...c,quantity:Math.max(0,n)}:c))};return e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"name",children:"Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx(N,{id:"name",value:t.name,onChange:a=>m(r=>({...r,name:a.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"category",children:"Ø§Ù„ÙØ¦Ø©"}),e.jsxs(Y,{value:t.categoryId,onValueChange:a=>m(r=>({...r,categoryId:a})),children:[e.jsx(Z,{children:e.jsx(ee,{placeholder:"Ø§Ø®ØªØ± ÙØ¦Ø©"})}),e.jsx(se,{children:g.map(a=>e.jsx($,{value:a.id,children:a.name},a.id))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"description",children:"Ø§Ù„ÙˆØµÙ"}),e.jsx(he,{id:"description",value:t.description,onChange:a=>m(r=>({...r,description:a.target.value})),rows:3,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"price",children:"Ø§Ù„Ø³Ø¹Ø± Ù„Ù„Ø¹Ø±Ø¶ (Ø¬.Ù…)"}),e.jsx(N,{id:"price",type:"number",value:t.price,onChange:a=>m(r=>({...r,price:Number(a.target.value)})),min:"0",step:"0.01",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø°ÙŠ Ø³ÙŠØ¸Ù‡Ø± Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"originalPrice",children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ (Ø¬.Ù…)"}),e.jsx(N,{id:"originalPrice",type:"number",value:t.originalPrice,onChange:a=>m(r=>({...r,originalPrice:Number(a.target.value)})),min:"0",step:"0.01"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø§Ù„Ø³Ø¹Ø± Ù‚Ø¨Ù„ Ø§Ù„Ø®ØµÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3 text-primary",children:"âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ù„Ù„Ù…Ø³ÙˆÙ‚ÙŠÙ†"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"basePrice",children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ (Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)"}),e.jsx(N,{id:"basePrice",type:"number",value:t.basePrice,onChange:a=>m(r=>({...r,basePrice:Number(a.target.value)})),min:"0",step:"0.01",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø°ÙŠ Ø³ØªØ­ØµÙ„ Ø¹Ù„ÙŠÙ‡ (Ø¨Ø¯ÙˆÙ† Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ø³ÙˆÙ‚)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"minCommissionPrice",children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø¹Ø± (Ø´Ø§Ù…Ù„ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©)"}),e.jsx(N,{id:"minCommissionPrice",type:"number",value:t.minCommissionPrice,onChange:a=>m(r=>({...r,minCommissionPrice:Number(a.target.value)})),min:t.basePrice,step:"0.01",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ø£Ù‚Ù„ Ø³Ø¹Ø± ÙŠÙ…ÙƒÙ† Ù„Ù„Ù…Ø³ÙˆÙ‚ Ø¨ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù‡"})]})]}),t.basePrice>0&&t.minCommissionPrice>0&&e.jsxs("div",{className:"mt-3 p-3 bg-muted rounded-lg",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("strong",{children:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø¹Ù…ÙˆÙ„Ø©:"})," ",(t.minCommissionPrice-t.basePrice).toFixed(2)," Ø¬.Ù…"," ","(",((t.minCommissionPrice-t.basePrice)/t.basePrice*100).toFixed(1),"%)"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Ø§Ù„Ù…Ø³ÙˆÙ‚ ÙŠÙ…ÙƒÙ†Ù‡ Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ù‚ÙŠÙ…Ø© Ø£Ø¹Ù„Ù‰ Ù…Ù† ",t.minCommissionPrice.toFixed(2)," Ø¬.Ù…"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"ØµÙˆØ± Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx(be,{value:t.images,onChange:a=>m(r=>({...r,images:a})),maxFiles:5})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"tags",children:"Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ© (Ù…Ù†ÙØµÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)"}),e.jsx(N,{id:"tags",value:t.tags,onChange:a=>m(r=>({...r,tags:a.target.value})),placeholder:"Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª, Ø³Ù…Ø§Ø¹Ø§Øª, Ø¨Ù„ÙˆØªÙˆØ«"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"colors",children:"Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ØªØ§Ø­Ø© (Ù…Ù†ÙØµÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)"}),e.jsx(N,{id:"colors",value:t.colors,onChange:a=>{m(r=>({...r,colors:a.target.value}))},onBlur:p,placeholder:"Ø£Ø­Ù…Ø±, Ø£Ø²Ø±Ù‚, Ø£Ø®Ø¶Ø±"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø±, Ø£Ø²Ø±Ù‚, Ø£Ø³ÙˆØ¯ Ø£Ùˆ Red, Blue, Black"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"sizes",children:"Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© (Ù…Ù†ÙØµÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„)"}),e.jsx(N,{id:"sizes",value:t.sizes,onChange:a=>{m(r=>({...r,sizes:a.target.value}))},onBlur:p,placeholder:"S, M, L, XL"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ù…Ø«Ø§Ù„: S, M, L, XL Ø£Ùˆ 38, 40, 42, 44"})]})]}),d.length>0&&e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-muted/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(f,{className:"text-base font-semibold",children:"Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ù„ÙƒÙ„ Ù„ÙˆÙ† ÙˆÙ…Ù‚Ø§Ø³"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†: ",d.reduce((a,r)=>a+r.quantity,0)]})]}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 max-h-[300px] overflow-y-auto",children:d.map((a,r)=>e.jsxs("div",{className:"space-y-1 border rounded p-2 bg-background",children:[e.jsxs("div",{className:"text-xs font-medium text-center",children:[a.color," - ",a.size]}),e.jsx(N,{type:"number",min:"0",value:a.quantity,onChange:n=>F(a.color,a.size,Number(n.target.value)),className:"h-8 text-center",placeholder:"0"})]},r))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ğŸ’¡ Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„ÙƒÙ„ ØªØ±ÙƒÙŠØ¨Ø© Ù„ÙˆÙ† ÙˆÙ…Ù‚Ø§Ø³. Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø³ÙŠØªÙ… Ø­Ø³Ø§Ø¨Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹."})]}),e.jsxs(ue,{children:[e.jsx(z,{type:"button",variant:"outline",onClick:y,children:"Ø¥Ù„ØºØ§Ø¡"}),e.jsx(z,{type:"submit",children:l?"ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬":"Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬"})]})]})};function Te(){const{user:l}=ie(),[g,h]=j.useState([]),[y,t]=j.useState([]),[m,d]=j.useState(!0),[b,w]=j.useState(""),[p,F]=j.useState("all"),[a,r]=j.useState(!1),[n,o]=j.useState(null);j.useEffect(()=>{(async()=>{d(!0);try{const[i,u]=await Promise.all([me.getAll({}),xe.getAll()]);let P=i.products;l&&l.labels&&!l.labels.includes("admin")&&(console.log("Filtering products for merchant:",l.$id),P=i.products.filter(A=>A.merchantId===l.$id),console.log("Merchant products:",P.length)),h(P),t(u.categories)}catch(i){console.error("Error fetching data:",i)}d(!1)})()},[l]);const c=g.filter(s=>{const i=s.name.toLowerCase().includes(b.toLowerCase())||s.description.toLowerCase().includes(b.toLowerCase()),u=p==="all"||s.category===p;return i&&u}),v=async s=>{try{const i=await O.create(s,l?.$id);h(u=>[i,...u]),r(!1)}catch(i){console.error("Error adding product:",i),alert("ÙØ´Ù„ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬")}},x=async s=>{try{const i=g.find(E=>E.id===s.id),u=l&&l.labels?.includes("admin"),P=i&&i.merchantId===l?.$id;if(!u&&!P){alert("Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ØµÙ„Ø§Ø­ÙŠØ© Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬");return}const A=await O.update(s);h(E=>E.map(L=>L.id===s.id?{...A,category:s.categoryId||L.category}:L)),o(null)}catch(i){console.error("Error updating product:",i),alert("ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù†ØªØ¬")}},C=async s=>{if(confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ"))try{await O.delete(s),h(i=>i.filter(u=>u.id!==s)),alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­")}catch(i){console.error("Error deleting product:",i),alert("ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬: "+i.message)}},R=s=>{if(s.colorSizeInventory)try{const i=JSON.parse(s.colorSizeInventory);if(Array.isArray(i)&&i.length>0)return i.reduce((P,A)=>P+(A.quantity||0),0)>0}catch(i){console.error("Error parsing inventory for product:",s.id,i)}return s.colors?.length>0||s.sizes?.length>0||s.stock!==void 0&&s.stock>0?!0:s.inStock!==void 0?s.inStock:!0};return m?e.jsx(_,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"})}),e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-10 bg-muted rounded mb-4"}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((s,i)=>e.jsx("div",{className:"h-16 bg-muted rounded"},i))})]})]})}):e.jsx(_,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),e.jsxs(M,{open:a,onOpenChange:r,children:[e.jsx(H,{asChild:!0,children:e.jsxs(z,{children:[e.jsx(le,{className:"h-4 w-4 mr-2"}),"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯"]})}),e.jsxs(J,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsx(Q,{children:"Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯"}),e.jsx(V,{children:"Ø£Ø¯Ø®Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø¬Ø¯ÙŠØ¯"})]}),e.jsx(K,{categories:y,onSubmit:v,onCancel:()=>r(!1)})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(k,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª"}),e.jsx(ne,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(q,{children:e.jsx("div",{className:"text-2xl font-bold",children:g.length})})]}),e.jsxs(k,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©"}),e.jsx(X,{className:"h-4 w-4 text-green-600"})]}),e.jsx(q,{children:e.jsx("div",{className:"text-2xl font-bold",children:g.filter(s=>R(s)).length})})]}),e.jsxs(k,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ØºÙŠØ± Ø§Ù„Ù…ØªØ§Ø­Ø©"}),e.jsx(ye,{className:"h-4 w-4 text-red-600"})]}),e.jsx(q,{children:e.jsx("div",{className:"text-2xl font-bold",children:g.filter(s=>!R(s)).length})})]}),e.jsxs(k,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Ù…ØªÙˆØ³Ø· Ø§Ù„ØªÙ‚ÙŠÙŠÙ…"}),e.jsx(X,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(q,{children:e.jsx("div",{className:"text-2xl font-bold",children:g.length>0?(g.reduce((s,i)=>s+i.rating,0)/g.length).toFixed(1):"0.0"})})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(N,{placeholder:"Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...",value:b,onChange:s=>w(s.target.value),className:"pl-10"})]})}),e.jsxs(Y,{value:p,onValueChange:F,children:[e.jsx(Z,{className:"w-48",children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx($,{value:"all",children:"Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙØ¦Ø§Øª"}),y.map(s=>e.jsx($,{value:s.id,children:s.name},s.id))]})]})]}),e.jsxs(k,{children:[e.jsx(D,{children:e.jsxs(T,{children:["Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (",c.length,")"]})}),e.jsx(q,{children:e.jsxs(ge,{children:[e.jsx(je,{children:e.jsxs(W,{children:[e.jsx(S,{children:"Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx(S,{children:"Ø§Ù„ÙØ¦Ø©"}),e.jsx(S,{children:"Ø§Ù„Ø³Ø¹Ø±"}),e.jsx(S,{children:"Ø§Ù„ØªÙ‚ÙŠÙŠÙ…"}),e.jsx(S,{children:"Ø§Ù„Ù…Ø®Ø²ÙˆÙ†"}),e.jsx(S,{children:"Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©"}),e.jsx(S,{className:"text-center",children:"Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª"})]})}),e.jsx(pe,{children:c.map(s=>{const i=y.find(u=>u.id===s.category);return e.jsxs(W,{children:[e.jsx(I,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:oe(s.images?.[0]),alt:s.name,className:"w-10 h-10 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-muted-foreground truncate max-w-[200px]",children:s.description})]})]})}),e.jsx(I,{children:e.jsx(U,{variant:"outline",children:i?.name||s.category})}),e.jsx(I,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.price," Ø¬.Ù…"]}),s.originalPrice&&e.jsxs("div",{className:"text-sm text-muted-foreground line-through",children:[s.originalPrice," Ø¬.Ù…"]})]})}),e.jsx(I,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:s.rating.toFixed(1)}),e.jsxs("span",{className:"text-muted-foreground",children:["(",s.reviewCount,")"]})]})}),e.jsx(I,{children:e.jsx(U,{variant:s.inStock?"default":"secondary",children:s.inStock?"Ù…ØªØ§Ø­":"ØºÙŠØ± Ù…ØªØ§Ø­"})}),e.jsxs(I,{children:[s.affiliateCommission,"%"]}),e.jsx(I,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{open:n?.id===s.id,onOpenChange:u=>!u&&o(null),children:[e.jsx(H,{asChild:!0,children:e.jsx(z,{variant:"outline",size:"sm",onClick:()=>o(s),children:e.jsx(Ne,{className:"h-4 w-4"})})}),e.jsxs(J,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsx(Q,{children:"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬"}),e.jsx(V,{children:"ØªØ¹Ø¯ÙŠÙ„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬"})]}),n&&e.jsx(K,{product:n,categories:y,onSubmit:x,onCancel:()=>o(null)})]})]}),e.jsx(z,{variant:"outline",size:"sm",onClick:()=>{confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ")&&C(s.id)},children:e.jsx(de,{className:"h-4 w-4 text-red-600"})})]})})]},s.id)})})]})})]})]})})}export{Te as default};
