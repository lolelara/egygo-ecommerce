# ๐ฎ ุฏููู ุชุทุจูู ูุธุงู Gamification - ููุชูู

## โ **ุชู ุงูุชุทุจูู ุจูุฌุงุญ!**

ุชู ุชุทุจูู ุฌููุน ุงูููุฒุงุช ุงููุทููุจุฉ ููุธุงู Gamification ุงููุงูู ูููุณูููู.

---

## ๐ฆ **ุงููููุงุช ุงููุถุงูุฉ:**

### **1. Client-Side Files:**

#### **`client/lib/affiliate-sales-tracker.ts`** โ
```typescript
// ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ:
- trackAffiliateSale() // ุชุชุจุน ุงููุจูุนุงุช ูุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช
- getAffiliateStats() // ุงูุญุตูู ุนูู ุฅุญุตุงุฆูุงุช ุงููุณูู
- calculateStreak() // ุญุณุงุจ ุงูุณูุณูุฉ ุชููุงุฆูุงู
- checkChallengesProgress() // ูุญุต ุชูุฏู ุงูุชุญุฏูุงุช
- updateLeaderboard() // ุชุญุฏูุซ ููุญุฉ ุงููุชุตุฏุฑูู
- initializeAffiliateChallenge() // ุชููุฆุฉ ุชุญุฏู ุฌุฏูุฏ

// ุงูููุฒุงุช:
โ ุชุญุฏูุซ todaySales, weekSales, monthSales ุชููุงุฆูุงู
โ ุญุณุงุจ currentStreak ุจูุงุกู ุนูู lastSaleDate
โ ุญุณุงุจ Level ู Points
โ ูุญุต ุงูุชุญุฏูุงุช ูุฅููุงููุง ุชููุงุฆูุงู
โ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุนูุฏ ุงูุฅููุงู
โ ุชุญุฏูุซ Leaderboard
```

#### **`client/lib/challenge-notifications.ts`** โ
```typescript
// ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ:
- sendChallengeReminders() // ุชุฐููุฑุงุช ุงูุชุญุฏูุงุช
- checkStreakMilestones() // ุฅุดุนุงุฑุงุช ุงูุณูุณูุฉ
- sendDailyMotivation() // ุฑุณุงูุฉ ุชุญููุฒูุฉ ููููุฉ
- notifyChallengeCompletion() // ุฅุดุนุงุฑ ุฅููุงู ุงูุชุญุฏู
- notifyLevelUp() // ุฅุดุนุงุฑ ุงูุงุฑุชูุงุก ูููุณุชูู
- notifyLeaderboardChange() // ุฅุดุนุงุฑ ุชุบููุฑ ุงููุฑูุฒ

// ุงูููุฒุงุช:
โ ุชุฐููุฑ ูุจู 24 ุณุงุนุฉ ูู ุงูุชูุงุก ุงูุชุญุฏู
โ ุฅุดุนุงุฑุงุช ุนูุฏ ุงููุตูู ูุฅูุฌุงุฒุงุช ุงูุณูุณูุฉ (3, 7, 14, 30, 60, 90, 180, 365 ููู)
โ ุฅุดุนุงุฑุงุช ุนูุฏ ุงูุงุฑุชูุงุก ูููุณุชูู
โ ุฅุดุนุงุฑุงุช ุนูุฏ ุชุบููุฑ ุงููุฑูุฒ ูู Leaderboard
โ ุฑุณุงุฆู ุชุญููุฒูุฉ ููููุฉ
```

---

### **2. Server-Side Files:**

#### **`scripts/affiliate-cron-jobs.js`** โ
```javascript
// ุงูููุงู ุงููุชุงุญุฉ:
- resetDailyStats() // ุฅุนุงุฏุฉ ุชุนููู todaySales ููููุงู
- resetWeeklyStats() // ุฅุนุงุฏุฉ ุชุนููู weekSales ุฃุณุจูุนูุงู
- resetMonthlyStats() // ุฅุนุงุฏุฉ ุชุนููู monthSales ุดูุฑูุงู
- updateLeaderboardRankings() // ุชุญุฏูุซ ุชุฑุชูุจ ุงููุชุตุฏุฑูู
- sendChallengeReminders() // ุฅุฑุณุงู ุชุฐููุฑุงุช ุงูุชุญุฏูุงุช
- cleanExpiredChallenges() // ุชูุธูู ุงูุชุญุฏูุงุช ุงูููุชููุฉ

// ุงูุงุณุชุฎุฏุงู:
node scripts/affiliate-cron-jobs.js daily
node scripts/affiliate-cron-jobs.js weekly
node scripts/affiliate-cron-jobs.js monthly
node scripts/affiliate-cron-jobs.js hourly
node scripts/affiliate-cron-jobs.js reminders
node scripts/affiliate-cron-jobs.js all
```

#### **`.github/workflows/affiliate-cron.yml`** โ
```yaml
// GitHub Actions ููุชุดุบูู ุงูุชููุงุฆู:
- Daily: ูู ููู ูู ููุชุตู ุงูููู (00:00 UTC)
- Weekly: ูู ุฃุญุฏ ูู ููุชุตู ุงูููู
- Monthly: ุฃูู ููู ูู ูู ุดูุฑ
- Hourly: ูู ุณุงุนุฉ (Leaderboard)
- Every 6 hours: ุงูุชุฐููุฑุงุช

// ูููู ุฃูุถุงู ุงูุชุดุบูู ุงููุฏูู ูู GitHub Actions
```

---

### **3. Modified Files:**

#### **`client/lib/orders-api.ts`** โ
```typescript
// ุงูุชุนุฏููุงุช:
โ ุฅุถุงูุฉ ูุนุงูู affiliateCode ูู createOrder()
โ ุญูุธ affiliateCode ูู ุงูุทูุจ
โ ุงูุจุญุซ ุนู ุงููุณูู ุจูุงุกู ุนูู ุงูููุฏ
โ ุญุณุงุจ ุงูุนูููุฉ (10% ูู ุงูุฅุฌูุงูู)
โ ุงุณุชุฏุนุงุก trackAffiliateSale() ุชููุงุฆูุงู
โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุฏูู ูุดู ุงูุทูุจ

// ุงูุงุณุชุฎุฏุงู:
const order = await createOrder(orderData, 'AFF123');
```

---

## ๐ **ููู ูุนูู ุงููุธุงู:**

### **1. ุนูุฏ ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ:**

```typescript
// ูู Checkout.tsx ุฃู Cart.tsx:
const affiliateCode = new URLSearchParams(window.location.search).get('ref');
const order = await createOrder(orderData, affiliateCode);

// ูุง ูุญุฏุซ ุชููุงุฆูุงู:
1. โ ูุชู ุญูุธ affiliateCode ูู ุงูุทูุจ
2. โ ูุชู ุงูุจุญุซ ุนู ุงููุณูู
3. โ ูุชู ุญุณุงุจ ุงูุนูููุฉ (10%)
4. โ ูุชู ุงุณุชุฏุนุงุก trackAffiliateSale()
   - ุชุญุฏูุซ todaySales, weekSales, monthSales
   - ุญุณุงุจ currentStreak
   - ุญุณุงุจ Level ู Points
   - ุชุญุฏูุซ totalSales, totalEarnings
5. โ ูุชู ูุญุต ุงูุชุญุฏูุงุช checkChallengesProgress()
   - ุชุญุฏูุซ current ููู ุชุญุฏู
   - ุฅุฐุง ุงูุชูู โ ุฅุดุนุงุฑ + ุชุญุฏูุซ completed
6. โ ูุชู ุชุญุฏูุซ Leaderboard
7. โ ุฅุฑุณุงู ุฅุดุนุงุฑุงุช:
   - ุฅุดุนุงุฑ ุงูุนูููุฉ ุงูุฌุฏูุฏุฉ
   - ุฅุดุนุงุฑ ุฅููุงู ุงูุชุญุฏู (ุฅู ููุฌุฏ)
   - ุฅุดุนุงุฑ ุงูุณูุณูุฉ (ุฅู ูุตู ูุฅูุฌุงุฒ)
   - ุฅุดุนุงุฑ Level Up (ุฅู ุงุฑุชูู)
```

---

### **2. ุงูููุงู ุงูุฏูุฑูุฉ (Cron Jobs):**

#### **ููููุงู (00:00 UTC):**
```bash
โ ุฅุนุงุฏุฉ ุชุนููู todaySales = 0 ูุฌููุน ุงููุณูููู
โ ุชูุธูู ุงูุชุญุฏูุงุช ุงูููุชููุฉ
```

#### **ุฃุณุจูุนูุงู (ุงูุฃุญุฏ 00:00 UTC):**
```bash
โ ุฅุนุงุฏุฉ ุชุนููู weekSales = 0 ูุฌููุน ุงููุณูููู
```

#### **ุดูุฑูุงู (ุฃูู ููู 00:00 UTC):**
```bash
โ ุฅุนุงุฏุฉ ุชุนููู monthSales = 0 ูุฌููุน ุงููุณูููู
โ ุชุญุฏูุซ ุชุฑุชูุจ Leaderboard ุงูุดูุฑู
```

#### **ูู ุณุงุนุฉ:**
```bash
โ ุชุญุฏูุซ ุชุฑุชูุจ Leaderboard
โ ุญุณุงุจ ุงูู rank ููู ูุณูู
```

#### **ูู 6 ุณุงุนุงุช:**
```bash
โ ุฅุฑุณุงู ุชุฐููุฑุงุช ููุชุญุฏูุงุช ุงูุชู ุชูุชูู ุฎูุงู 24 ุณุงุนุฉ
```

---

## ๐ฏ **ุงูุฅุญุตุงุฆูุงุช ุงููุชุชุจุนุฉ:**

### **ูู `affiliate_stats`:**
```typescript
{
  affiliateId: string,
  todaySales: number,      // โ ููุญุฏูุซ ุนูุฏ ูู ุจูุน
  weekSales: number,       // โ ููุญุฏูุซ ุนูุฏ ูู ุจูุน
  monthSales: number,      // โ ููุญุฏูุซ ุนูุฏ ูู ุจูุน
  totalSales: number,      // โ ููุญุฏูุซ ุนูุฏ ูู ุจูุน
  currentStreak: number,   // โ ููุญุณุจ ุชููุงุฆูุงู
  level: number,           // โ ููุญุณุจ ุชููุงุฆูุงู (ูู 10 ูุจูุนุงุช)
  points: number,          // โ ููุญุณุจ ุชููุงุฆูุงู (= ุงูุนูููุฉ)
  totalEarnings: number,   // โ ููุญุฏูุซ ุนูุฏ ูู ุจูุน
  lastSaleDate: string,    // โ ููุญุฏูุซ ุนูุฏ ูู ุจูุน
}
```

---

## ๐ข **ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉ:**

### **1. ุฅุดุนุงุฑุงุช ุงููุจูุนุงุช:**
```
๐ฐ ุนูููุฉ ุฌุฏูุฏุฉ!
ุญุตูุช ุนูู 50 ุฌ.ู ูู ุจูุน ููุชุฌ XYZ
```

### **2. ุฅุดุนุงุฑุงุช ุงูุชุญุฏูุงุช:**
```
๐ ุชุญุฏู ููุชูู!
ุฃูููุช ุชุญุฏู "ุจุน 10 ููุชุฌุงุช ุงูููู" - ุงุณุชูู 100 ุฌ.ู
```

### **3. ุฅุดุนุงุฑุงุช ุงูุณูุณูุฉ:**
```
๐ฅ ุณูุณูุฉ 7 ุฃูุงู!
ุฑุงุฆุน! ุญููุช ูุจูุนุงุช ููุฏุฉ 7 ุฃูุงู ูุชุชุงููุฉ

โญ ุณูุณูุฉ ุฃุณุจูุนูู!
ูุฐูู! ุฃูุช ูู ุทุฑููู ููููุฉ

๐ ุณูุณูุฉ ุดูุฑ ูุงูู!
ุฅูุฌุงุฒ ุงุณุชุซูุงุฆู! 30 ููู ูุชุชุงูู
```

### **4. ุฅุดุนุงุฑุงุช ุงููุณุชูู:**
```
โญ ูุณุชูู ุฌุฏูุฏ! ๐ฅ
ุญุตูุช ุนูู ุดุงุฑุฉ ุจุฑููุฒูุฉ!

โญ ูุณุชูู ุฌุฏูุฏ! ๐ฅ
ุญุตูุช ุนูู ุดุงุฑุฉ ุฐูุจูุฉ!
```

### **5. ุฅุดุนุงุฑุงุช Leaderboard:**
```
๐ ุชูุฏู ูู ุงูุชุฑุชูุจ!
ุฑุงุฆุน! ุชูุฏูุช 3 ูุฑุงูุฒ - ุฃูุช ุงูุขู ูู ุงููุฑูุฒ 5
```

### **6. ุชุฐููุฑุงุช ุงูุชุญุฏูุงุช:**
```
โฐ ุชุฐููุฑ: ุชุญุฏู ููุชูู ูุฑูุจุงู
ุชุญุฏู "ุจุน 10 ููุชุฌุงุช ุงูููู" ููุชูู ุฎูุงู 24 ุณุงุนุฉ - ุงูุชูุฏู: 60%
```

---

## ๐ **ุงูุชูุนูู ูุงูุงุณุชุฎุฏุงู:**

### **1. ุชูุนูู GitHub Actions:**
```bash
# ุงูููู ููุฌูุฏ ูู:
.github/workflows/affiliate-cron.yml

# ุณูุนูู ุชููุงุฆูุงู ุจุนุฏ Push ููู repo
# ูููู ุฃูุถุงู ุงูุชุดุบูู ุงููุฏูู ูู:
GitHub โ Actions โ Affiliate Cron Jobs โ Run workflow
```

### **2. ุชุดุบูู ูุฏูู (ููุงุฎุชุจุงุฑ):**
```bash
# Daily jobs
node scripts/affiliate-cron-jobs.js daily

# Weekly jobs
node scripts/affiliate-cron-jobs.js weekly

# Monthly jobs
node scripts/affiliate-cron-jobs.js monthly

# Hourly jobs
node scripts/affiliate-cron-jobs.js hourly

# Reminders
node scripts/affiliate-cron-jobs.js reminders

# All jobs
node scripts/affiliate-cron-jobs.js all
```

### **3. ุงุณุชุฎุฏุงู ูู ุงูููุฏ:**
```typescript
// ุนูุฏ ุฅูุดุงุก ุทูุจ:
import { createOrder } from '@/lib/orders-api';

const affiliateCode = new URLSearchParams(window.location.search).get('ref');
const order = await createOrder(orderData, affiliateCode);
// ูู ุดูุก ูุญุฏุซ ุชููุงุฆูุงู! โ

// ุชููุฆุฉ ุชุญุฏูุงุช ูููุณูู ุงูุฌุฏูุฏ:
import { initializeAffiliateChallenge } from '@/lib/affiliate-sales-tracker';

const challengeTemplates = [
  {
    id: 'daily_10_sales',
    title: 'ุจุน 10 ููุชุฌุงุช ุงูููู',
    description: 'ุญูู 10 ูุจูุนุงุช ูู ููู ูุงุญุฏ',
    type: 'daily',
    target: 10,
    reward: 100,
    rewardType: 'cash',
  },
  // ... ุงููุฒูุฏ
];

for (const template of challengeTemplates) {
  await initializeAffiliateChallenge(affiliateId, template);
}
```

---

## ๐ **ูุซุงู ุนููู:**

### **ุงูุณููุงุฑูู:**
```
1. ูุณูู ุฌุฏูุฏ ูุณุฌู ูู ุงููุธุงู
2. ูุชู ุชููุฆุฉ ุงูุชุญุฏูุงุช ูู ุชููุงุฆูุงู
3. ูุดุงุฑู ุฑุงุจุท ููุชุฌ: https://egygo.me/#/product/123?ref=AFF001
4. ุนููู ูุถุบุท ุนูู ุงูุฑุงุจุท ููุดุชุฑู
```

### **ูุง ูุญุฏุซ:**
```typescript
// 1. ุงูุนููู ููุชุญ ุงูุฑุงุจุท
const affiliateCode = 'AFF001'; // ูู URL

// 2. ุงูุนููู ูููู ุงูุทูุจ
const order = await createOrder(orderData, affiliateCode);

// 3. ุงููุธุงู ูุชุชุจุน ุงูุจูุน ุชููุงุฆูุงู:
await trackAffiliateSale(
  'affiliate-user-id',
  order.$id,
  'product-123',
  'Product Name',
  500, // ุณุนุฑ ุงูููุชุฌ
  50   // ุงูุนูููุฉ (10%)
);

// 4. ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช:
Stats Before: { todaySales: 0, weekSales: 5, monthSales: 20, currentStreak: 0 }
Stats After:  { todaySales: 1, weekSales: 6, monthSales: 21, currentStreak: 1 }

// 5. ูุญุต ุงูุชุญุฏูุงุช:
Challenge: "ุจุน 10 ููุชุฌุงุช ุงูููู"
Progress: 1/10 (10%)

// 6. ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉ:
โ "๐ฐ ุนูููุฉ ุฌุฏูุฏุฉ! ุญุตูุช ุนูู 50 ุฌ.ู"

// 7. ุฅุฐุง ูุงู ุงูููู ุงูุชุงูู ูุจุงุน ูุฑุฉ ุฃุฎุฑู:
Stats: { currentStreak: 2 } // ุงูุณูุณูุฉ ุชุฒูุฏ!

// 8. ุฅุฐุง ูุตู ูู 10 ูุจูุนุงุช ุงูููู:
โ "๐ ุชุญุฏู ููุชูู! ุฃูููุช ุชุญุฏู 'ุจุน 10 ููุชุฌุงุช ุงูููู' - ุงุณุชูู 100 ุฌ.ู"
```

---

## โ **ุงูููุฒุงุช ุงูููุชููุฉ:**

### **โ ุฑุจุท ุงููุจูุนุงุช ุงูุญููููุฉ:**
- [x] ุชุญุฏูุซ todaySales, weekSales, monthSales
- [x] ุญุณุงุจ currentStreak ุชููุงุฆูุงู
- [x] ุญุณุงุจ Level ู Points
- [x] ุชุญุฏูุซ totalSales, totalEarnings

### **โ ูุญุต ุงูุชุญุฏูุงุช:**
- [x] ุชุญุฏูุซ progress ููู ุชุญุฏู
- [x] ุฅููุงู ุงูุชุญุฏูุงุช ุชููุงุฆูุงู
- [x] ุฅุดุนุงุฑุงุช ุนูุฏ ุงูุฅููุงู

### **โ ุงูุฅุดุนุงุฑุงุช:**
- [x] ุฅุดุนุงุฑ ุงูุนูููุฉ ุงูุฌุฏูุฏุฉ
- [x] ุฅุดุนุงุฑ ุฅููุงู ุงูุชุญุฏู
- [x] ุฅุดุนุงุฑ ุงูุณูุณูุฉ (3, 7, 14, 30, 60, 90, 180, 365 ููู)
- [x] ุฅุดุนุงุฑ Level Up
- [x] ุฅุดุนุงุฑ ุชุบููุฑ ุงููุฑูุฒ
- [x] ุชุฐููุฑุงุช ุงูุชุญุฏูุงุช (24 ุณุงุนุฉ ูุจู ุงูุงูุชูุงุก)
- [x] ุฑุณุงุฆู ุชุญููุฒูุฉ ููููุฉ

### **โ Cron Jobs:**
- [x] ุฅุนุงุฏุฉ ุชุนููู ูููู (todaySales)
- [x] ุฅุนุงุฏุฉ ุชุนููู ุฃุณุจูุนู (weekSales)
- [x] ุฅุนุงุฏุฉ ุชุนููู ุดูุฑู (monthSales)
- [x] ุชุญุฏูุซ Leaderboard ูู ุณุงุนุฉ
- [x] ุฅุฑุณุงู ุชุฐููุฑุงุช ูู 6 ุณุงุนุงุช
- [x] ุชูุธูู ุงูุชุญุฏูุงุช ุงูููุชููุฉ

---

## ๐ **ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:**

```
ุงูุญุงูุฉ: 100% ููุชูู โ

โ ุฑุจุท ุงููุจูุนุงุช ุงูุญููููุฉ
โ ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช ุชููุงุฆูุงู
โ ูุญุต ุงูุชุญุฏูุงุช ูุฅููุงููุง
โ ุฅุดุนุงุฑุงุช ุดุงููุฉ
โ Cron Jobs ููุชุญุฏูุซ ุงูุฏูุฑู
โ GitHub Actions ููุชุดุบูู ุงูุชููุงุฆู
โ ุชูุซูู ูุงูู

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู! ๐
```

---

**ุขุฎุฑ ุชุญุฏูุซ:** 22 ุฃูุชูุจุฑ 2025  
**ุงูุญุงูุฉ:** ููุชูู 100% โ
