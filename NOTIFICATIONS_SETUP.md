# ๐ ูุธุงู ุงูุฅุดุนุงุฑุงุช - ุฏููู ุงูุฅุนุฏุงุฏ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฑุจุท ูุธุงู ุงูุฅุดุนุงุฑุงุช ุจู Appwrite ุจุงููุงูู! ุงูุขู ูููู ูููุณุชุฎุฏููู ุงุณุชูุจุงู ุฅุดุนุงุฑุงุช ููุฑูุฉ ุนู:
- โ ุชุฃููุฏ ุงูุทูุจุงุช
- ๐ฆ ุดุญู ุงูุทูุจุงุช
- ๐ ุชุณููู ุงูุทูุจุงุช
- ๐ฐ ุนูููุงุช ุงูุฃููููุช
- โน๏ธ ุชูุจููุงุช ุนุงูุฉ

## ๐ ุฎุทูุงุช ุงูุฅุนุฏุงุฏ

### 1. ุฅูุดุงุก ูุฌููุนุฉ ุงูุฅุดุนุงุฑุงุช ูู Appwrite

ูู ุจุชุดุบูู ุงูุณูุฑูุจุช ุงูุชุงูู ูุฅูุดุงุก ุงููุฌููุนุฉ ุชููุงุฆูุงู:

```bash
cd scripts
node create-notifications-collection.mjs
```

**ููุงุญุธุฉ:** ุชุฃูุฏ ูู ูุฌูุฏ `APPWRITE_API_KEY` ูู ููู `.env`

### 2. ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏ

ุจุนุฏ ุชุดุบูู ุงูุณูุฑูุจุชุ ุชุญูู ูู:
- โ ุชู ุฅูุดุงุก ูุฌููุนุฉ `notifications` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุชู ุฅูุดุงุก ุฌููุน ุงูุญููู (userId, type, title, message, read, relatedId, metadata)
- โ ุชู ุฅูุดุงุก ุงูููุงุฑุณ (indexes) ููุฃุฏุงุก ุงูุฃูุซู

### 3. ุงุฎุชุจุงุฑ ุงููุธุงู

1. ุณุฌู ุฏุฎูู ุจุญุณุงุจ ูุณุชุฎุฏู
2. ูู ุจุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
3. ุณุชุธูุฑ ุฅุดุนุงุฑ ููุฑู ูู ุงูู Bell icon
4. ุงูุฅุดุนุงุฑุงุช ุชุญุฏุซ ุชููุงุฆูุงู ูู ุงูููุช ุงููุนูู

## ๐ฏ ุงูููุฒุงุช

### โ ุงูููุฒุงุช ุงูููุนูุฉ

1. **Real-time Updates** - ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ
   - ุงุดุชุฑุงู WebSocket ูุงุณุชูุจุงู ุงูุฅุดุนุงุฑุงุช ููุฑุงู
   - ุจุฏูู ุงูุญุงุฌุฉ ูุชุญุฏูุซ ุงูุตูุญุฉ

2. **Unread Count** - ุนุฏุงุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ
   - Badge ุฃุญูุฑ ูุธูุฑ ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุงูุฌุฏูุฏุฉ
   - ูุฎุชูู ุนูุฏ ูุฑุงุกุฉ ุฌููุน ุงูุฅุดุนุงุฑุงุช

3. **Mark as Read** - ุชุญุฏูุฏ ูููุฑูุก
   - ุงูููุฑ ุนูู ุงูุฅุดุนุงุฑ ูุญุฏุฏู ูููุฑูุก ุชููุงุฆูุงู
   - ุฒุฑ "ุชุญุฏูุฏ ุงููู ูููุฑูุก" ูุชุญุฏูุฏ ุฌููุน ุงูุฅุดุนุงุฑุงุช

4. **Notification Types** - ุฃููุงุน ุงูุฅุดุนุงุฑุงุช
   - ๐ฆ Order - ุทูุจุงุช
   - ๐ Shipping - ุดุญู
   - โ Delivery - ุชุณููู
   - โ๏ธ Alert - ุชูุจููุงุช
   - โน๏ธ Info - ูุนูููุงุช
   - ๐ฐ Commission - ุนูููุงุช
   - ๐ฏ Affiliate - ุฃููููุช

5. **Auto Refresh** - ุชุญุฏูุซ ุชููุงุฆู
   - ูุญุฏุซ ูู 30 ุซุงููุฉ ุชููุงุฆูุงู
   - + Real-time ููุชุญุฏูุซุงุช ุงูููุฑูุฉ

6. **Navigation** - ุงูุงูุชูุงู ููุตูุญุงุช
   - ุงูููุฑ ุนูู ุฅุดุนุงุฑ ุงูุทูุจ ููููู ูุตูุญุฉ ุงูุทูุจ
   - ุฏุนู `relatedId` ููุฑุจุท ุจูู ุงูุฅุดุนุงุฑุงุช ูุงูุตูุญุงุช

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

### 1. `client/lib/notification-service.ts` (ุฌุฏูุฏ)
ุฎุฏูุฉ ุงูุฅุดุนุงุฑุงุช ุงููุงููุฉ:
- `getUserNotifications()` - ุฌูุจ ุฅุดุนุงุฑุงุช ุงููุณุชุฎุฏู
- `getUnreadCount()` - ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ
- `createNotification()` - ุฅูุดุงุก ุฅุดุนุงุฑ ุฌุฏูุฏ
- `markAsRead()` - ุชุญุฏูุฏ ูููุฑูุก
- `markAllAsRead()` - ุชุญุฏูุฏ ุงููู ูููุฑูุก
- `subscribeToNotifications()` - ุงูุงุดุชุฑุงู ูู ุงูุชุญุฏูุซุงุช ุงูููุฑูุฉ
- `notifyOrderStatus()` - ุฅุดุนุงุฑุงุช ุญุงูุฉ ุงูุทูุจ
- `notifyAffiliateCommission()` - ุฅุดุนุงุฑุงุช ุงูุนูููุงุช

### 2. `client/components/NotificationDropdown.tsx` (ูุญุฏุซ)
- ุงุณุชุจุฏุงู mock data ุจู Appwrite
- Real-time subscriptions
- ุงูุชูุงูู ูุน notification-service

### 3. `client/lib/appwrite.ts` (ูุญุฏุซ)
- ุฅุฑุณุงู ุฅุดุนุงุฑ ุชููุงุฆู ุนูุฏ ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ

### 4. `scripts/create-notifications-collection.mjs` (ุฌุฏูุฏ)
ุณูุฑูุจุช ุฅูุดุงุก ุงููุฌููุนุฉ ุชููุงุฆูุงู

## ๐ง API Reference

### ุฅูุดุงุก ุฅุดุนุงุฑ

```typescript
import { notificationService } from '@/lib/notification-service';

// ุฅุดุนุงุฑ ุนุงุฏู
await notificationService.createNotification({
  userId: 'user123',
  type: 'info',
  title: 'ุนููุงู ุงูุฅุดุนุงุฑ',
  message: 'ูุต ุงูุฅุดุนุงุฑ',
  relatedId: 'optional-id',
  metadata: { key: 'value' }
});

// ุฅุดุนุงุฑ ุญุงูุฉ ุงูุทูุจ
await notificationService.notifyOrderStatus(
  'user123',
  'order456',
  'confirmed' // or 'shipped' or 'delivered' or 'cancelled'
);

// ุฅุดุนุงุฑ ุนูููุฉ ุฃููููุช
await notificationService.notifyAffiliateCommission(
  'affiliate123',
  50.00,
  'order456'
);
```

### ุงูุงุดุชุฑุงู ูู ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ

```typescript
const unsubscribe = notificationService.subscribeToNotifications(
  userId,
  (notification) => {
    console.log('New notification:', notification);
  }
);

// ุนูุฏ ุงูุฎุฑูุฌ
unsubscribe();
```

## ๐จ ุงูุชุฎุตูุต

### ุชุบููุฑ ุฃููุงุน ุงูุฅุดุนุงุฑุงุช

ุนุฏู ูู `notification-service.ts`:

```typescript
export interface Notification {
  type: 'order' | 'shipping' | 'delivery' | 'alert' | 'info' | 'commission' | 'affiliate' | 'your-new-type';
  // ...
}
```

ุซู ุฃุถู ุงูุฃููููุฉ ูู `NotificationDropdown.tsx`:

```typescript
const notificationIcons = {
  // ...
  'your-new-type': YourIcon,
};
```

### ุชุบููุฑ ูุชุฑุฉ ุงูุชุญุฏูุซ ุงูุชููุงุฆู

ูู `NotificationDropdown.tsx`:

```typescript
const { data: notifications = [] } = useQuery({
  // ...
  refetchInterval: 30000, // ุบูุฑ ูุฐุง ุงูุฑูู (ุจุงููููู ุซุงููุฉ)
});
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงูุฅุดุนุงุฑุงุช ูุง ุชุธูุฑุ

1. ุชุฃูุฏ ูู ุฅูุดุงุก ูุฌููุนุฉ notifications ูู Appwrite
2. ุชุญูู ูู Console ููุฃุฎุทุงุก
3. ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู ุจุญุณุงุจ ุตุญูุญ
4. ุชุญูู ูู ุฃู `VITE_APPWRITE_DATABASE_ID` ุตุญูุญ

### ุงูุฅุดุนุงุฑุงุช ุงูููุฑูุฉ ูุง ุชุนููุ

1. ุชุฃูุฏ ูู ุฃู Appwrite ูุฏุนู Real-time ูู ุฎุทุชู
2. ุชุญูู ูู ุฃู ุงููุฌููุนุฉ ุชุฏุนู Real-time Events
3. ุชุญูู ูู Console ููุฃุฎุทุงุก ูู ุงูุงุชุตุงู

### ุงูุณูุฑูุจุช ูุง ูุนููุ

1. ุชุฃูุฏ ูู ูุฌูุฏ `APPWRITE_API_KEY` ูู `.env`
2. ุชุญูู ูู ุฃู ุงูููุชุงุญ ูู ุตูุงุญูุงุช `databases.write`
3. ุชุฃูุฏ ูู ุฃู `DATABASE_ID` ุตุญูุญ

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

- [ ] ุฅุถุงูุฉ ุชุตูููุงุช ููุฅุดุนุงุฑุงุช
- [ ] ุฅุถุงูุฉ ุฅุนุฏุงุฏุงุช ุชุฎุตูุต ุงูุฅุดุนุงุฑุงุช
- [ ] ุฅุถุงูุฉ ุฃุตูุงุช ููุฅุดุนุงุฑุงุช ุงูููุฑูุฉ
- [ ] ุฅุถุงูุฉ ุตูุฑ/ุฃููููุงุช ูุฎุตุตุฉ ููุฅุดุนุงุฑุงุช
- [ ] ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- [ ] ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช Push ููููุจุงูู

## โ ุงูุฎูุงุตุฉ

ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงูุขู ูุชุตู ุจุงููุงูู ุจู Appwrite ููุนูู ุจุดูู real-time! ๐

ููุฃุณุฆูุฉ ุฃู ุงููุณุงุนุฏุฉุ ุฑุงุฌุน:
- [Appwrite Databases Docs](https://appwrite.io/docs/products/databases)
- [Appwrite Realtime Docs](https://appwrite.io/docs/apis/realtime)
